(self["webpackChunksuperhero_wallet"]=self["webpackChunksuperhero_wallet"]||[]).push([[1247],{1843:(e,t,n)=>{var r=n(48162).stringify,a=n(9036);e.exports=function(e){return{parse:a(e),stringify:r}},e.exports.parse=a(),e.exports.stringify=r},1889:(e,t,n)=>{"use strict";n.r(t),n.d(t,{_getPollInterval:()=>h,awaitHeight:()=>p,getAccount:()=>m,getBalance:()=>y,getContract:()=>k,getContractByteCode:()=>E,getCurrentGeneration:()=>v,getGeneration:()=>x,getHeight:()=>A,getKeyBlock:()=>C,getMicroBlockHeader:()=>b,getMicroBlockTransactions:()=>T,getName:()=>S,poll:()=>w,resolveName:()=>N,txDryRun:()=>B,waitForTxConfirm:()=>g});var r=n(97170),a=n(68156),o=n(90185),s=n(64224),i=n(8204),c=n(55719),l=n(88882),u=n(35166);async function d(e,{_expectedMineRate:t,_microBlockCycle:n,onNode:r}){if(null!=t&&"key-block"===e)return t;if(null!=n&&"micro-block"===e)return n;const a=await r.getNetworkId();return"ae_dev"===a?0:!["ae_mainnet","ae_uat"].includes(a)&&await r._isHyperchain()?3e3:"key-block"===e?18e4:3e3}async function h(e,t){return Math.floor(await d(e,t)/3)}const f=new WeakMap;async function A({cached:e=!1,...t}){const n=(0,o.q)(t.onNode);if(e){const e=f.get(n);if(null!=e&&e.time>Date.now()-await h("key-block",t))return e.height}const{height:r}=await n.getCurrentKeyBlockHeight();return f.set(n,{height:r,time:Date.now()}),r}async function w(e,{blocks:t=5,interval:n,...r}){let o;null!==n&&void 0!==n||(n=await h("micro-block",r));do{const s=await r.onNode.getTransactionByHash(e);if(-1!==s.blockHeight)return s;null==o&&(o=0!==s.tx.ttl?-1:await A({...r,cached:!0})+t),await(0,a.v7)(n)}while(-1===o||await A({...r,cached:!0})<o);throw new c.q3(t,e)}async function p(e,{interval:t,...n}){let r;null!==t&&void 0!==t||(t=Math.min(await h("key-block",n),5e3));do{null!=r&&await(0,a.v7)(t),r=await A(n)}while(r<e);return r}async function g(e,{confirm:t=3,onNode:n,...r}){const{blockHeight:a}=await n.getTransactionByHash(e),o=await p(a+t,{onNode:n,...r}),{blockHeight:s}=await n.getTransactionByHash(e);switch(s){case-1:throw new c.MT(e);case a:return o;default:return g(e,{onNode:n,confirm:t,...r})}}async function m(e,{height:t,hash:n,onNode:r}){return null!=t?r.getAccountByPubkeyAndHeight(e,t):null!=n?r.getAccountByPubkeyAndHash(e,n):r.getAccountByPubkey(e)}async function y(e,{format:t=r.j8.AETTOS,...n}){const o=e.startsWith("ok_")?(0,l.lF)((0,l.D4)(e),u.W.AccountAddress):e,{balance:s}=await m(o,n).catch(e=>{if(!(0,a.PI)(e))throw e;return{balance:0n}});return(0,r.ej)(s,{targetDenomination:t})}async function v({onNode:e}){return e.getCurrentGeneration()}async function x(e,{onNode:t}){return"number"===typeof e?t.getGenerationByHeight(e):t.getGenerationByHash(e)}async function T(e,{onNode:t}){return(await t.getMicroBlockTransactionsByHash(e)).transactions}async function C(e,{onNode:t}){return"number"===typeof e?t.getKeyBlockByHeight(e):t.getKeyBlockByHash(e)}async function b(e,{onNode:t}){return t.getMicroBlockHeaderByHash(e)}const W=new Map;async function I(e,t){const n=W.get(e);if(W.delete(e),null==n)throw new c.Gd("Can't get dry-run request");let r;try{const e="number"===typeof n[0].top?(await t.getKeyBlockByHeight(n[0].top)).hash:n[0].top;r=await t.protectedDryRunTxs({top:e,txEvents:n[0].txEvents,txs:n.map(e=>({tx:e.tx})),accounts:Array.from(new Set(n.map(e=>e.accountAddress))).map(e=>({pubKey:e,amount:i.gx.amount}))})}catch(s){return void n.forEach(({reject:e})=>e(s))}const{results:a,txEvents:o}=r;a.forEach(({result:e,reason:t,...r},a)=>{const{resolve:s,reject:i,tx:l,accountAddress:u}=n[a];"ok"===e?s({...r,txEvents:o}):i(Object.assign(new c.Vz(t),{tx:l,accountAddress:u}))})}async function B(e,t,{top:n,txEvents:r,combine:a,onNode:o}){var s;const i=!0===a?[n,r].join():"immediate",c=null!==(s=W.get(i))&&void 0!==s?s:[];return W.set(i,c),new Promise((s,l)=>{var u;c.push({tx:e,accountAddress:t,top:n,txEvents:r,resolve:s,reject:l}),!0===a?null!==(u=c.timeout)&&void 0!==u||(c.timeout=setTimeout(()=>{I(i,o)})):I(i,o)})}async function E(e,{onNode:t}){return t.getContractCode(e)}async function k(e,{onNode:t}){return t.getContract(e)}async function S(e,{onNode:t}){return t.getNameEntryByName(e)}async function N(e,t,{verify:n=!0,resolveByNode:r=!1,onNode:a}){if((0,s.Eo)(e)){if(n||r){const n=await a.getNameEntryByName(e),o=n.pointers.find(e=>e.key===t);if(null==o)throw new c.Ue(e,t);if(r)return o.id}return(0,s.bt)(e)}try{return(0,l.D4)(e),e}catch(o){throw new c.So(`Invalid name or address: ${e}`)}}},3125:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(84825);const a={serialize(e){return(0,r.Z)(e)},deserialize(e){return e.toString()}}},3607:(e,t,n)=>{"use strict";n.d(t,{Zh:()=>d});var r=n(56028),a=n(51845),o=n(82341),s=n(88882),i=n(16341),c=n(68156);function l(e){var t;return(0,i.tW)(null!==(t=o(e))&&void 0!==t?t:"")}function u(e){const t={record:[{name:"name",type:{option:["string"]}},{name:"version",type:{option:["int"]}},{name:"networkId",type:{option:["string"]}},{name:"contractAddress",type:{option:["contract_pubkey"]}}]},n=(new a.A).resolveType(t,{}),o=(new r.A).encodeWithType(e,n);return(0,i.tW)((0,s.D4)(o))}function d(e,t,n){return(0,i.tW)((0,c.wh)([i.AV,new Uint8Array([0]),u(n),l(t),(0,i.tW)((0,s.D4)(e))]))}},8204:(e,t,n)=>{"use strict";n.d(t,{BL:()=>f,L_:()=>l,SM:()=>h,d$:()=>i,d0:()=>u,gx:()=>o,sF:()=>d,vw:()=>A,yY:()=>s});var r=n(60346),a=n(68156);const o={pub:"ak_11111111111111111111111111111111273Yts",amount:100000000000000000000000000000000000n},s=5e4,i=1e9,c=1e14,l=31,u=(0,a.s8)({31:3,30:5,29:8,28:13,27:21,26:34,25:55,24:89,23:144,22:233,21:377,20:610,19:987,18:1597,17:2584,16:4181,15:6765,14:10946,13:17711,12:28657,11:46368,10:75025,9:121393,8:196418,7:317811,6:514229,5:832040,4:1346269,3:2178309,2:3524578,1:5702887},([e,t])=>[e,new r.A(t).times(c)]);let d=function(e){return e[e["Ceres"]=6]="Ceres",e}({}),h=function(e){return e[e["NoVm"]=0]="NoVm",e[e["Sophia"]=1]="Sophia",e[e["SophiaImprovementsMinerva"]=3]="SophiaImprovementsMinerva",e[e["SophiaImprovementsFortuna"]=4]="SophiaImprovementsFortuna",e[e["Fate"]=5]="Fate",e[e["SophiaImprovementsLima"]=6]="SophiaImprovementsLima",e[e["Fate2"]=7]="Fate2",e[e["Fate3"]=8]="Fate3",e}({}),f=function(e){return e[e["NoAbi"]=0]="NoAbi",e[e["Sophia"]=1]="Sophia",e[e["Fate"]=3]="Fate",e}({}),A=function(e){return e[e["SignedTx"]=11]="SignedTx",e[e["SpendTx"]=12]="SpendTx",e[e["OracleRegisterTx"]=22]="OracleRegisterTx",e[e["OracleQueryTx"]=23]="OracleQueryTx",e[e["OracleResponseTx"]=24]="OracleResponseTx",e[e["OracleRespondTx"]=24]="OracleRespondTx",e[e["OracleExtendTx"]=25]="OracleExtendTx",e[e["NameClaimTx"]=32]="NameClaimTx",e[e["NamePreclaimTx"]=33]="NamePreclaimTx",e[e["NameUpdateTx"]=34]="NameUpdateTx",e[e["NameRevokeTx"]=35]="NameRevokeTx",e[e["NameTransferTx"]=36]="NameTransferTx",e[e["ContractCreateTx"]=42]="ContractCreateTx",e[e["ContractCallTx"]=43]="ContractCallTx",e[e["ChannelCreateTx"]=50]="ChannelCreateTx",e[e["ChannelDepositTx"]=51]="ChannelDepositTx",e[e["ChannelWithdrawTx"]=52]="ChannelWithdrawTx",e[e["ChannelForceProgressTx"]=521]="ChannelForceProgressTx",e[e["ChannelCloseMutualTx"]=53]="ChannelCloseMutualTx",e[e["ChannelCloseSoloTx"]=54]="ChannelCloseSoloTx",e[e["ChannelSlashTx"]=55]="ChannelSlashTx",e[e["ChannelSettleTx"]=56]="ChannelSettleTx",e[e["ChannelOffChainTx"]=57]="ChannelOffChainTx",e[e["ChannelSnapshotSoloTx"]=59]="ChannelSnapshotSoloTx",e[e["GaAttachTx"]=80]="GaAttachTx",e[e["GaMetaTx"]=81]="GaMetaTx",e[e["PayingForTx"]=82]="PayingForTx",e}({})},8337:(e,t,n)=>{"use strict";n.d(t,{A:()=>B});var r=n(50180),a=n(8204),o=n(91454),s=n(88882),i=n(55719),c=n(16341),l=n(1889),u=n(48189),d=n(68156),h=n(64224);function f(e,t,n){w(e,t),t.set(e,n)}function A(e,t){w(e,t),t.add(e)}function w(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function p(e,t,n){return e.set(m(e,t),n),n}function g(e,t){return e.get(m(e,t))}function m(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var y=new WeakSet,v=new WeakMap;class x{async $compile(){if(null!=this.$options.bytecode)return this.$options.bytecode;if(null==this.$options.onCompiler)throw new i.qw("Can't compile without compiler");if(null!=this.$options.sourceCode){const{bytecode:e}=await this.$options.onCompiler.compileBySourceCode(this.$options.sourceCode,this.$options.fileSystem);this.$options.bytecode=e}if(null!=this.$options.sourceCodePath){const{bytecode:e}=await this.$options.onCompiler.compile(this.$options.sourceCodePath);this.$options.bytecode=e}if(null==this.$options.bytecode)throw new i.qw("Can't compile without sourceCode and sourceCodePath");return this.$options.bytecode}async $getCallResultByTxHash(e,t,n){const{callInfo:r}=await this.$options.onNode.getTransactionInfoByHash(e);if(null==r)throw new i.Vl(`callInfo is not available for transaction ${e}`);const a=r;return{...m(y,this,T).call(this,a,t,void 0,n),result:a}}async _estimateGas(e,t,n={}){const{result:r}=await this.$call(e,t,{...n,callStatic:!0});if(null==r)throw new i.rU;const{gasUsed:a}=r;return Math.floor(1.25*a)}async $deploy(e,t){var n;const{callStatic:r,...s}={...this.$options,...t};if(null==this.$options.bytecode&&await this.$compile(),!0===r)return this.$call("init",e,{...s,callStatic:r});if(null!=this.$options.address)throw new i.E0;if(null==s.onAccount)throw new i.qw("Can't deploy without account");const c=s.onAccount.address;if(null==this.$options.bytecode)throw new i.qw("Can't deploy without bytecode");const l=await(0,o.B4)({_isInternalBuild:!0,...s,tag:a.vw.ContractCreateTx,gasLimit:null!==(n=s.gasLimit)&&void 0!==n?n:await this._estimateGas("init",e,s),callData:this._calldata.encode(this._name,"init",e),code:this.$options.bytecode,ownerId:c}),{hash:u,...d}=await m(y,this,C).call(this,l,"init",{...s,onAccount:s.onAccount});return this.$options.address=(0,o.xD)(d.rawTx),{...d,...null!=d.result?.log&&{decodedEvents:this.$decodeEvents(d.result.log,s)},owner:c,transaction:u,address:this.$options.address}}async $call(e,t,n={}){var r;const{callStatic:s,top:c,...u}={...this.$options,...n},f=m(y,this,b).call(this,e),{address:A,name:w}=this.$options,p=null!=w?(0,h.bt)(w):A,{onNode:g}=u;if(null==e)throw new i.mh;if("init"===e&&!0!==s)throw new i.FL('"init" can be called only via dryRun');if("init"!==e&&null!=u.amount&&Number(u.amount)>0&&!f.payable)throw new i.Oz(u.amount,e);let v;try{if(null==u.onAccount)throw new i.Gd("Use fallback account");v=u.onAccount.address}catch(I){const e=!0===s&&(I instanceof i.hg&&"Account should be an address (ak-prefixed string), or instance of AccountBase, got undefined instead"===I.message||I instanceof i.Gq||I instanceof i.Gd&&"Use fallback account"===I.message);if(!e)throw I;v=a.gx.pub}const x=this._calldata.encode(this._name,e,t);if(!0===s){if(null==u.nonce){const e=null!=c&&{["number"===typeof c?"height":"hash"]:c},t=await(0,l.getAccount)(v,{...e,onNode:g}).catch(e=>{if(!(0,d.PI)(e))throw e;return{kind:"basic",nonce:0}});u.nonce="generalized"===t.kind?0:t.nonce+1}const t={...u,onNode:g,callData:x};let n;if("init"===e){if(null==this.$options.bytecode)throw new i.qw('Can\'t dry-run "init" without bytecode');n=await(0,o.B4)({...t,tag:a.vw.ContractCreateTx,code:this.$options.bytecode,ownerId:v})}else{if(null==p)throw new i.dp("Can't dry-run contract without address");n=await(0,o.B4)({...t,tag:a.vw.ContractCallTx,callerId:v,contractId:p})}const{callObj:r,...s}=await(0,l.txDryRun)(n,v,{...u,top:c});if(null==r)throw new i.Gd(`callObj is not available for transaction ${n}`);const h=r;return{...s,...m(y,this,T).call(this,h,e,n,u),tx:(0,o.pj)(n),result:h,rawTx:n,hash:(0,o.BN)(n),txData:void 0}}if(null!=c)throw new i.qw("Can't handle `top` option in on-chain contract call");if(null==p)throw new i.dp("Can't call contract without address");const W=await(0,o.B4)({_isInternalBuild:!0,...u,tag:a.vw.ContractCallTx,gasLimit:null!==(r=u.gasLimit)&&void 0!==r?r:await this._estimateGas(e,t,u),callerId:v,contractId:p,callData:x});if(null==u.onAccount)throw new i.qw("Can't call contract on chain without account");return m(y,this,C).call(this,W,e,{...u,onAccount:u.onAccount})}$decodeEvents(e,{omitUnknown:t,...n}={}){return e.map(e=>{let r;try{r=m(y,this,W).call(this,e.address,e.topics[0],n)}catch(c){if(null!==t&&void 0!==t&&t&&c instanceof i.Mk)return null;throw c}const a=this._calldata.decodeEvent(r,e.data,e.topics),[o,s]=Object.entries(a)[0];return{name:o,args:s,contract:{name:r,address:e.address}}}).filter(e=>null!=e)}static async initialize({onCompiler:e,onNode:t,bytecode:n,aci:r,address:a,sourceCodePath:o,sourceCode:s,fileSystem:c,validateBytecode:u,...d}){if(null==r&&null!=e){let t;null!=o&&(t=await e.compile(o)),null!=s&&(t=await e.compileBySourceCode(s,c)),null!=t&&(r=t.aci,null!==n&&void 0!==n||(n=t.bytecode))}if(null==r)throw new i._H;let f;if(null!=a&&(a=await(0,l.resolveName)(a,"contract_pubkey",{resolveByNode:!0,onNode:t}),(0,h.Eo)(a)&&(f=a)),null==a&&null==s&&null==o&&null==n)throw new i.dp("Can't create instance by ACI without address");if(null!=a){const e=await t.getContract(a);if(null==e.active)throw new i.K4(a)}if(!0===u){if(null==a)throw new i.dp("Can't validate bytecode without contract address");const r=(await t.getContractCode(a)).bytecode;let l=!1;if(null!=n)l=n===r;else if(null!=s){if(null==e)throw new i.qw("Can't validate bytecode without compiler");l=await e.validateBySourceCode(r,s,c)}else if(null!=o){if(null==e)throw new i.qw("Can't validate bytecode without compiler");l=await e.validate(r,o)}if(!l)throw new i.Mb(null!=(null!==s&&void 0!==s?s:o)?"source code":"bytecode")}return new I({onCompiler:e,onNode:t,sourceCode:s,sourceCodePath:o,bytecode:n,aci:r,address:a,name:f,fileSystem:c,...d})}constructor({aci:e,...t}){A(this,y),f(this,v,void 0),this._aci=e;const n=e[e.length-1];if(null==n.contract)throw new i.qw(`The last 'aci' item should have 'contract' key, got ${Object.keys(n)} keys instead`);p(v,this,n.contract),this._name=g(v,this).name,this._calldata=new r.A(e),this.$options=t,Object.assign(this,Object.fromEntries(g(v,this).functions.map(({name:e,arguments:t,stateful:n})=>{const r="init"!==e&&!n;return[e,async(...n)=>{const a=n.length===t.length+1?n.pop():{};if("object"!==typeof a)throw new i.hg(`Options should be an object: ${a}`);return"init"===e?this.$deploy(n,{callStatic:r,...a}):this.$call(e,n,{callStatic:r,...a})}]})))}}function T({returnType:e,returnValue:t,log:n},r,a,o){let c;switch(e){case"ok":{const e=m(y,this,b).call(this,r);return{decodedResult:this._calldata.decode(this._name,e.name,t),decodedEvents:this.$decodeEvents(n,o)}}case"revert":c=this._calldata.decodeFateString(t);break;case"error":if(c=(0,s.D4)(t).toString(),/Expected \d+ arguments, got \d+/.test(c))throw new i.Mb("ACI",`. Error provided by node: "${c}".`);if(/Trying to call undefined function: <<\d+,\d+,\d+,\d+>>/.test(c))throw new i.Mb("ACI",`. Error provided by node: "${c}", function name: ${r}.`);break;default:throw new i.Gd(`Unknown return type: ${e}`)}throw new i.vo(c,a)}async function C(e,t,n){const r=await(0,u.v)(e,{...this.$options,...n});return{hash:r.hash,tx:(0,o.pj)(r.rawTx),txData:r,rawTx:r.rawTx,...null!=r.blockHeight&&await this.$getCallResultByTxHash(r.hash,t,n)}}function b(e){const t=g(v,this).functions.find(t=>t.name===e);if(null!=t)return t;if("init"===e)return{arguments:[],name:"init",payable:!1,returns:"unit",stateful:!0};throw new i.$4(e)}function W(e,t,{contractAddressToName:n}){const r={...this.$options.contractAddressToName,...n};if(null!=r[e])return r[e];const a=(e,t)=>JSON.stringify(e)===JSON.stringify(t),o=this._aci.map(({contract:e})=>e).filter(e=>e?.event),s=o.map(e=>[e.name,e.event.variant]).map(([e,t])=>t.map(t=>[e,Object.keys(t)[0],Object.values(t)[0]])).flat().filter(([,e])=>BigInt(`0x${(0,c.tW)(e).toString("hex")}`)===t).filter(([,,e],t,n)=>!n.slice(0,t).some(t=>a(t[2],e)));switch(s.length){case 0:throw new i.Mk(t.toString(),e);case 1:return s[0][0];default:throw new i.m5(e,s)}}const I=x,B=I},9036:(e,t,n)=>{var r=null,a=function(e){"use strict";var t={strict:!1,storeAsString:!1};void 0!==e&&null!==e&&(!0===e.strict&&(t.strict=!0),!0===e.storeAsString&&(t.storeAsString=!0));var a,o,s,i,c={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},l=function(e){throw{name:"SyntaxError",message:e,at:a,text:s}},u=function(e){return e&&e!==o&&l("Expected '"+e+"' instead of '"+o+"'"),o=s.charAt(a),a+=1,o},d=function(){var e,a="";"-"===o&&(a="-",u("-"));while(o>="0"&&o<="9")a+=o,u();if("."===o){a+=".";while(u()&&o>="0"&&o<="9")a+=o}if("e"===o||"E"===o){a+=o,u(),"-"!==o&&"+"!==o||(a+=o,u());while(o>="0"&&o<="9")a+=o,u()}if(e=+a,isFinite(e))return null==r&&(r=n(61594)),a.length>15?!0===t.storeAsString?a:new r(a):e;l("Bad number")},h=function(){var e,t,n,r="";if('"'===o)while(u()){if('"'===o)return u(),r;if("\\"===o)if(u(),"u"===o){for(n=0,t=0;t<4;t+=1){if(e=parseInt(u(),16),!isFinite(e))break;n=16*n+e}r+=String.fromCharCode(n)}else{if("string"!==typeof c[o])break;r+=c[o]}else r+=o}l("Bad string")},f=function(){while(o&&o<=" ")u()},A=function(){switch(o){case"t":return u("t"),u("r"),u("u"),u("e"),!0;case"f":return u("f"),u("a"),u("l"),u("s"),u("e"),!1;case"n":return u("n"),u("u"),u("l"),u("l"),null}l("Unexpected '"+o+"'")},w=function(){var e=[];if("["===o){if(u("["),f(),"]"===o)return u("]"),e;while(o){if(e.push(i()),f(),"]"===o)return u("]"),e;u(","),f()}}l("Bad array")},p=function(){var e,n={};if("{"===o){if(u("{"),f(),"}"===o)return u("}"),n;while(o){if(e=h(),f(),u(":"),!0===t.strict&&Object.hasOwnProperty.call(n,e)&&l('Duplicate key "'+e+'"'),n[e]=i(),f(),"}"===o)return u("}"),n;u(","),f()}}l("Bad object")};return i=function(){switch(f(),o){case"{":return p();case"[":return w();case'"':return h();case"-":return d();default:return o>="0"&&o<="9"?d():A()}},function(e,t){var n;return s=e+"",a=0,o=" ",n=i(),f(),o&&l("Syntax error"),"function"===typeof t?function e(n,r){var a,o=n[r];return o&&"object"===typeof o&&Object.keys(o).forEach(function(t){a=e(o,t),void 0!==a?o[t]=a:delete o[t]}),t.call(n,r,o)}({"":n},""):n}};e.exports=a},12075:(e,t,n)=>{"use strict";function r(e){return{serialize(t,n){return t.map(t=>e.serialize(t,n))},deserialize(t,n){return t.map(t=>e.deserialize(t,n))}}}n.d(t,{A:()=>r})},15234:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>i,R9:()=>s,h:()=>o});var r=n(48287),a=n(8204);const o={[a.sF.Ceres]:{"contract-create":{vmVersion:[a.SM.Fate3],abiVersion:[a.BL.Fate]},"contract-call":{vmVersion:[],abiVersion:[a.BL.Fate]},"oracle-call":{vmVersion:[],abiVersion:[a.BL.NoAbi,a.BL.Fate]}}};function s(e,t){var n;const r=o[e][t];return{vmVersion:null!==(n=r.vmVersion[0])&&void 0!==n?n:a.SM.Fate2,abiVersion:r.abiVersion[0]}}const i={serialize(e,t,{consensusProtocolVersion:n=a.sF.Ceres}){return null!==e&&void 0!==e||(e=s(n,"contract-create")),r.Buffer.from([e.vmVersion,0,e.abiVersion])},async prepare(e,t,n){return null!=e?e:null==n.consensusProtocolVersion&&2!==Object.keys(a.sF).length&&null!=n.onNode?s((await n.onNode.getNodeInfo()).consensusProtocolVersion,"contract-create"):void 0},deserialize(e){const[t,,n]=e;return{vmVersion:+t,abiVersion:+n}}}},16341:(e,t,n)=>{"use strict";n.d(t,{AL:()=>y,AV:()=>m,Od:()=>w,fr:()=>h,j$:()=>f,pL:()=>u,tW:()=>A});var r=n(48287),a=n(88947),o=n(74156),s=n(68156),i=n(35166),c=n(88882),l=n(55719);function u(e,...t){0===t.length&&(t=[i.W.AccountAddress]);try{(0,c.D4)(e);const n=e.split("_")[0];if(!(0,s.ET)(n,t))throw new l.c1("Encoded string type",t.length>1?`one of ${t.join(", ")}`:t[0],n);return!0}catch(n){return!1}}function d(e,...t){if((0,c.D4)(e),0===t.length)return;const n=e.split("_")[0];if(!(0,s.ET)(n,t))throw new l.c1("Encoded string type",t.length>1?`one of ${t.join(", ")}`:t[0],n)}function h(e,...t){try{return d(e,...t),!0}catch(n){return!1}}function f(){const[e]=new BigUint64Array(a.randomBytes(8).buffer);return Number(e%BigInt(Number.MAX_SAFE_INTEGER))}function A(e){return r.Buffer.from((0,o.blake2b)(e,void 0,32))}function w(e,t,n){return a.sign.detached.verify(e,t,(0,c.D4)(n))}function p(e){return e<253?r.Buffer.from([e]):e<=65535?(0,s.wh)([r.Buffer.from([253]),r.Buffer.from(new Uint16Array([e]).buffer)]):e<=4294967295?(0,s.wh)([r.Buffer.from([254]),r.Buffer.from(new Uint32Array([e]).buffer)]):(0,s.wh)([r.Buffer.from([255]),r.Buffer.from(new BigUint64Array([BigInt(e)]).buffer)])}const g=r.Buffer.from("aeternity Signed Message:\n","utf8"),m=p(g.length);function y(e){const t=r.Buffer.from(e,"utf8");return A((0,s.wh)([m,g,p(t.length),t]))}},16381:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(55719),a=n(8204),o=n(82766),s=n(51902);function i(e,t,n,r){return e-+(0,s.S)(t(e),n,r)}const c={...o.A,serialize(e,{tag:t,rebuildTx:n,unpackTx:s,buildTx:c,_computingGasLimit:l},{gasMax:u=6e6}){if(null!=l)return o.A.serialize(l);const d=t===a.vw.GaMetaTx?a.yY:i(u,e=>n({_computingGasLimit:e,_canIncreaseFee:!0}),s,c),h=null!==e&&void 0!==e?e:d;if(h>d)throw new r.qw(`Gas limit ${h} must be less or equal to ${d}`);return o.A.serialize(h)}}},17489:(e,t,n)=>{"use strict";n.d(t,{j:()=>h,v:()=>c});var r=n(78910),a=n(99369),o=n(53624),s=n(35166),i=n(88882);let c=function(e){return e[e["AensWildcard"]=1]="AensWildcard",e[e["AensName"]=2]="AensName",e[e["AensPreclaim"]=3]="AensPreclaim",e[e["Oracle"]=4]="Oracle",e[e["OracleResponse"]=5]="OracleResponse",e}({});const l=(0,r.A)(s.W.OracleAddress),u={serialize(e){return l.serialize((0,i.lF)((0,i.D4)(e),s.W.OracleAddress))},deserialize(e){return(0,i.lF)((0,i.D4)(l.deserialize(e)),s.W.OracleQueryId)}},d=(0,r.A)(s.W.ContractAddress),h=[{tag:(0,o.A)(c.AensWildcard),version:(0,o.A)(1,!0),accountAddress:(0,r.A)(s.W.AccountAddress),contractAddress:d},{tag:(0,o.A)(c.AensName),version:(0,o.A)(1,!0),accountAddress:(0,r.A)(s.W.AccountAddress),nameId:a.A,contractAddress:d},{tag:(0,o.A)(c.AensPreclaim),version:(0,o.A)(1,!0),accountAddress:(0,r.A)(s.W.AccountAddress),contractAddress:d},{tag:(0,o.A)(c.Oracle),version:(0,o.A)(1,!0),accountAddress:(0,r.A)(s.W.AccountAddress),contractAddress:d},{tag:(0,o.A)(c.OracleResponse),version:(0,o.A)(1,!0),queryId:u,contractAddress:d}]},19343:(e,t,n)=>{"use strict";n.r(t),n.d(t,{buildAuthTxHash:()=>g,buildAuthTxHashByGaMetaTx:()=>m,createGeneralizedAccount:()=>p});var r=n(48287),a=n(8204),o=n(91454),s=n(16341),i=n(88882),c=n(35166),l=n(55719),u=n(68156),d=n(8337),h=n(1889),f=n(48189),A=n(24377),w=n(30683);async function p(e,t,{onAccount:n,onCompiler:r,onNode:i,bytecode:c,aci:u,sourceCodePath:A,sourceCode:w,fileSystem:p,...g}){var m;const y=n.address;if("generalized"===(await(0,h.getAccount)(y,{onNode:i})).kind)throw new l.qw(`Account ${y} is already GA`);const v=await d.A.initialize({onAccount:n,onCompiler:r,onNode:i,bytecode:c,aci:u,sourceCodePath:A,sourceCode:w,fileSystem:p}),x=await(0,o.B4)({_isInternalBuild:!0,...g,tag:a.vw.GaAttachTx,onNode:i,code:await v.$compile(),gasLimit:null!==(m=g.gasLimit)&&void 0!==m?m:await v._estimateGas("init",t,g),ownerId:y,callData:v._calldata.encode(v._name,"init",t),authFun:(0,s.tW)(e)}),{hash:T,rawTx:C}=await(0,f.v)(x,{onNode:i,onAccount:n,onCompiler:r,...g}),b=(0,o.xD)(C);return Object.freeze({owner:y,transaction:T,rawTx:C,gaContractId:b})}async function g(e,{fee:t,gasPrice:n,onNode:o}){const{nodeNetworkId:d,consensusProtocolVersion:h}=await o.getNodeInfo();let f=(0,s.tW)((0,u.wh)([r.Buffer.from(d),(0,i.D4)(e)]));if(h===a.sF.Ceres){if(null==t)throw new l.c1("fee","provided (in Ceres)",t);if(null==n)throw new l.c1("gasPrice","provided (in Ceres)",n);f=(0,s.tW)((0,i.D4)((0,A.A)({tag:w.D.GaMetaTxAuthData,fee:t,gasPrice:n,txHash:(0,i.lF)(f,c.W.TxHash)})))}return f}async function m(e,{onNode:t}){const n=(0,o.pj)(e,a.vw.SignedTx);if(n.encodedTx.tag!==a.vw.GaMetaTx)throw new l.c1("transaction","to include GaMetaTx",a.vw[n.encodedTx.tag]);return g((0,o.pr)(n.encodedTx.tx.encodedTx),{fee:n.encodedTx.fee,gasPrice:n.encodedTx.gasPrice,onNode:t})}},20697:(e,t,n)=>{"use strict";n.d(t,{BL:()=>m,C3:()=>w,DM:()=>p,F4:()=>f,Iv:()=>y,jG:()=>g,rl:()=>l,wP:()=>A});var r=n(29347),a=n(15436),o=n(68156),s=n(71232),i=n(55719);const c="_sdk-big-int-",l=(...e)=>{const t=(0,a.rl)(...e),{serialize:n,deserialize:r}=t;return Object.assign(t,{serialize(...[e,t,r,a]){if("BigInt"!==e.type.name||null==t)return n.call(this,e,t,r,a);if("bigint"!==typeof t)throw null!==r&&void 0!==r||(r=e.serializedName),new Error(`${r} with value ${t} must be of type bigint.`);return t.toString()},deserialize(...[e,t,n,a]){if("BigInt"!==e.type.name||null==t){"string"===typeof t&&t.startsWith(c)&&(console.warn(`AeSdk internal error: BigInt value ${t} handled incorrectly`),t=+t.replace(c,""));const o=r.call(this,e,t,n,a);return o instanceof Date?new Date(+o/1e3):o}if("number"===typeof t&&t>Number.MAX_SAFE_INTEGER)throw new i.Gd(`Number ${t} is not accurate to be converted to BigInt`);return BigInt(t.toString().replace(c,""))}})},u=Number.MAX_SAFE_INTEGER.toString().length,d=new RegExp(String.raw`("\w+":\s*)(\d{${u},})(\s*[,}])`,"m"),h=new RegExp(String.raw`([[,]\s*)(\d{${u},})\b`,"m"),f={name:"parse-big-int",async sendRequest(e,t){const n=await t(e);return null==n.bodyAsText||(n.bodyAsText=n.bodyAsText.replaceAll(new RegExp(d,"g"),e=>{const t=e.match(d);if(null==t)throw new i.rU;const[,n,r,a]=t;return[n,+r>Number.MAX_SAFE_INTEGER?`"${c}${r}"`:r,a].join("")}),n.bodyAsText=n.bodyAsText.replaceAll(new RegExp(h,"g"),e=>{const t=e.match(h);if(null==t)throw new i.rU;const[,n,r]=t;return`${n}"${c}${r}"`})),n}},A=()=>{const e=new Map;return{policy:{name:"request-queues",async sendRequest(t,n){var r;const a=t.headers.get("__queue");t.headers.delete("__queue");const o=async()=>n(t);if(null==a)return o();const s=(null!==(r=e.get(a))&&void 0!==r?r:Promise.resolve()).then(o);return e.set(a,s.catch(()=>{})),s}},position:"perCall"}},w=()=>{const e=new Map;return{policy:{name:"combine-get-requests",async sendRequest(t,n){var r;if("GET"!==t.method)return n(t);const a=JSON.stringify([t.url,t.body]),o=null!==(r=e.get(a))&&void 0!==r?r:n(t);e.set(a,o);try{return await o}finally{e.delete(a)}}},position:"perCall"}},p=()=>{const e=new Map;return{policy:{name:"aggressive-cache-get-responses",async sendRequest(t,n){var r;if("GET"!==t.method)return n(t);const a=JSON.stringify([t.url,t.body]),o=null!==(r=e.get(a))&&void 0!==r?r:n(t);return e.set(a,o),o}},position:"perCall"}},g=e=>({policy:{name:"error-formatter",async sendRequest(t,n){try{return await n(t)}catch(a){if(!(a instanceof r.pj)||null==a.request||a.message.startsWith("Error "))throw a;const t=`${new URL(a.request.url).pathname.slice(1)} error`;if(null==a.response?.bodyAsText)throw""===a.message&&(a.message=`${t}: ${a.code}`),a;const n=a.response.parsedBody;a.message=t;const o=null==n?` ${a.response.status} status code`:e(n);throw""!==o&&(a.message+=`:${o}`),a}}},position:"perCall"}),m=(e,t,n,r,a)=>({policy:{name:"version-check",async sendRequest(o,c){if(o.headers.has("__version-check"))return o.headers.delete("__version-check"),c(o);const l={requestOptions:{customHeaders:{"__version-check":"true"}}},u=[await t(l),n,r];if(!(0,s.A)(...u)){const t=new i.K$(e,...u);if(!a)throw t;console.warn(t.message)}return c(o)}},position:"perCall"}),y=(e,t)=>({policy:{name:"retry-on-failure",async sendRequest(n,a){var s;if(null!=n.headers.get("__no-retry"))return n.headers.delete("__no-retry"),a(n);const i=null!==(s=n.headers.get("__retry-code"))&&void 0!==s?s:NaN;n.headers.delete("__retry-code");const c=[200,400,403,410,500].filter(e=>e!==+i),l=new Array(e).fill(0).map((t,n)=>((n+1)/e)**2),u=l.reduce((e,t)=>e+t,0),d=l.map(e=>Math.floor(e/u*t));let h=new r.pj("Not expected to be thrown");for(let t=0;t<=e;t+=1){if(0!==t){await(0,o.v7)(d[t-1]);const e=new URL(n.url);e.searchParams.set("__sdk-retry",t.toString()),n.url=e.toString()}try{return await a(n)}catch(A){var f;if(!(A instanceof r.pj))throw A;if(c.includes(null!==(f=A.response?.status)&&void 0!==f?f:0))throw A;h=A}}throw h}},position:"perCall"})},24377:(e,t,n)=>{"use strict";n.d(t,{A:()=>se,$:()=>ie});var r=n(35166),a=n(55636),o=n(94465),s=n(78910),i=n(12075),c=n(48287);const l={serialize(e){return c.Buffer.from([e?1:0])},deserialize(e){return 1===e[0]}};var u=n(53234),d=n(15234),h=n(65072),f=n(73106),A=n(94373),w=n(16381),p=n(34743),g=n(30683),m=n(88882);function y(e,t){return{serialize(e,{packEntry:n}){return(0,m.D4)(n({tag:g.D.Mtree,values:Object.entries(e).map(([e,r])=>({tag:g.D.MtreeValue,key:(0,m.D4)(e),value:(0,m.D4)(n({...r,tag:t}))}))}))},deserialize(n,{unpackEntry:a}){const{values:o}=a((0,m.lF)(n,r.W.Bytearray),g.D.Mtree);return Object.fromEntries(o.filter(({key:t})=>e!==r.W.ContractAddress||32===t.length).map(({key:n,value:o})=>[(0,m.lF)(n,e),a((0,m.lF)(o,r.W.Bytearray),t)]))},recursiveType:!0}}var v,x=n(50858),T=n(16341),C=n(55719);function b(e,t){I(e,t),t.add(e)}function W(e,t,n){I(e,t),t.set(e,n)}function I(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function B(e,t,n){return e.set(k(e,t),n),n}function E(e,t){return e.get(k(e,t))}function k(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var S=function(e){return e[e["Branch"]=0]="Branch",e[e["Extension"]=1]="Extension",e[e["Leaf"]=2]="Leaf",e}(S||{}),N=new WeakMap,$=new WeakMap,O=new WeakMap,D=new WeakMap,M=new WeakMap,P=new WeakMap,_=new WeakSet;class F{get isComplete(){return E($,this)}constructor(e,t,n,r){if(b(this,_),W(this,N,void 0),W(this,$,!0),W(this,O,void 0),W(this,D,void 0),W(this,M,void 0),W(this,P,void 0),B(D,this,t),B(M,this,n),B(P,this,r),B(N,this,e[0].toString("hex")),B(O,this,Object.fromEntries(e[1].map(e=>[e[0].toString("hex"),e[1]]))),null!=E(O,this)[E(N,this)])Object.entries(E(O,this)).forEach(([e,t])=>{if(z.call(F,t)!==e)throw new C.nC;const{type:n}=j.call(F,t);switch(n){case S.Branch:t.slice(0,16).filter(e=>e.length).forEach(e=>{null==E(O,this)[e.toString("hex")]&&B($,this,!1)});break;case S.Extension:if(null==E(O,this)[t[1].toString("hex")])throw new C.aL("Can't find a node by hash in extension node");break;case S.Leaf:break;default:throw new C.Gd(`Unknown MPTree node type: ${n}`)}});else{if(0!==Object.keys(E(O,this)).length)throw new C.aL("Can't find a node by root hash");B($,this,!1)}}isEqual(e){return E(N,this)===E(N,e)}serialize(){return[c.Buffer.from(E(N,this),"hex"),Object.entries(E(O,this)).map(([e,t])=>[c.Buffer.from(e,"hex"),t])]}get(e){const t=k(_,this,V).call(this,(0,m.D4)(e).toString("hex"));return null==t?t:E(P,this).call(this,(0,m.lF)(t,r.W.Bytearray),E(M,this))}toObject(){return Object.fromEntries(k(_,this,R).call(this).filter(([e])=>E(D,this)!==r.W.ContractAddress||66!==e.length).map(([e,t])=>[(0,m.lF)(c.Buffer.from(e,"hex"),E(D,this)),E(P,this).call(this,(0,m.lF)(t,r.W.Bytearray),E(M,this))]))}}function z(e){return c.Buffer.from((0,T.tW)((0,x.encode)(e))).toString("hex")}function j(e){switch(e.length){case 17:return{type:S.Branch,...0!==e[16].length&&{value:e[16]}};case 2:{const t=e[0][0]>>4;if(t>3)throw new C.o4(t);const n=t<=1?S.Extension:S.Leaf,r=[0,2].includes(t)?2:1;return{type:n,...n===S.Leaf&&{value:e[1]},path:e[0].toString("hex").slice(r)}}default:throw new C.pC(e.length)}}function V(e){let t=E(N,this),n=e;while(1){const e=E(O,this)[t];if(null==e){if(!this.isComplete)return;throw new C.Gd("Can't find node in complete tree")}const{type:r,value:a,path:o}=j.call(v,e);switch(r){case S.Branch:if(0===n.length)return a;t=e[+`0x${n[0]}`].toString("hex"),n=n.substring(1);break;case S.Extension:if(n.substring(0,o?.length)!==o)return;t=e[1].toString("hex"),n=n.substring(o.length);break;case S.Leaf:if(o!==n)return;return a;default:throw new C.Gd(`Unknown MPTree node type: ${r}`)}}}function R(){const e=[],t=(n,r)=>{const a=E(O,this)[n];if(null==a){if(!this.isComplete)return;throw new C.Gd("Can't find node in complete tree")}const{type:o,value:s,path:i}=j.call(v,a);switch(o){case S.Branch:a.slice(0,16).map((e,t)=>[e,t]).filter(([e])=>e.length).forEach(([e,n])=>t(e.toString("hex"),r+n.toString(16))),null!=s&&e.push([r,s]);break;case S.Extension:t(a[1].toString("hex"),r+i);break;case S.Leaf:if(null==s)throw new C.rU;e.push([r+i,s]);break;default:throw new C.Gd(`Unknown MPTree node type: ${o}`)}};return t(E(N,this),""),e}function G(e,t){return{serialize(e){return e.serialize()},deserialize(n,{unpackEntry:r}){return new F(n,e,t,r)}}}v=F;var U=n(84686),q=n(80364),H=n(82766),L=n(53624),K=n(3125),Q=n(46581);function J(e){return{serialize(t,{packEntry:n}){return(0,m.D4)(n({tag:e,payload:t}))},deserialize(t,{unpackEntry:n}){return n((0,m.lF)(t,r.W.Bytearray),e).payload},recursiveType:!0}}const X=(0,i.A)((0,f.A)(g.D.MtreeValue)),Z=y(r.W.ContractAddress,g.D.Contract),Y=y(r.W.AccountAddress,g.D.Account),ee=y(r.W.Bytearray,g.D.ContractCall),te=y(r.W.Channel,g.D.Channel),ne=y(r.W.Name,g.D.Name),re=y(r.W.OracleAddress,g.D.Oracle),ae=[{tag:(0,L.A)(g.D.Account),version:(0,L.A)(1),nonce:H.A,balance:Q.A},{tag:(0,L.A)(g.D.Account),version:(0,L.A)(2,!0),flags:Q.A,nonce:H.A,balance:Q.A,gaContract:(0,s.A)(r.W.ContractAddress,r.W.Name),gaAuthFun:(0,h.A)(r.W.ContractBytearray)},{tag:(0,L.A)(g.D.Name),version:(0,L.A)(1,!0),accountId:(0,s.A)(r.W.AccountAddress),nameTtl:H.A,status:q.A,clientTtl:H.A,pointers:U.A},{tag:(0,L.A)(g.D.Contract),version:(0,L.A)(1,!0),owner:(0,s.A)(r.W.AccountAddress),ctVersion:d.Ay,code:(0,h.A)(r.W.ContractBytearray),log:(0,h.A)(r.W.ContractBytearray),active:l,referers:(0,i.A)((0,s.A)(r.W.AccountAddress)),deposit:u.A},{tag:(0,L.A)(g.D.ContractCall),version:(0,L.A)(2,!0),callerId:(0,s.A)(r.W.AccountAddress),callerNonce:H.A,height:H.A,contractId:(0,s.A)(r.W.ContractAddress),gasPrice:Q.A,gasUsed:H.A,returnValue:(0,h.A)(r.W.ContractBytearray),returnType:(0,A.A)(g.d),log:(0,i.A)(q.A)},{tag:(0,L.A)(g.D.Oracle),version:(0,L.A)(1,!0),accountId:(0,s.A)(r.W.AccountAddress),queryFormat:K.A,responseFormat:K.A,queryFee:u.A,oracleTtlValue:H.A,abiVersion:o.A},{tag:(0,L.A)(g.D.Channel),version:(0,L.A)(3,!0),initiator:(0,s.A)(r.W.AccountAddress),responder:(0,s.A)(r.W.AccountAddress),channelAmount:Q.A,initiatorAmount:Q.A,responderAmount:Q.A,channelReserve:Q.A,initiatorDelegateIds:(0,i.A)((0,s.A)(...s.o)),responderDelegateIds:(0,i.A)((0,s.A)(...s.o)),stateHash:(0,h.A)(r.W.State),round:H.A,soloRound:Q.A,lockPeriod:Q.A,lockedUntil:Q.A,initiatorAuth:(0,h.A)(r.W.ContractBytearray),responderAuth:(0,h.A)(r.W.ContractBytearray)},{tag:(0,L.A)(g.D.ChannelOffChainUpdateTransfer),version:(0,L.A)(1,!0),from:(0,s.A)(r.W.AccountAddress),to:(0,s.A)(r.W.AccountAddress),amount:Q.A},{tag:(0,L.A)(g.D.ChannelOffChainUpdateDeposit),version:(0,L.A)(1,!0),from:(0,s.A)(r.W.AccountAddress),amount:Q.A},{tag:(0,L.A)(g.D.ChannelOffChainUpdateWithdraw),version:(0,L.A)(1,!0),from:(0,s.A)(r.W.AccountAddress),amount:Q.A},{tag:(0,L.A)(g.D.ChannelOffChainUpdateCreateContract),version:(0,L.A)(1,!0),owner:(0,s.A)(r.W.AccountAddress),ctVersion:d.Ay,code:(0,h.A)(r.W.ContractBytearray),deposit:Q.A,callData:(0,h.A)(r.W.ContractBytearray)},{tag:(0,L.A)(g.D.ChannelOffChainUpdateCallContract),version:(0,L.A)(1,!0),caller:(0,s.A)(r.W.AccountAddress),contract:(0,s.A)(r.W.ContractAddress),abiVersion:o.A,amount:Q.A,callData:(0,h.A)(r.W.ContractBytearray),callStack:q.A,gasPrice:p.A,gasLimit:w.A},{tag:(0,L.A)(g.D.TreesPoi),version:(0,L.A)(1,!0),accounts:(0,i.A)(G(r.W.AccountAddress,g.D.Account)),calls:(0,i.A)(G(r.W.Bytearray,g.D.ContractCall)),channels:(0,i.A)(G(r.W.Channel,g.D.Channel)),contracts:(0,i.A)(G(r.W.ContractAddress,g.D.Contract)),ns:(0,i.A)(G(r.W.Name,g.D.Name)),oracles:(0,i.A)(G(r.W.OracleAddress,g.D.Oracle))},{tag:(0,L.A)(g.D.StateTrees),version:(0,L.A)(0,!0),contracts:J(g.D.ContractsMtree),calls:J(g.D.CallsMtree),channels:J(g.D.ChannelsMtree),ns:J(g.D.NameserviceMtree),oracles:J(g.D.OraclesMtree),accounts:J(g.D.AccountsMtree)},{tag:(0,L.A)(g.D.Mtree),version:(0,L.A)(1,!0),values:X},{tag:(0,L.A)(g.D.MtreeValue),version:(0,L.A)(1,!0),key:q.A,value:q.A},{tag:(0,L.A)(g.D.ContractsMtree),version:(0,L.A)(1,!0),payload:Z},{tag:(0,L.A)(g.D.CallsMtree),version:(0,L.A)(1,!0),payload:ee},{tag:(0,L.A)(g.D.ChannelsMtree),version:(0,L.A)(1,!0),payload:te},{tag:(0,L.A)(g.D.NameserviceMtree),version:(0,L.A)(1,!0),payload:ne},{tag:(0,L.A)(g.D.OraclesMtree),version:(0,L.A)(1,!0),payload:re},{tag:(0,L.A)(g.D.AccountsMtree),version:(0,L.A)(1,!0),payload:Y},{tag:(0,L.A)(g.D.GaMetaTxAuthData),version:(0,L.A)(1,!0),fee:u.A,gasPrice:p.A,txHash:(0,h.A)(r.W.TxHash)}],oe=[[g.D.CallsMtree,r.W.CallStateTree],[g.D.StateTrees,r.W.StateTrees],[g.D.TreesPoi,r.W.Poi]];function se(e){var t;const n=null!==(t=oe.find(([t])=>t===e.tag)?.[1])&&void 0!==t?t:r.W.Bytearray;return(0,a.RM)(ae,g.D,e,{packEntry:se},n)}function ie(e,t){return null!==t&&void 0!==t||(t=oe.find(([,t])=>e.startsWith(t))?.[0]),(0,a.Qc)(ae,g.D,e,t,{unpackEntry:ie})}},30683:(e,t,n)=>{"use strict";n.d(t,{D:()=>a,d:()=>r});let r=function(e){return e[e["Ok"]=0]="Ok",e[e["Error"]=1]="Error",e[e["Revert"]=2]="Revert",e}({}),a=function(e){return e[e["Account"]=10]="Account",e[e["Oracle"]=20]="Oracle",e[e["Name"]=30]="Name",e[e["Contract"]=40]="Contract",e[e["ContractCall"]=41]="ContractCall",e[e["ChannelOffChainUpdateTransfer"]=570]="ChannelOffChainUpdateTransfer",e[e["ChannelOffChainUpdateDeposit"]=571]="ChannelOffChainUpdateDeposit",e[e["ChannelOffChainUpdateWithdraw"]=572]="ChannelOffChainUpdateWithdraw",e[e["ChannelOffChainUpdateCreateContract"]=573]="ChannelOffChainUpdateCreateContract",e[e["ChannelOffChainUpdateCallContract"]=574]="ChannelOffChainUpdateCallContract",e[e["Channel"]=58]="Channel",e[e["TreesPoi"]=60]="TreesPoi",e[e["StateTrees"]=62]="StateTrees",e[e["Mtree"]=63]="Mtree",e[e["MtreeValue"]=64]="MtreeValue",e[e["ContractsMtree"]=621]="ContractsMtree",e[e["CallsMtree"]=622]="CallsMtree",e[e["ChannelsMtree"]=623]="ChannelsMtree",e[e["NameserviceMtree"]=624]="NameserviceMtree",e[e["OraclesMtree"]=625]="OraclesMtree",e[e["AccountsMtree"]=626]="AccountsMtree",e[e["GaMetaTxAuthData"]=810]="GaMetaTxAuthData",e}({})},30709:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(21013),a=n(60346),o=n(68156);const s=r({storeAsString:!0}),i=e=>{if("object"===typeof e&&null!==e&&e.constructor===Object)return(0,o.s8)(e,([e,t])=>[e,i(t)]);if(Array.isArray(e))return e.map(e=>i(e));if("string"===typeof e&&new a.A(e).toString(10)===e){const t=new a.A(e);return t.toJSON=()=>t.toString(10),t}return e},c={stringify:(...e)=>s.stringify(i(e[0]),...e.slice(1)),parse:s.parse}},34496:(e,t,n)=>{"use strict";n.d(t,{l:()=>o});var r=n(55636),a=n(17489);function o(e,t){return(0,r.Qc)(a.j,a.v,e,t,{})}},34743:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,x:()=>l});var r=n(60346),a=n(53234),o=n(55719),s=n(8204),i=n(97170);const c=new WeakMap;async function l(e){const t=c.get(e);if(null!=t&&t.time>Date.now()-2e4)return t.gasPrice;const{minGasPrice:n,utilization:a}=(await e.getRecentGasPrices())[0];let o=a<70?0n:BigInt(new r.A(n.toString()).times(1.01).integerValue().toFixed());const i=100000n*BigInt(s.d$);return o>i&&(console.warn(`Estimated gas price ${o} exceeds the maximum safe value for unknown reason. It will be limited to ${i}. To overcome this restriction provide \`gasPrice\`/\`fee\` in options.`),o=i),c.set(e,{gasPrice:o,time:Date.now()}),o}const u={...a.A,async prepare(e,t,{onNode:n,denomination:r}){if(null!=e)return e;if(null==n)throw new o.c1("onNode","provided (or provide `gasPrice` instead)",n);const a=await l(n);return 0n!==a?(0,i.ej)(a,{targetDenomination:r}):void 0},serializeAettos(e=s.d$.toString()){if(+e<s.d$)throw new o.qw(`Gas price ${e.toString()} must be bigger than ${s.d$}`);return e}}},35166:(e,t,n)=>{"use strict";n.d(t,{W:()=>r});let r=function(e){return e["KeyBlockHash"]="kh",e["MicroBlockHash"]="mh",e["BlockPofHash"]="bf",e["BlockTxHash"]="bx",e["BlockStateHash"]="bs",e["Channel"]="ch",e["ContractAddress"]="ct",e["ContractBytearray"]="cb",e["ContractStoreKey"]="ck",e["ContractStoreValue"]="cv",e["Transaction"]="tx",e["TxHash"]="th",e["OracleAddress"]="ok",e["OracleQuery"]="ov",e["OracleQueryId"]="oq",e["OracleResponse"]="or",e["AccountAddress"]="ak",e["AccountSecretKey"]="sk",e["Signature"]="sg",e["Commitment"]="cm",e["PeerPubkey"]="pp",e["Name"]="nm",e["State"]="st",e["Poi"]="pi",e["StateTrees"]="ss",e["CallStateTree"]="cs",e["Bytearray"]="ba",e}({})},41284:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(91454),a=n(8204),o=n(55719);function s(e){const t=(0,r.pj)(e);switch(t.tag){case a.vw.SignedTx:return s((0,r.pr)(t.encodedTx));case a.vw.GaMetaTx:return t.gaId;default:}const n=(0,r._w)(t.tag,t.version).find(([e])=>"nonce"===e)?.[1];if(null==n)throw new o.Jn(`Transaction doesn't have nonce: ${a.vw[t.tag]}`);if(!("senderKey"in n))throw new o.rU;const i=t[n.senderKey];return i.replace(/^ok_/,"ak_")}},46581:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(64224),a=n(55719),o=n(84825);const s={serialize(e){if(Number(e)<0)throw new a.c1("value","greater or equal to 0",e);return(0,o.Z)(e,!0)},deserialize(e){return(0,r.Uk)(e)}}},48162:(e,t,n)=>{var r=n(61594),a=e.exports;(function(){"use strict";var e,t,n,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function i(e){return o.lastIndex=0,o.test(e)?'"'+e.replace(o,function(e){var t=s[e];return"string"===typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function c(a,o){var s,l,u,d,h,f=e,A=o[a],w=null!=A&&(A instanceof r||r.isBigNumber(A));switch(A&&"object"===typeof A&&"function"===typeof A.toJSON&&(A=A.toJSON(a)),"function"===typeof n&&(A=n.call(o,a,A)),typeof A){case"string":return w?A:i(A);case"number":return isFinite(A)?String(A):"null";case"boolean":case"null":return String(A);case"object":if(!A)return"null";if(e+=t,h=[],"[object Array]"===Object.prototype.toString.apply(A)){for(d=A.length,s=0;s<d;s+=1)h[s]=c(s,A)||"null";return u=0===h.length?"[]":e?"[\n"+e+h.join(",\n"+e)+"\n"+f+"]":"["+h.join(",")+"]",e=f,u}if(n&&"object"===typeof n)for(d=n.length,s=0;s<d;s+=1)"string"===typeof n[s]&&(l=n[s],u=c(l,A),u&&h.push(i(l)+(e?": ":":")+u));else Object.keys(A).forEach(function(t){var n=c(t,A);n&&h.push(i(t)+(e?": ":":")+n)});return u=0===h.length?"{}":e?"{\n"+e+h.join(",\n"+e)+"\n"+f+"}":"{"+h.join(",")+"}",e=f,u}}"function"!==typeof a.stringify&&(a.stringify=function(r,a,o){var s;if(e="",t="","number"===typeof o)for(s=0;s<o;s+=1)t+=" ";else"string"===typeof o&&(t=o);if(n=a,a&&"function"!==typeof a&&("object"!==typeof a||"number"!==typeof a.length))throw new Error("JSON.stringify");return c("",{"":r})})})()},48189:(e,t,n)=>{"use strict";n.d(t,{E:()=>c,v:()=>l});var r=n(68951),a=n(68156),o=n(55719),s=n(91454),i=n(1889);class c extends o.Jn{constructor(e,t,n){super(e),this.name="InvalidTxError",this.validation=t,this.transaction=n}}async function l(e,{onNode:t,onAccount:n,verify:o=!0,waitMined:l=!0,confirm:u,innerTx:d,...h}){const f=await n.signTransaction(e,{...h,onNode:t,innerTx:d,networkId:await t.getNetworkId()});if(!0===d)return{hash:(0,s.BN)(f),rawTx:f};if(o){const e=await(0,r.A)(f,t);if(e.length>0){const t=`Transaction verification errors: ${e.map(e=>e.message).join(", ")}`;throw new c(t,e,f)}}try{let e;try{e=null!=n?`tx-${n.address}`:null}catch(A){e=null}const{txHash:r}=await t.postTransaction({tx:f},{requestOptions:{customHeaders:{"__retry-code":"400",...null!=e?{__queue:e}:{}}}});if(l){const e=await(0,i.poll)(r,{onNode:t,...h}),n={...e,hash:e.hash,rawTx:f};if(null!=u&&+u>0){const e="boolean"===typeof u?void 0:u;return{...n,confirmationHeight:await(0,i.waitForTxConfirm)(r,{onNode:t,confirm:e,...h})}}return n}return{hash:r,rawTx:f}}catch(A){throw(0,a.$)(A),Object.assign(A,{rawTx:f,verifyTx:async()=>(0,r.A)(f,t)})}}},51902:(e,t,n)=>{"use strict";n.d(t,{A:()=>v,S:()=>g});var r=n(60346),a=n(55719),o=n(8204),s=n(46581),i=n(53234),c=n(34743),l=n(68156),u=n(88882);const d=15e3,h=20,f=3,A=e=>{var t;const n={[o.vw.ChannelForceProgressTx]:30,[o.vw.ChannelOffChainTx]:0,[o.vw.ContractCreateTx]:5,[o.vw.ContractCallTx]:12,[o.vw.GaAttachTx]:5,[o.vw.GaMetaTx]:5,[o.vw.PayingForTx]:.2},r=null!==(t=n[e])&&void 0!==t?t:1;return r*d},w=(e,t,{relativeTtl:n,innerTxSize:r})=>{switch(e){case o.vw.OracleRegisterTx:case o.vw.OracleExtendTx:case o.vw.OracleQueryTx:case o.vw.OracleRespondTx:return t*h+Math.ceil(32e3*n/Math.floor(525600/f));case o.vw.GaMetaTx:case o.vw.PayingForTx:return(t-r)*h;default:return t*h}};function p(e){const t={[o.vw.OracleRegisterTx]:"oracleTtlValue",[o.vw.OracleExtendTx]:"oracleTtlValue",[o.vw.OracleQueryTx]:"queryTtlValue",[o.vw.OracleRespondTx]:"responseTtlValue"},{tag:n}=e;return(0,l.Uu)(n,t)?e[t[n]]:1}function g(e,t,n){const{length:r}=(0,u.D4)(e),a=t(e);let s=0;return a.tag!==o.vw.GaMetaTx&&a.tag!==o.vw.PayingForTx||(s=(0,u.D4)(n(a.tx.encodedTx)).length),A(a.tag)+w(a.tag,r,{relativeTtl:p(a),innerTxSize:s})}function m(e,t,n){let a,s=new r.A(0);do{a=s,s=new r.A(o.d$).times(g(e(s),t,n))}while(!s.eq(a));return s}const y="_gas-price:",v={...i.A,async prepare(e,t,{onNode:n}){if(null!=e)return e;if(null==n)throw new a.c1("onNode","provided (or provide `fee` instead)",n);const r=await(0,c.x)(n);return 0n!==r?y+r:void 0},serializeAettos(e,{rebuildTx:t,unpackTx:n,buildTx:s,_computingMinFee:i},{_canIncreaseFee:c}){if(null!=i)return i.toFixed();const l=m(e=>t({_computingMinFee:e}),n,s),u=!0===e?.startsWith(y)?l.dividedBy(o.d$).times(e.replace(y,"")):new r.A(null!==e&&void 0!==e?e:l);if(l.gt(u)){if(!0===c)return l.toFixed();throw new a.qw(`Fee ${u.toString()} must be bigger than ${l}`)}return u.toFixed()},serialize(e,t,n){return"string"===typeof e&&e.startsWith(y)?s.A.serialize(this.serializeAettos(e,t,n)):i.A.serialize.call(this,e,t,n)}}},53234:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(46581),a=n(97170);const o={...r.A,serializeAettos(e,t,n){return null!==e&&void 0!==e?e:"0"},serialize(e,t,{denomination:n=a.j8.AETTOS,...o}){return r.A.serialize(this.serializeAettos(null!=e?(0,a.ej)(e,{denomination:n}):e,t,o))}}},53624:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(55719),a=n(82766);function o(e,t){return{serialize(n){if((!0!==t||null!=n)&&n!==e)throw new r.c1("ShortUIntConst",e,n);return a.A.serialize(e)},deserialize(t){const n=a.A.deserialize(t);if(n!==e)throw new r.c1("ShortUIntConst",e,n);return e},constValue:e,constValueOptional:!0===t}}},55636:(e,t,n)=>{"use strict";n.d(t,{Qc:()=>l,RM:()=>c,_w:()=>i});var r=n(48287),a=n(50858),o=n(55719),s=n(88882);function i(e,t,n,r){const a=e.filter(e=>e.tag.constValue===n);if(0===a.length)throw new o.HR(`${t[n]} (${n})`,0);if(null==r){const e=a.find(e=>e.version.constValueOptional);if(null==e)throw new o.Gd(`Can't find default schema of ${t[n]} (${n})`);r=e.version.constValue}const s=a.find(e=>e.version.constValue===r);if(null==s)throw new o.HR(`${t[n]} (${n})`,r);return Object.entries(s)}function c(e,t,n,r,o){const c=i(e,t,n.tag,n.version),l=c.map(([e,t])=>t.serialize(n[e],{...n,...r},n));return(0,s.lF)((0,a.encode)(l),o)}function l(e,t,n,c,l){const u=(0,a.decode)((0,s.D4)(n));if(!ArrayBuffer.isView(u[0])||!ArrayBuffer.isView(u[1]))throw new o.Xc("Can't parse tag or version in provided RLP");const d=r.Buffer.from(u[0]).readUintBE(0,u[0].length),h=r.Buffer.from(u[1]).readUintBE(0,u[1].length),f=i(e,t,d,h);if(null!=c&&c!==d)throw new o.Xc(`Expected ${t[c]} tag, got ${t[d]} instead`);if(u.length!==f.length)throw new o.c1("RLP length",f.length,u.length);return Object.fromEntries(f.map(([e,t],n)=>[e,t.deserialize(u[n],l)]))}},55719:(e,t,n)=>{"use strict";n.d(t,{$4:()=>z,Cf:()=>r,E0:()=>$,E5:()=>w,EC:()=>i,EH:()=>m,FL:()=>D,G8:()=>S,Gd:()=>x,Gq:()=>ae,HR:()=>ee,Jn:()=>d,Jp:()=>k,K$:()=>y,K4:()=>O,MT:()=>ne,Mb:()=>N,Mk:()=>V,OT:()=>oe,OZ:()=>C,Oz:()=>j,P3:()=>X,Qh:()=>B,So:()=>I,Ue:()=>b,Vl:()=>c,Vz:()=>Z,Xc:()=>J,YR:()=>Y,ZB:()=>W,_H:()=>P,_M:()=>Q,_j:()=>te,aL:()=>q,c1:()=>f,dp:()=>M,hg:()=>g,iQ:()=>re,je:()=>G,m5:()=>R,mh:()=>_,nC:()=>U,o4:()=>L,pC:()=>H,q3:()=>p,qB:()=>E,qs:()=>K,qw:()=>A,rU:()=>T,vo:()=>F,z5:()=>v});class r extends Error{constructor(e){super(e),this.name="BaseError"}}class a extends r{constructor(e){super(e),this.name="AccountError"}}class o extends r{constructor(e){super(e),this.name="AensError"}}class s extends r{constructor(e){super(e),this.name="AeppError"}}class i extends r{constructor(e){super(e),this.name="CompilerError"}}class c extends r{constructor(e){super(e),this.name="ContractError"}}class l extends r{constructor(e){super(e),this.name="CryptographyError"}}class u extends r{constructor(e){super(e),this.name="NodeError"}}class d extends r{constructor(e){super(e),this.name="TransactionError"}}class h extends r{constructor(e){super(e),this.name="WalletError"}}class f extends r{constructor(e,t,n){super(`${e} should be ${t}, got ${n} instead`),this.name="ArgumentError"}}class A extends l{constructor(e){super(e),this.name="IllegalArgumentError"}}class w extends r{constructor(){super("Byte serialization not supported"),this.name="NoSerializerFoundError"}}class p extends r{constructor(e,t){super(`Giving up after ${e} blocks mined, transaction hash: ${t}`),this.name="TxTimedOutError"}}class g extends r{constructor(e){super(e),this.name="TypeError"}}class m extends r{constructor(e){super(e),this.name="NotImplementedError"}}class y extends r{constructor(e,t,n,r){super(`Unsupported ${e} version ${t}. Supported: >= ${n}`+(null==r?"":` < ${r}`)),this.name="UnsupportedVersionError"}}class v extends r{constructor(e){super(e),this.name="LogicError"}}class x extends r{constructor(e){super(e),this.name="InternalError"}}class T extends x{constructor(e="Expected to not happen, required for TS"){super(e),this.name="UnexpectedTsError"}}class C extends a{constructor(e){super(`Account for ${e} not available`),this.name="UnavailableAccountError"}}class b extends o{constructor(e,t){super(`Name ${e} don't have pointers for ${t}`),this.name="AensPointerContextError"}}class W extends o{constructor(e,t){super(`the provided fee ${e.toString()} is not enough to execute the claim, required: ${t.toString()}`),this.name="InsufficientNameFeeError"}}class I extends o{constructor(e){super(e),this.name="InvalidAensNameError"}}class B extends s{constructor(e){super(`Received invalid message: ${e}`),this.name="InvalidRpcMessageError"}}class E extends s{constructor(e){super(`Can't find callback for this messageId ${e}`),this.name="MissingCallbackError"}}class k extends s{constructor(e){super(`RpcClient with id ${e} do not exist`),this.name="UnknownRpcClientError"}}class S extends i{constructor(e){super(e),this.name="InvalidAuthDataError"}}class N extends c{constructor(e,t=""){super(`Contract ${e} do not correspond to the bytecode deployed on the chain`+t),this.name="BytecodeMismatchError"}}class $ extends c{constructor(){super("Contract already deployed"),this.name="DuplicateContractError"}}class O extends c{constructor(e){super(`Contract with address ${e} not active`),this.name="InactiveContractError"}}class D extends c{constructor(e){super(e),this.name="InvalidMethodInvocationError"}}class M extends c{constructor(e){super(e),this.name="MissingContractAddressError"}}class P extends c{constructor(){super("Either ACI or sourceCode or sourceCodePath is required"),this.name="MissingContractDefError"}}class _ extends c{constructor(){super("Function name is required"),this.name="MissingFunctionNameError"}}class F extends c{constructor(e,t){super("Invocation failed"+(null==e?"":`: "${e}"`)),this.name="NodeInvocationError",this.transaction=t}}class z extends c{constructor(e){super(`Function ${e} doesn't exist in contract`),this.name="NoSuchContractFunctionError"}}class j extends c{constructor(e,t){super(`You try to pay "${e}" to function "${t}" which is not payable. Only payable function can accept coins`),this.name="NotPayableFunctionError"}}class V extends c{constructor(e,t){super(`Can't find definition of ${e} event emitted by ${t} (use omitUnknown option to ignore events like this)`),this.name="MissingEventDefinitionError"}}class R extends c{constructor(e,t){super(`Found multiple definitions of "${t[0][1]}" event with different types emitted by ${e} in ${t.map(([e])=>`"${e}"`).join(", ")} contracts (use contractAddressToName option to specify contract name corresponding to address)`),this.name="AmbiguousEventDefinitionError"}}class G extends l{constructor(){super("Invalid checksum"),this.name="InvalidChecksumError"}}class U extends l{constructor(){super("Node hash is not equal to provided one"),this.name="MerkleTreeHashMismatchError"}}class q extends l{constructor(e){super(e),this.name="MissingNodeInTreeError"}}class H extends l{constructor(e){super(`Unknown node length: ${e}`),this.name="UnknownNodeLengthError"}}class L extends l{constructor(e){super(`Unknown path nibble: ${e}`),this.name="UnknownPathNibbleError"}}class K extends u{constructor(e){super(`Node with name ${e} already exist`),this.name="DuplicateNodeError"}}class Q extends u{constructor(e){super(e),this.name="NodeNotFoundError"}}class J extends d{constructor(e){super(e),this.name="DecodeError"}}class X extends d{constructor(e){super(e),this.name="PayloadLengthError"}}class Z extends d{constructor(e){super(e),this.name="DryRunError"}}class Y extends d{constructor(e){super(`Prefix for id-tag ${e} not found.`),this.name="PrefixNotFoundError"}}class ee extends d{constructor(e,t){super(`Transaction schema not implemented for tag ${e} version ${t}`),this.name="SchemaNotFoundError"}}class te extends d{constructor(e){super(`Id tag for prefix ${e} not found.`),this.name="DecodeError"}}class ne extends d{constructor(e){super(`Transaction ${e} is removed from chain`),this.name="TxNotInChainError"}}class re extends h{constructor(e){super(e),this.name="AlreadyConnectedError"}}class ae extends h{constructor(e){super(e),this.name="NoWalletConnectedError"}}class oe extends h{constructor(e){super(e),this.name="RpcConnectionError"}}},64224:(e,t,n)=>{"use strict";n.d(t,{Eo:()=>m,JC:()=>v,MN:()=>w,Uk:()=>p,YQ:()=>y,bt:()=>A,sP:()=>d});var r=n(48287),a=(n(60346),n(16341)),o=n(88882),s=n(35166),i=n(84825),c=n(68156),l=n(8204),u=n(55719);function d(e,t){const n=r.Buffer.from([...(0,o.D4)(e),...(0,i.Z)(t)]),c=(0,a.tW)(n);return(0,o.lF)(c,s.W.ContractAddress)}const h=".chain";function f(e){const[t,n,...r]=e.split(".");if(0!==r.length)throw new u.c1("aens name","including only one dot",e);if(n!==h.slice(1))throw new u.c1("aens name",`suffixed with ${h}`,e);if(/\p{Emoji_Presentation}/u.test(t))throw new u.c1("aens name","not containing emoji",e);if("-"===t[2]&&"-"===t[3])throw new u.c1("aens name",'without "-" char in both the third and fourth positions',e);if("-"===t[0])throw new u.c1("aens name",'starting with no "-" char',e);if("-"===t.at(-1))throw new u.c1("aens name",'ending with no "-" char',e);let a;try{const r=new URL(`http://${t}.${n}`);if(r.username+r.password+r.port+r.search+r.hash!==""||"/"!==r.pathname)throw new u.c1("aens name","valid",e);a=r.host}catch(o){if(o instanceof TypeError&&o.message.includes("Invalid URL"))throw new u.c1("aens name","valid",e);throw o}if(!/^[a-z0-9.-]+$/i.test(a))throw new u.c1("aens name","without illegal chars",e);if(a.length>63+h.length)throw new u.c1("aens name","not too long",e);return a}function A(e){return(0,o.lF)((0,a.tW)(f(e)),s.W.Name)}function w(e,t=(0,a.j$)()){return(0,o.lF)((0,a.tW)((0,c.wh)([r.Buffer.from(f(e)),r.Buffer.from(t.toString(16).padStart(64,"0"),"hex")])),s.W.Commitment)}function p(e=r.Buffer.from([])){return BigInt("0x"+r.Buffer.from(e).toString("hex")).toString()}function g(e){f(e)}function m(e){try{return g(e),!0}catch(t){return!1}}s.W.AccountAddress,s.W.OracleAddress,s.W.ContractAddress,s.W.Channel;function y(e){const t=f(e).length-h.length;return l.d0[Math.min(t,l.L_)]}function v(e){return f(e).length<13+h.length}},65072:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(48287),a=n(88882),o=n(55719);function s(e,t){return{serialize(e){if(null==e){if(!0===t)return r.Buffer.from([]);throw new o.c1("Encoded data","provided",e)}return(0,a.D4)(e)},deserialize(t){return(0,a.lF)(t,e)}}}},68156:(e,t,n)=>{"use strict";n.d(t,{$:()=>h,ET:()=>u,PI:()=>d,Uu:()=>l,s8:()=>s,v7:()=>o,wh:()=>c});var r=n(48287),a=n(29347);const o=async e=>new Promise(t=>{setTimeout(t,e)}),s=(e,t)=>Object.fromEntries(Object.entries(e).map(t)),i=(()=>{try{return r.Buffer.concat([Uint8Array.from([])]),!1}catch(e){return!0}})(),c=i?(e,t)=>r.Buffer.concat(e.map(e=>r.Buffer.from(e)),t):r.Buffer.concat;function l(e,t){return e in t}function u(e,t){return t.includes(e)}function d(e){return e instanceof a.pj&&404===e.statusCode&&e.message.includes("Account not found")}function h(e){if(!(e instanceof Error))throw e}},68951:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var r=n(48287),a=n(29347),o=n(16341),s=n(15234),i=n(8204),c=n(91454),l=n(68156),u=n(88882),d=n(35166),h=n(98417),f=n(20697),A=n(55719),w=n(41284),p=n(85825);const g=[];async function m(e,t,n){const r=(0,w.A)((0,c.pr)(e)),[a,{height:o},{consensusProtocolVersion:s,nodeNetworkId:i}]=await Promise.all([t.getAccountByPubkey(r).catch(e=>{if(!(0,l.PI)(e))throw e;return{id:r,balance:0n,nonce:0}}).then(e=>({...e,id:e.id})),t.getCurrentKeyBlockHeight(),t.getNodeInfo()]);return(await Promise.all(g.map(async r=>r(e,{node:t,account:a,height:o,consensusProtocolVersion:s,nodeNetworkId:i,parentTxTypes:n})))).flat()}async function y(e,t){const n=t.pipeline.clone();n.removePolicy({name:"parse-big-int"});const r=new h.A(t.$host,{ignoreVersion:!0,pipeline:n,additionalPolicies:[(0,f.DM)()]});return r._getCachedStatus=async()=>t._getCachedStatus(),m((0,c.pj)(e),r,[])}g.push((e,{account:t,nodeNetworkId:n,parentTxTypes:a})=>{if(e.tag!==i.vw.SignedTx)return[];const{encodedTx:s,signatures:d}=e;if(null==(null!==s&&void 0!==s?s:d))return[];if(1!==d.length)return[];const h=r.Buffer.from([n,...a.includes(i.vw.PayingForTx)?["inner_tx"]:[]].join("-")),f=(0,u.D4)((0,c.pr)(s)),A=(0,l.wh)([h,f]),w=(0,l.wh)([h,(0,o.tW)(f)]);return(0,o.Od)(A,d[0],t.id)||(0,o.Od)(w,d[0],t.id)?[]:[{message:"Signature cannot be verified, please ensure that you transaction have the correct prefix and the correct private key for the sender address",key:"InvalidSignature",checkedKeys:["encodedTx","signatures"]}]},async(e,{node:t,parentTxTypes:n})=>{let r;return"encodedTx"in e&&(r=e.encodedTx),"tx"in e&&(r=e.tx),null==r?[]:m(r,t,[...n,e.tag])},(e,{height:t})=>"ttl"in e?0===e.ttl||e.ttl>t?[]:[{message:`TTL ${e.ttl} is already expired, current height is ${t}`,key:"ExpiredTTL",checkedKeys:["ttl"]}]:[],async(e,{account:t,parentTxTypes:n,node:r})=>{if(0!==n.length)return[];const a=await(0,p.wE)((0,c.pr)(e),r).catch(()=>0n);return a<=t.balance?[]:[{message:`Account balance ${t.balance} is not enough to execute the transaction that costs ${a}`,key:"InsufficientBalance",checkedKeys:["amount","fee","nameFee","gasLimit","gasPrice"]}]},async(e,{node:t})=>{if(e.tag!==i.vw.SpendTx||(0,o.fr)(e.recipientId,d.W.Name))return[];const n=await t.getAccountByPubkey(e.recipientId).catch(e=>{if(!(0,l.PI)(e))throw e;return null});return null==n||!0===n.payable?[]:[{message:"Recipient account is not payable",key:"RecipientAccountNotPayable",checkedKeys:["recipientId"]}]},(e,{account:t})=>{let n;return e.tag===i.vw.SignedTx&&"generalized"===t.kind&&0!==e.signatures.length&&(n="Generalized account can't be used to generate SignedTx with signatures"),e.tag===i.vw.GaMetaTx&&"basic"===t.kind&&(n="Basic account can't be used to generate GaMetaTx"),null==n?[]:[{message:n,key:"InvalidAccountType",checkedKeys:["tag"]}]},(e,{consensusProtocolVersion:t})=>{var n,r;const a=i.vw.OracleRegisterTx===e.tag,o=i.vw.ContractCreateTx===e.tag||i.vw.GaAttachTx===e.tag,c=i.vw.ContractCallTx===e.tag||i.vw.GaMetaTx===e.tag,l=null!==(n=null!==(r=a?"oracle-call":null)&&void 0!==r?r:o?"contract-create":null)&&void 0!==n?n:c?"contract-call":null;if(null==l)return[];const u=s.h[t][l];let d;if("abiVersion"in e&&(d={abiVersion:e.abiVersion}),"ctVersion"in e&&(d=e.ctVersion),null==d)throw new A.rU;return!u.abiVersion.includes(d.abiVersion)||o&&!u.vmVersion.includes(d.vmVersion)?[{message:`ABI/VM version ${JSON.stringify(d)} is wrong, supported is: ${JSON.stringify(u)}`,key:"VmAndAbiVersionMismatch",checkedKeys:["ctVersion","abiVersion"]}]:[]},async(e,{node:t})=>{if(i.vw.ContractCallTx!==e.tag)return[];if(e.contractId.startsWith("nm_"))return[];try{const{active:n}=await t.getContract(e.contractId);return n?[]:[{message:`Contract ${e.contractId} is not active`,key:"ContractNotActive",checkedKeys:["contractId"]}]}catch(n){if(!(n instanceof a.pj)||null==n.response?.bodyAsText)throw n;return[{message:JSON.parse(n.response.bodyAsText).reason,key:"ContractNotFound",checkedKeys:["contractId"]}]}})},71232:(e,t,n)=>{"use strict";function r(e,t){const n=e=>e.split(/[-+]/)[0].split(".").map(e=>+e),r=n(e),a=n(t),o=Math.max(...r,...a)+1,s=e=>e.reverse().reduce((e,t,n)=>e+t*o**n,0);return s(r)-s(a)}function a(e,t,n){return r(e,t)>=0&&(null==n||r(e,n)<0)}n.d(t,{A:()=>a})},73106:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(48287),a=n(88882),o=n(35166);function s(e){return{serialize(t,{packEntry:n}){return ArrayBuffer.isView(t)?r.Buffer.from(t):"string"===typeof t&&t.startsWith("tx_")?(0,a.D4)(t):(0,a.D4)(n({...t,...null!=e&&{tag:e}}))},deserialize(t,{unpackEntry:n}){return n((0,a.lF)(t,o.W.Bytearray),e)}}}},78910:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,o:()=>l});var r=n(48287),a=n(55719),o=n(84825),s=n(35166),i=n(88882),c=n(68156);const l=[s.W.AccountAddress,s.W.Name,s.W.Commitment,s.W.OracleAddress,s.W.ContractAddress,s.W.Channel];function u(...e){return{serialize(t){const n=t.slice(0,2);if(!(0,c.ET)(n,l))throw new a._j(n);if(!(0,c.ET)(n,e))throw new a.c1("Address encoding",e.join(", "),n);const s=l.indexOf(n)+1;return r.Buffer.from([...(0,o.Z)(s),...(0,i.D4)(t)])},deserialize(t){const n=r.Buffer.from(t).readUIntBE(0,1),o=l[n-1];if(null==o)throw new a.YR(n);if(!(0,c.ET)(o,e))throw new a.c1("Address encoding",e.join(", "),o);return(0,i.lF)(t.subarray(1),o)}}}},80364:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(48287);const a={serialize(e){return r.Buffer.from(e)},deserialize(e){return e}}},82766:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(46581);const a={serialize(e){return r.A.serialize(e)},deserialize(e){return+r.A.deserialize(e)}}},84686:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var r=n(48287),a=n(84825),o=n(35166),s=n(88882),i=n(16341),c=n(55719),l=n(78910);const u=r.Buffer.from([1]),d=r.Buffer.from([2]),h=1024,f=(0,l.A)(...l.o),A=e=>({serialize(t){if(t.length>32)throw new c.qw(`Expected 32 pointers or less, got ${t.length} instead`);return t.map(({key:t,id:n})=>{let A;if((0,i.fr)(n,...l.o)&&(A=[...e?[u]:[],f.serialize(n)]),(0,i.fr)(n,o.W.Bytearray)){const e=(0,s.D4)(n);if(e.length>h)throw new c.c1("Raw pointer",`shorter than ${h+1} bytes`,`${e.length} bytes`);A=[d,e]}if(null==A)throw new c.Xc(`Unknown AENS pointer value: ${n}`);return[(0,a.Z)(t),r.Buffer.concat(A)]})},deserialize(t){return t.map(([t,n])=>{if(!e)return{key:t.toString(),id:f.deserialize(n)};const r=n.subarray(0,1),a=n.subarray(1);let i;if(r.equals(u)&&(i=f.deserialize(a)),r.equals(d)&&(i=(0,s.lF)(a,o.W.Bytearray)),null==i)throw new c.Xc(`Unknown AENS pointer tag: ${r}`);return{key:t.toString(),id:i}})}})},84825:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(48287),a=n(60346),o=n(55719);function s(e,t=!1){if(null==e)return r.Buffer.from([]);if(Number.isInteger(e)||a.A.isBigNumber(e)||t){if(a.A.isBigNumber(e)||(e=new a.A(e)),!e.isInteger())throw new o.hg(`Unexpected not integer value: ${e.toFixed()}`);let t=e.toString(16);return t.length%2===1&&(t=`0${t}`),r.Buffer.from(t,"hex")}if("string"===typeof e)return r.Buffer.from(e);throw new o.E5}},85320:(e,t,n)=>{"use strict";n.r(t),n.d(t,{payForTransaction:()=>d,spend:()=>l,transferFunds:()=>u});var r=n(60346),a=n(1889),o=n(48189),s=n(91454),i=n(55719),c=n(8204);async function l(e,t,n){return(0,o.v)(await(0,s.B4)({_isInternalBuild:!0,...n,tag:c.vw.SpendTx,senderId:n.onAccount.address,recipientId:await(0,a.resolveName)(t,"account_pubkey",n),amount:e}),n)}async function u(e,t,n){if(+e<0||+e>1)throw new i.c1("fraction","a number between 0 and 1",e);const l=await(0,a.resolveName)(t,"account_pubkey",n),u=n.onAccount.address,d=new r.A(await a.getBalance.bind(n.onAccount)(u,n)),h=d.times(e).integerValue(r.A.ROUND_HALF_UP),{fee:f}=(0,s.pj)(await(0,s.B4)({_isInternalBuild:!0,...n,tag:c.vw.SpendTx,senderId:u,recipientId:l,amount:h}),c.vw.SpendTx),A=h.plus(f).gt(d)?d.minus(f):h;return(0,o.v)(await(0,s.B4)({_isInternalBuild:!0,...n,tag:c.vw.SpendTx,senderId:u,recipientId:l,amount:A}),n)}async function d(e,t){return(0,o.v)(await(0,s.B4)({_isInternalBuild:!0,...t,tag:c.vw.PayingForTx,payerId:t.onAccount.address,tx:e}),t)}},85825:(e,t,n)=>{"use strict";n.d(t,{oo:()=>l,wE:()=>d});var r=n(91454),a=n(8204),o=n(16341),s=n(85533),i=n(55719),c=n(41284);function l(e,{innerTx:t,gasUsed:n,queryFee:o,isInitiator:s}={}){const c=(0,r.pj)(e);if(c.tag===a.vw.SignedTx)throw new i.qw("Transaction shouldn't be a SignedTx, use `getExecutionCostBySignedTx` instead");let u=0n;return"fee"in c&&"freeloader"!==t&&(u+=BigInt(c.fee)),c.tag===a.vw.NameClaimTx&&(u+=BigInt(c.nameFee)),c.tag===a.vw.OracleQueryTx&&(u+=BigInt(c.queryFee)),c.tag===a.vw.OracleRespondTx&&(u-=BigInt(null!==o&&void 0!==o?o:0)),c.tag===a.vw.ChannelSettleTx&&(!0===s&&(u-=BigInt(c.initiatorAmountFinal)),!1===s&&(u-=BigInt(c.responderAmountFinal))),c.tag!==a.vw.SpendTx&&c.tag!==a.vw.ContractCreateTx&&c.tag!==a.vw.ContractCallTx&&c.tag!==a.vw.ChannelDepositTx||"fee-payer"===t||(u+=BigInt(c.amount)),c.tag===a.vw.ContractCreateTx&&(u+=BigInt(c.deposit)),c.tag!==a.vw.ContractCreateTx&&c.tag!==a.vw.ContractCallTx&&c.tag!==a.vw.GaAttachTx&&c.tag!==a.vw.GaMetaTx||"freeloader"===t||(u+=BigInt(c.gasPrice)*BigInt(null!==n&&void 0!==n?n:c.gasLimit)),c.tag!==a.vw.GaMetaTx&&c.tag!==a.vw.PayingForTx||(u+=l((0,r.pr)(c.tx.encodedTx),c.tag===a.vw.PayingForTx?{innerTx:"fee-payer"}:{})),u}function u(e,t,n){const u=(0,r.pj)(e,a.vw.SignedTx);if(u.encodedTx.tag===a.vw.GaMetaTx)return l((0,r.pr)(u.encodedTx),n);const d=(0,r.pr)(u.encodedTx),h=(0,c.A)(d),[f,A]=[!0,!1].map(e=>(0,o.Od)((0,s.J)(d,t,e),u.signatures[0],h));if(!f&&!A)throw new i.Jn("Can't verify signature");return l((0,r.pr)(u.encodedTx),{...f&&{innerTx:"freeloader"},...n})}async function d(e,t,{isMined:n,...o}={}){let s=(0,r.pj)(e);const c=s.tag===a.vw.SignedTx,d=c&&!0===n&&(0,r.BN)(e);if(s.tag===a.vw.SignedTx&&(s=s.encodedTx),null==o.gasUsed&&!1!==d&&[a.vw.ContractCreateTx,a.vw.ContractCallTx,a.vw.GaAttachTx,a.vw.GaMetaTx].includes(s.tag)){const{callInfo:e,gaInfo:n}=await t.getTransactionInfoByHash(d),r=null!==e&&void 0!==e?e:n;if(null==r)throw new i.Gd(`callInfo and gaInfo is not available for transaction ${d}`);o.gasUsed=r.gasUsed}if(null==o.queryFee&&a.vw.OracleRespondTx===s.tag&&(o.queryFee=(await t.getOracleByPubkey(s.oracleId)).queryFee.toString()),null==o.isInitiator&&a.vw.ChannelSettleTx===s.tag&&!0!==n){const{initiatorId:e}=await t.getChannelByPubkey(s.channelId);o.isInitiator=s.fromId===e}return c?u(e,await t.getNetworkId(),o):l(e,o)}},88882:(e,t,n)=>{"use strict";n.d(t,{D4:()=>v,lF:()=>x});var r=n(48287),a=n(66339),o=n(24107),s=n(55719),i=n(68156),c=n(35166);function l(e){return(new o).update(e).digest()}const u=[c.W.ContractBytearray,c.W.ContractStoreKey,c.W.ContractStoreValue,c.W.Transaction,c.W.OracleQuery,c.W.OracleResponse,c.W.State,c.W.Poi,c.W.StateTrees,c.W.CallStateTree,c.W.Bytearray],d=[c.W.KeyBlockHash,c.W.MicroBlockHash,c.W.BlockPofHash,c.W.BlockTxHash,c.W.BlockStateHash,c.W.Channel,c.W.ContractAddress,c.W.TxHash,c.W.OracleAddress,c.W.OracleQueryId,c.W.AccountAddress,c.W.AccountSecretKey,c.W.Signature,c.W.Commitment,c.W.PeerPubkey,c.W.Name],h={[c.W.KeyBlockHash]:32,[c.W.MicroBlockHash]:32,[c.W.BlockPofHash]:32,[c.W.BlockTxHash]:32,[c.W.BlockStateHash]:32,[c.W.Channel]:32,[c.W.ContractAddress]:32,[c.W.TxHash]:32,[c.W.OracleAddress]:32,[c.W.OracleQueryId]:32,[c.W.AccountAddress]:32,[c.W.AccountSecretKey]:32,[c.W.Signature]:64,[c.W.Commitment]:32,[c.W.PeerPubkey]:32,[c.W.State]:32};function f(e,t){if(!(0,i.Uu)(t,h))return;const n=h[t];if(null!=n&&e.length!==n)throw new s.P3(`Payload should be ${n} bytes, got ${e.length} instead`)}const A=e=>l(l(e)).slice(0,4),w=e=>(0,i.wh)([e,A(e)]);function p(e){const t=e.slice(0,-4);if(!A(t).equals(e.slice(-4)))throw new s.je;return t}const g={encode:e=>w(e).toString("base64"),decode:e=>p(r.Buffer.from(e,"base64"))},m={encode:e=>a.A.encode(w(e)),decode:e=>p(r.Buffer.from(a.A.decode(e)))},y=e=>{const t=u.find(t=>t===e);if(null!=t)return[t,g];const n=d.find(t=>t===e);if(null!=n)return[n,m];throw new s.c1("prefix",`one of ${[...d,...u].join(", ")}`,e)};function v(e){const[t,n,r]=e.split("_");if(null==n)throw new s.Xc(`Encoded string missing payload: ${e}`);if(null!=r)throw new s.Xc(`Encoded string have extra parts: ${e}`);const[a,o]=y(t),i=o.decode(n);return f(i,a),i}function x(e,t){const[,n]=y(t);return f(e,t),`${t}_${n.encode(e)}`}},90185:(e,t,n)=>{"use strict";n.d(t,{R:()=>a,q:()=>o});var r=n(55719);function a(e){return new Proxy({},Object.fromEntries(["apply","construct","defineProperty","deleteProperty","getOwnPropertyDescriptor","getPrototypeOf","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf","get","has"].map(t=>[t,(n,...a)=>{const o=e();if(null==o)throw new r.c1("wrapped value","defined",o);if("get"===t&&"_wrappedValue"===a[0])return o;const s=Reflect[t](o,...a);return"function"===typeof s&&"get"===t?s.bind(o):s}])))}function o(e){var t;return null!==(t=e._wrappedValue)&&void 0!==t?t:e}},91454:(e,t,n)=>{"use strict";n.d(t,{xD:()=>te,pr:()=>X,B4:()=>Z,BN:()=>ee,_w:()=>J,pj:()=>Y});var r=n(35166),a=n(88882),o=n(16341),s=n(8204),i=n(94465),c=n(78910),l=n(12075),u=n(53234),d=n(15234),h=n(65072),f=n(73106),A=n(94373),w=n(51902),p=n(16381),g=n(34743),m=n(48287);const y={serialize(e){return m.Buffer.from(e)},deserialize(e){return e.toString()}},v={serialize(e){return y.serialize(e)},deserialize(e){return y.deserialize(e)}};var x=n(60346),T=n(64224),C=n(55719);const b={...u.A,serializeAettos(e,t){const n=(0,T.YQ)(t.name),r=new x.A(null!==e&&void 0!==e?e:n);if(n.gt(r))throw new C.ZB(r,n);return r.toFixed()},serialize(e,t,n){return u.A.serialize.call(this,e,t,n)}};var W=n(99369),I=n(68156),B=n(82766);function E(e){return{...B.A,serialize(e,{tag:t}){if(s.vw.GaAttachTx===t&&1!==e)throw new C.c1("nonce","equal 1 if GaAttachTx",e);return B.A.serialize(e)},async prepare(t,n,r){if(null!=t)return t;const{onNode:a,strategy:o}=r,s=r[e],i="provided (or provide `nonce` instead)";if(null==a)throw new C.c1("onNode",i,a);if(null==s)throw new C.c1("senderId",i,s);return(await a.getAccountNextNonce(s.replace(/^ok_/,"ak_"),{strategy:o}).catch(e=>{if(!(0,I.PI)(e))throw e;return{nextNonce:1}})).nextNonce},senderKey:e}}var k=n(84686);const S={...u.A,async prepare(e,t,n){if(null!=e)return e;const{onNode:r,oracleId:a}=n,o="provided (or provide `queryFee` instead)";if(null==r)throw new C.c1("onNode",o,r);if(null==a)throw new C.c1("oracleId",o,a);return(await r.getOracleByPubkey(a)).queryFee.toString()}};var N=n(80364),$=n(53624),O=n(3125);function D(e){return{serialize(t,{buildTx:n}){return ArrayBuffer.isView(t)?m.Buffer.from(t):"string"===typeof t&&t.startsWith("tx_")?(0,a.D4)(t):(0,a.D4)(n({...t,...null!=e&&{tag:e}}))},deserialize(t,{unpackTx:n}){return n((0,a.lF)(t,r.W.Transaction),e)}}}var M=n(1889);const P={...B.A,serialize(e){return B.A.serialize(null!==e&&void 0!==e?e:0)},async prepare(e,t,{onNode:n,absoluteTtl:r,_isInternalBuild:a,...o}){if(!0!==r&&0!==e&&(null!=e||!0===a)){if(null==n)throw new C.c1("onNode","provided",n);e=(null!==e&&void 0!==e?e:3)+await(0,M.getHeight)({...o,onNode:n,cached:!0})}return e}};var _=n(46581);function F(e,t){return{...t,serialize(n,r){return t.serialize(null!==n&&void 0!==n?n:e,r)}}}function z(e,t){return{...t,serialize(n,r,a){return t.serialize(e(n),r,a)}}}var j=n(30683);let V=function(e){return e[e["delta"]=0]="delta",e[e["block"]=1]="block",e}({});const R=D(),G=D(s.vw.SignedTx),U=(0,f.A)(j.D.TreesPoi),q=F(3600,B.A),H=z(e=>{const t=18e4;if(null!==e&&void 0!==e||(e=t),e>=1&&e<=t)return e;throw new C.c1("nameTtl",`a number between 1 and ${t} blocks`,e)},B.A),L=[{tag:(0,$.A)(s.vw.SignedTx),version:(0,$.A)(1,!0),signatures:(0,l.A)(N.A),encodedTx:R},{tag:(0,$.A)(s.vw.SpendTx),version:(0,$.A)(1,!0),senderId:(0,c.A)(r.W.AccountAddress),recipientId:(0,c.A)(r.W.AccountAddress,r.W.ContractAddress,r.W.Name),amount:u.A,fee:w.A,ttl:P,nonce:E("senderId"),payload:(0,h.A)(r.W.Bytearray,!0)},{tag:(0,$.A)(s.vw.NamePreclaimTx),version:(0,$.A)(1,!0),accountId:(0,c.A)(r.W.AccountAddress),nonce:E("accountId"),commitmentId:(0,c.A)(r.W.Commitment),fee:w.A,ttl:P},{tag:(0,$.A)(s.vw.NameClaimTx),version:(0,$.A)(2,!0),accountId:(0,c.A)(r.W.AccountAddress),nonce:E("accountId"),name:v,nameSalt:F(0,_.A),nameFee:b,fee:w.A,ttl:P},{tag:(0,$.A)(s.vw.NameUpdateTx),version:(0,$.A)(1,!0),accountId:(0,c.A)(r.W.AccountAddress),nonce:E("accountId"),nameId:W.A,nameTtl:H,pointers:(0,k.A)(!1),clientTtl:q,fee:w.A,ttl:P},{tag:(0,$.A)(s.vw.NameUpdateTx),version:(0,$.A)(2),accountId:(0,c.A)(r.W.AccountAddress),nonce:E("accountId"),nameId:W.A,nameTtl:H,pointers:(0,k.A)(!0),clientTtl:q,fee:w.A,ttl:P},{tag:(0,$.A)(s.vw.NameTransferTx),version:(0,$.A)(1,!0),accountId:(0,c.A)(r.W.AccountAddress),nonce:E("accountId"),nameId:W.A,recipientId:(0,c.A)(r.W.AccountAddress,r.W.Name),fee:w.A,ttl:P},{tag:(0,$.A)(s.vw.NameRevokeTx),version:(0,$.A)(1,!0),accountId:(0,c.A)(r.W.AccountAddress),nonce:E("accountId"),nameId:W.A,fee:w.A,ttl:P},{tag:(0,$.A)(s.vw.ContractCreateTx),version:(0,$.A)(1,!0),ownerId:(0,c.A)(r.W.AccountAddress),nonce:E("ownerId"),code:(0,h.A)(r.W.ContractBytearray),ctVersion:d.Ay,fee:w.A,ttl:P,deposit:z((e=0)=>{if(0===+e)return e;throw new C.c1("deposit","equal 0 (because is not refundable)",e)},u.A),amount:u.A,gasLimit:p.A,gasPrice:g.A,callData:(0,h.A)(r.W.ContractBytearray)},{tag:(0,$.A)(s.vw.ContractCallTx),version:(0,$.A)(1,!0),callerId:(0,c.A)(r.W.AccountAddress),nonce:E("callerId"),contractId:(0,c.A)(r.W.ContractAddress,r.W.Name),abiVersion:i.A,fee:w.A,ttl:P,amount:u.A,gasLimit:p.A,gasPrice:g.A,callData:(0,h.A)(r.W.ContractBytearray)},{tag:(0,$.A)(s.vw.OracleRegisterTx),version:(0,$.A)(1,!0),accountId:(0,c.A)(r.W.AccountAddress),nonce:E("accountId"),queryFormat:O.A,responseFormat:O.A,queryFee:u.A,oracleTtlType:F(V.delta,(0,A.A)(V)),oracleTtlValue:F(500,B.A),fee:w.A,ttl:P,abiVersion:i.A},{tag:(0,$.A)(s.vw.OracleExtendTx),version:(0,$.A)(1,!0),oracleId:(0,c.A)(r.W.OracleAddress,r.W.Name),nonce:E("oracleId"),oracleTtlType:F(V.delta,(0,A.A)(V)),oracleTtlValue:F(500,B.A),fee:w.A,ttl:P},{tag:(0,$.A)(s.vw.OracleQueryTx),version:(0,$.A)(1,!0),senderId:(0,c.A)(r.W.AccountAddress),nonce:E("senderId"),oracleId:(0,c.A)(r.W.OracleAddress,r.W.Name),query:O.A,queryFee:S,queryTtlType:F(V.delta,(0,A.A)(V)),queryTtlValue:F(10,B.A),responseTtlType:F(V.delta,(0,A.A)(V)),responseTtlValue:F(10,B.A),fee:w.A,ttl:P},{tag:(0,$.A)(s.vw.OracleRespondTx),version:(0,$.A)(1,!0),oracleId:(0,c.A)(r.W.OracleAddress),nonce:E("oracleId"),queryId:(0,h.A)(r.W.OracleQueryId),response:O.A,responseTtlType:F(V.delta,(0,A.A)(V)),responseTtlValue:F(10,B.A),fee:w.A,ttl:P},{tag:(0,$.A)(s.vw.ChannelCreateTx),version:(0,$.A)(2,!0),initiator:(0,c.A)(r.W.AccountAddress),initiatorAmount:_.A,responder:(0,c.A)(r.W.AccountAddress),responderAmount:_.A,channelReserve:_.A,lockPeriod:_.A,ttl:P,fee:w.A,initiatorDelegateIds:(0,l.A)((0,c.A)(...c.o)),responderDelegateIds:(0,l.A)((0,c.A)(...c.o)),stateHash:(0,h.A)(r.W.State),nonce:E("initiator")},{tag:(0,$.A)(s.vw.ChannelCloseMutualTx),version:(0,$.A)(1,!0),channelId:(0,c.A)(r.W.Channel),fromId:(0,c.A)(r.W.AccountAddress),initiatorAmountFinal:_.A,responderAmountFinal:_.A,ttl:P,fee:w.A,nonce:E("fromId")},{tag:(0,$.A)(s.vw.ChannelCloseSoloTx),version:(0,$.A)(1,!0),channelId:(0,c.A)(r.W.Channel),fromId:(0,c.A)(r.W.AccountAddress),payload:(0,h.A)(r.W.Transaction),poi:U,ttl:P,fee:w.A,nonce:E("fromId")},{tag:(0,$.A)(s.vw.ChannelSlashTx),version:(0,$.A)(1,!0),channelId:(0,c.A)(r.W.Channel),fromId:(0,c.A)(r.W.AccountAddress),payload:(0,h.A)(r.W.Transaction),poi:U,ttl:P,fee:w.A,nonce:E("fromId")},{tag:(0,$.A)(s.vw.ChannelDepositTx),version:(0,$.A)(1,!0),channelId:(0,c.A)(r.W.Channel),fromId:(0,c.A)(r.W.AccountAddress),amount:_.A,ttl:P,fee:w.A,stateHash:(0,h.A)(r.W.State),round:B.A,nonce:E("fromId")},{tag:(0,$.A)(s.vw.ChannelWithdrawTx),version:(0,$.A)(1,!0),channelId:(0,c.A)(r.W.Channel),toId:(0,c.A)(r.W.AccountAddress),amount:_.A,ttl:P,fee:w.A,stateHash:(0,h.A)(r.W.State),round:B.A,nonce:E("fromId")},{tag:(0,$.A)(s.vw.ChannelSettleTx),version:(0,$.A)(1,!0),channelId:(0,c.A)(r.W.Channel),fromId:(0,c.A)(r.W.AccountAddress),initiatorAmountFinal:_.A,responderAmountFinal:_.A,ttl:P,fee:w.A,nonce:E("fromId")},{tag:(0,$.A)(s.vw.ChannelForceProgressTx),version:(0,$.A)(1,!0),channelId:(0,c.A)(r.W.Channel),fromId:(0,c.A)(r.W.AccountAddress),payload:(0,h.A)(r.W.Transaction),round:B.A,update:(0,h.A)(r.W.ContractBytearray),stateHash:(0,h.A)(r.W.State),offChainTrees:(0,h.A)(r.W.StateTrees),ttl:P,fee:w.A,nonce:E("fromId")},{tag:(0,$.A)(s.vw.ChannelOffChainTx),version:(0,$.A)(2,!0),channelId:(0,c.A)(r.W.Channel),round:B.A,stateHash:(0,h.A)(r.W.State)},{tag:(0,$.A)(s.vw.ChannelSnapshotSoloTx),version:(0,$.A)(1,!0),channelId:(0,c.A)(r.W.Channel),fromId:(0,c.A)(r.W.AccountAddress),payload:(0,h.A)(r.W.Transaction),ttl:P,fee:w.A,nonce:E("fromId")},{tag:(0,$.A)(s.vw.GaAttachTx),version:(0,$.A)(1,!0),ownerId:(0,c.A)(r.W.AccountAddress),nonce:E("ownerId"),code:(0,h.A)(r.W.ContractBytearray),authFun:N.A,ctVersion:d.Ay,fee:w.A,ttl:P,gasLimit:p.A,gasPrice:g.A,callData:(0,h.A)(r.W.ContractBytearray)},{tag:(0,$.A)(s.vw.GaMetaTx),version:(0,$.A)(2,!0),gaId:(0,c.A)(r.W.AccountAddress),authData:(0,h.A)(r.W.ContractBytearray),abiVersion:i.A,fee:w.A,gasLimit:p.A,gasPrice:g.A,tx:G},{tag:(0,$.A)(s.vw.PayingForTx),version:(0,$.A)(1,!0),payerId:(0,c.A)(r.W.AccountAddress),nonce:E("payerId"),fee:w.A,tx:G}];var K=n(55636),Q=n(24377);function J(e,t){return(0,K._w)(L,s.vw,e,t)}function X(e){return(0,K.RM)(L,s.vw,e,{unpackTx:Y,buildTx:X,rebuildTx:t=>X({...e,...t}),packEntry:Q.A},r.W.Transaction)}async function Z(e){return await Promise.all(J(e.tag,e.version).map(async([t,n])=>{null!=n.prepare&&(e[t]=await n.prepare(e[t],e,e))})),X(e)}function Y(e,t){return(0,K.Qc)(L,s.vw,e,t,{unpackTx:Y,unpackEntry:Q.$})}function ee(e){const t="string"===typeof e&&e.startsWith("tx_")?(0,a.D4)(e):e;return(0,a.lF)((0,o.tW)(t),r.W.TxHash)}function te(e){let t=Y(e);if(s.vw.SignedTx===t.tag&&(t=t.encodedTx),s.vw.ContractCreateTx!==t.tag&&s.vw.GaAttachTx!==t.tag)throw new C.c1("contractTx","a contractCreateTx or gaAttach",t.tag);return(0,T.sP)(t.ownerId,t.nonce)}},94373:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(48287),a=n(55719),o=n(68156);function s(e){const t=Object.values(e).filter(e=>"number"===typeof e);return{serialize(e){if("number"!==typeof e)throw new a.c1("value","to be a number",e);if(e>255)throw new a.c1("value","to be less than 256",e);if(!(0,o.ET)(e,t))throw new a.c1("value","to be a value of Enum",e);return r.Buffer.from([e])},deserialize(e){if(1!==e.length)throw new a.c1("buffer","to have single element",e.length);const n=e[0];if(!(0,o.ET)(n,t))throw new a.c1("value","to be a value of Enum",n);return n}}}},94465:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(48287),a=n(8204),o=n(15234);const s={_getProtocolDetails(e,t){const n=a.vw.ContractCallTx===t||a.vw.GaMetaTx===t?"contract-call":"oracle-call";return(0,o.R9)(e,n).abiVersion},serialize(e,{tag:t},{consensusProtocolVersion:n=a.sF.Ceres}){const o=null!==e&&void 0!==e?e:this._getProtocolDetails(n,t);return r.Buffer.from([o])},async prepare(e,{tag:t},n){return null!=e?e:null==n.consensusProtocolVersion&&2!==Object.keys(a.sF).length&&null!=n.onNode?this._getProtocolDetails((await n.onNode.getNodeInfo()).consensusProtocolVersion,t):void 0},deserialize(e){return e[0]}}},96615:(e,t,n)=>{"use strict";n.d(t,{No:()=>l});var r=n(48287),a=n(82341),o=n(88882);const s=e=>r.Buffer.from(e).toString("base64").replaceAll("/","_").replaceAll("+","-").replace(/=+$/,""),i=e=>{var t;return s(null!==(t=a(e))&&void 0!==t?t:"")},c="eyJhbGciOiJFZERTQSIsInR5cCI6IkpXVCJ9";async function l(e,t){const n={...e};"sub_jwk"in n||(n.sub_jwk={kty:"OKP",crv:"Ed25519",x:s((0,o.D4)(t.address))}),void 0===n.sub_jwk&&delete n.sub_jwk;const r=`${c}.${i(n)}`,a=await t.unsafeSign(r);return`${r}.${s(a)}`}},97170:(e,t,n)=>{"use strict";n.d(t,{j8:()=>s,ej:()=>c});var r=n(60346);const a=e=>"bigint"===typeof e||["number","object","string"].includes(typeof e)&&(!isNaN(e)||Number.isInteger(e)||r.A.isBigNumber(e));var o=n(55719);let s=function(e){return e["AE"]="ae",e["MILI_AE"]="miliAE",e["MICRO_AE"]="microAE",e["NANO_AE"]="nanoAE",e["PICO_AE"]="picoAE",e["FEMTO_AE"]="femtoAE",e["AETTOS"]="aettos",e}({});const i={[s.AE]:0,[s.MILI_AE]:-3,[s.MICRO_AE]:-6,[s.NANO_AE]:-9,[s.PICO_AE]:-12,[s.FEMTO_AE]:-15,[s.AETTOS]:-18},c=(e,{denomination:t=s.AETTOS,targetDenomination:n=s.AETTOS})=>{if(!a(e))throw new o.c1("value","a number",e);return new r.A("bigint"===typeof e?e.toString():e).shiftedBy(i[t]-i[n]).toFixed()}},99369:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(64224),a=n(78910),o=n(35166);const s=(0,a.A)(o.W.Name),i={...s,serialize(e){return s.serialize((0,r.Eo)(e)?(0,r.bt)(e):e)}}}}]);