"use strict";(self["webpackChunksuperhero_wallet"]=self["webpackChunksuperhero_wallet"]||[]).push([[3522],{2915:(e,t,n)=>{n.d(t,{A:()=>c});var a=n(20641),r=n(90033);function s(e,t,n,s,o,l){var i=(0,a.g2)("BtnPlain");return(0,a.uX)(),(0,a.Wv)(i,{class:(0,r.C4)(["max-button",{chosen:e.isMax}]),text:e.$t("common.max"),onClick:t[0]||(t[0]=function(t){return e.$emit("click")})},null,8,["class","text"])}var o=n(77389);const l=(0,a.pM)({name:"BtnMaxAmount",components:{BtnPlain:o.A},props:{isMax:Boolean},emits:["click"]});var i=n(66262);const u=(0,i.A)(l,[["render",s],["__scopeId","data-v-a1d25678"]]),c=u},10483:(e,t,n)=>{n.d(t,{A:()=>f});n(62010);var a=n(20641),r={class:"transfer-send-base"},s={class:"account-row"};function o(e,t,n,o,l,i){var u=(0,a.g2)("ModalHeader"),c=(0,a.g2)("AccountItem"),d=(0,a.g2)("TokenAmount"),p=(0,a.g2)("DetailsItem");return(0,a.uX)(),(0,a.CE)("div",r,[e.$slots.header?(0,a.RG)(e.$slots,"header",{key:0},void 0,!0):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.bF)(u,{title:e.customTitle||e.$t("modals.send.sendTitle")},null,8,["title"]),(0,a.Lk)("div",s,[(0,a.bF)(c,{address:e.activeAccount.address,protocol:e.activeAccount.protocol,name:e.activeAccount.name,size:"md"},null,8,["address","protocol","name"])])],64)),(0,a.RG)(e.$slots,"recipient",{},void 0,!0),(0,a.RG)(e.$slots,"amount",{},void 0,!0),(0,a.RG)(e.$slots,"extra",{},void 0,!0),(0,a.bF)(p,{label:e.maxFee?e.$t("transaction.estimatedFee"):e.$t("transaction.fee")},{value:(0,a.k6)(function(){return[(0,a.bF)(d,{amount:e.fee,symbol:e.feeSymbol,protocol:e.protocol,"blink-on-change":"","data-cy":"review-fee"},null,8,["amount","symbol","protocol"])]}),_:1},8,["label"]),e.maxFee?((0,a.uX)(),(0,a.Wv)(p,{key:2,label:e.$t("transaction.maxFee")},{value:(0,a.k6)(function(){return[(0,a.bF)(d,{amount:e.maxFee,symbol:e.feeSymbol,protocol:e.protocol,"blink-on-change":"","data-cy":"review-max-fee"},null,8,["amount","symbol","protocol"])]}),_:1},8,["label"])):(0,a.Q3)("",!0)])}n(2892);var l=n(64101),i=n(18494),u=n(24977),c=n(40919),d=n(33521);const p=(0,a.pM)({name:"TransferSendFormBase",components:{ModalHeader:c.A,AccountItem:d.A,DetailsItem:i.A,TokenAmount:u.A},props:{fee:{type:Number,default:0},maxFee:{type:Number,default:void 0},feeSymbol:{type:String,required:!0},customTitle:{type:String,default:""},protocol:{type:String,required:!0}},setup:function(){var e=(0,l.oV)(),t=e.activeAccount;return{activeAccount:t}}});var v=n(66262);const m=(0,v.A)(p,[["render",o],["__scopeId","data-v-cdc4500e"]]),f=m},22915:(e,t,n)=>{n.d(t,{A:()=>A});var a=n(20641),r=n(90033),s={class:"address-container"};function o(e,t,n,o,l,i){var u=(0,a.g2)("Avatar"),c=(0,a.g2)("AddressFormatted");return(0,a.uX)(),(0,a.CE)("div",{class:(0,r.C4)(["avatar-with-chain-name",{"only-name":!e.showAddress&&!e.hideAvatar}]),style:(0,r.Tr)({"background-color":e.color})},[e.hideAvatar?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(u,(0,a.v6)({key:0},e.$attrs,{size:e.avatarSize,address:e.localChainNameAddress||e.address}),null,16,["size","address"])),(0,a.Lk)("div",s,[e.calculatedName?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,r.C4)(["address-name",{centered:e.hideAvatar}])},(0,r.v_)(e.calculatedName),3)):(0,a.Q3)("",!0),e.showAddress?((0,a.uX)(),(0,a.Wv)(c,(0,a.v6)({key:1},e.$attrs,{address:e.localChainNameAddress||e.address,class:"text-address",columns:""}),null,16,["address"])):(0,a.Q3)("",!0)])],6)}n(98992),n(54520),n(37550),n(2008),n(15086),n(62010),n(18111),n(22489),n(13579),n(26099);var l=n(96881),i=n(64101),u=n(2205),c=n(59579),d=n(64224),p=n(68683),v=n(15059);const m=(0,a.pM)({components:{AddressFormatted:v.A,Avatar:p.A},props:{address:{type:String,required:!0},name:{type:String,default:""},hideAvatar:Boolean,avatarSize:{type:String,default:"md"},protocol:{type:String,required:!0}},setup:function(e){var t=(0,i.oV)(),n=t.accountsGroupedByProtocol,r=(0,i.Gf)(),s=r.allAccounts,o=(0,c.q)(),p=o.ownedNames,v=(0,i.ci)(),m=v.multisigAccounts;function f(t){var a;return(null===(a=n.value[e.protocol])||void 0===a?void 0:a.some(function(e){return e.address===t}))||m.value.some(function(e){return e.gaAccountId===t})}var g=(0,a.EW)(function(){return s.value.filter(function(t){return t.address===e.address})[0]}),A=(0,a.EW)(function(){var t=p.value.filter(function(t){return t.name===e.name&&t.pointers.accountPubkey})[0];return t?t.pointers.accountPubkey:""}),b=(0,a.EW)(function(){var t;return e.name||A.value||(null===(t=g.value)||void 0===t?void 0:t.name)||(0,u.tg)("modals.send.recipientLabel")}),y=(0,a.EW)(function(){return!(0,d.wJ)(e.address)||A.value}),h=(0,a.EW)(function(){return e.address&&!(0,d.wJ)(e.address)&&f(e.address)||A.value?(0,l.cr)(A.value||e.address):void 0});return{showAddress:y,localChainNameAddress:A,calculatedName:b,color:h}}});var f=n(66262);const g=(0,f.A)(m,[["render",o],["__scopeId","data-v-4979f97a"]]),A=g},34620:(e,t,n)=>{n.d(t,{x:()=>b});var a=n(95383),r=n(31252),s=n(70068),o=(n(98992),n(72577),n(3949),n(81454),n(76918),n(28706),n(50113),n(51629),n(62062),n(15086),n(23288),n(62010),n(18111),n(20116),n(7588),n(61701),n(53921),n(79432),n(26099),n(27495),n(38781),n(47764),n(25440),n(42762),n(23500),n(62953),n(3296),n(27208),n(48408),n(14603),n(47566),n(98721),n(50953)),l=n(20641),i=n(73834),u=n(81268),c=n(93909),d=n(18743),p=n(96881),v=n(84560),m=n(53611),f=n(69264),g=n(96605),A=function(e,t,n,a){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,s){function o(e){try{i(a.next(e))}catch(t){s(t)}}function l(e){try{i(a["throw"](e))}catch(t){s(t)}}function i(e){e.done?n(e.value):r(e.value).then(o,l)}i((a=a.apply(e,t||[])).next())})};function b(e){var t=e.transferData,n=e.getSelectedAssetValue,b=(0,o.KR)(t),y=(0,o.KR)(null),h=(0,o.KR)(null),k=(0,i.s9)(),w=k.t,T=(0,c.U)(),S=T.openDefaultModal,_=T.openScanQrModal,x=(0,u.mN)(),C=x.errors,O=x.validate,M=x.validateField,F=(0,f.t)(),I=F.saveTransferSendFormModel,E=(0,g.S)(),D=E.accountAssets,R=(0,l.EW)(function(){return["addresses","amount"].some(function(e){return"error"===(0,p.sY)(C.value[e]).status})});function B(){b.value.payload=""}function P(e){b.value.selectedAsset=e}function $(e,t){var n,a=e.account,r=e.amount,o=e.payload,l=e.token,i={},u=t?t(l,b.value.selectedAsset):null;return u&&(i.selectedAsset=u),a&&(i.addresses=[a].concat((0,s.A)(null!==(n=b.value.addresses)&&void 0!==n?n:[]))),r&&(i.amount=r),o&&(i.payload=o),i}function L(e){return A(this,void 0,void 0,(0,r.A)().m(function t(){var a;return(0,r.A)().w(function(t){while(1)switch(t.n){case 0:return a=$(e,n),b.value=Object.assign(Object.assign({},b.value),a),t.n=1,(0,l.dY)();case 1:Object.keys(a).forEach(function(e){return M(e)});case 2:return t.a(2)}},t)}))}function W(){var e,t;return A(this,void 0,void 0,(0,r.A)().m(function n(){var o,l,i,u;return(0,r.A)().w(function(n){while(1)switch(n.n){case 0:return n.n=1,_({title:w("pages.send.scanAddress",{assetName:null===(e=b.value.selectedAsset)||void 0===e?void 0:e.name})}).then(function(e){return e})["catch"](function(e){return e instanceof m.yr&&I(b.value),null});case 1:if(o=n.v,"{"!==(null===o||void 0===o?void 0:o.trim().charAt(0))){n.n=7;break}l=null,n.p=2,l=JSON.parse(o),n.n=4;break;case 3:return n.p=3,u=n.v,d.p8||v.A.write(u),b.value.addresses=void 0,S({title:w("modals.invalid-qr-code.msg"),icon:"critical"}),n.a(2);case 4:if(i=D.value.find(function(e){var t=e.contractId;return t===l.tokenContract}),i){n.n=5;break}return b.value.addresses=void 0,S({msg:w("modals.insufficient-balance.msg")}),n.a(2);case 5:return b.value.selectedAsset=i,b.value.addresses=[l.tokenContract],b.value.amount=(0,p.Y9)(l.amount,-((null===(t=b.value.selectedAsset)||void 0===t?void 0:t.decimals)||-0)).toString(),y.value=l.invoiceId,h.value=l.invoiceContract,n.n=6,O();case 6:n.n=9;break;case 7:if(o){n.n=8;break}return n.a(2);case 8:L(Object.fromEntries((0,s.A)(new URL((0,p.Ks)(o)?o:"".concat(d.yS,"/account?account=").concat(o.replace("?","&"))).searchParams.entries()).map(function(e){var t=(0,a.A)(e,2),n=t[0],r=t[1];return[n,r]}))),y.value=null;case 9:b.value.addresses||(b.value.addresses=void 0);case 10:return n.a(2)}},n,null,[[2,3]])}))}return{formModel:b,errors:C,hasError:R,invoiceId:y,invoiceContract:h,scanTransferQrCode:W,clearPayload:B,handleAssetChange:P,validate:O,updateFormModelValues:L}}},34987:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ye});var a=n(20641);function r(e,t,n,r,s,o){var l=(0,a.g2)("TransferSendBase");return(0,a.uX)(),(0,a.Wv)(l,{protocol:e.PROTOCOLS.aeternity,"current-step":e.currentStep,"hide-arrow-send-icon":e.isMultisig,"custom-primary-button-text":e.customPrimaryButtonText,"sending-disabled":e.isSendingDisabled,onClose:e.resolve,onStepNext:e.proceedToNextStep,onStepPrev:e.editTransfer},{content:(0,a.k6)(function(){return[((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.currentStepConfig.component),{ref:"currentRenderedComponent","transfer-data":e.transferData,"onUpdate:transferData":t[0]||(t[0]=function(t){return e.transferData=t}),"is-multisig":e.isMultisig,"is-address-chain":e.isAddressChain,"is-address-url":e.isAddressUrl,onSuccess:e.currentStepConfig.onSuccess,onError:t[1]||(t[1]=function(t){return e.error=t})},null,40,["transfer-data","is-multisig","is-address-chain","is-address-url","onSuccess"]))]}),_:1},8,["protocol","current-step","hide-arrow-send-icon","custom-primary-button-text","sending-disabled","onClose","onStepNext","onStepPrev"])}var s=n(41856),o=(n(99449),n(50953)),l=n(73834),i=n(18743),u=n(96881),c=n(64101),d=n(95891),p=n(81282),v=(n(76918),n(23288),n(9868),n(26099),n(38781),n(90033)),m={class:"multisig-addresses-row"},f={key:0,class:"payload-add-wrapper"},g={class:"payload-options"};function A(e,t,n,r,s,o){var l=(0,a.g2)("ModalHeader"),i=(0,a.g2)("InfoBox"),u=(0,a.g2)("FormSelect"),c=(0,a.g2)("AccountItem"),d=(0,a.g2)("DetailsItem"),p=(0,a.g2)("TransferSendRecipient"),A=(0,a.g2)("BtnMaxAmount"),b=(0,a.g2)("TransferSendAmount"),y=(0,a.g2)("BtnText"),h=(0,a.g2)("BtnHelp"),k=(0,a.g2)("BtnIcon"),w=(0,a.g2)("PayloadDetails"),T=(0,a.g2)("TransferSendFormBase");return(0,a.uX)(),(0,a.Wv)(T,(0,a.v6)(e.$attrs,{"transfer-data":e.transferData,fee:+e.fee.toFixed(),"fee-symbol":e.AE_SYMBOL,protocol:e.PROTOCOLS.aeternity,"custom-title":e.isActiveAccountAirGap?e.$t("airGap.send.title"):void 0,class:"transfer-send-form"}),(0,a.eX)({recipient:(0,a.k6)(function(){return[(0,a.bF)(p,{modelValue:e.formModel.addresses,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.formModel.addresses=t}),errors:e.errors,"is-tip-url":e.isTipUrl,"is-url-tipping-enabled":e.isUrlTippingEnabled,"max-recipients":e.isMultisig||e.isActiveAccountAirGap||e.isUrlTippingEnabled?1:10,protocol:e.PROTOCOLS.aeternity,placeholder:e.isUrlTippingEnabled?e.$t("modals.send.recipientPlaceholderUrl"):e.$t("modals.send.recipientPlaceholder"),"validation-rules":Object.assign(Object.assign({aens_name_registered_or_address_or_url:e.isUrlTippingEnabled,aens_name_registered_or_address:!e.isUrlTippingEnabled},e.isMultisig?{address_not_same_as:[e.multisigVaultAddress,e.PROTOCOLS.aeternity]}:{}),{token_to_an_address:[!e.isAe],airgap_to_an_address:e.isActiveAccountAirGap}),onOpenQrModal:t[2]||(t[2]=function(t){return e.scanTransferQrCode()})},null,8,["modelValue","errors","is-tip-url","is-url-tipping-enabled","max-recipients","protocol","placeholder","validation-rules"])]}),amount:(0,a.k6)(function(){var n;return[(0,a.bF)(b,{modelValue:e.formModel.amount,"onUpdate:modelValue":[t[3]||(t[3]=function(t){return e.formModel.amount=t}),t[4]||(t[4]=function(t){return e.shouldUseMaxAmount=!1})],"custom-label":e.isMultisig?e.$t("modals.multisigTxProposal.amount"):"",errors:e.errors,"selected-asset":e.formModel.selectedAsset,readonly:e.isMultisig,protocol:e.PROTOCOLS.aeternity,"blink-on-change":e.shouldUseMaxAmount,"validation-rules":Object.assign(Object.assign(Object.assign(Object.assign({},+e.balance.minus(e.fee)>0&&!e.isMultisig?{max_value:e.max}:{}),e.isMultisig?{enough_ae_signer:e.fee.toString()}:{enough_coin:e.fee.toString()}),+e.balance.minus(e.fee)>0&&e.isMultisig?{max_value_vault:null===(n=e.activeMultisigAccount)||void 0===n?void 0:n.balance.toString()}:{}),{ae_min_tip_amount:e.isTipUrl}),onAssetSelected:e.handleAssetChange},{"label-after":(0,a.k6)(function(){return[e.isMultisig?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(A,{key:0,"is-max":e.shouldUseMaxAmount,onClick:e.toggleMaxAmount},null,8,["is-max","onClick"]))]}),_:1},8,["modelValue","custom-label","errors","selected-asset","readonly","protocol","blink-on-change","validation-rules","onAssetSelected"])]}),_:2},[e.isMultisig?{name:"header",fn:(0,a.k6)(function(){return[(0,a.bF)(l,{title:e.$t("modals.multisigTxProposal.title")},null,8,["title"]),e.hasMultisigTokenWarning?((0,a.uX)(),(0,a.Wv)(i,{key:0,type:e.INFO_BOX_TYPES.warning,text:e.$t("modals.multisigTxProposal.tokenWarning")},null,8,["type","text"])):(0,a.Q3)("",!0),(0,a.Lk)("div",m,[(0,a.bF)(d,{class:"multisig-address-item"},{label:(0,a.k6)(function(){return[e.multisigVaultOwnedByManyAccounts?((0,a.uX)(),(0,a.Wv)(u,{key:0,options:e.accountsAllowedToProposeTxSelectOptions,"default-text":e.$t("modals.multisigTxProposal.signingAccount"),value:e.activeAccount.address,class:"account-selector","persistent-default-text":"",unstyled:"","account-select":"",onSelect:t[0]||(t[0]=function(t){return e.selectAccount(t)})},null,8,["options","default-text","value"])):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.eW)((0,v.v_)(e.$t("modals.multisigTxProposal.signingAccount")),1)],64))]}),value:(0,a.k6)(function(){return[(0,a.bF)(c,{address:e.activeAccount.address,protocol:e.activeAccount.protocol},null,8,["address","protocol"])]}),_:1}),(0,a.bF)(d,{class:"multisig-address-item",label:e.$t("modals.multisigTxProposal.multisigVault")},{value:(0,a.k6)(function(){return[(0,a.bF)(c,{address:e.multisigVaultAddress,protocol:e.PROTOCOLS.aeternity},null,8,["address","protocol"])]}),_:1},8,["label"])])]}),key:"0"}:void 0,e.isAe?{name:"extra",fn:(0,a.k6)(function(){return[e.formModel.payload&&e.formModel.payload.length?((0,a.uX)(),(0,a.Wv)(w,{key:1,payload:e.formModel.payload,class:"payload-details"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",g,[(0,a.bF)(k,{size:"sm",dimmed:"",icon:e.EditIcon,onClick:e.editPayload},null,8,["icon","onClick"]),(0,a.bF)(k,{size:"sm","icon-variant":"danger",dimmed:"",icon:e.DeleteIcon,onClick:e.clearPayload},null,8,["icon","onClick"])])]}),_:1},8,["payload"])):((0,a.uX)(),(0,a.CE)("div",f,[(0,a.bF)(y,{icon:e.PlusCircleIcon,text:e.$t("modals.send.payload"),onClick:e.editPayload},null,8,["icon","text","onClick"]),(0,a.bF)(h,{title:e.$t("modals.payloadInfo.title"),msg:e.$t("modals.payloadInfo.msg")},null,8,["title","msg"])]))]}),key:"1"}:void 0]),1040,["transfer-data","fee","fee-symbol","protocol","custom-title"])}var b=n(31252),y=(n(98992),n(54520),n(72577),n(2008),n(50113),n(74423),n(18111),n(22489),n(20116),n(21699),n(75220)),h=n(64224),k=n(87087),w=n(34620),T=n(10483),S=n(40919),_=n(33521),x=n(24715),C=n(88712),O=n(7338),M=n(18494),F=n(96065),I=n(60447),E=n(56739),D=n(62559),R=n(2915),B=n(18381),P=n(39122),$=n(86962),L=n(46005),W=function(e,t,n,a){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,s){function o(e){try{i(a.next(e))}catch(t){s(t)}}function l(e){try{i(a["throw"](e))}catch(t){s(t)}}function i(e){e.done?n(e.value):r(e.value).then(o,l)}i((a=a.apply(e,t||[])).next())})};const G=(0,a.pM)({name:"AeTransferSendForm",components:{BtnMaxAmount:R.A,TransferSendAmount:B.A,TransferSendRecipient:D.A,DetailsItem:M.A,BtnIcon:F.A,PayloadDetails:I.A,BtnHelp:E.A,BtnText:O.A,TransferSendFormBase:T.A,InfoBox:C.A,ModalHeader:S.A,AccountItem:_.A,FormSelect:x.A},model:{prop:"transferData"},props:{transferData:{type:Object,required:!0},isMultisig:Boolean},emits:["update:transferData","success","error"],setup:function(e,t){var n=t.emit,r=(0,y.lq)(),s=(0,o.KR)(!1),l=(0,o.KR)(!1),p=(0,o.KR)(!1),v=(0,o.KR)(null),m=(0,c.U8)(),f=m.openModal,g=(0,c.ci)(),A=g.activeMultisigAccount,T=(0,c.ty)(),S=T.balance,_=(0,c.ZN)(),x=_.marketData,O=(0,c.oV)(),M=O.accounts,F=O.activeAccount,I=O.isActiveAccountAirGap,E=O.setActiveAccountByGlobalIdx,D=O.setActiveAccountByAddress,R=(0,c.Sr)(),B=R.accountAssets;function G(t,n){var a=k.C.getAdapter(i.yv.aeternity).getDefaultCoin(x.value,+S.value);return t?e.isMultisig&&![d.kf,d.cK].includes(t)?void(l.value=!0):(l.value=!1,B.value.find(function(e){return e.contractId===t})||a):n?void 0:a}var U=(0,w.x)({transferData:e.transferData,getSelectedAssetValue:G}),X=U.formModel,V=U.errors,N=U.hasError,K=U.invoiceId,Q=U.invoiceContract,j=U.clearPayload,q=U.handleAssetChange,H=U.updateFormModelValues,Y=U.scanTransferQrCode,z=(0,c.Ym)({formModel:X,multisigVault:e.isMultisig?A.value:void 0}),J=z.gasPrice,Z=z.gasUsed,ee=z.max,te=z.fee,ne=z.total,ae=(0,a.EW)(function(){var e;return null===(e=A.value)||void 0===e?void 0:e.gaAccountId}),re=(0,a.EW)(function(){var e;return(null===(e=X.value.selectedAsset)||void 0===e?void 0:e.contractId)===d.cK}),se=(0,a.EW)(function(){return!!X.value.addresses&&p.value&&(0,u.Ks)(X.value.addresses[0])&&!(0,h.wJ)(X.value.addresses[0])}),oe=M.value.filter(function(e){var t,n=e.address;return null===(t=A.value)||void 0===t?void 0:t.signers.includes(n)}),le=(0,a.EW)(function(){return(null===oe||void 0===oe?void 0:oe.length)>1}),ie=(0,a.EW)(function(){return(0,u.dZ)(oe)});function ue(){return W(this,void 0,void 0,(0,b.A)().m(function e(){return(0,b.A)().w(function(e){while(1)switch(e.n){case 0:return e.p=0,e.n=1,f(i.kQ,{payload:X.value.payload});case 1:X.value.payload=e.v,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}))}function ce(e){e&&(D(e),X.value.amount&&v.value&&v.value.validate())}function de(){s.value=!s.value,s.value&&(X.value.amount=ee.value)}function pe(){var e=Object.assign(Object.assign({},X.value),{gasPrice:J.value,gasUsed:Z.value,fee:te.value,total:+ne.value.toFixed(),invoiceId:K.value,invoiceContract:Q.value});return n("update:transferData",e),(0,a.dY)()}function ve(){return W(this,void 0,void 0,(0,b.A)().m(function e(){return(0,b.A)().w(function(e){while(1)switch(e.n){case 0:if(N.value){e.n=2;break}return e.n=1,pe();case 1:n("success");case 2:return e.a(2)}},e)}))}return(0,a.wB)(N,function(e){return n("error",e)},{deep:!0}),(0,a.wB)(X,function(){pe()},{deep:!0}),(0,a.wB)(ee,function(e){s.value&&(X.value.amount=e)}),(0,a.wB)(F,function(){var t,n,a;e.isMultisig&&!(null===(t=A.value)||void 0===t?void 0:t.signers.includes(F.value.address))&&E(oe[0].globalIdx);var s=r.query;(0,u.DB)(s)&&(p.value=!0),H(Object.assign(Object.assign({},s),{token:s.token||(null===(a=null===(n=X.value)||void 0===n?void 0:n.selectedAsset)||void 0===a?void 0:a.contractId)}))},{deep:!0,immediate:!0}),{INFO_BOX_TYPES:C.F,AE_SYMBOL:d.kf,PROTOCOLS:i.yv,isAe:re,shouldUseMaxAmount:s,hasMultisigTokenWarning:l,multisigVaultAddress:ae,activeMultisigAccount:A,multisigVaultOwnedByManyAccounts:le,accountsAllowedToProposeTxSelectOptions:ie,formModel:X,isUrlTippingEnabled:p,fee:te,max:ee,errors:V,balance:S,isTipUrl:se,activeAccount:F,isActiveAccountAirGap:I,editPayload:ue,clearPayload:j,scanTransferQrCode:Y,handleAssetChange:q,toggleMaxAmount:de,selectAccount:ce,submit:ve,EditIcon:P.A,DeleteIcon:$.A,PlusCircleIcon:L.A}}});var U=n(66262);const X=(0,U.A)(G,[["render",A],["__scopeId","data-v-2c034ec8"]]),V=X;n(62010);var N={class:"review-tip-wrapper"},K={class:"account-info"},Q={class:"name-address-wrapper"},j={key:1},q={class:"token-amount-wrapper"},H={class:"lowercase"},Y={class:"tip-url"},z={class:"subtitle"};function J(e,t,n,r,s,o){var l=(0,a.g2)("LinkButton"),i=(0,a.g2)("i18n-t"),u=(0,a.g2)("ModalHeader"),c=(0,a.g2)("Avatar"),d=(0,a.g2)("Truncate"),p=(0,a.g2)("AddressTruncated"),m=(0,a.g2)("TokenAmount"),f=(0,a.g2)("FormTextarea");return(0,a.uX)(),(0,a.CE)("div",N,[(0,a.bF)(u,{title:e.$t("pages.send.sendingCryptoToUrl")},{subtitle:(0,a.k6)(function(){return[(0,a.bF)(i,{keypath:"pages.send.tipInfo",tag:"span",class:"subtitle",scope:"global"},{default:(0,a.k6)(function(){return[(0,a.bF)(l,{text:e.$t("pages.notifications.superhero"),href:s.AGGREGATOR_URL,class:"link"},null,8,["text","href"])]}),_:1})]}),_:1},8,["title"]),(0,a.Lk)("div",K,[(0,a.bF)(c,{address:r.activeAccount.address,size:"lg"},null,8,["address"]),(0,a.Lk)("div",Q,[r.activeAccount.name?((0,a.uX)(),(0,a.Wv)(d,{key:0,str:r.activeAccount.name},null,8,["str"])):((0,a.uX)(),(0,a.CE)("div",j,(0,v.v_)(o.getDefaultAccountLabel(r.activeAccount)),1)),(0,a.bF)(p,{"show-explorer-link":"",address:r.activeAccount.address,protocol:s.PROTOCOLS.aeternity},null,8,["address","protocol"])])]),(0,a.Lk)("span",q,[(0,a.eW)((0,v.v_)(e.$t("pages.send.sending"))+" ",1),(0,a.bF)(m,{amount:+n.transferData.amount,symbol:o.tokenSymbol,"hide-fiat":o.isAex9,protocol:s.PROTOCOLS.aeternity,"data-cy":"review-total"},null,8,["amount","symbol","hide-fiat","protocol"]),(0,a.Lk)("span",H,(0,v.v_)(e.$t("pages.send.to")),1)]),(0,a.Lk)("div",Y,(0,v.v_)(n.transferData.addresses[0]),1),(0,a.bF)(f,{modelValue:s.note,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.note=e}),size:"sm",label:e.$t("pages.send.messageUrlOwner"),message:o.noteError},{"label-after":(0,a.k6)(function(){return[(0,a.Lk)("span",{class:(0,v.C4)(["counter",{"below-zero":o.charactersLeft<0}])},(0,v.v_)(o.charactersLeft),3)]}),_:1},8,["modelValue","label","message"]),(0,a.Lk)("span",z,(0,v.v_)(e.$t("pages.tipPage.claimingExplanation")),1)])}var Z=n(58846),ee=n(18752),te=n(24977),ne=n(81500),ae=n(68683),re=n(52151),se=n(44285);const oe={name:"TransferReviewTip",components:{AddressTruncated:se.A,LinkButton:ee.A,ModalHeader:S.A,TokenAmount:te.A,FormTextarea:ne.A,Avatar:ae.A,Truncate:re.A},model:{prop:"transferData"},props:{transferData:{type:Object,required:!0}},setup:function(){var e=(0,c.oV)(),t=e.activeAccount;return{activeAccount:t}},data:function(){return{AGGREGATOR_URL:i.G9,AE_CONTRACT_ID:d.cK,PROTOCOLS:i.yv,note:"",noteMaxLength:280}},computed:{isAex9:function(){var e;return(null===(e=this.transferData)||void 0===e||null===(e=e.selectedAsset)||void 0===e?void 0:e.contractId)!==d.cK},noteError:function(){return this.note.length>this.noteMaxLength?this.$t("pages.tipPage.maxNoteLengthError"):null},charactersLeft:function(){return this.noteMaxLength-this.note.length},tokenSymbol:function(){var e;return(null===(e=this.transferData.selectedAsset)||void 0===e?void 0:e.symbol)||"-"}},watch:{noteError:function(e){this.$emit("error",!!e)},note:function(e){this.$emit("input",(0,Z.A)((0,Z.A)({},this.transferData),{},{note:e}))}},methods:{getDefaultAccountLabel:u.$W,submit:function(){this.noteError||this.$emit("success")}}},le=(0,U.A)(oe,[["render",J],["__scopeId","data-v-f2e4457a"]]),ie=le;var ue={class:"custom-header-title"},ce={key:0,class:"multisig-account"};function de(e,t,n,r,s,o){var l=(0,a.g2)("BtnHelp"),i=(0,a.g2)("AccountItem"),u=(0,a.g2)("TransferQRCodeGenerator"),c=(0,a.g2)("DetailsItem"),d=(0,a.g2)("TokenAmount"),p=(0,a.g2)("TransferReviewBase");return(0,a.uX)(),(0,a.Wv)(p,{title:e.headerTitle,subtitle:e.headerSubtitle,"without-subtitle":e.isMultisig,"sender-label":e.isMultisig?e.$t("modals.multisigTxProposal.signingAddress"):void 0,"amount-label":e.recipientsCount>1?e.$t("pages.send.singleAccountLabel"):void 0,"fee-label":e.isMultisig?e.$t("transaction.proposalTransactionFee"):void 0,"base-token-symbol":e.AE_SYMBOL,"transfer-data":e.transferData,loading:e.loading,"show-fiat":e.showTotal,protocol:e.PROTOCOLS.aeternity,"no-header-padding":e.isActiveAccountAirGap,class:"transfer-review"},(0,a.eX)({title:(0,a.k6)(function(){return[(0,a.Lk)("div",ue,[(0,a.eW)((0,v.v_)(e.headerTitle)+" ",1),e.isActiveAccountAirGap&&!e.isMultisig?((0,a.uX)(),(0,a.Wv)(l,{key:0,title:e.$t("airGap.scan.help.title"),msg:e.$t("airGap.scan.help.msg"),icon:"qr-scan","full-screen":""},null,8,["title","msg"])):(0,a.Q3)("",!0)])]}),subheader:(0,a.k6)(function(){var t;return[e.isMultisig?((0,a.uX)(),(0,a.CE)("div",ce,[(0,a.bF)(i,{address:null===(t=e.activeMultisigAccount)||void 0===t?void 0:t.gaAccountId,protocol:e.PROTOCOLS.aeternity},null,8,["address","protocol"])])):(0,a.Q3)("",!0),e.isActiveAccountAirGap&&!e.isMultisig?((0,a.uX)(),(0,a.Wv)(u,{key:1,"transfer-data":e.transferData},null,8,["transfer-data"])):(0,a.Q3)("",!0)]}),"additional-fee":(0,a.k6)(function(){return[e.isMultisig?((0,a.uX)(),(0,a.Wv)(c,{key:0,class:"details-item additional-fee",label:e.$t("transaction.fee")},{value:(0,a.k6)(function(){return[(0,a.bF)(d,{amount:+e.aettosToAe(e.AE_GET_META_TX_FEE),symbol:e.AE_SYMBOL,protocol:e.PROTOCOLS.aeternity,"high-precision":"","data-cy":"multisig-review-fee"},null,8,["amount","symbol","protocol"])]}),_:1},8,["label"])):(0,a.Q3)("",!0),e.transferData.gasUsed?((0,a.uX)(),(0,a.Wv)(c,{key:1,label:e.isMultisig?e.$t("transaction.proposalEstimatedGasUsed"):e.$t("transaction.estimatedGasUsed"),class:"details-item"},{value:(0,a.k6)(function(){return[(0,a.bF)(d,{amount:e.transferData.gasUsed,symbol:" ",protocol:e.PROTOCOLS.aeternity,"hide-fiat":""},null,8,["amount","protocol"])]}),_:1},8,["label"])):(0,a.Q3)("",!0),e.transferData.gasPrice?((0,a.uX)(),(0,a.Wv)(c,{key:2,label:e.$t("pages.transactionDetails.gasPrice"),class:"details-item"},{value:(0,a.k6)(function(){return[(0,a.bF)(d,{amount:e.transferData.gasPrice,symbol:e.AE_SYMBOL,protocol:e.PROTOCOLS.aeternity},null,8,["amount","symbol","protocol"])]}),_:1},8,["label"])):(0,a.Q3)("",!0),e.gasCost?((0,a.uX)(),(0,a.Wv)(c,{key:3,label:e.isMultisig?e.$t("transaction.proposalGasCost"):e.$t("transaction.gasCost"),class:"details-item"},{value:(0,a.k6)(function(){return[(0,a.bF)(d,{amount:+e.gasCost.toString(),symbol:e.AE_SYMBOL,protocol:e.PROTOCOLS.aeternity},null,8,["amount","symbol","protocol"])]}),_:1},8,["label"])):(0,a.Q3)("",!0)]}),total:(0,a.k6)(function(){return[e.showTotal?((0,a.uX)(),(0,a.Wv)(c,{key:0,label:e.isMultisig?e.$t("transaction.proposalTotal"):e.$t("common.total"),class:"details-item"},{value:(0,a.k6)(function(){var t;return[(0,a.bF)(d,{amount:+(null===(t=e.transferData)||void 0===t?void 0:t.total),symbol:e.AE_SYMBOL,protocol:e.PROTOCOLS.aeternity,"high-precision":"","data-cy":"review-total"},null,8,["amount","symbol","protocol"])]}),_:1},8,["label"])):(0,a.Q3)("",!0)]}),_:2},[e.isAddressUrl?{name:"recipient",fn:(0,a.k6)(function(){var t;return[(0,a.bF)(c,{"data-cy":"review-tip-url",class:"tip-url details-item",label:e.$t("pages.send.receivingUrl"),value:null===(t=e.transferData.addresses)||void 0===t?void 0:t[0]},null,8,["label","value"])]}),key:"0"}:void 0]),1032,["title","subtitle","without-subtitle","sender-label","amount-label","fee-label","base-token-symbol","transfer-data","loading","show-fiat","protocol","no-header-padding"])}var pe=n(91744),ve=(n(44114),n(2892),n(8337)),me=n(8204),fe=n(60346),ge=n(2205),Ae=n(85854),be=n(22511);const ye=JSON.parse('[{"namespace":{"name":"Option","typedefs":[]}},{"namespace":{"name":"ListInternal","typedefs":[]}},{"namespace":{"name":"List","typedefs":[]}},{"namespace":{"name":"String","typedefs":[]}},{"contract":{"functions":[{"arguments":[{"name":"_1","type":"int"},{"name":"_2","type":"int"}],"name":"set_paid","payable":false,"returns":"unit","stateful":true}],"kind":"contract_interface","name":"PoS","payable":false,"typedefs":[]}},{"contract":{"event":{"variant":[{"Transfer":["address","address","int"]},{"Allowance":["address","address","int"]},{"Burn":["address","int"]},{"Swap":["address","int"]}]},"functions":[{"arguments":[],"name":"aex9_extensions","payable":false,"returns":{"list":["string"]},"stateful":false},{"arguments":[{"name":"name","type":"string"},{"name":"decimals","type":"int"},{"name":"symbol","type":"string"},{"name":"initial_owner_balance","type":{"option":["int"]}}],"name":"init","payable":false,"returns":"FungibleTokenFull.state","stateful":false},{"arguments":[],"name":"meta_info","payable":false,"returns":"FungibleTokenFull.meta_info","stateful":false},{"arguments":[],"name":"total_supply","payable":false,"returns":"int","stateful":false},{"arguments":[],"name":"owner","payable":false,"returns":"address","stateful":false},{"arguments":[],"name":"balances","payable":false,"returns":"FungibleTokenFull.balances","stateful":false},{"arguments":[{"name":"account","type":"address"}],"name":"balance","payable":false,"returns":{"option":["int"]},"stateful":false},{"arguments":[],"name":"swapped","payable":false,"returns":{"map":["address","int"]},"stateful":false},{"arguments":[],"name":"allowances","payable":false,"returns":"FungibleTokenFull.allowances","stateful":false},{"arguments":[{"name":"allowance_accounts","type":"FungibleTokenFull.allowance_accounts"}],"name":"allowance","payable":false,"returns":{"option":["int"]},"stateful":false},{"arguments":[{"name":"from_account","type":"address"}],"name":"allowance_for_caller","payable":false,"returns":{"option":["int"]},"stateful":false},{"arguments":[{"name":"from_account","type":"address"},{"name":"to_account","type":"address"},{"name":"value","type":"int"}],"name":"transfer_allowance","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"for_account","type":"address"},{"name":"value","type":"int"}],"name":"create_allowance","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"for_account","type":"address"},{"name":"value_change","type":"int"}],"name":"change_allowance","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"for_account","type":"address"}],"name":"reset_allowance","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"to_account","type":"address"},{"name":"value","type":"int"}],"name":"transfer","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"value","type":"int"}],"name":"burn","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[],"name":"swap","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"account","type":"address"}],"name":"check_swap","payable":false,"returns":"int","stateful":true},{"arguments":[{"name":"value","type":"int"},{"name":"pos","type":"PoS"},{"name":"id","type":"int"}],"name":"burn_trigger_pos","payable":false,"returns":{"tuple":[]},"stateful":true}],"kind":"contract_main","name":"FungibleTokenFull","payable":false,"state":{"record":[{"name":"owner","type":"address"},{"name":"total_supply","type":"int"},{"name":"balances","type":"FungibleTokenFull.balances"},{"name":"meta_info","type":"FungibleTokenFull.meta_info"},{"name":"allowances","type":"FungibleTokenFull.allowances"},{"name":"swapped","type":{"map":["address","int"]}}]},"typedefs":[{"name":"meta_info","typedef":{"record":[{"name":"name","type":"string"},{"name":"symbol","type":"string"},{"name":"decimals","type":"int"}]},"vars":[]},{"name":"allowance_accounts","typedef":{"record":[{"name":"from_account","type":"address"},{"name":"for_account","type":"address"}]},"vars":[]},{"name":"balances","typedef":{"map":["address","int"]},"vars":[]},{"name":"allowances","typedef":{"map":["FungibleTokenFull.allowance_accounts","int"]},"vars":[]}]}}]');var he=n(52036),ke={class:"transfer-qr-code-generator"};function we(e,t,n,r,s,o){var l=(0,a.g2)("BtnMain"),i=(0,a.g2)("WrappedQrCode"),u=(0,a.g2)("Loader");return(0,a.uX)(),(0,a.CE)("div",ke,[e.fragments?((0,a.uX)(),(0,a.Wv)(i,{key:0,value:e.fragments,size:290,"type-number":0,"external-copied":e.copied},{default:(0,a.k6)(function(){return[(0,a.bF)(l,{class:"btn-copy",icon:e.CopyOutlinedIcon,text:e.$t("pages.send.copy"),variant:"muted",extend:"",onClick:t[0]||(t[0]=function(t){return e.copyAsSingleQR()})},null,8,["icon","text"])]}),_:1},8,["value","external-copied"])):((0,a.uX)(),(0,a.Wv)(u,{key:1}))])}var Te=n(88882),Se=n(35166),_e=n(50711),xe=n(90863),Ce=n(55312),Oe=n(34676),Me=function(e,t,n,a){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,s){function o(e){try{i(a.next(e))}catch(t){s(t)}}function l(e){try{i(a["throw"](e))}catch(t){s(t)}}function i(e){e.done?n(e.value):r(e.value).then(o,l)}i((a=a.apply(e,t||[])).next())})};const Fe=(0,a.pM)({components:{WrappedQrCode:_e.A,Loader:xe.A,BtnMain:Ce.A},props:{transferData:{type:Object,required:!0}},setup:function(e){var t=this,n=(0,o.KR)(),r=(0,c.CP)(),s=r.nodeNetworkId,l=r.getAeSdk,i=(0,c.oV)(),p=i.activeAccount,v=i.isActiveAccountAirGap,m=(0,c.gj)(),f=m.generateTransactionURDataFragments,g=(0,c.T9)(),A=g.copy,y=g.copied;function h(){A((0,u.jz)(n.value))}return(0,a.sV)(function(){return Me(t,void 0,void 0,(0,b.A)().m(function t(){var a,r,o,i,c,m,g,A,y;return(0,b.A)().w(function(t){while(1)switch(t.n){case 0:return t.n=1,l();case 1:if(o=t.v,i=e.transferData,c=i.amount,m=i.addresses,g=i.selectedAsset,c&&(null===m||void 0===m?void 0:m.length)&&g&&v.value){t.n=2;break}return t.a(2,null);case 2:return A=g.contractId===d.cK?(0,be.qX)(c):(0,u.Y9)(c,-(null!==(a=null===g||void 0===g?void 0:g.decimals)&&void 0!==a?a:0)),t.n=3,o.buildTx({tag:me.vw.SpendTx,senderId:p.value.address,recipientId:m[0],amount:new fe.A(A).toFixed().toString(),payload:(0,Te.lF)((new TextEncoder).encode(e.transferData.payload),Se.W.Bytearray)});case 3:return y=t.v,t.n=4,f(null===(r=p.value)||void 0===r?void 0:r.publicKey,y,s.value);case 4:return n.value=t.v,t.a(2,null)}},t)}))}),{fragments:n,CopyOutlinedIcon:Oe.A,copied:y,copyAsSingleQR:h}}}),Ie=(0,U.A)(Fe,[["render",we],["__scopeId","data-v-4cf5f020"]]),Ee=Ie;var De=n(84560),Re=function(e,t,n,a){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,s){function o(e){try{i(a.next(e))}catch(t){s(t)}}function l(e){try{i(a["throw"](e))}catch(t){s(t)}}function i(e){e.done?n(e.value):r(e.value).then(o,l)}i((a=a.apply(e,t||[])).next())})};const Be=(0,a.pM)({name:"AeTransferReview",components:{TokenAmount:te.A,DetailsItem:M.A,TransferQRCodeGenerator:Ee,TransferReviewBase:he.A,AccountItem:_.A,BtnHelp:E.A},model:{prop:"transferData"},props:{transferData:{type:Object,required:!0},recipientAddress:{type:String,default:null},amount:{type:Number,default:null},isMultisig:Boolean,isAddressChain:Boolean,isAddressUrl:Boolean},setup:function(e,t){var n=t.emit,r=(0,y.rd)(),s=(0,l.s9)(),p=s.t,v=(0,c.mv)(),m=v.homeRouteName,f=(0,c.si)(),g=f.openCallbackOrGoHome,A=(0,c.rb)(),h=A.addAccountPendingTransaction,w=(0,c.oV)(),T=w.activeAccount,S=w.isActiveAccountAirGap,_=(0,c.CP)(),x=_.getAeSdk,C=(0,c.ci)(),O=C.activeMultisigAccount,M=C.addTransactionToPendingMultisigAccount,F=C.updateMultisigAccounts,I=(0,c.jC)(),E=I.buildSpendTx,D=I.proposeTx,R=I.postSpendTx,B=(0,c.kz)(),P=B.getTippingContracts,$=(0,c.Y7)(),L=$.createOrChangeAllowance,W=(0,o.KR)(!1),G=(0,a.EW)(function(){var t;return(null===(t=e.transferData.addresses)||void 0===t?void 0:t.length)||1}),U=(0,a.EW)(function(){var t,n,a,r;return(null===(n=null===(t=e.transferData)||void 0===t?void 0:t.selectedAsset)||void 0===n?void 0:n.contractId)===d.cK||!!(null===(r=null===(a=e.transferData)||void 0===a?void 0:a.selectedAsset)||void 0===r?void 0:r.price)}),X=(0,a.EW)(function(){return e.isMultisig?(0,ge.tg)("modals.multisigTxProposal.title"):S.value?(0,ge.tg)("airGap.send.reviewTitle"):(0,ge.tg)("pages.send.reviewtx")}),V=(0,a.EW)(function(){return S.value?(0,ge.tg)("airGap.send.reviewSubtitle"):G.value>1?(0,ge.tg)("pages.send.multicheckalert"):(0,ge.tg)("pages.send.checkalert")}),N=(0,a.EW)(function(){return e.transferData.gasPrice&&e.transferData.gasUsed?new fe.A(e.transferData.gasPrice).multipliedBy(e.transferData.gasUsed):0});function K(e){return Re(this,void 0,void 0,(0,b.A)().m(function t(){return(0,b.A)().w(function(t){while(1)switch(t.n){case 0:return t.n=1,De.A.write({title:p("modals.transaction-failed.title"),message:e||p("modals.transaction-failed.msg"),type:"api-response",modal:!0});case 1:return t.a(2)}},t)}))}function Q(e,t,n,a,r){return Re(this,void 0,void 0,(0,b.A)().m(function s(){var o,l;return(0,b.A)().w(function(s){while(1)switch(s.n){case 0:return s.n=1,x();case 1:return o=s.v,s.n=2,ve.A.initialize(Object.assign(Object.assign({},o.getContext()),{aci:ye,address:e}));case 2:return l=s.v,s.a(2,l.burn_trigger_pos(a.toFixed(),t,n,r))}},s)}))}function j(t){var a,r=t.amount,s=t.recipient,o=t.selectedAsset,l=t.nonce;return Re(this,void 0,void 0,(0,b.A)().m(function t(){var u,c,p,v,m,f;return(0,b.A)().w(function(t){while(1)switch(t.n){case 0:if(u=o.contractId===d.cK,W.value=!0,t.p=1,null===e.transferData.invoiceId){t.n=3;break}return t.n=2,Q(o.contractId,new fe.A(r).toFixed().toString(),e.transferData.invoiceContract,e.transferData.invoiceId,{waitMined:!1,nonce:l});case 2:c=t.v,t.n=7;break;case 3:if(u){t.n=5;break}return p=k.C.getAdapter(i.yv.aeternity),t.n=4,null===(a=p.transferToken)||void 0===a?void 0:a.call(p,new fe.A(r).toFixed().toString(),s,o.contractId,{waitMined:!1,omitUnknown:!0,nonce:l});case 4:c=t.v,t.n=7;break;case 5:return v=k.C.getAdapter(i.yv.aeternity),t.n=6,v.spend(Number(r),s,{payload:e.transferData.payload,waitMined:!1,nonce:l});case 6:c=t.v;case 7:return c&&(m={hash:c.hash,pending:!0,transactionOwner:T.value.address,protocol:i.yv.aeternity,tx:{amount:Number(r),callerId:T.value.address,contractId:o.contractId,senderId:T.value.address,type:u?me.vw[me.vw.SpendTx]:me.vw[me.vw.ContractCallTx],function:d.vG.transfer,recipientId:s,arguments:[],fee:0}},h(T.value.address,m)),n("success"),t.a(2,null===c||void 0===c?void 0:c.hash);case 8:return t.p=8,f=t.v,K(f.message),t.a(2,void 0);case 9:return t.p=9,W.value=!1,t.f(9);case 10:return t.a(2)}},t,null,[[1,8,9,10]])}))}function q(t){var a=t.amount,r=t.recipient,s=t.selectedAsset,o=t.note;return Re(this,void 0,void 0,(0,b.A)().m(function t(){var l,c,p,v,m,f,A;return(0,b.A)().w(function(t){while(1)switch(t.n){case 0:return W.value=!0,t.p=1,l=null,t.n=2,P();case 2:if(c=t.v,p=c.tippingV1,v=c.tippingV2,m=v||p,s.contractId===d.cK||!v){t.n=5;break}return t.n=3,L(s.contractId,e.amount);case 3:return t.n=4,v.tip_token(r,(0,u.y5)(o),s.contractId,a);case 4:l=t.v,t.n=7;break;case 5:return t.n=6,m.tip(r,(0,u.y5)(o),{amount:a,waitMined:!1});case 6:l=t.v;case 7:f={hash:l.hash,pending:!0,protocol:i.yv.aeternity,tipUrl:r,transactionOwner:T.value.address,tx:{amount:a,callerId:T.value.address,contractId:m.$options.address,type:me.vw[me.vw.ContractCallTx],function:"tip",selectedTokenContractId:s.contractId,arguments:[],fee:0}},h(T.value.address,f),g(!0),n("success"),t.n=10;break;case 8:return t.p=8,A=t.v,t.n=9,K(A.message);case 9:g(!1),A.payload={url:r};case 10:return t.p=10,W.value=!1,t.f(10);case 11:return t.a(2)}},t,null,[[1,8,10,11]])}))}function H(){var t;return Re(this,void 0,void 0,(0,b.A)().m(function a(){var s,o,l,i;return(0,b.A)().w(function(a){while(1)switch(a.n){case 0:if(W.value=!0,a.p=1,!O.value){a.n=6;break}return a.n=2,E(O.value.gaAccountId,null===(t=e.transferData.addresses)||void 0===t?void 0:t[0],(0,be.qX)(e.transferData.amount),e.transferData.payload||void 0);case 2:return s=a.v,a.n=3,D(s,O.value.contractId);case 3:return o=a.v,l=o.proposeTxHash,O.value.pending&&M(l,O.value.gaAccountId,T.value.address),a.n=4,R(s,l);case 4:return a.n=5,F();case 5:n("success"),r.push({name:Ae.Ie});case 6:a.n=8;break;case 7:a.p=7,i=a.v,K(i.message);case 8:return a.p=8,W.value=!1,a.f(8);case 9:return a.a(2)}},a,null,[[1,7,8,9]])}))}function Y(){return Re(this,void 0,void 0,(0,b.A)().m(function t(){var a,s,o,l,i,c,p,v,f,g,A,y,h,k;return(0,b.A)().w(function(t){while(1)switch(t.n){case 0:if(!S.value||e.isMultisig){t.n=1;break}return n("success"),t.a(2);case 1:if(a=e.transferData,s=a.amount,o=a.addresses,l=a.selectedAsset,i=a.note,s&&(null===o||void 0===o?void 0:o.length)&&l){t.n=2;break}return t.a(2);case 2:if(c=l.contractId===d.cK?(0,be.qX)(s):(0,u.Y9)(s,l.decimals),!e.isMultisig){t.n=4;break}return t.n=3,H();case 3:t.n=17;break;case 4:if(!e.isAddressUrl){t.n=6;break}return t.n=5,q({amount:c,recipient:o[0],selectedAsset:l,note:i});case 5:t.n=17;break;case 6:return t.n=7,x();case 7:return v=t.v,t.n=8,v.api.getAccountByPubkey(T.value.address);case 8:h=t.v.nonce,f=h+1,g=(0,pe.A)(o),t.p=9,g.s();case 10:if((A=g.n()).done){t.n=13;break}return y=A.value,t.n=11,j({amount:c,recipient:y,selectedAsset:l,nonce:f});case 11:p=t.v,f+=1;case 12:t.n=10;break;case 13:t.n=15;break;case 14:t.p=14,k=t.v,g.e(k);case 15:return t.p=15,g.f(),t.f(15);case 16:p&&r.push({name:m.value,query:{latestTxHash:p}});case 17:return t.a(2)}},t,null,[[9,14,15,16]])}))}return{PROTOCOLS:i.yv,recipientsCount:G,gasCost:N,isActiveAccountAirGap:S,activeMultisigAccount:O,aettosToAe:be.c4,AE_SYMBOL:d.kf,AE_CONTRACT_ID:d.cK,AE_GET_META_TX_FEE:d.M4,loading:W,headerTitle:X,headerSubtitle:V,showTotal:U,submit:Y}}}),Pe=(0,U.A)(Be,[["render",de],["__scopeId","data-v-7f255cc8"]]),$e=Pe;var Le={class:"transfer-signed-tx-review"},We={class:"custom-header-title"};function Ge(e,t,n,r,s,o){var l=(0,a.g2)("BtnHelp"),i=(0,a.g2)("ModalHeader"),u=(0,a.g2)("FormScanQrResult"),c=(0,a.g2)("AvatarWithChainName"),d=(0,a.g2)("DetailsItem"),p=(0,a.g2)("TokenAmount");return(0,a.uX)(),(0,a.CE)("div",Le,[(0,a.bF)(i,{subtitle:e.$t("airGap.broadcast.subtitle"),"no-padding":""},{title:(0,a.k6)(function(){return[(0,a.Lk)("div",We,[(0,a.eW)((0,v.v_)(e.$t("airGap.broadcast.title"))+" ",1),(0,a.bF)(l,{title:e.$t("airGap.scan.help.title"),msg:e.$t("airGap.scan.help.msg"),icon:"qr-scan","full-screen":""},null,8,["title","msg"])])]}),_:1},8,["subtitle"]),(0,a.bF)(u,{modelValue:e.syncCode,"onUpdate:modelValue":[t[0]||(t[0]=function(t){return e.syncCode=t}),e.handleInput],label:e.$t("airGap.syncCode.inputLabel"),placeholder:e.$t("airGap.syncCode.inputPlaceholder"),"qr-title":e.$t("airGap.scan.title")},null,8,["modelValue","label","placeholder","qr-title","onUpdate:modelValue"]),e.transferData?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.bF)(d,{label:e.$t("pages.send.sender"),"data-cy":"review-sender"},{value:(0,a.k6)(function(){return[(0,a.bF)(c,{address:e.senderId,protocol:e.PROTOCOLS.aeternity},null,8,["address","protocol"])]}),_:1},8,["label"]),(0,a.bF)(d,{class:"details-item","data-cy":"review-recipient",label:e.$t("pages.send.recipient")},{value:(0,a.k6)(function(){return[(0,a.bF)(c,{address:e.recipientId,protocol:e.PROTOCOLS.aeternity},null,8,["address","protocol"])]}),_:1},8,["label"]),(0,a.bF)(d,{label:e.$t("common.amount"),class:"details-item"},{value:(0,a.k6)(function(){return[(0,a.bF)(p,{amount:+e.transferData.amount,symbol:e.AE_SYMBOL,protocol:e.PROTOCOLS.aeternity},null,8,["amount","symbol","protocol"])]}),_:1},8,["label"]),(0,a.bF)(d,{class:"details-item",label:e.$t("transaction.fee")},{value:(0,a.k6)(function(){return[(0,a.bF)(p,{amount:+e.transferData.fee,symbol:e.AE_SYMBOL,protocol:e.PROTOCOLS.aeternity,"high-precision":"","data-cy":"review-fee"},null,8,["amount","symbol","protocol"])]}),_:1},8,["label"]),(0,a.bF)(d,{label:e.$t("common.total"),class:"details-item"},{value:(0,a.k6)(function(){return[(0,a.bF)(p,{amount:+e.transferData.total,symbol:e.AE_SYMBOL,protocol:e.PROTOCOLS.aeternity,"high-precision":"","data-cy":"review-total"},null,8,["amount","symbol","protocol"])]}),_:1},8,["label"])],64)):(0,a.Q3)("",!0)])}var Ue=n(91454),Xe=n(22915),Ve=n(8955),Ne=function(e,t,n,a){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,s){function o(e){try{i(a.next(e))}catch(t){s(t)}}function l(e){try{i(a["throw"](e))}catch(t){s(t)}}function i(e){e.done?n(e.value):r(e.value).then(o,l)}i((a=a.apply(e,t||[])).next())})};const Ke=(0,a.pM)({name:"TransferSignedTxReview",components:{ModalHeader:S.A,AvatarWithChainName:Xe.A,DetailsItem:M.A,TokenAmount:te.A,FormScanQrResult:Ve.A,BtnHelp:E.A},emits:["success","error"],setup:function(e,t){var n=t.emit,r=(0,c.U8)(),s=r.openModal,l=(0,c.CP)(),p=l.getAeSdk,v=(0,c.gj)(),m=v.extractSignedTransactionResponseData,f=v.deserializeData,g=(0,o.KR)(),A=(0,o.KR)(),y=(0,o.KR)(),h=(0,o.KR)(),k=(0,o.KR)("");function w(e){var t=(0,Ue.pj)(e),n=t.encodedTx;if(n){A.value=null===n||void 0===n?void 0:n.recipientId,y.value=null===n||void 0===n?void 0:n.senderId;var a=new fe.A((0,be.c4)((null===n||void 0===n?void 0:n.fee)||0)),r=new fe.A((0,be.c4)((null===n||void 0===n?void 0:n.amount)||0));return{amount:(0,be.c4)((null===n||void 0===n?void 0:n.amount)||0).toString(),fee:a,total:a.plus(r).toNumber(),payload:n.payload}}}function T(){return Ne(this,void 0,void 0,(0,b.A)().m(function e(){var t,n;return(0,b.A)().w(function(e){while(1)switch(e.n){case 0:return e.p=0,e.n=1,(0,u.Bv)(k.value);case 1:t=e.v,e.n=3;break;case 2:e.p=2,e.v,t=k.value;case 3:return e.n=4,f(t);case 4:return n=e.v,e.n=5,m(n);case 5:h.value=e.v,g.value=w(h.value);case 6:return e.a(2)}},e,null,[[0,2]])}))}function S(){return Ne(this,void 0,void 0,(0,b.A)().m(function e(){var t,a,r,o,l,v,m,f,A,y,k,w,T,S,_;return(0,b.A)().w(function(e){while(1)switch(e.n){case 0:return n("success"),e.p=1,e.n=2,p();case 2:return t=e.v,a=(0,c.oV)(),r=a.activeAccount,o=(0,c.rb)(),l=o.addAccountPendingTransaction,e.n=3,t.api.postTransaction({tx:h.value});case 3:if(v=e.v,s(i.o1,{title:(0,ge.tg)("pages.send.title"),transaction:v}),m=g.value,f=m.amount,A=m.fee,y=m.selectedAsset,k=m.addresses,w=(null===y||void 0===y?void 0:y.contractId)===d.cK,f&&(null===k||void 0===k?void 0:k.length)&&y){e.n=4;break}return e.a(2);case 4:T=(null===y||void 0===y?void 0:y.contractId)===d.cK?(0,be.qX)(f):(0,u.Y9)(f,null===y||void 0===y?void 0:y.decimals),S={hash:v.txHash,pending:!0,transactionOwner:r.value.address,protocol:i.yv.aeternity,tx:{amount:Number(T),callerId:r.value.address,contractId:null===y||void 0===y?void 0:y.contractId,senderId:r.value.address,type:w?me.vw[me.vw.SpendTx]:me.vw[me.vw.ContractCallTx],function:d.vG.transfer,recipientId:k[0],arguments:[],fee:Number(A)}},l(r.value.address,S),e.n=6;break;case 5:e.p=5,_=e.v,De.A.write({title:(0,ge.tg)("modals.transaction-failed.title"),message:_.message||(0,ge.tg)("modals.transaction-failed.msg"),type:"api-response",modal:!0});case 6:return e.a(2)}},e,null,[[1,5]])}))}function _(){return Ne(this,void 0,void 0,(0,b.A)().m(function e(){return(0,b.A)().w(function(e){while(1)switch(e.n){case 0:return h.value=null,g.value=void 0,e.p=1,e.n=2,T();case 2:n("error",!1),e.n=4;break;case 3:e.p=3,e.v,n("error",!0);case 4:return e.a(2)}},e,null,[[1,3]])}))}return(0,a.sV)(function(){n("error",!0)}),{AE_SYMBOL:d.kf,AE_CONTRACT_ID:d.cK,PROTOCOLS:i.yv,transferData:g,senderId:y,recipientId:A,syncCode:k,submit:S,aettosToAe:be.c4,handleInput:_}}}),Qe=(0,U.A)(Ke,[["render",Ge],["__scopeId","data-v-2bb0078f"]]),je=Qe,qe=(0,a.pM)({name:i.iP,components:{TransferSendBase:p.A},props:Object.assign(Object.assign({},p.g),{tokenContractId:{type:String,default:null},isMultisig:Boolean}),setup:function(e){var t=(0,l.s9)(),n=t.t,r=(0,c.CP)(),p=r.isAeNodeReady,v=(0,c.Y7)(),m=v.getProtocolAvailableTokens,f=(0,c.oV)(),g=f.isActiveAccountAirGap,A=(0,o.KR)(),b=(0,o.KR)(i.x0.form),y=(0,o.KR)(!1),h=(0,o.KR)({addresses:e.address?[e.address]:[],amount:e.amount,payload:e.payload,selectedAsset:e.tokenContractId?m(i.yv.aeternity)[e.tokenContractId]:void 0}),k=(0,a.EW)(function(){var e,t;return!!(null===(t=null===(e=h.value.addresses)||void 0===e?void 0:e[0])||void 0===t?void 0:t.endsWith(d.CT))}),w=(0,a.EW)(function(){return!k.value&&h.value.addresses&&(0,u.Ks)(h.value.addresses[0])}),T=(0,a.EW)(function(){return b.value===i.x0.review&&g.value}),S=(0,a.EW)(function(){var e;return y.value||!p.value||!T.value&&(!(null===(e=h.value.addresses)||void 0===e?void 0:e.length)||!h.value.amount)}),_=(0,a.EW)(function(){return e.isMultisig?n("modals.multisigTxProposal.proposeAndApprove"):T.value?n("common.next"):""});function x(){A.value.submit()}function C(){b.value=w.value?i.x0.reviewTip:i.x0.review}function O(){b.value=i.x0.review}function M(){g.value&&!e.isMultisig?b.value=i.x0.airGapSign:e.resolve()}function F(){e.resolve()}function I(){y.value=!1,b.value=i.x0.form}var E=(0,s.A)((0,s.A)((0,s.A)((0,s.A)({},i.x0.form,{component:V,onSuccess:C}),i.x0.reviewTip,{component:ie,onSuccess:O}),i.x0.review,{component:$e,onSuccess:M}),i.x0.airGapSign,{component:je,onSuccess:F}),D=(0,a.EW)(function(){return E[b.value]});return{TRANSFER_SEND_STEPS:i.x0,PROTOCOLS:i.yv,currentRenderedComponent:A,steps:E,currentStep:b,error:y,transferData:h,currentStepConfig:D,isAddressChain:k,isAddressUrl:w,isSendingDisabled:S,customPrimaryButtonText:_,proceedToNextStep:x,editTransfer:I}}}),He=(0,U.A)(qe,[["render",r]]),Ye=He},52036:(e,t,n)=>{n.d(t,{A:()=>w});n(28706);var a=n(20641),r=n(90033),s={class:"transfer-review-base"},o={key:0},l={key:0};function i(e,t,n,i,u,c){var d,p,v,m,f,g=(0,a.g2)("ModalHeader"),A=(0,a.g2)("AvatarWithChainName"),b=(0,a.g2)("DetailsItem"),y=(0,a.g2)("TokenAmount"),h=(0,a.g2)("PayloadDetails"),k=(0,a.g2)("Loader");return(0,a.uX)(),(0,a.CE)("div",s,[(0,a.bF)(g,{title:e.title,subtitle:e.withoutSubtitle?null:e.subtitle,"no-padding":e.noHeaderPadding},{title:(0,a.k6)(function(){return[e.$slots.title?((0,a.uX)(),(0,a.CE)("div",o,[(0,a.RG)(e.$slots,"title",{},void 0,!0)])):(0,a.Q3)("",!0)]}),_:3},8,["title","subtitle","no-padding"]),(0,a.RG)(e.$slots,"subheader",{},void 0,!0),(0,a.bF)(b,{label:e.senderLabel,class:"sending-address","data-cy":"review-sender"},{value:(0,a.k6)(function(){return[(0,a.bF)(A,{address:e.activeAccount.address,protocol:e.protocol},null,8,["address","protocol"])]}),_:1},8,["label"]),e.$slots.recipient?((0,a.uX)(),(0,a.CE)("div",l,[(0,a.RG)(e.$slots,"recipient",{},void 0,!0)])):((0,a.uX)(),(0,a.Wv)(b,{key:1,class:(0,r.C4)(["details-item receiving-addresses",{"multiple-addresses":(null===(d=e.transferData.addresses)||void 0===d?void 0:d.length)>1}]),"data-cy":"review-recipient",expandable:(null===(p=e.transferData.addresses)||void 0===p?void 0:p.length)>1,label:"".concat(e.$t("pages.send.show")," ").concat(null===(v=e.transferData.addresses)||void 0===v?void 0:v.length," ").concat(e.$t("pages.send.recipients")),"expanded-label":(null===(m=e.transferData.addresses)||void 0===m?void 0:m.length)>1?"".concat(e.$t("pages.send.hide")," ").concat(null===(f=e.transferData.addresses)||void 0===f?void 0:f.length," ").concat(e.$t("pages.send.recipients")):e.$t("pages.send.recipient")},{value:(0,a.k6)(function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.transferData.addresses,function(t){return(0,a.uX)(),(0,a.CE)("div",{key:t,class:"receiving-address"},[(0,a.bF)(A,{address:t,name:e.isNameValid(t)?t:void 0,protocol:e.protocol},null,8,["address","name","protocol"])])}),128))]}),_:1},8,["class","expandable","label","expanded-label"])),(0,a.bF)(b,{label:e.amountLabel,class:"details-item"},{value:(0,a.k6)(function(){var t;return[(0,a.bF)(y,{amount:+e.transferData.amount,symbol:e.tokenSymbol,protocol:e.protocol,"hide-fiat":!e.showFiat,price:null===(t=e.transferData.selectedAsset)||void 0===t?void 0:t.price,"data-cy":"review-amount"},null,8,["amount","symbol","protocol","hide-fiat","price"])]}),_:1},8,["label"]),e.recipientsCount>1?((0,a.uX)(),(0,a.Wv)(b,{key:2,label:e.multipleAmountLabel,class:"details-item"},{value:(0,a.k6)(function(){var t;return[(0,a.bF)(y,{amount:e.multipleAmount,symbol:e.tokenSymbol,protocol:e.protocol,"hide-fiat":!e.showFiat,price:null===(t=e.transferData.selectedAsset)||void 0===t?void 0:t.price,"data-cy":"review-amount"},null,8,["amount","symbol","protocol","hide-fiat","price"])]}),_:1},8,["label"])):(0,a.Q3)("",!0),(0,a.RG)(e.$slots,"additional-fee",{},void 0,!0),(0,a.bF)(b,{class:"details-item",label:e.feeLabel},{value:(0,a.k6)(function(){return[(0,a.bF)(y,{amount:+e.transferData.fee,symbol:e.baseTokenSymbol,protocol:e.protocol,"high-precision":"","data-cy":"review-fee"},null,8,["amount","symbol","protocol"])]}),_:1},8,["label"]),(0,a.RG)(e.$slots,"total",{},void 0,!0),(0,a.bF)(h,{class:"details-item","data-cy":"review-payload",payload:e.transferData.payload},null,8,["payload"]),e.loading?((0,a.uX)(),(0,a.Wv)(k,{key:3})):(0,a.Q3)("",!0)])}var u=n(64224),c=n(64101),d=n(95891),p=n(2205),v=n(90863),m=n(18494),f=n(24977),g=n(22915),A=n(40919),b=n(60447);const y=(0,a.pM)({name:"TransferReviewBase",components:{PayloadDetails:b.A,ModalHeader:A.A,AvatarWithChainName:g.A,DetailsItem:m.A,Loader:v.A,TokenAmount:f.A},props:{title:{type:String,default:(0,p.tg)("pages.send.reviewtx")},subtitle:{type:String,default:(0,p.tg)("pages.send.checkalert")},senderLabel:{type:String,default:(0,p.tg)("pages.send.sender")},amountLabel:{type:String,default:(0,p.tg)("common.amount")},multipleAmountLabel:{type:String,default:(0,p.tg)("pages.send.multipleAccountLabel")},feeLabel:{type:String,default:(0,p.tg)("transaction.fee")},baseTokenSymbol:{type:String,required:!0},transferData:{type:Object,required:!0},protocol:{type:String,required:!0},recipientAddress:{type:String,default:null},noHeaderPadding:Boolean,withoutSubtitle:Boolean,loading:Boolean,showFiat:Boolean},setup:function(e){var t=(0,c.oV)(),n=t.activeAccount,r=(0,a.EW)(function(){return e.recipientAddress&&(0,u.wJ)(e.recipientAddress)}),s=(0,a.EW)(function(){var t;return(null===(t=e.transferData.selectedAsset)||void 0===t?void 0:t.symbol)||"-"}),o=(0,a.EW)(function(){var t;return(null===(t=e.transferData.addresses)||void 0===t?void 0:t.length)||1}),l=(0,a.EW)(function(){return o.value>1&&e.transferData.amount?+e.transferData.amount*o.value:0});return{AE_CONTRACT_ID:d.cK,isRecipientName:r,tokenSymbol:s,activeAccount:n,recipientsCount:o,multipleAmount:l,isNameValid:u.wJ}}});var h=n(66262);const k=(0,h.A)(y,[["render",i],["__scopeId","data-v-433a39e4"]]),w=k},62559:(e,t,n)=>{n.d(t,{A:()=>S});var a=n(20641),r={class:"transfer-send-recipient"},s={class:"buttons"},o={key:0,class:"status"};function l(e,t,n,l,i,u){var c=(0,a.g2)("BtnIcon"),d=(0,a.g2)("FormAccountInput"),p=(0,a.g2)("UrlStatus");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(d,{"v-model":e.modelValue,"model-value":e.modelValue,name:"addresses","data-cy":"address","show-help":"","show-message-help":"","is-recipient":"","single-default-format":1===e.maxRecipients,"is-tip-url-enabled":e.isUrlTippingEnabled,protocol:e.protocol,label:e.$t("modals.send.recipientLabel"),placeholder:e.placeholder,message:e.addressMessage,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.$emit("update:modelValue",t)}),onHelp:t[3]||(t[3]=function(t){return e.showRecipientHelp()}),onBlur:t[4]||(t[4]=function(t){return e.handleBlur(t,!0)})},{"label-after":(0,a.k6)(function(){return[(0,a.Lk)("div",s,[(0,a.bF)(c,{icon:e.AddressBookIcon,"data-cy":"address-book-button",onClick:t[0]||(t[0]=function(t){return e.selectFromAddressBook()})},null,8,["icon"]),(0,a.bF)(c,{icon:e.QrScanIcon,"data-cy":"scan-button",onClick:t[1]||(t[1]=function(t){return e.$emit("openQrModal")})},null,8,["icon"])])]}),_:1},8,["v-model","model-value","single-default-format","is-tip-url-enabled","protocol","label","placeholder","message"]),e.isTipUrl?((0,a.uX)(),(0,a.CE)("div",o,[(0,a.bF)(p,{status:e.urlStatus},null,8,["status"])])):(0,a.Q3)("",!0)])}var i=n(31252),u=n(70068),c=(n(16280),n(76918),n(2892),n(26099),n(81268)),d=n(96881),p=n(18743),v=n(64101),m=n(76329),f=n(15462),g=n(96065),A=n(5402),b=n(13039),y=n(18711),h=function(e,t,n,a){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,s){function o(e){try{i(a.next(e))}catch(t){s(t)}}function l(e){try{i(a["throw"](e))}catch(t){s(t)}}function i(e){e.done?n(e.value):r(e.value).then(o,l)}i((a=a.apply(e,t||[])).next())})};const k=(0,a.pM)({components:{FormAccountInput:y.A,UrlStatus:f.A,BtnIcon:g.A},props:{isUrlTippingEnabled:Boolean,isTipUrl:Boolean,maxRecipients:{type:Number,default:null},modelValue:{type:Array,default:function(){return[]}},placeholder:{type:String,default:""},protocol:{type:String,required:!0},validationRules:{type:Object,default:function(){return{}}},errors:{type:Object,required:!0}},emits:["openQrModal","update:modelValue"],setup:function(e,t){var n=t.emit,r=(0,a.EW)(function(){return e.protocol===p.yv.aeternity}),s=(0,v.U8)(),o=s.openModal,l=(0,v.oV)(),f=l.activeAccount,g=(0,c.Mt)("addresses",Object.assign(Object.assign(Object.assign({required:!0},e.maxRecipients?{max_recipients:e.maxRecipients}:{}),e.validationRules),{address_not_same_as:[f.value.address,e.protocol]}),{bails:!1}),y=g.value,k=g.handleBlur,w=(0,m.NC)({ensureFetchedOnInit:r.value}),T=w.getTippingUrlStatus,S=(0,a.EW)(function(){var t;return T(null===(t=e.modelValue)||void 0===t?void 0:t[0])}),_=(0,a.EW)(function(){var t=(0,d.sY)(e.errors.addresses);if("error"===t.status)return t;if(e.isTipUrl)switch(S.value){case"verified":return{status:"success",text:"",hideMessage:!0};case"not-secure":case"not-verified":return{status:"warning",text:"",hideMessage:!0};case"blacklisted":return{status:"error",text:"",hideMessage:!0};default:throw new Error("Unknown url status: ".concat(S.value))}return t});function x(){o(p.R$,{protocol:e.protocol})}function C(){return h(this,void 0,void 0,(0,i.A)().m(function t(){var a;return(0,i.A)().w(function(t){while(1)switch(t.n){case 0:return t.n=1,o(p.tA,{preSelectedAddresses:e.modelValue,allowMultiple:e.maxRecipients>1});case 1:a=t.v,a&&n("update:modelValue",(0,u.A)(a));case 2:return t.a(2)}},t)}))}return(0,a.wB)(function(){return e.modelValue},function(e){y.value=e},{immediate:!!e.modelValue.length}),{QrScanIcon:A.A,AddressBookIcon:b.A,urlStatus:S,activeAccount:f,addressMessage:_,handleBlur:k,showRecipientHelp:x,selectFromAddressBook:C}}});var w=n(66262);const T=(0,w.A)(k,[["render",l],["__scopeId","data-v-7aa56c82"]]),S=T},81282:(e,t,n)=>{n.d(t,{A:()=>b,g:()=>m});var a=n(20641),r=n(53751),s={class:"relative"};function o(e,t,n,o,l,i){var u=(0,a.g2)("BtnMain"),c=(0,a.g2)("Modal");return(0,a.uX)(),(0,a.Wv)(c,{class:"transfer-send-base","has-close-button":"","from-bottom":"","no-padding-bottom":e.currentStep===e.TRANSFER_SEND_STEPS.form,onClose:t[2]||(t[2]=function(t){return e.$emit("close")})},{footer:(0,a.k6)(function(){return[e.showEditButton?((0,a.uX)(),(0,a.Wv)(u,{key:0,variant:"muted",text:e.$t("common.edit"),class:"button-action-secondary","data-cy":"edit",onClick:t[0]||(t[0]=function(t){return e.$emit("step-prev")})},null,8,["text"])):(0,a.Q3)("",!0),(0,a.bF)(u,{class:"button-action-primary",disabled:!e.isOnline||e.sendingDisabled,icon:e.primaryButtonIcon,text:e.primaryButtonText,"data-cy":"next-step-button",onClick:t[1]||(t[1]=function(t){return e.$emit("step-next")})},null,8,["disabled","icon","text"])]}),default:(0,a.k6)(function(){return[(0,a.Lk)("div",s,[(0,a.bF)(r.eB,{name:"fade-between"},{default:(0,a.k6)(function(){return[(0,a.RG)(e.$slots,"content",{},void 0,!0)]}),_:3})])]}),_:3},8,["no-padding-bottom"])}n(74423);var l=n(73834),i=n(18743),u=n(64101),c=n(53908),d=n(5402),p=n(2677),v=n(55312),m={resolve:{type:Function,default:function(){return null}},address:{type:String,default:void 0},amount:{type:String,default:""},payload:{type:String,default:""}};const f=(0,a.pM)({name:"TransferSendBase",components:{Modal:p.A,BtnMain:v.A},props:{customPrimaryButtonText:{type:String,default:""},currentStep:{type:String,required:!0},sendingDisabled:Boolean,hideArrowSendIcon:Boolean},emits:["close","step-prev","step-next"],setup:function(e){var t=(0,l.s9)(),n=t.t,r=(0,u.w5)(),s=r.isOnline,o=(0,u.oV)(),p=o.isActiveAccountAirGap,v=(0,a.EW)(function(){return[i.x0.review,i.x0.reviewTip,i.x0.airGapSign].includes(e.currentStep)}),m=(0,a.EW)(function(){return[i.x0.review,i.x0.airGapSign].includes(e.currentStep)}),f=(0,a.EW)(function(){return e.currentStep===i.x0.review&&p.value}),g=(0,a.EW)(function(){return e.customPrimaryButtonText?e.customPrimaryButtonText:m.value?n("common.send"):n("common.next")}),A=(0,a.EW)(function(){return!m.value||f.value||e.hideArrowSendIcon?null:c.A});return{isOnline:s,primaryButtonText:g,primaryButtonIcon:A,showEditButton:v,showSendButton:m,ArrowSendIcon:c.A,QrScanIcon:d.A,TRANSFER_SEND_STEPS:i.x0}}});var g=n(66262);const A=(0,g.A)(f,[["render",o],["__scopeId","data-v-bf95a638"]]),b=A}}]);