"use strict";(self["webpackChunksuperhero_wallet"]=self["webpackChunksuperhero_wallet"]||[]).push([[9580],{17724(t,e,n){var r=n(67145);r.EthereumProtocol;var o=n(52438);o.ProtocolNotSupported,o.ProtocolVersionMismatch,o.SerializerVersionMismatch,o.TypeNotSupported;var i=n(76449);e.y=i.AeternityProtocol;var s=n(50377);s.BitcoinProtocol;var a=n(40218);a.BitcoinTestnetProtocol;var u=n(34951);u.CosmosProtocol;var c=n(57518);c.GenericERC20;var l=n(23850);l.EthereumClassicProtocol;var f=n(33248);f.EthereumRopstenProtocol;var d=n(83321);d.GroestlcoinProtocol;var h=n(56778);h.GroestlcoinTestnetProtocol;var p=n(57058);p.SubstratePayee;var v=n(70090);v.KusamaProtocol;var y=n(49146);y.PolkadotProtocol;var m=n(85457);m.SubstrateProtocol;var g=n(98086);g.TezosBTC;var b=n(3920);b.TezosFAProtocol;var w=n(11433);w.TezosStaker;var P=n(46172);P.TezosKtProtocol;var x=n(88965);x.TezosUSD;var _=n(37565);_.TezosDelegatorAction,_.TezosNetwork,_.TezosProtocol;var k=n(52213);e.Dw=k.IACMessageType;var E=n(37629);E.IACPayloadType,E.Serializer;var A=n(16775);A.isCoinlibReady;var C=n(84721);C.getProtocolByIdentifier;var S=n(86059);S.addSubProtocol,S.getSubProtocolsByIdentifier;var T=n(19459);T.addSupportedProtocol,T.supportedProtocols;var O=n(54603);O.AirGapMarketWallet;var D=n(83039);D.AirGapWallet;var B=n(49007);B.AeternityProtocolOptions,B.AeternalBlockExplorer,B.AeternityProtocolNetwork;var F=n(48779);F.AeternityCryptoClient;var N=n(74275);N.BitcoinCryptoClient;var K=n(86535);K.BitcoinProtocolNetworkExtras,K.BitcoinProtocolNetwork,K.BitcoinProtocolConfig,K.BlockcypherBlockExplorer,K.BitcoinProtocolOptions;var R=n(66953);R.CosmosCryptoClient;var M=n(66873);M.MintscanBlockExplorer,M.CosmosProtocolNetwork,M.CosmosProtocolConfig,M.CosmosProtocolOptions;var L=n(27875);L.EthereumCryptoClient;var I=n(2555);I.SubstrateCryptoClient;var j=n(36943);j.TezosCryptoClient;var H=n(50567);H.EthereumProtocolNetworkExtras,H.EtherscanBlockExplorer,H.EthereumProtocolNetwork,H.EthereumProtocolConfig,H.EthereumProtocolOptions,H.EthereumERC20ProtocolConfig,H.EthereumERC20ProtocolOptions;var G=n(42200);G.ProtocolBlockExplorer;var U=n(66408);U.NetworkType,U.ProtocolNetwork;var W=n(62487);W.GroestlcoinProtocolNetworkExtras,W.CryptoidBlockExplorer,W.GroestlcoinProtocolNetwork,W.GroestlcoinProtocolConfig,W.GroestlcoinProtocolOptions;var J=n(91775);J.SubstrateProtocolNetworkExtras,J.PolkascanBlockExplorer,J.SubstrateProtocolConfig,J.SubstrateProtocolNetwork,J.SubstrateProtocolOptions;var V=n(65050);V.KusamaProtocolNetworkExtras,V.KusamaPolkascanBlockExplorer,V.KusamaProtocolConfig,V.KusamaProtocolNetwork,V.KusamaProtocolOptions;var z=n(39082);z.PolkadotProtocolNetworkExtras,z.PolkadotPolkascanBlockExplorer,z.PolkadotProtocolConfig,z.PolkadotProtocolNetwork,z.PolkadotProtocolOptions;var q=n(33202);q.CryptoClient;var Z=n(86083);Z.TezosProtocolNetworkExtras,Z.TezblockBlockExplorer,Z.TezosProtocolNetwork,Z.TezosProtocolConfig,Z.TezosProtocolOptions;var X=n(62644);X.TezosFAProtocolConfig,X.TezosBTCProtocolConfig,X.TezosStakerProtocolConfig,X.TezosUSDProtocolConfig,X.TezosFAProtocolOptions,X.TezosFA2ProtocolConfig,X.TezosFA2ProtocolOptions;var $=n(84033);$.generateId;var Y=n(59159);e.Ji=Y.MainProtocolSymbols,Y.SubProtocolSymbols;var Q=n(6220);Q.TezosUtils;var tt=n(35312);tt.TezosFA2Protocol;var et=n(21189);et.TezosFA1Protocol;var nt=n(91219);nt.TezosFA12Protocol},92476(t,e){Object.defineProperty(e,"__esModule",{value:!0}),function(t){t["SPEND"]="Spend Transaction",t["DELEGATE"]="Delegation",t["UNDELEGATE"]="Undelegate"}(e.AirGapTransactionType||(e.AirGapTransactionType={})),function(t){t["APPLIED"]="applied",t["FAILED"]="failed"}(e.AirGapTransactionStatus||(e.AirGapTransactionStatus={}))},33202(t,e){var n=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function s(t){try{u(r.next(t))}catch(e){i(e)}}function a(t){try{u(r["throw"](t))}catch(e){i(e)}}function u(t){t.done?n(t.value):o(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.prototype.recoverPublicKeyFromSignature=function(){return n(this,void 0,void 0,function(){return r(this,function(t){throw new Error("Recovering public key from signature not supported")})})},t}();e.CryptoClient=o},52916(t,e){Object.defineProperty(e,"__esModule",{value:!0}),function(t){t["ACCOUNT"]="account",t["TOKEN"]="token"}(e.SubProtocolType||(e.SubProtocolType={}))},96152(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.getExtendedPrivateKeyFromMnemonic=function(t,e,n){throw Promise.reject("extended private key support not implemented")},t.prototype.getExtendedPrivateKeyFromHexSecret=function(t,e){throw Promise.reject("extended private key support not implemented")},t.prototype.getBalanceOfExtendedPublicKey=function(t,e){return Promise.reject("extended public balance not implemented")},t.prototype.signWithExtendedPrivateKey=function(t,e){return Promise.reject("extended private key signing for not implemented")},t.prototype.getAddressFromExtendedPublicKey=function(t,e,n){return Promise.resolve("")},t.prototype.getAddressesFromExtendedPublicKey=function(t,e,n,r){return Promise.resolve([])},t.prototype.estimateMaxTransactionValueFromExtendedPublicKey=function(t,e,n){return Promise.reject("estimating max value using extended public key not implemented")},t.prototype.estimateFeeDefaultsFromExtendedPublicKey=function(t,e,n,r){return Promise.reject("estimating fee defaults using extended public key not implemented")},t.prototype.getTransactionsFromExtendedPublicKey=function(t,e,n){return Promise.reject("fetching txs using extended public key not implemented")},t.prototype.prepareTransactionFromExtendedPublicKey=function(t,e,n,r,o){return Promise.reject("extended public key tx not implemented")},t}();e.NonExtendedProtocol=n},48779(t,e,n){var r=n(48287)["Buffer"],o=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function s(t){try{u(r.next(t))}catch(e){i(e)}}function a(t){try{u(r["throw"](t))}catch(e){i(e)}}function u(t){t.done?n(t.value):o(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(48402),u=n(33202),c=function(t){var e=r.from("‎Æternity Signed Message:\n","utf8"),n=r.from(t,"utf8");if(n.length>=253)throw new Error("message too long");return r.concat([r.from([e.length]),e,r.from([n.length]),n])},l=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.signMessage=function(t,e){return i(this,void 0,void 0,function(){var n,o;return s(this,function(i){switch(i.label){case 0:return[4,a.ready];case 1:return i.sent(),n=c(t),o=a.crypto_sign_detached(n,e.privateKey),[2,r.from(o).toString("hex")]}})})},e.prototype.verifyMessage=function(t,e,n){return i(this,void 0,void 0,function(){var o,i;return s(this,function(s){switch(s.label){case 0:return[4,a.ready];case 1:return s.sent(),o=r.from(e,"hex"),i=c(t),[2,a.crypto_sign_verify_detached(o,i,r.from(n,"hex"))]}})})},e}(u.CryptoClient);e.AeternityCryptoClient=l},76449(t,e,n){var r=n(48287)["Buffer"],o=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function s(t){try{u(r.next(t))}catch(e){i(e)}}function a(t){try{u(r["throw"](t))}catch(e){i(e)}}function u(t){t.done?n(t.value):o(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(48402),u=n(98449),c=n(21455),l=n(66029),f=n(85858),d=n(4988),h=n(30428),p=n(68719),v=n(7507),y=n(59159),m=n(63313),g=n(96152),b=n(48779),w=n(49007),P=function(t){function e(e){void 0===e&&(e=new w.AeternityProtocolOptions);var n=t.call(this)||this;return n.options=e,n.symbol="AE",n.name="æternity",n.marketSymbol="ae",n.feeSymbol="ae",n.decimals=18,n.feeDecimals=18,n.identifier=y.MainProtocolSymbols.AE,n.feeDefaults={low:"0.00021",medium:"0.000315",high:"0.00084"},n.units=[{unitSymbol:"AE",factor:"1"}],n.supportsHD=!1,n.standardDerivationPath="m/44h/457h/0h/0h/0h",n.addressIsCaseSensitive=!0,n.addressValidationPattern="^ak_+[1-9A-Za-z]{49,50}$",n.addressPlaceholder="ak_abc...",n.defaultNetworkId="ae_mainnet",n.feesURL="https://api-airgap.gke.papers.tech/fees",n}return o(e,t),e.prototype.getBlockExplorerLinkForAddress=function(t){return i(this,void 0,void 0,function(){return s(this,function(e){return[2,this.options.network.blockExplorer.getAddressLink(t)]})})},e.prototype.getBlockExplorerLinkForTxId=function(t){return i(this,void 0,void 0,function(){return s(this,function(e){return[2,this.options.network.blockExplorer.getTransactionLink(t)]})})},e.prototype.getPublicKeyFromMnemonic=function(t,e,n){return i(this,void 0,void 0,function(){var r;return s(this,function(o){return r=l.mnemonicToSeed(t,n),[2,this.getPublicKeyFromHexSecret(r,e)]})})},e.prototype.getPrivateKeyFromMnemonic=function(t,e,n){return i(this,void 0,void 0,function(){var r;return s(this,function(o){return r=l.mnemonicToSeed(t,n),[2,this.getPrivateKeyFromHexSecret(r,e)]})})},e.prototype.getPublicKeyFromHexSecret=function(t,e){return i(this,void 0,void 0,function(){var n;return s(this,function(o){return n=d.generateWalletUsingDerivationPath(r.from(t,"hex"),e).publicKey,[2,r.from(n).toString("hex")]})})},e.prototype.getPrivateKeyFromHexSecret=function(t,e){return i(this,void 0,void 0,function(){var n;return s(this,function(o){return n=d.generateWalletUsingDerivationPath(r.from(t,"hex"),e).secretKey,[2,r.from(n)]})})},e.prototype.getAddressFromPublicKey=function(t){return i(this,void 0,void 0,function(){var e;return s(this,function(n){return e=f.encode(r.from(t,"hex")),[2,"ak_"+e]})})},e.prototype.getAddressesFromPublicKey=function(t){return i(this,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return[4,this.getAddressFromPublicKey(t)];case 1:return e=n.sent(),[2,[e]]}})})},e.prototype.getTransactionsFromPublicKey=function(t,e,n){return i(this,void 0,void 0,function(){var r;return s(this,function(o){switch(o.label){case 0:return r=this.getTransactionsFromAddresses,[4,this.getAddressFromPublicKey(t)];case 1:return[2,r.apply(this,[[o.sent()],e,n])]}})})},e.prototype.getTransactionsFromAddresses=function(t,e,n){return i(this,void 0,void 0,function(){var r,o,i=this;return s(this,function(s){switch(s.label){case 0:return[4,Promise.all(t.map(function(t){var r=n?i.options.network.rpcUrl+"/middleware/transactions/account/"+t+"?page="+n.page+"&limit="+e:i.options.network.rpcUrl+"/middleware/transactions/account/"+t+"?page=1&limit="+e;return u.default.get(r)}))];case 1:return r=s.sent(),o=[].concat.apply([],r.map(function(t){return t.data||[]})),o=o.map(function(e){var n=parseInt(e.time,10),r={amount:new c.default(e.tx.amount).toString(10),fee:new c.default(e.tx.fee).toString(10),from:[e.tx.sender_id],isInbound:-1!==t.indexOf(e.tx.recipient_id),protocolIdentifier:i.identifier,network:i.options.network,to:[e.tx.recipient_id],hash:e.hash,blockHeight:e.block_height};return e.tx.payload&&(r.data=e.tx.payload),isNaN(n)||(r.timestamp=Math.round(n/1e3)),r}),[2,{transactions:o,cursor:{page:n?n.page+1:2}}]}})})},e.prototype.getPageNumber=function(t,e){return t<=0||e<0?1:1+Math.floor(e/t)},e.prototype.signWithPrivateKey=function(t,e){return i(this,void 0,void 0,function(){var n,o,i,u,c,l;return s(this,function(s){switch(s.label){case 0:return n=this.decodeTx(e.transaction),[4,a.ready];case 1:return s.sent(),o=a.crypto_sign_detached(r.concat([r.from(e.networkId),n]),t),i={tag:this.toHexBuffer(11),version:this.toHexBuffer(1),signatures:[r.from(o)],transaction:n},u=Object.keys(i).map(function(t){return i[t]}),c=h.encode(u),l="tx_"+p.default.encode(c),[2,l]}})})},e.prototype.decodeTx=function(t){var e;try{return e=p.default.decode(t.replace("tx_","")),e}catch(n){}try{return e=f.decode(t.replace("tx_","")),e}catch(n){}throw new Error("invalid TX-encoding")},e.prototype.getTransactionDetails=function(t){return i(this,void 0,void 0,function(){var e,n,r,o,i;return s(this,function(s){switch(s.label){case 0:return e=t.transaction.transaction,n=this.decodeTx(e),r=h.decode(n,!1),i={amount:new c.default(parseInt(r[4].toString("hex"),16)).toString(10),fee:new c.default(parseInt(r[5].toString("hex"),16)).toString(10)},[4,this.getAddressFromPublicKey(r[2].slice(1).toString("hex"))];case 1:return i.from=[s.sent()],i.isInbound=!1,i.protocolIdentifier=this.identifier,i.network=this.options.network,[4,this.getAddressFromPublicKey(r[3].slice(1).toString("hex"))];case 2:return i.to=[s.sent()],i.data=(r[8]||"").toString("utf8"),i.transactionDetails=t.transaction,o=i,[2,[o]]}})})},e.prototype.getTransactionDetailsFromSigned=function(t){return i(this,void 0,void 0,function(){var e,n,r;return s(this,function(o){return e=this.decodeTx(t.transaction),n=h.decode(e,!1),r={publicKey:"",transaction:{networkId:"ae_mainnet",transaction:"tx_"+p.default.encode(n[3])}},[2,this.getTransactionDetails(r)]})})},e.prototype.getBalanceOfAddresses=function(t){return i(this,void 0,void 0,function(){var e,n,r,o,i,a;return s(this,function(s){switch(s.label){case 0:e=new c.default(0),n=0,r=t,s.label=1;case 1:if(!(n<r.length))return[3,6];o=r[n],s.label=2;case 2:return s.trys.push([2,4,,5]),[4,u.default.get(this.options.network.rpcUrl+"/v2/accounts/"+o)];case 3:return i=s.sent().data,e=e.plus(new c.default(i.balance)),[3,5];case 4:if(a=s.sent(),404!==a.response.status)throw a;return[3,5];case 5:return n++,[3,1];case 6:return[2,e.toString(10)]}})})},e.prototype.getBalanceOfPublicKey=function(t){return i(this,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return[4,this.getAddressFromPublicKey(t)];case 1:return e=n.sent(),[2,this.getBalanceOfAddresses([e])]}})})},e.prototype.getBalanceOfPublicKeyForSubProtocols=function(t,e){return i(this,void 0,void 0,function(){return s(this,function(t){throw Promise.reject("get balance of sub protocols not supported")})})},e.prototype.getAvailableBalanceOfAddresses=function(t){return i(this,void 0,void 0,function(){return s(this,function(e){return[2,this.getBalanceOfAddresses(t)]})})},e.prototype.estimateMaxTransactionValueFromPublicKey=function(t,e,n){return i(this,void 0,void 0,function(){var r,o,i,a,u;return s(this,function(s){switch(s.label){case 0:return[4,this.getBalanceOfPublicKey(t)];case 1:return r=s.sent(),o=new c.default(r),void 0===n?[3,2]:(i=new c.default(n),[3,4]);case 2:return[4,this.estimateFeeDefaultsFromPublicKey(t,e,[r])];case 3:a=s.sent(),i=new c.default(a.medium).shiftedBy(this.decimals),i.gte(o)&&(i=new c.default(0)),s.label=4;case 4:return u=o.minus(i),u.isNegative()&&(u=new c.default(0)),[2,u.toFixed()]}})})},e.prototype.estimateFeeDefaultsFromPublicKey=function(t,e,n,r){return i(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,u.default.get(this.feesURL)];case 1:return[2,t.sent().data]}})})},e.prototype.prepareTransactionFromPublicKey=function(t,e,n,o,a){return i(this,void 0,void 0,function(){var i,l,d,v,y,m,g,b,w,P,x,_;return s(this,function(s){switch(s.label){case 0:return i=1,[4,this.getAddressFromPublicKey(t)];case 1:l=s.sent(),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,u.default.get(this.options.network.rpcUrl+"/v2/accounts/"+l)];case 3:return d=s.sent().data,i=d.nonce+1,[3,5];case 4:if(v=s.sent(),v.response&&404!==v.response.status)throw v;return[3,5];case 5:return m=c.default.bind,[4,this.getBalanceOfPublicKey(t)];case 6:if(y=new(m.apply(c.default,[void 0,s.sent()])),y.isLessThan(o))throw new Error("not enough balance");return g=t,b=f.decode(e[0].replace("ak_","")),w={tag:this.toHexBuffer(12),version:this.toHexBuffer(1),sender_id:r.concat([this.toHexBuffer(1),r.from(g,"hex")]),recipient_id:r.concat([this.toHexBuffer(1),b]),amount:this.toHexBuffer(new c.default(n[0])),fee:this.toHexBuffer(new c.default(o)),ttl:this.toHexBuffer(0),nonce:this.toHexBuffer(i),payload:r.from(a||"")},P=Object.keys(w).map(function(t){return w[t]}),x=h.encode(P),_="tx_"+p.default.encode(x),[2,{transaction:_,networkId:this.defaultNetworkId}]}})})},e.prototype.convertTxToBase58=function(t){return{transaction:f.encode(p.default.decode(t.transaction)),networkId:t.networkId}},e.prototype.broadcastTransaction=function(t){return i(this,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return[4,u.default.post(this.options.network.rpcUrl+"/v2/transactions",{tx:t},{headers:{"Content-Type":"application/json"}})];case 1:return e=n.sent().data,[2,e.tx_hash]}})})},e.prototype.toHexBuffer=function(t){var e=m.EthereumUtils.toHex(t).substr(2);return r.from(v.padStart(e,e.length%2===0?e.length:e.length+1,"0"),"hex")},e.prototype.signMessage=function(t,e){return i(this,void 0,void 0,function(){return s(this,function(n){return[2,(new b.AeternityCryptoClient).signMessage(t,e)]})})},e.prototype.verifyMessage=function(t,e,n){return i(this,void 0,void 0,function(){return s(this,function(r){return[2,(new b.AeternityCryptoClient).verifyMessage(t,e,n)]})})},e.prototype.getTransactionStatuses=function(t){return i(this,void 0,void 0,function(){return s(this,function(t){return[2,Promise.reject("Transaction status not implemented")]})})},e}(g.NonExtendedProtocol);e.AeternityProtocol=P},49007(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function s(t){try{u(r.next(t))}catch(e){i(e)}}function a(t){try{u(r["throw"](t))}catch(e){i(e)}}function u(t){t.done?n(t.value):o(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(66408),a="Mainnet",u="https://ae-epoch-rpc-proxy.gke.papers.tech",c="https://mainnet.aeternal.io",l=function(){function t(t){void 0===t&&(t=c),this.blockExplorer=t}return t.prototype.getAddressLink=function(t){return o(this,void 0,void 0,function(){return i(this,function(e){return[2,this.blockExplorer+"/account/transactions/"+t]})})},t.prototype.getTransactionLink=function(t){return o(this,void 0,void 0,function(){return i(this,function(e){return[2,this.blockExplorer+"/transactions/"+t]})})},t}();e.AeternalBlockExplorer=l;var f=function(t){function e(e,n,r,o,i){return void 0===e&&(e=a),void 0===n&&(n=s.NetworkType.MAINNET),void 0===r&&(r=u),void 0===o&&(o=new l),void 0===i&&(i=void 0),t.call(this,e,n,r,o,i)||this}return r(e,t),e}(s.ProtocolNetwork);e.AeternityProtocolNetwork=f;var d=function(){function t(t,e){void 0===t&&(t=new f),void 0===e&&(e=void 0),this.network=t,this.config=e}return t}();e.AeternityProtocolOptions=d},74275(t,e,n){var r=n(48287)["Buffer"],o=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function s(t){try{u(r.next(t))}catch(e){i(e)}}function a(t){try{u(r["throw"](t))}catch(e){i(e)}}function u(t){t.done?n(t.value):o(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(33202),u=function(t){function e(e,n){var r=t.call(this)||this;return r.protocol=e,r.bitcoinJSMessage=n,r}return o(e,t),e.prototype.signMessage=function(t,e){return i(this,void 0,void 0,function(){var n;return s(this,function(r){return n=this.bitcoinJSMessage.sign(t,e.privateKey,!0),[2,n.toString("base64")]})})},e.prototype.verifyMessage=function(t,e,n){return i(this,void 0,void 0,function(){var o,i;return s(this,function(s){switch(s.label){case 0:return o=r.from(e,"base64"),[4,this.protocol.getAddressFromPublicKey(n)];case 1:return i=s.sent(),[2,this.bitcoinJSMessage.verify(t,i,o)]}})})},e}(a.CryptoClient);e.BitcoinCryptoClient=u},50377(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function s(t){try{u(r.next(t))}catch(e){i(e)}}function a(t){try{u(r["throw"](t))}catch(e){i(e)}}function u(t){t.done?n(t.value):o(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r};Object.defineProperty(e,"__esModule",{value:!0});var s=n(22262),a=n(98449),u=n(21455),c=n(66029),l=n(59159),f=n(86535),d=n(74275),h=50,p=function(){function t(t){void 0===t&&(t=new f.BitcoinProtocolOptions),this.options=t,this.symbol="BTC",this.name="Bitcoin",this.marketSymbol="btc",this.feeSymbol="btc",this.subProtocols=[],this.feeDefaults={low:"0.00002",medium:"0.00004",high:"0.00005"},this.decimals=8,this.feeDecimals=8,this.identifier=l.MainProtocolSymbols.BTC,this.units=[{unitSymbol:"BTC",factor:"1"},{unitSymbol:"mBTC",factor:"0.0001"},{unitSymbol:"Satoshi",factor:"0.00000001"}],this.supportsHD=!0,this.standardDerivationPath="m/44'/0'/0'",this.addressIsCaseSensitive=!0,this.addressValidationPattern="^[13][a-km-zA-HJ-NP-Z1-9]{25,34}$",this.addressPlaceholder="1ABC..."}return t.prototype.getBlockExplorerLinkForAddress=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){return[2,this.options.network.blockExplorer.getAddressLink(t)]})})},t.prototype.getBlockExplorerLinkForTxId=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){return[2,this.options.network.blockExplorer.getTransactionLink(t)]})})},t.prototype.getPublicKeyFromMnemonic=function(t,e,n){return r(this,void 0,void 0,function(){var r;return o(this,function(o){return r=c.mnemonicToSeed(t,n),[2,this.getPublicKeyFromHexSecret(r,e)]})})},t.prototype.getPrivateKeyFromMnemonic=function(t,e,n){return r(this,void 0,void 0,function(){var r;return o(this,function(o){return r=c.mnemonicToSeed(t,n),[2,this.getPrivateKeyFromHexSecret(r,e)]})})},t.prototype.getExtendedPrivateKeyFromMnemonic=function(t,e,n){return r(this,void 0,void 0,function(){var r;return o(this,function(o){return r=c.mnemonicToSeed(t,n),[2,this.getExtendedPrivateKeyFromHexSecret(r,e)]})})},t.prototype.getPublicKeyFromHexSecret=function(t,e){return r(this,void 0,void 0,function(){var n;return o(this,function(r){return n=this.options.config.bitcoinJSLib.HDNode.fromSeedHex(t,this.options.network.extras.network),[2,n.derivePath(e).neutered().toBase58()]})})},t.prototype.getPrivateKeyFromHexSecret=function(t,e){return r(this,void 0,void 0,function(){var n;return o(this,function(r){return n=this.options.config.bitcoinJSLib.HDNode.fromSeedHex(t,this.options.network.extras.network),[2,n.derivePath(e).keyPair.d.toBuffer(32)]})})},t.prototype.getExtendedPrivateKeyFromHexSecret=function(t,e){return r(this,void 0,void 0,function(){var n;return o(this,function(r){return n=this.options.config.bitcoinJSLib.HDNode.fromSeedHex(t,this.options.network.extras.network),[2,n.derivePath(e).toBase58()]})})},t.prototype.getAddressFromPublicKey=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){return[2,this.options.config.bitcoinJSLib.HDNode.fromBase58(t,this.options.network.extras.network).getAddress()]})})},t.prototype.getAddressesFromPublicKey=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.getAddressFromPublicKey(t)];case 1:return[2,[e.sent()]]}})})},t.prototype.getAddressFromExtendedPublicKey=function(t,e,n){return this.options.config.bitcoinJSLib.HDNode.fromBase58(t,this.options.network.extras.network).derive(e).derive(n).getAddress()},t.prototype.getAddressesFromExtendedPublicKey=function(t,e,n,r){var o=this.options.config.bitcoinJSLib.HDNode.fromBase58(t,this.options.network.extras.network),i=Array.from(new Array(n),function(t,e){return e+r});return Promise.all(i.map(function(t){return o.derive(e).derive(t).getAddress()}))},t.prototype.signWithPrivateKey=function(t,e){return r(this,void 0,void 0,function(){var n,r,i,s,a,c,l,f,d;return o(this,function(o){switch(o.label){case 0:for(n=new this.options.config.bitcoinJSLib.TransactionBuilder(this.options.network.extras.network),r=0,i=e.ins;r<i.length;r++)s=i[r],n.addInput(s.txId,s.vout);a=0,c=e.outs,o.label=1;case 1:return a<c.length?(l=c[a],l.isChange?[4,this.getAddressFromPublicKey(t.toString("hex"))]:[3,3]):[3,5];case 2:if(f=o.sent(),f!==l.recipient)throw new Error("Change address could not be verified.");o.label=3;case 3:n.addOutput(l.recipient,new u.default(l.value).toNumber()),o.label=4;case 4:return a++,[3,1];case 5:for(d=0;d<e.ins.length;d++)n.sign(d,t);return[2,n.build().toHex()]}})})},t.prototype.signWithExtendedPrivateKey=function(t,e){return r(this,void 0,void 0,function(){var n,r,i,s,a,c,l,f,d,h,p,v,y,m,g;return o(this,function(o){switch(o.label){case 0:for(n=new this.options.config.bitcoinJSLib.TransactionBuilder(this.options.network.extras.network),r=this.options.config.bitcoinJSLib.HDNode.fromBase58(t,this.options.network.extras.network),i=0,s=e.ins;i<s.length;i++)a=s[i],n.addInput(a.txId,a.vout);c=10,l=500,f=0,d=e.outs,o.label=1;case 1:return f<d.length?(h=d[f],p=!1,h.isChange?h.derivationPath?[4,this.getAddressesFromExtendedPublicKey(t,1,1,parseInt(h.derivationPath,10))]:[3,3]:[3,8]):[3,10];case 2:return v=o.sent(),p=v.includes(h.recipient),[3,7];case 3:y=0,o.label=4;case 4:return y<l?[4,this.getAddressesFromExtendedPublicKey(t,1,c,y)]:[3,7];case 5:m=o.sent(),m.indexOf(h.recipient)>=0&&(p=!0,y=l),o.label=6;case 6:return y+=c,[3,4];case 7:if(!p)throw new Error("Change address could not be verified.");o.label=8;case 8:n.addOutput(h.recipient,new u.default(h.value).toNumber()),o.label=9;case 9:return f++,[3,1];case 10:for(g=0;g<e.ins.length;g++)n.sign(g,r.derivePath(e.ins[g].derivationPath));return[2,n.build().toHex()]}})})},t.prototype.getTransactionDetails=function(t){return r(this,void 0,void 0,function(){var e,n,r,i,s,a,c,l;return o(this,function(o){for(e=t.transaction,n=new u.default(0),r=0,i=e.ins;r<i.length;r++)s=i[r],n=n.plus(new u.default(s.value));for(a=0,c=e.outs;a<c.length;a++)l=c[a],n=n.minus(new u.default(l.value));return[2,[{from:e.ins.map(function(t){return t.address}),to:e.outs.filter(function(t){return!t.isChange}).map(function(t){return t.recipient}),amount:e.outs.filter(function(t){return!t.isChange}).map(function(t){return new u.default(t.value)}).reduce(function(t,e){return t.plus(e)}).toString(10),fee:n.toString(10),protocolIdentifier:this.identifier,network:this.options.network,isInbound:!1,transactionDetails:t.transaction}]]})})},t.prototype.getTransactionDetailsFromSigned=function(t){return r(this,void 0,void 0,function(){var e,n,r=this;return o(this,function(o){return e={to:[],from:t.from,amount:t.amount,fee:t.fee,protocolIdentifier:this.identifier,network:this.options.network,isInbound:!1,transactionDetails:t.transaction},n=this.options.config.bitcoinJSLib.Transaction.fromHex(t.transaction),n.outs.forEach(function(n){var o=r.options.config.bitcoinJSLib.address.fromOutputScript(n.script,r.options.network.extras.network);new u.default(n.value).isEqualTo(t.amount)&&e.to.push(o)}),[2,[e]]})})},t.prototype.getBalanceOfAddresses=function(t){return r(this,void 0,void 0,function(){var e,n,r,i,s;return o(this,function(o){switch(o.label){case 0:e=new u.default(0),n=0,r=t,o.label=1;case 1:return n<r.length?(i=r[n],[4,a.default.get(this.options.network.extras.indexerApi+"/api/v2/address/"+i+"?details=basic",{responseType:"json"})]):[3,4];case 2:s=o.sent().data,e=e.plus(new u.default(s.balance)),o.label=3;case 3:return n++,[3,1];case 4:return[2,e.toString(10)]}})})},t.prototype.getBalanceOfPublicKey=function(t){return r(this,void 0,void 0,function(){var e;return o(this,function(n){switch(n.label){case 0:return[4,this.getAddressFromPublicKey(t)];case 1:return e=n.sent(),[2,this.getBalanceOfAddresses([e])]}})})},t.prototype.getBalanceOfExtendedPublicKey=function(t,e){return void 0===e&&(e=0),r(this,void 0,void 0,function(){var e;return o(this,function(n){switch(n.label){case 0:return[4,a.default.get(this.options.network.extras.indexerApi+"/api/v2/xpub/"+t+"?pageSize=1",{responseType:"json"})];case 1:return e=n.sent().data,[2,e.balance]}})})},t.prototype.getBalanceOfPublicKeyForSubProtocols=function(t,e){return r(this,void 0,void 0,function(){return o(this,function(t){throw Promise.reject("get balance of sub protocols not supported")})})},t.prototype.getAvailableBalanceOfAddresses=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){return[2,this.getBalanceOfAddresses(t)]})})},t.prototype.estimateMaxTransactionValueFromExtendedPublicKey=function(t,e,n){return r(this,void 0,void 0,function(){return o(this,function(e){return[2,this.getBalanceOfExtendedPublicKey(t)]})})},t.prototype.estimateMaxTransactionValueFromPublicKey=function(t,e,n){return r(this,void 0,void 0,function(){return o(this,function(e){return[2,this.getBalanceOfPublicKey(t)]})})},t.prototype.estimateFeeDefaultsFromExtendedPublicKey=function(t,e,n,i){return r(this,void 0,void 0,function(){var t,e,n,r,i,s;return o(this,function(o){switch(o.label){case 0:return[4,a.default.get(this.options.network.extras.indexerApi+"/api/v2/estimatefee/5")];case 1:return t=o.sent().data.result,e=new u.default(t).shiftedBy(this.feeDecimals),e.isZero()?[2,this.feeDefaults]:(n=new u.default(.5),r=e,i=r.minus(r.times(n)).integerValue(u.default.ROUND_FLOOR),s=r.plus(r.times(n)).integerValue(u.default.ROUND_FLOOR),[2,{low:i.shiftedBy(-this.feeDecimals).toFixed(),medium:r.shiftedBy(-this.feeDecimals).toFixed(),high:s.shiftedBy(-this.feeDecimals).toFixed()}])}})})},t.prototype.estimateFeeDefaultsFromPublicKey=function(t,e,n,i){return r(this,void 0,void 0,function(){return o(this,function(t){return[2,Promise.reject("estimating fee defaults using non extended public key not implemented")]})})},t.prototype.prepareTransactionFromExtendedPublicKey=function(t,e,n,s,c){return r(this,void 0,void 0,function(){var e,r,l,f,d,p,v,y,m,g,b,w,P,x,_,k;return o(this,function(o){switch(o.label){case 0:if(e=s.map(function(t){return new u.default(t)}),r=new u.default(c),l={ins:[],outs:[]},n.length!==e.length)throw new Error("recipients do not match values");return console.log(this.options.network.extras.indexerApi+"/api/v2/utxo/"+t+"?confirmed=true"),[4,a.default.get(this.options.network.extras.indexerApi+"/api/v2/utxo/"+t+"?confirmed=true",{responseType:"json"})];case 1:if(f=o.sent().data,f.length<=0)throw new Error("not enough balance");d=e.reduce(function(t,e){return t.plus(e)}).plus(r),p=new u.default(0),v=function(t){var e=t.split("/").slice(-2).map(function(t){return parseInt(t)}).filter(function(t){return!isNaN(t)});if(2!==e.length)throw new Error("Unexpected path format");return[e[0],e[1]]},y=0,m=f,o.label=2;case 2:return y<m.length?(g=m[y],p=p.plus(g.value),b=v(g.path),[4,this.getAddressFromExtendedPublicKey(t,b[0],b[1])]):[3,5];case 3:if(k=o.sent(),k!==g.address)throw new Error("Invalid address returned from API");if(l.ins.push({txId:g.txid,value:new u.default(g.value).toString(10),vout:g.vout,address:g.address,derivationPath:b.join("/")}),p.isGreaterThanOrEqualTo(d))return[3,5];o.label=4;case 4:return y++,[3,2];case 5:if(p.isLessThan(d))throw new Error("not enough balance");for(w=0;w<n.length;w++)l.outs.push({recipient:n[w],isChange:!1,value:e[w].toString(10),derivationPath:""}),p=p.minus(e[w]);return P=Math.max.apply(Math,i([-1],f.map(function(t){return v(t.path)}).filter(function(t){return 1===t[0]}).map(function(t){return t[1]}))),x=p.minus(r),x.isGreaterThan(new u.default(h))?(_=P+1,[4,this.getAddressFromExtendedPublicKey(t,1,_)]):[3,7];case 6:k=o.sent(),l.outs.push({recipient:k,isChange:!0,value:x.toString(10),derivationPath:_.toString()}),o.label=7;case 7:return[2,l]}})})},t.prototype.prepareTransactionFromPublicKey=function(t,e,n,i){return r(this,void 0,void 0,function(){var r,s,c,l,f,d,p,v,y,m,g,b;return o(this,function(o){switch(o.label){case 0:if(r=n.map(function(t){return new u.default(t)}),s=new u.default(i),c={ins:[],outs:[]},e.length!==r.length)throw new Error("Recipient and value length does not match.");return[4,this.getAddressFromPublicKey(t)];case 1:return l=o.sent(),[4,a.default.get(this.options.network.extras.indexerApi+"/api/v2/utxo/"+l,{responseType:"json"})];case 2:for(f=o.sent().data,d=r.reduce(function(t,e){return t.plus(e)}).plus(s),p=new u.default(0),v=0,y=f;v<y.length;v++)if(m=y[v],p=p.plus(new u.default(m.value)),c.ins.push({txId:m.txid,value:new u.default(m.value).toString(10),vout:m.vout,address:l}),p.isGreaterThanOrEqualTo(d))break;if(p.isLessThan(d))throw new Error("not enough balance, having "+p.toFixed()+" of "+d.toFixed());for(g=0;g<e.length;g++)c.outs.push({recipient:e[g],isChange:!1,value:r[g].toString(10)}),p=p.minus(r[g]);return b=p.minus(s),b.isGreaterThan(new u.default(h))&&c.outs.push({recipient:l,isChange:!0,value:b.toString(10)}),[2,c]}})})},t.prototype.broadcastTransaction=function(t){return r(this,void 0,void 0,function(){var e;return o(this,function(n){switch(n.label){case 0:return[4,a.default.post(this.options.network.extras.indexerApi+"/api/v2/sendtx/",t)];case 1:return e=n.sent().data,[2,e.result]}})})},t.prototype.getTransactionsFromExtendedPublicKey=function(t,e,n,i){var s,c;return void 0===i&&(i=0),r(this,void 0,void 0,function(){var r,i,l,f,d,h,p,v,y,m,g,b,w,P,x,_,k,E;return o(this,function(o){switch(o.label){case 0:return c=null===(s=n)||void 0===s?void 0:s.page,r=null!==c&&void 0!==c?c:1,[4,a.default.get(this.options.network.extras.indexerApi+"/api/v2/xpub/"+t+"?details=txs&tokens=used&pageSize="+e+"&page="+r,{responseType:"json"})];case 1:if(i=o.sent().data,l=(i.tokens||[]).filter(function(t){return"XPUBAddress"===t.type}).map(function(t){return t.name}),f=[],i.page==r)for(d=0,h=i.transactions||[];d<h.length;d++){for(p=h[d],v=[],y=[],m=!0,g=new u.default(0),b=0,w=p.vin;b<w.length;b++)P=w[b],this.containsSome(P.addresses,l)&&(m=!1),v.push.apply(v,P.addresses),g=g.plus(P.value);for(x=0,_=p.vout;x<_.length;x++)k=_[x],k.addresses&&(y.push.apply(y,k.addresses),this.containsSome(k.addresses,l)&&!m&&(g=g.minus(k.value)),!this.containsSome(k.addresses,l)&&m&&(g=g.minus(k.value)));g=g.minus(p.fees),E={hash:p.txid,from:v,to:y,isInbound:m,amount:g.toString(10),fee:new u.default(p.fees).toString(10),blockHeight:p.blockHeight.toString(),protocolIdentifier:this.identifier,network:this.options.network,timestamp:p.blockTime},f.push(E)}return[2,{transactions:f,cursor:{page:n?n.page+1:2}}]}})})},t.prototype.getTransactionsFromPublicKey=function(t,e,n){return r(this,void 0,void 0,function(){var r;return o(this,function(o){switch(o.label){case 0:return r=this.getTransactionsFromAddresses,[4,this.getAddressFromPublicKey(t)];case 1:return[2,r.apply(this,[[o.sent()],e,n])]}})})},t.prototype.getTransactionsFromAddresses=function(t,e,n){var i,s;return r(this,void 0,void 0,function(){var r,c,l,f,d,h,p,v,y,m,g,b,w,P,x,_,k,E;return o(this,function(o){switch(o.label){case 0:return r=[],s=null===(i=n)||void 0===i?void 0:i.page,c=null!==s&&void 0!==s?s:1,l=this.options.network.extras.indexerApi+"/api/v2/address/"+t[0]+"?page="+c+"&pageSize="+e+"&details=txs",[4,a.default.get(l,{responseType:"json"})];case 1:if(f=o.sent().data,f.page==c)for(d=0,h=f.transactions||[];d<h.length;d++){for(p=h[d],v=[],y=[],m=!0,g=new u.default(0),b=0,w=p.vin;b<w.length;b++)P=w[b],P.addresses&&this.containsSome(P.addresses,t)&&(m=!1),v.push.apply(v,P.addresses),g=P.value?g.plus(P.value):g;for(x=0,_=p.vout;x<_.length;x++)k=_[x],k.addresses&&(y.push.apply(y,k.addresses),this.containsSome(k.addresses,t)&&!m&&(g=g.minus(new u.default(k.value).shiftedBy(this.decimals))),!this.containsSome(k.addresses,t)&&m&&(g=g.minus(new u.default(k.value).shiftedBy(this.decimals))));g=g.minus(new u.default(p.fees).shiftedBy(this.feeDecimals)),E={hash:p.txid,from:v,to:y,isInbound:m,amount:g.toString(10),fee:new u.default(p.fees).shiftedBy(this.feeDecimals).toString(10),blockHeight:p.blockHeight.toString(),protocolIdentifier:this.identifier,network:this.options.network,timestamp:p.blockTime},r.push(E)}return[2,{transactions:r,cursor:{page:n?n.page+1:2}}]}})})},t.prototype.containsSome=function(t,e){for(var n=0,r=t;n<r.length;n++){var o=r[n];if(e.indexOf(o)>-1)return!0}return!1},t.prototype.signMessage=function(t,e){return r(this,void 0,void 0,function(){return o(this,function(n){return[2,new d.BitcoinCryptoClient(this,s).signMessage(t,e)]})})},t.prototype.verifyMessage=function(t,e,n){return r(this,void 0,void 0,function(){return o(this,function(r){return[2,new d.BitcoinCryptoClient(this,s).verifyMessage(t,e,n)]})})},t.prototype.getTransactionStatuses=function(t){return r(this,void 0,void 0,function(){return o(this,function(t){return[2,Promise.reject("Transaction status not implemented")]})})},t}();e.BitcoinProtocol=p},86535(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function s(t){try{u(r.next(t))}catch(e){i(e)}}function a(t){try{u(r["throw"](t))}catch(e){i(e)}}function u(t){t.done?n(t.value):o(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(60539),a=n(66408),u="Mainnet",c="",l="https://live.blockcypher.com/btc",f="https://cors-proxy.airgap.prod.gke.papers.tech/proxy?url=https://btc1.trezor.io",d=function(){function t(t,e){void 0===t&&(t=f),void 0===e&&(e=s.networks.bitcoin),this.indexerApi=t,this.network=e}return t}();e.BitcoinProtocolNetworkExtras=d;var h=function(){function t(t){void 0===t&&(t=l),this.blockExplorer=t}return t.prototype.getAddressLink=function(t){return o(this,void 0,void 0,function(){return i(this,function(e){return[2,this.blockExplorer+"/address/"+t+"/"]})})},t.prototype.getTransactionLink=function(t){return o(this,void 0,void 0,function(){return i(this,function(e){return[2,this.blockExplorer+"/tx/"+t]})})},t}();e.BlockcypherBlockExplorer=h;var p=function(t){function e(e,n,r,o,i){return void 0===e&&(e=u),void 0===n&&(n=a.NetworkType.MAINNET),void 0===r&&(r=c),void 0===o&&(o=new h),void 0===i&&(i=new d),t.call(this,e,n,r,o,i)||this}return r(e,t),e}(a.ProtocolNetwork);e.BitcoinProtocolNetwork=p;var v=function(){function t(t){void 0===t&&(t=s),this.bitcoinJSLib=t}return t}();e.BitcoinProtocolConfig=v;var y=function(){function t(t,e){void 0===t&&(t=new p),void 0===e&&(e=new v),this.network=t,this.config=e}return t}();e.BitcoinProtocolOptions=y},40218(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(60539),i=n(66408),s=n(50377),a=n(86535),u=function(t){function e(){var e=t.call(this,new a.BitcoinProtocolOptions(new a.BitcoinProtocolNetwork("Testnet",i.NetworkType.TESTNET,"",new a.BlockcypherBlockExplorer("https://live.blockcypher.com/btc-testnet"),new a.BitcoinProtocolNetworkExtras("https://cors-proxy.airgap.prod.gke.papers.tech/proxy?url=https://tbtc1.trezor.io",o.networks.testnet)),new a.BitcoinProtocolConfig))||this;return e.name="Bitcoin Testnet",e.standardDerivationPath="m/44'/1'/0'",e.addressValidationPattern="^..[13][a-km-zA-HJ-NP-Z1-9]{25,34}$",e}return r(e,t),e}(s.BitcoinProtocol);e.BitcoinTestnetProtocol=u},39674(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.denom=t,this.amount=e}return t.prototype.toJSON=function(){return{amount:this.amount,denom:this.denom}},t.fromJSON=function(e){if(!t.supportedDenominations.includes(e.denom))throw new Error("Unsupported cosmos denomination");return new t(e.denom,e.amount)},t.prototype.toRPCBody=function(){return{amount:this.amount,denom:this.denom}},t.fromRPCBody=function(e){return new t(e.denom,e.amount)},t.supportedDenominations=["uatom"],t}();e.CosmosCoin=n},66953(t,e,n){var r=n(48287)["Buffer"],o=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function s(t){try{u(r.next(t))}catch(e){i(e)}}function a(t){try{u(r["throw"](t))}catch(e){i(e)}}function u(t){t.done?n(t.value):o(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(90848),u=n(65108),c=n(33202),l=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.signMessage=function(t,e){return i(this,void 0,void 0,function(){var n,o,i;return s(this,function(s){return n=u("sha256").update(r.from(t)).digest(),o=r.from(n),i=a.sign(o,e.privateKey),[2,"0x"+r.from(i.signature).toString("hex")]})})},e.prototype.verifyMessage=function(t,e,n){return i(this,void 0,void 0,function(){var o,i,c;return s(this,function(s){return o=r.from(e.slice(2),"hex"),i=u("sha256").update(r.from(t)).digest(),c=r.from(i),[2,a.verify(c,o,r.from(n,"hex"))]})})},e}(c.CryptoClient);e.CosmosCryptoClient=l},98923(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(39674),o=function(){function t(t,e){this.amount=t,this.gas=e}return t.prototype.toJSON=function(){return{amount:this.amount.map(function(t){return t.toJSON()}),gas:this.gas}},t.fromJSON=function(e){return new t(e.amount.map(function(t){return r.CosmosCoin.fromJSON(t)}),e.gas)},t.prototype.toRPCBody=function(){return{amount:this.amount.map(function(t){return t.toRPCBody()}),gas:this.gas}},t.fromRPCBody=function(e){return new t(e.amount.map(function(t){return r.CosmosCoin.fromRPCBody(t)}),e.gas)},t}();e.CosmosFee=o},91036(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function s(t){try{u(r.next(t))}catch(e){i(e)}}function a(t){try{u(r["throw"](t))}catch(e){i(e)}}function u(t){t.done?n(t.value):o(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(98449),s=n(21455),a=function(){function t(t){void 0===t&&(t="https://cors-proxy.airgap.prod.gke.papers.tech/proxy?url=https://api.cosmostation.io/v1"),this.baseURL=t}return t.prototype.fetchTransactions=function(t,e,n,a){return r(this,void 0,void 0,function(){var n,r;return o(this,function(o){switch(o.label){case 0:return a?[2,[]]:[4,i.default.get(this.baseURL+"/account/txs/"+e)];case 1:return n=o.sent(),r=n.data.map(function(n){var r=new Date(n.timestamp).getTime()/1e3,o=n.fee.amount.map(function(t){return new s.default(t.amount)}).reduce(function(t,e){return t.plus(e)}),i=n.msg.filter(function(t){return"cosmos-sdk/MsgSend"===t.type}).map(function(i){var a=i.value.to_address;return{amount:i.value.amount.map(function(t){return new s.default(t.amount)}).reduce(function(t,e){return t.plus(e)}).toString(10),to:[a],from:[i.value.from_address],isInbound:a===e,fee:o.toString(10),protocolIdentifier:t.identifier,network:t.options.network,hash:n.tx_hash,timestamp:r}});return i}),[2,r.reduce(function(t,e){return t.concat(e)})]}})})},t}();e.CosmosInfoClient=a},81388(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function s(t){try{u(r.next(t))}catch(e){i(e)}}function a(t){try{u(r["throw"](t))}catch(e){i(e)}}function u(t){t.done?n(t.value):o(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(98449),s=n(21455),a=function(){function t(t,e){void 0===e&&(e=!0),this.baseURL=t,this.useCORSProxy=e}return t.prototype.fetchBalance=function(t,e){return r(this,void 0,void 0,function(){var n,r,a,u;return o(this,function(o){switch(o.label){case 0:return[4,i.default.get(this.url("/bank/balances/"+t))];case 1:return n=o.sent(),r=n.data.result,r.length>0?(a=r[0].amount,e?[4,Promise.all([this.fetchTotalReward(t),this.fetchTotalUnbondingAmount(t),this.fetchTotalDelegatedAmount(t)])]:[3,3]):[3,5];case 2:return u=o.sent().reduce(function(t,e){return t.plus(e)},new s.default(a)),[2,u.decimalPlaces(0,s.default.ROUND_FLOOR)];case 3:return[2,new s.default(a).decimalPlaces(0,s.default.ROUND_FLOOR)];case 4:return[3,6];case 5:return[2,new s.default(0)];case 6:return[2]}})})},t.prototype.fetchNodeInfo=function(){return r(this,void 0,void 0,function(){var t,e;return o(this,function(n){switch(n.label){case 0:return[4,i.default.get(this.url("/node_info"))];case 1:return t=n.sent(),e=t.data.node_info,[2,e]}})})},t.prototype.broadcastSignedTransaction=function(t){return r(this,void 0,void 0,function(){var e;return o(this,function(n){switch(n.label){case 0:return[4,i.default.post(this.url("/txs"),t,{headers:{"Content-type":"application/json"}})];case 1:return e=n.sent(),[2,e.data.txhash]}})})},t.prototype.fetchAccount=function(t){return r(this,void 0,void 0,function(){var e,n;return o(this,function(r){switch(r.label){case 0:return[4,i.default.get(this.url("/auth/accounts/"+t))];case 1:return e=r.sent(),n=e.data.result,[2,n]}})})},t.prototype.fetchDelegations=function(t,e){return void 0===e&&(e=!0),r(this,void 0,void 0,function(){var n,r;return o(this,function(o){switch(o.label){case 0:return[4,i.default.get(this.url("/staking/delegators/"+t+"/delegations"))];case 1:return n=o.sent(),null===n.data?[2,[]]:(r=n.data.result,[2,e?r.filter(function(t){return new s.default(t.balance).gt(0)}):r])}})})},t.prototype.fetchTotalDelegatedAmount=function(t){return r(this,void 0,void 0,function(){var e;return o(this,function(n){switch(n.label){case 0:return[4,this.fetchDelegations(t)];case 1:return e=n.sent(),[2,e.reduce(function(t,e){return t.plus(new s.default(e.balance))},new s.default(0)).decimalPlaces(0,s.default.ROUND_FLOOR)]}})})},t.prototype.fetchValidator=function(t){return r(this,void 0,void 0,function(){var e,n;return o(this,function(r){switch(r.label){case 0:return[4,i.default.get(this.url("/staking/validators/"+t))];case 1:return e=r.sent(),n=e.data.result,[2,n]}})})},t.prototype.fetchValidators=function(){return r(this,void 0,void 0,function(){var t,e;return o(this,function(n){switch(n.label){case 0:return[4,i.default.get(this.url("/staking/validators"))];case 1:return t=n.sent(),e=t.data.result,[2,e]}})})},t.prototype.fetchSelfDelegation=function(t){return r(this,void 0,void 0,function(){var e,n,r,s;return o(this,function(o){switch(o.label){case 0:return[4,i.default.get(this.url("/distribution/validators/"+t))];case 1:return e=o.sent(),n=e.data.result.operator_address,[4,i.default.get(this.url("/staking/delegators/"+n+"/delegations/"+t))];case 2:return r=o.sent(),s=r.data.result,[2,s]}})})},t.prototype.fetchUnbondingDelegations=function(t){return r(this,void 0,void 0,function(){var e,n;return o(this,function(r){switch(r.label){case 0:return[4,i.default.get(this.url("/staking/delegators/"+t+"/unbonding_delegations"))];case 1:return e=r.sent(),n=e.data.result,[2,n]}})})},t.prototype.fetchTotalUnbondingAmount=function(t){return r(this,void 0,void 0,function(){var e,n;return o(this,function(r){switch(r.label){case 0:return[4,this.fetchUnbondingDelegations(t)];case 1:return e=r.sent(),e?(n=e.map(function(t){return t.entries}).reduce(function(t,e){return t.concat(e)},[]),[2,n.reduce(function(t,e){return t.plus(new s.default(e.balance))},new s.default(0)).decimalPlaces(0,s.default.ROUND_FLOOR)]):[2,new s.default(0)]}})})},t.prototype.fetchRewardDetails=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){return[2,i.default.get(this.url("/distribution/delegators/"+t+"/rewards")).then(function(t){var e;return e=t.data.result.rewards,null!==e&&void 0!==e?e:[]}).catch(function(){return[]})]})})},t.prototype.fetchTotalReward=function(t){return r(this,void 0,void 0,function(){var e;return o(this,function(n){switch(n.label){case 0:return[4,i.default.get(this.url("/distribution/delegators/"+t+"/rewards")).then(function(t){return t.data.result.total}).catch(function(){return[]})];case 1:return e=n.sent(),e.length>0?[2,new s.default(e[0].amount).decimalPlaces(0,s.default.ROUND_FLOOR)]:[2,new s.default(0)]}})})},t.prototype.fetchRewardForDelegation=function(t,e){return r(this,void 0,void 0,function(){var n;return o(this,function(r){switch(r.label){case 0:return[4,i.default.get(this.url("/distribution/delegators/"+t+"/rewards/"+e)).then(function(t){return t.data.result}).catch(function(){return[]})];case 1:return n=r.sent(),n.length>0?[2,new s.default(n[0].amount).decimalPlaces(0,s.default.ROUND_FLOOR)]:[2,new s.default(0)]}})})},t.prototype.withdrawAllDelegationRewards=function(t,e,n,s,a,u,c,l){return void 0===l&&(l=!1),r(this,void 0,void 0,function(){var r,f;return o(this,function(o){switch(o.label){case 0:return r={base_req:{from:t,memo:c,chain_id:e,account_number:n,sequence:s,gas:a.toFixed(),gas_adjustment:"1.2",fees:[{denom:"uatom",amount:u.toFixed()}],simulate:l}},[4,i.default.post(this.url("/distribution/delegators/"+t+"/rewards"),JSON.stringify(r),{headers:{"Content-type":"application/json"}})];case 1:return f=o.sent(),[2,f.data.hash]}})})},t.prototype.withdrawDelegationRewards=function(t,e,n,s,a,u,c,l,f){return void 0===f&&(f=!1),r(this,void 0,void 0,function(){var r,d;return o(this,function(o){switch(o.label){case 0:return r={base_req:{from:t,memo:l,chain_id:n,account_number:s,sequence:a,gas:u.toFixed(),gas_adjustment:"1.2",fees:[{denom:"uatom",amount:c.toFixed()}],simulate:f}},[4,i.default.post(this.url("/distribution/delegators/"+t+"/rewards/"+e),JSON.stringify(r),{headers:{"Content-type":"application/json"}})];case 1:return d=o.sent(),[2,d.data.hash]}})})},t.prototype.url=function(t){var e=""+this.baseURL+t;return this.useCORSProxy&&(e="https://cors-proxy.airgap.prod.gke.papers.tech/proxy?url="+encodeURI(e)),e},t}();e.CosmosNodeClient=a},34951(t,e,n){var r=n(48287)["Buffer"],o=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function s(t){try{u(r.next(t))}catch(e){i(e)}}function a(t){try{u(r["throw"](t))}catch(e){i(e)}}function u(t){t.done?n(t.value):o(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var a,u=n(19217),c=n(21455),l=n(43662),f=n(66029),d=n(58983),h=n(90848),p=n(65108),v=n(48866),y=n(96152),m=n(63864),g=n(75733),b=n(44363),w=n(48280),P=n(39674),x=n(66953),_=n(98923),k=n(66873),E=n(10739),A=n(59159);(function(t){t["DELEGATE"]="delegate",t["UNDELEGATE"]="undelegate",t["WITHDRAW_ALL_REWARDS"]="withdraw_all_rewards",t["WITHDRAW_VALIDATOR_REWARDS"]="withdraw_validator_rewards"})(a=e.CosmosDelegationActionType||(e.CosmosDelegationActionType={}));var C=function(t){function e(e){void 0===e&&(e=new k.CosmosProtocolOptions);var n=t.call(this)||this;return n.options=e,n.symbol="ATOM",n.name="Cosmos",n.marketSymbol="atom",n.feeSymbol="atom",n.feeDefaults={low:"0.0005",medium:"0.005",high:"0.0075"},n.decimals=6,n.feeDecimals=6,n.identifier=A.MainProtocolSymbols.COSMOS,n.units=[{unitSymbol:"atom",factor:"1"},{unitSymbol:"uatom",factor:"0.000001"}],n.supportsHD=!1,n.standardDerivationPath="m/44'/118'/0'/0/0",n.addressIsCaseSensitive=!1,n.addressValidationPattern="^(cosmos|cosmosvaloper)[a-zA-Z0-9]{39}$",n.addressPlaceholder="cosmos...",n.addressPrefix="cosmos",n.defaultGas=new c.default("200000"),n}return o(e,t),Object.defineProperty(e.prototype,"infoClient",{get:function(){return this.options.config.infoClient},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nodeClient",{get:function(){return this.options.config.nodeClient},enumerable:!0,configurable:!0}),e.prototype.getBlockExplorerLinkForAddress=function(t){return i(this,void 0,void 0,function(){return s(this,function(e){return[2,this.options.network.blockExplorer.getAddressLink(t)]})})},e.prototype.getBlockExplorerLinkForTxId=function(t){return i(this,void 0,void 0,function(){return s(this,function(e){return[2,this.options.network.blockExplorer.getTransactionLink(t)]})})},e.prototype.generateKeyPair=function(t,e,n){void 0===e&&(e=this.standardDerivationPath),f.validateMnemonic(t);var r=f.mnemonicToSeed(t,n),o=l.fromSeed(r);return this.generateKeyPairFromNode(o,e)},e.prototype.generateKeyPairFromNode=function(t,e){var n=t.derivePath(e),r=n.privateKey;if(void 0===r)throw new Error("Cannot generate private key");return{publicKey:n.publicKey,privateKey:r}},e.prototype.getPublicKeyFromMnemonic=function(t,e,n){return i(this,void 0,void 0,function(){return s(this,function(r){return[2,this.generateKeyPair(t,e,n).publicKey.toString("hex")]})})},e.prototype.getPrivateKeyFromMnemonic=function(t,e,n){return i(this,void 0,void 0,function(){return s(this,function(r){return[2,this.generateKeyPair(t,e,n).privateKey]})})},e.prototype.getPublicKeyFromHexSecret=function(t,e){return i(this,void 0,void 0,function(){var n;return s(this,function(o){return n=l.fromSeed(r.from(t,"hex")),[2,this.generateKeyPairFromNode(n,e).publicKey.toString("hex")]})})},e.prototype.getPublicKeyFromPrivateKey=function(t){var e=h.publicKeyCreate(t);return r.from(e,"binary")},e.prototype.getPrivateKeyFromHexSecret=function(t,e){return i(this,void 0,void 0,function(){var n;return s(this,function(o){return n=l.fromSeed(r.from(t,"hex")),[2,this.generateKeyPairFromNode(n,e).privateKey]})})},e.prototype.getAddressFromPublicKey=function(t){return i(this,void 0,void 0,function(){var e,n,o,i;return s(this,function(s){return e=r.from(t,"hex"),n=p("sha256").update(e).digest(),o=(new d).update(r.from(n)).digest(),i=u.encode(this.addressPrefix,u.toWords(o)),[2,i]})})},e.prototype.getAddressesFromPublicKey=function(t){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this.getAddressFromPublicKey(t)];case 1:return[2,[e.sent()]]}})})},e.prototype.getTransactionsFromPublicKey=function(t,e,n){return i(this,void 0,void 0,function(){var r;return s(this,function(o){switch(o.label){case 0:return r=this.getTransactionsFromAddresses,[4,this.getAddressFromPublicKey(t)];case 1:return[2,r.apply(this,[[o.sent()],e,n])]}})})},e.prototype.getTransactionsFromAddresses=function(t,e,n){return i(this,void 0,void 0,function(){var r,o,i,a,u;return s(this,function(s){switch(s.label){case 0:for(r=[],o=0,i=t;o<i.length;o++)a=i[o],r.push(this.infoClient.fetchTransactions(this,a,e,n));return[4,Promise.all(r).then(function(t){return t.reduce(function(t,e){return t.concat(e)})})];case 1:return u=s.sent(),[2,{transactions:u,cursor:{offset:n?n.offset+e:e}}]}})})},e.prototype.signWithPrivateKey=function(t,e){return i(this,void 0,void 0,function(){var n,o,i,a,u,c,l;return s(this,function(s){return n=this.getPublicKeyFromPrivateKey(t),o=e.toRPCBody(),i=p("sha256").update(r.from(JSON.stringify(o))).digest(),a=r.from(i),u=h.sign(a,t),c=r.from(u.signature,"binary").toString("base64"),l={tx:{msg:o.msgs,fee:o.fee,signatures:[{signature:c,pub_key:{type:"tendermint/PubKeySecp256k1",value:n.toString("base64")}}],memo:o.memo},mode:"sync"},[2,JSON.stringify(l)]})})},e.prototype.getTransactionDetails=function(t){return i(this,void 0,void 0,function(){var e;return s(this,function(n){return e=t.transaction.toAirGapTransactions(this),[2,e]})})},e.prototype.getTransactionDetailsFromSigned=function(t){return i(this,void 0,void 0,function(){var e,n,r,o=this;return s(this,function(i){return e=JSON.parse(t.transaction).tx,n=e.fee.amount.map(function(t){var e=t.amount;return new c.default(e)}).reduce(function(t,e){return t.plus(e)}).toString(10),r=e.msg.map(function(t){var e=t.type;switch(e){case g.CosmosMessageType.Send.value:var r=b.CosmosSendMessage.fromRPCBody(t);return r.toAirGapTransaction(o,n);case g.CosmosMessageType.Undelegate.value:case g.CosmosMessageType.Delegate.value:var i=m.CosmosDelegateMessage.fromRPCBody(t);return i.toAirGapTransaction(o,n);case g.CosmosMessageType.WithdrawDelegationReward.value:var s=w.CosmosWithdrawDelegationRewardMessage.fromRPCBody(t);return s.toAirGapTransaction(o,n);default:throw Error("Unknown transaction")}}).map(function(t){return t.transactionDetails||(t.transactionDetails={}),t.transactionDetails.accountNumber=e.accountNumber,t.transactionDetails.chainID=e.chainID,t.transactionDetails.memo=e.memo,t.transactionDetails.sequence=e.sequence,t}),[2,r]})})},e.prototype.getBalanceOfAddresses=function(t){return i(this,void 0,void 0,function(){return s(this,function(e){return[2,this.getBalance(t)]})})},e.prototype.getBalanceOfPublicKey=function(t){return i(this,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return e=this.getBalanceOfAddresses,[4,this.getAddressFromPublicKey(t)];case 1:return[2,e.apply(this,[[n.sent()]])]}})})},e.prototype.getAvailableBalanceOfAddresses=function(t){return i(this,void 0,void 0,function(){return s(this,function(e){return[2,this.getBalance(t,!1)]})})},e.prototype.getBalanceOfPublicKeyForSubProtocols=function(t,e){return i(this,void 0,void 0,function(){return s(this,function(t){throw Promise.reject("get balance of sub protocols not supported")})})},e.prototype.getBalance=function(t,e){return void 0===e&&(e=!0),i(this,void 0,void 0,function(){var n,r,o,i;return s(this,function(s){switch(s.label){case 0:for(n=[],r=0,o=t;r<o.length;r++)i=o[r],n.push(this.nodeClient.fetchBalance(i,e));return[4,Promise.all(n).then(function(t){return t.reduce(function(t,e){return t.plus(e)})})];case 1:return[2,s.sent().toString(10)]}})})},e.prototype.estimateMaxTransactionValueFromPublicKey=function(t,e,n){return i(this,void 0,void 0,function(){var r,o,i,a,u,l;return s(this,function(s){switch(s.label){case 0:return[4,this.getAddressFromPublicKey(t)];case 1:return r=s.sent(),[4,this.getAvailableBalanceOfAddresses([r])];case 2:return o=s.sent(),i=new c.default(o),void 0===n?[3,3]:(a=new c.default(n),[3,5]);case 3:return[4,this.estimateFeeDefaultsFromPublicKey(t,e,[o])];case 4:u=s.sent(),a=new c.default(u.medium).shiftedBy(this.decimals),a.gte(i)&&(a=new c.default(0)),s.label=5;case 5:return l=i.minus(a),l.isNegative()&&(l=new c.default(0)),[2,l.toFixed()]}})})},e.prototype.estimateFeeDefaultsFromPublicKey=function(t,e,n,r){return i(this,void 0,void 0,function(){return s(this,function(t){return[2,this.feeDefaults]})})},e.prototype.prepareTransactionFromPublicKey=function(t,e,n,r,o){return i(this,void 0,void 0,function(){var i,a,u,l,f,d,h,p,v,y,m,g;return s(this,function(s){switch(s.label){case 0:return i=n.map(function(t){return new c.default(t)}),a=new c.default(r),e.length!==i.length?[2,Promise.reject("recipients length does not match with values")]:[4,this.getAddressFromPublicKey(t)];case 1:return u=s.sent(),[4,this.nodeClient.fetchNodeInfo()];case 2:return l=s.sent(),[4,this.nodeClient.fetchAccount(u)];case 3:return f=s.sent(),h=c.default.bind,[4,this.getAvailableBalanceOfAddresses([u])];case 4:if(d=new(h.apply(c.default,[void 0,s.sent()])),d.lt(n.reduce(function(t,e){return t.plus(e)},a)))throw new Error("not enough balance");for(p=[],v=0;v<e.length;++v)y=new b.CosmosSendMessage(u,e[v],[new P.CosmosCoin("uatom",i[v].toString(10))]),p.push(y);return m=void 0!==o&&"string"===typeof o?o:"",g=new E.CosmosTransaction(p,new _.CosmosFee([new P.CosmosCoin("uatom",a.toString(10))],this.defaultGas.toString(10)),m,l.network,f.value.account_number,f.value.sequence),[2,g]}})})},e.prototype.getDefaultDelegatee=function(){return i(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,this.nodeClient.fetchValidators()];case 1:return t=e.sent(),[2,t.length>0?t[0].operator_address:""]}})})},e.prototype.getCurrentDelegateesForPublicKey=function(t){return i(this,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return e=this.getCurrentDelegateesForAddress,[4,this.getAddressFromPublicKey(t)];case 1:return[2,e.apply(this,[n.sent()])]}})})},e.prototype.getCurrentDelegateesForAddress=function(t){return i(this,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return[4,this.nodeClient.fetchDelegations(t)];case 1:return e=n.sent(),[2,e.map(function(t){return t.validator_address})]}})})},e.prototype.getDelegateeDetails=function(t){return i(this,void 0,void 0,function(){var e,n;return s(this,function(r){switch(r.label){case 0:return[4,this.nodeClient.fetchValidator(t)];case 1:return e=r.sent(),n={0:"jailed",1:"inactive",2:"active"},[2,{name:e.description.moniker,status:n[e.status],address:e.operator_address}]}})})},e.prototype.isPublicKeyDelegating=function(t){return i(this,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return e=this.isAddressDelegating,[4,this.getAddressFromPublicKey(t)];case 1:return[2,e.apply(this,[n.sent()])]}})})},e.prototype.isAddressDelegating=function(t){return i(this,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return[4,this.nodeClient.fetchDelegations(t)];case 1:return e=n.sent(),[2,e.length>0]}})})},e.prototype.getDelegatorDetailsFromPublicKey=function(t){return i(this,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return e=this.getDelegatorDetailsFromAddress,[4,this.getAddressFromPublicKey(t)];case 1:return[2,e.apply(this,[n.sent()])]}})})},e.prototype.getDelegatorDetailsFromAddress=function(t){return i(this,void 0,void 0,function(){return s(this,function(e){return[2,this.getDelegatorDetails(t)]})})},e.prototype.getDelegationDetailsFromPublicKey=function(t,e){return i(this,void 0,void 0,function(){var n;return s(this,function(r){switch(r.label){case 0:return n=this.getDelegationDetailsFromAddress,[4,this.getAddressFromPublicKey(t)];case 1:return[2,n.apply(this,[r.sent(),e])]}})})},e.prototype.getDelegationDetailsFromAddress=function(t,e){return i(this,void 0,void 0,function(){var n,r,o,i;return s(this,function(s){switch(s.label){case 0:return e.length>1?[2,Promise.reject("Multiple validators for a single delegation are not supported.")]:(n=e[0],[4,Promise.all([this.getDelegatorDetails(t,n),this.getDelegateeDetails(n)])]);case 1:return r=s.sent(),o=r[0],i=r[1],[2,{delegator:o,delegatees:[i]}]}})})},e.prototype.prepareDelegatorActionFromPublicKey=function(t,e,n){return i(this,void 0,void 0,function(){var r;return s(this,function(o){switch(o.label){case 0:switch(r=e,r){case a.DELEGATE:return[3,1];case a.UNDELEGATE:return[3,3];case a.WITHDRAW_ALL_REWARDS:return[3,5];case a.WITHDRAW_VALIDATOR_REWARDS:return[3,7]}return[3,9];case 1:return v.assertFields(a[e]+" action",n,"validator","amount"),[4,this.delegate(t,n.validator,n.amount)];case 2:return[2,[o.sent()]];case 3:return v.assertFields(a[e]+" action",n,"validator","amount"),[4,this.undelegate(t,n.validator,n.amount)];case 4:return[2,[o.sent()]];case 5:return[4,this.withdrawDelegationRewards(t)];case 6:return[2,[o.sent()]];case 7:return v.assertFields(a[e]+" action",n,"validator"),[4,this.withdrawDelegationRewards(t,[n.validator])];case 8:return[2,[o.sent()]];case 9:return[2,Promise.reject("Delegator action type "+e+" is not supported.")]}})})},e.prototype.undelegate=function(t,e,n,r){return i(this,void 0,void 0,function(){return s(this,function(o){return[2,this.delegate(t,e,n,!0,r)]})})},e.prototype.delegate=function(t,e,n,r,o){return void 0===r&&(r=!1),i(this,void 0,void 0,function(){var i,a,u,l;return s(this,function(s){switch(s.label){case 0:return[4,this.getAddressFromPublicKey(t)];case 1:return i=s.sent(),[4,this.nodeClient.fetchNodeInfo()];case 2:return a=s.sent(),[4,this.nodeClient.fetchAccount(i)];case 3:return u=s.sent(),l=new m.CosmosDelegateMessage(i,Array.isArray(e)?e[0]:e,new P.CosmosCoin("uatom",n),r),[2,new E.CosmosTransaction([l],new _.CosmosFee([new P.CosmosCoin("uatom",new c.default(this.feeDefaults.low).shiftedBy(this.feeDecimals).toString(10))],this.defaultGas.toString(10)),void 0!==o?o:"",a.network,u.value.account_number,u.value.sequence)]}})})},e.prototype.withdrawDelegationRewards=function(t,e,n){return void 0===e&&(e=[]),i(this,void 0,void 0,function(){var r,o,i,a,u,l,f,d;return s(this,function(s){switch(s.label){case 0:return e.length>0?(r=e,[3,4]):[3,1];case 1:return[4,this.getAddressFromPublicKey(t)];case 2:return o=s.sent(),[4,this.nodeClient.fetchRewardDetails(o)];case 3:i=s.sent(),a=i.filter(function(t){return t.reward.reduce(function(t,e){return t.plus(new c.default(e.amount))},new c.default(0)).decimalPlaces(0,c.default.ROUND_FLOOR).gt(0)}),r=a.map(function(t){return t.validator_address}),s.label=4;case 4:return[4,this.getAddressFromPublicKey(t)];case 5:return u=s.sent(),[4,this.nodeClient.fetchNodeInfo()];case 6:return l=s.sent(),[4,this.nodeClient.fetchAccount(u)];case 7:return f=s.sent(),d=r.map(function(t){return new w.CosmosWithdrawDelegationRewardMessage(u,t)}),[2,new E.CosmosTransaction(d,new _.CosmosFee([new P.CosmosCoin("uatom",new c.default(this.feeDefaults.low).shiftedBy(this.feeDecimals).toString(10))],this.defaultGas.toString(10)),void 0!==n?n:"",l.network,f.value.account_number,f.value.sequence)]}})})},e.prototype.withdrawAllDelegationRewards=function(t,e,n){return i(this,void 0,void 0,function(){var r,o;return s(this,function(i){switch(i.label){case 0:return[4,this.nodeClient.fetchNodeInfo()];case 1:return r=i.sent(),[4,this.nodeClient.fetchAccount(t)];case 2:return o=i.sent(),[2,this.nodeClient.withdrawAllDelegationRewards(t,r.network,o.value.account_number,o.value.sequence,this.defaultGas,e,void 0!==n?n:"")]}})})},e.prototype.fetchTotalReward=function(t){return i(this,void 0,void 0,function(){return s(this,function(e){return[2,this.nodeClient.fetchTotalReward(t)]})})},e.prototype.fetchRewardForDelegation=function(t,e){return i(this,void 0,void 0,function(){return s(this,function(n){return[2,this.nodeClient.fetchRewardForDelegation(t,e)]})})},e.prototype.fetchDelegations=function(t){return i(this,void 0,void 0,function(){return s(this,function(e){return[2,this.nodeClient.fetchDelegations(t)]})})},e.prototype.fetchTotalDelegatedAmount=function(t){return i(this,void 0,void 0,function(){return s(this,function(e){return[2,this.nodeClient.fetchTotalDelegatedAmount(t)]})})},e.prototype.fetchValidator=function(t){return i(this,void 0,void 0,function(){return s(this,function(e){return[2,this.nodeClient.fetchValidator(t)]})})},e.prototype.fetchUnbondingDelegations=function(t){return i(this,void 0,void 0,function(){return s(this,function(e){return[2,this.nodeClient.fetchUnbondingDelegations(t)]})})},e.prototype.fetchTotalUnbondingAmount=function(t){return i(this,void 0,void 0,function(){return s(this,function(e){return[2,this.nodeClient.fetchTotalUnbondingAmount(t)]})})},e.prototype.fetchValidators=function(){return i(this,void 0,void 0,function(){return s(this,function(t){return[2,this.nodeClient.fetchValidators()]})})},e.prototype.fetchSelfDelegation=function(t){return i(this,void 0,void 0,function(){return s(this,function(e){return[2,this.nodeClient.fetchSelfDelegation(t)]})})},e.prototype.broadcastTransaction=function(t){return i(this,void 0,void 0,function(){return s(this,function(e){return[2,this.nodeClient.broadcastSignedTransaction(t)]})})},e.prototype.getDelegatorDetails=function(t,e){var n;return i(this,void 0,void 0,function(){var r,o,i,a,u,l,f,d,h,p;return s(this,function(s){switch(s.label){case 0:return[4,Promise.all([this.getBalanceOfAddresses([t]),this.getAvailableBalanceOfAddresses([t]),this.nodeClient.fetchDelegations(t).catch(function(){return[]}),this.nodeClient.fetchRewardDetails(t).catch(function(){return[]})])];case 1:return r=s.sent(),o=r[0],i=new c.default(r[1]),a=r[2],u=r[3],l=u.map(function(t){return[t.validator_address,t.reward.reduce(function(t,e){return t.plus(e.amount)},new c.default(0)).decimalPlaces(0,c.default.ROUND_FLOOR)]}),f=l.reduce(function(t,e){return t.plus(e[1])},new c.default(0)),d=e?(null===(n=l.find(function(t){var n=t[0];t[1];return n===e}))||void 0===n?void 0:n[1])||new c.default(0):void 0,h=e?a.some(function(t){return t.validator_address===e}):a.length>0,p=this.getAvailableDelegatorActions(h,i,f,d),[2,{address:t,balance:o,delegatees:a.map(function(t){return t.validator_address}),availableActions:p}]}})})},e.prototype.getAvailableDelegatorActions=function(t,e,n,r){var o,i=[],s=new c.default(this.feeDefaults.low).shiftedBy(this.feeDecimals),u=e.gt(s);return u&&i.push({type:a.DELEGATE,args:["validator","amount"]}),t&&i.push({type:a.UNDELEGATE,args:["validator","amount"]}),n.gt(0)&&i.push({type:a.WITHDRAW_ALL_REWARDS}),(null===(o=r)||void 0===o?void 0:o.gt(0))&&i.push({type:a.WITHDRAW_VALIDATOR_REWARDS,args:["validator"]}),i},e.prototype.signMessage=function(t,e){return i(this,void 0,void 0,function(){return s(this,function(n){return[2,(new x.CosmosCryptoClient).signMessage(t,e)]})})},e.prototype.verifyMessage=function(t,e,n){return i(this,void 0,void 0,function(){return s(this,function(r){return[2,(new x.CosmosCryptoClient).verifyMessage(t,e,n)]})})},e.prototype.getTransactionStatuses=function(t){return i(this,void 0,void 0,function(){return s(this,function(t){return[2,Promise.reject("Transaction status not implemented")]})})},e}(y.NonExtendedProtocol);e.CosmosProtocol=C},66873(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function s(t){try{u(r.next(t))}catch(e){i(e)}}function a(t){try{u(r["throw"](t))}catch(e){i(e)}}function u(t){t.done?n(t.value):o(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(66408),a=n(91036),u=n(81388),c="Mainnet",l="https://cosmos-node.prod.gke.papers.tech",f="https://www.mintscan.io",d=function(){function t(t){void 0===t&&(t=f),this.blockExplorer=t}return t.prototype.getAddressLink=function(t){return o(this,void 0,void 0,function(){return i(this,function(e){return[2,this.blockExplorer+"/cosmos/account/"+t+"/"]})})},t.prototype.getTransactionLink=function(t){return o(this,void 0,void 0,function(){return i(this,function(e){return[2,this.blockExplorer+"/cosmos/txs/"+t]})})},t}();e.MintscanBlockExplorer=d;var h=function(t){function e(e,n,r,o,i){return void 0===e&&(e=c),void 0===n&&(n=s.NetworkType.MAINNET),void 0===r&&(r=l),void 0===o&&(o=new d),void 0===i&&(i=void 0),t.call(this,e,n,r,o,i)||this}return r(e,t),e}(s.ProtocolNetwork);e.CosmosProtocolNetwork=h;var p=function(){function t(t,e){void 0===t&&(t=new a.CosmosInfoClient),void 0===e&&(e=new u.CosmosNodeClient(l)),this.infoClient=t,this.nodeClient=e}return t}();e.CosmosProtocolConfig=p;var v=function(){function t(t,e){void 0===t&&(t=new h),void 0===e&&(e=new p),this.network=t,this.config=e}return t}();e.CosmosProtocolOptions=v},10739(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(21455),o=n(63864),i=n(75733),s=n(44363),a=n(48280),u=n(98923),c=function(){function t(t,e,n,r,o,i){this.messages=t,this.fee=e,this.memo=n,this.chainID=r,this.accountNumber=o,this.sequence=i}return t.prototype.toJSON=function(){return{accountNumber:this.accountNumber,chainID:this.chainID,fee:this.fee.toJSON(),memo:this.memo,messages:this.messages.map(function(t){return t.toJSON()}),sequence:this.sequence}},t.prototype.toRPCBody=function(){return{account_number:this.accountNumber,chain_id:this.chainID,fee:this.fee.toRPCBody(),memo:this.memo,msgs:this.messages.map(function(t){return t.toRPCBody()}),sequence:this.sequence}},t.prototype.toAirGapTransactions=function(t){var e=this,n=this.fee.amount.map(function(t){return new r.default(t.amount)}).reduce(function(t,e){return t.plus(e)});return this.messages.map(function(e){return e.toAirGapTransaction(t,n.toString(10))}).map(function(t){return t.transactionDetails||(t.transactionDetails={}),t.transactionDetails.accountNumber=e.accountNumber,t.transactionDetails.chainID=e.chainID,t.transactionDetails.memo=e.memo,t.transactionDetails.sequence=e.sequence,t})},t.fromJSON=function(e){var n=e.transaction.messages.map(function(t){var e=t.type;switch(e){case i.CosmosMessageType.Send.index:return s.CosmosSendMessage.fromJSON(t);case i.CosmosMessageType.Delegate.index:case i.CosmosMessageType.Undelegate.index:return o.CosmosDelegateMessage.fromJSON(t);case i.CosmosMessageType.WithdrawDelegationReward.index:return a.CosmosWithdrawDelegationRewardMessage.fromJSON(t);default:throw new Error("Unknown message")}});return new t(n,u.CosmosFee.fromJSON(e.transaction.fee),e.transaction.memo,e.transaction.chainID,e.transaction.accountNumber,e.transaction.sequence)},t.fromRPCBody=function(e){var n=e.msgs.map(function(t){var e=t.type;switch(e){case i.CosmosMessageType.Send.value:return s.CosmosSendMessage.fromRPCBody(t);case i.CosmosMessageType.Delegate.value:case i.CosmosMessageType.Undelegate.value:return o.CosmosDelegateMessage.fromRPCBody(t);case i.CosmosMessageType.WithdrawDelegationReward.value:return a.CosmosWithdrawDelegationRewardMessage.fromRPCBody(t);default:throw new Error("Unknown message")}});return new t(n,u.CosmosFee.fromRPCBody(e.fee),e.memo,e.chain_id,e.account_number,e.sequence)},t}();e.CosmosTransaction=c},63864(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(92476),o=n(39674),i=n(75733),s=function(){function t(t,e,n,r){void 0===r&&(r=!1),this.delegatorAddress=t,this.validatorAddress=e,this.amount=n,this.type=r?i.CosmosMessageType.Undelegate:i.CosmosMessageType.Delegate}return t.prototype.toJSON=function(){return{type:this.type.index,amount:[this.amount.toJSON()],fromAddress:this.delegatorAddress,toAddress:this.validatorAddress}},t.fromJSON=function(e){return new t(e.fromAddress,e.toAddress,o.CosmosCoin.fromJSON(e.amount[0]),e.type===i.CosmosMessageType.Undelegate.index)},t.prototype.toRPCBody=function(){return{type:this.type.value,value:{amount:this.amount.toRPCBody(),delegator_address:this.delegatorAddress,validator_address:this.validatorAddress}}},t.prototype.toAirGapTransaction=function(t,e){return{amount:this.amount.amount,from:[this.delegatorAddress],to:[this.validatorAddress],isInbound:!1,fee:e,protocolIdentifier:t.identifier,network:t.options.network,transactionDetails:this.toRPCBody(),extra:{type:this.type.index===i.CosmosMessageTypeIndex.DELEGATE?r.AirGapTransactionType.DELEGATE:r.AirGapTransactionType.UNDELEGATE}}},t.fromRPCBody=function(e){return new t(e.value.delegator_address,e.value.validator_address,o.CosmosCoin.fromRPCBody(e.value.amount),e.type===i.CosmosMessageType.Undelegate.value)},t}();e.CosmosDelegateMessage=s},75733(t,e){var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t["SEND"]=0]="SEND",t[t["DELEGATE"]=1]="DELEGATE",t[t["UNDELEGATE"]=2]="UNDELEGATE",t[t["WITHDRAW_DELEGATION_REWARD"]=3]="WITHDRAW_DELEGATION_REWARD"}(n=e.CosmosMessageTypeIndex||(e.CosmosMessageTypeIndex={}));var r=function(){function t(t){switch(this.index=t,t){case n.SEND:this.value="cosmos-sdk/MsgSend";break;case n.DELEGATE:this.value="cosmos-sdk/MsgDelegate";break;case n.UNDELEGATE:this.value="cosmos-sdk/MsgUndelegate";break;case n.WITHDRAW_DELEGATION_REWARD:this.value="cosmos-sdk/MsgWithdrawDelegationReward";break;default:throw new Error("Unknown message type")}}return t.Send=new t(n.SEND),t.Delegate=new t(n.DELEGATE),t.Undelegate=new t(n.UNDELEGATE),t.WithdrawDelegationReward=new t(n.WITHDRAW_DELEGATION_REWARD),t}();e.CosmosMessageType=r},44363(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(21455),o=n(92476),i=n(39674),s=n(75733),a=function(){function t(t,e,n){this.type=s.CosmosMessageType.Send,this.fromAddress=t,this.toAddress=e,this.amount=n}return t.prototype.toJSON=function(){return{type:this.type.index,amount:this.amount.map(function(t){return t.toJSON()}),fromAddress:this.fromAddress,toAddress:this.toAddress}},t.fromJSON=function(e){return new t(e.fromAddress,e.toAddress,e.amount.map(function(t){return i.CosmosCoin.fromJSON(t)}))},t.prototype.toRPCBody=function(){return{type:this.type.value,value:{amount:this.amount.map(function(t){return t.toRPCBody()}),from_address:this.fromAddress,to_address:this.toAddress}}},t.prototype.toAirGapTransaction=function(t,e){return{amount:this.amount.map(function(t){return new r.default(t.amount)}).reduce(function(t,e){return t.plus(e)}).toString(10),to:[this.toAddress],from:[this.fromAddress],isInbound:!1,fee:e,protocolIdentifier:t.identifier,network:t.options.network,transactionDetails:this.toRPCBody(),extra:{type:o.AirGapTransactionType.SPEND}}},t.fromRPCBody=function(e){return new t(e.value.from_address,e.value.to_address,e.value.amount.map(function(t){return i.CosmosCoin.fromRPCBody(t)}))},t}();e.CosmosSendMessage=a},48280(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(75733),o=function(){function t(t,e){this.type=r.CosmosMessageType.WithdrawDelegationReward,this.delegatorAddress=t,this.validatorAddress=e}return t.prototype.toAirGapTransaction=function(t,e){return{from:[this.delegatorAddress],to:[this.validatorAddress],amount:"0",isInbound:!1,fee:e,protocolIdentifier:t.identifier,network:t.options.network,transactionDetails:this.toRPCBody()}},t.prototype.toJSON=function(){return{type:this.type.index,amount:[{denom:"",amount:""}],fromAddress:this.delegatorAddress,toAddress:this.validatorAddress}},t.fromJSON=function(e){return new t(e.fromAddress,e.toAddress)},t.prototype.toRPCBody=function(){return{type:this.type.value,value:{delegator_address:this.delegatorAddress,validator_address:this.validatorAddress}}},t.fromRPCBody=function(e){return new t(e.value.delegator_address,e.value.validator_address)},t}();e.CosmosWithdrawDelegationRewardMessage=o},91160(t,e,n){var r=n(48287)["Buffer"],o=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function s(t){try{u(r.next(t))}catch(e){i(e)}}function a(t){try{u(r["throw"](t))}catch(e){i(e)}}function u(t){t.done?n(t.value):o(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(21455),a=n(66029),u=n(60539),c=n(66467),l=n(59159),f=n(86059),d=n(52916),h=n(27875),p=n(50567),v=n(63313),y=n(52113),m=function(){function t(t){void 0===t&&(t=new p.EthereumProtocolOptions),this.options=t,this.symbol="ETH",this.name="Ethereum",this.marketSymbol="eth",this.feeSymbol="eth",this.feeDefaults={low:"0.00021",medium:"0.000315",high:"0.00084"},this.decimals=18,this.feeDecimals=18,this.identifier=l.MainProtocolSymbols.ETH,this.units=[{unitSymbol:"ETH",factor:"1"},{unitSymbol:"GWEI",factor:"0.000000001"},{unitSymbol:"WEI",factor:"0.000000000000000001"}],this.supportsHD=!1,this.standardDerivationPath="m/44'/60'/0'/0/0",this.addressIsCaseSensitive=!1,this.addressValidationPattern="^0x[a-fA-F0-9]{40}$",this.addressPlaceholder="0xabc...",this.network=u.networks.bitcoin}return Object.defineProperty(t.prototype,"subProtocols",{get:function(){return f.getSubProtocolsByIdentifier(this.identifier,this.options.network)},enumerable:!0,configurable:!0}),t.prototype.getBlockExplorerLinkForAddress=function(t){return o(this,void 0,void 0,function(){return i(this,function(e){return[2,this.options.network.blockExplorer.getAddressLink(t)]})})},t.prototype.getBlockExplorerLinkForTxId=function(t){return o(this,void 0,void 0,function(){return i(this,function(e){return[2,this.options.network.blockExplorer.getTransactionLink(t)]})})},t.prototype.getPublicKeyFromMnemonic=function(t,e,n){return o(this,void 0,void 0,function(){var r;return i(this,function(o){return r=a.mnemonicToSeed(t,n),[2,this.getPublicKeyFromHexSecret(r,e)]})})},t.prototype.getPrivateKeyFromMnemonic=function(t,e,n){return o(this,void 0,void 0,function(){var r;return i(this,function(o){return r=a.mnemonicToSeed(t,n),[2,this.getPrivateKeyFromHexSecret(r,e)]})})},t.prototype.getExtendedPrivateKeyFromMnemonic=function(t,e,n){return o(this,void 0,void 0,function(){return i(this,function(t){throw new Error("extended private key support for ether not implemented")})})},t.prototype.getPublicKeyFromHexSecret=function(t,e){return o(this,void 0,void 0,function(){var n;return i(this,function(r){return n=u.HDNode.fromSeedHex(t,this.network),[2,n.derivePath(e).neutered().getPublicKeyBuffer().toString("hex")]})})},t.prototype.getPrivateKeyFromHexSecret=function(t,e){return o(this,void 0,void 0,function(){var n;return i(this,function(r){return n=u.HDNode.fromSeedHex(t,this.network),[2,n.derivePath(e).keyPair.d.toBuffer(32)]})})},t.prototype.getExtendedPrivateKeyFromHexSecret=function(t,e){return o(this,void 0,void 0,function(){return i(this,function(t){throw new Error("extended private key support for ether not implemented")})})},t.prototype.getAddressFromPublicKey=function(t){return o(this,void 0,void 0,function(){return i(this,function(e){return"string"===typeof t?[2,c.toChecksumAddress(c.pubToAddress(r.from(t,"hex"),!0).toString("hex"))]:[2,c.toChecksumAddress(c.pubToAddress(t,!0).toString("hex"))]})})},t.prototype.getAddressesFromPublicKey=function(t){return o(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return[4,this.getAddressFromPublicKey(t)];case 1:return e=n.sent(),[2,[e]]}})})},t.prototype.getAddressFromExtendedPublicKey=function(t,e,n){return o(this,void 0,void 0,function(){return i(this,function(r){return[2,this.getAddressFromPublicKey(u.HDNode.fromBase58(t,this.network).derive(e).derive(n).getPublicKeyBuffer().toString("hex"))]})})},t.prototype.getAddressesFromExtendedPublicKey=function(t,e,n,r){var o=this,i=u.HDNode.fromBase58(t,this.network),s=[n].map(function(t,e){return e+r});return Promise.all(s.map(function(t){return o.getAddressFromPublicKey(i.derive(e).derive(t).getPublicKeyBuffer().toString("hex"))}))},t.prototype.signWithExtendedPrivateKey=function(t,e){return Promise.reject("extended private key signing for ether not implemented")},t.prototype.signWithPrivateKey=function(t,e){return o(this,void 0,void 0,function(){var n;return i(this,function(r){return e.value.startsWith("0x")||(e.value=v.EthereumUtils.toHex(parseInt(e.value,10))),n=new y(e),n.sign(t),[2,n.serialize().toString("hex")]})})},t.prototype.getTransactionDetails=function(t){return o(this,void 0,void 0,function(){var e,n;return i(this,function(r){switch(r.label){case 0:return e=t.transaction,n={},[4,this.getAddressFromPublicKey(t.publicKey)];case 1:return[2,[(n.from=[r.sent()],n.to=[e.to],n.amount=new s.BigNumber(e.value).toString(10),n.fee=new s.BigNumber(e.gasLimit).multipliedBy(new s.BigNumber(e.gasPrice)).toString(10),n.protocolIdentifier=this.identifier,n.network=this.options.network,n.isInbound=!1,n.data=e.data,n.transactionDetails=t,n)]]}})})},t.prototype.getTransactionDetailsFromSigned=function(t){return o(this,void 0,void 0,function(){var e,n,r,o,a;return i(this,function(i){return e=new y(t.transaction),n=e.value.toString("hex")||"0x0",r=e.gasPrice.toString("hex")||"0x0",o=e.gasLimit.toString("hex")||"0x0",a=e.nonce.toString("hex")||"0x0",[2,[{from:[c.toChecksumAddress("0x"+e.from.toString("hex"))],to:[c.toChecksumAddress("0x"+e.to.toString("hex"))],amount:new s.BigNumber(parseInt(n,16)).toString(10),fee:new s.BigNumber(parseInt(o,16)).multipliedBy(new s.BigNumber(parseInt(r,16))).toString(10),protocolIdentifier:this.identifier,network:this.options.network,isInbound:e.toCreationAddress(),hash:"0x"+e.hash().toString("hex"),data:"0x"+e.data.toString("hex"),extra:{nonce:parseInt(a,16)},transactionDetails:t.transaction}]]})})},t.prototype.getBalanceOfPublicKey=function(t){return o(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return[4,this.getAddressFromPublicKey(t)];case 1:return e=n.sent(),[2,this.getBalanceOfAddresses([e])]}})})},t.prototype.getBalanceOfAddresses=function(t){return o(this,void 0,void 0,function(){var e,n=this;return i(this,function(r){switch(r.label){case 0:return[4,Promise.all(t.map(function(t){return n.options.nodeClient.fetchBalance(t)}))];case 1:return e=r.sent(),[2,e.reduce(function(t,e){return t.plus(e)}).toString(10)]}})})},t.prototype.getBalanceOfPublicKeyForSubProtocols=function(t,e){return o(this,void 0,void 0,function(){var n,r,o;return i(this,function(i){switch(i.label){case 0:return[4,this.getAddressFromPublicKey(t)];case 1:return n=i.sent(),r=e.map(function(t){if(t.subProtocolType===d.SubProtocolType.TOKEN&&t.contractAddress)return t.contractAddress;throw Error("can only retrieve balance of ERC20 tokens")}),[4,this.options.nodeClient.callBalanceOfOnContracts(r,n)];case 2:return o=i.sent(),[2,r.map(function(t){var e,n;return n=null===(e=o[t])||void 0===e?void 0:e.toFixed(),null!==n&&void 0!==n?n:"0"})]}})})},t.prototype.getBalanceOfExtendedPublicKey=function(t,e){return void 0===e&&(e=0),Promise.reject("extended public balance for ether not implemented")},t.prototype.getAvailableBalanceOfAddresses=function(t){return o(this,void 0,void 0,function(){return i(this,function(e){return[2,this.getBalanceOfAddresses(t)]})})},t.prototype.estimateMaxTransactionValueFromExtendedPublicKey=function(t,e,n){return Promise.reject("estimating max value using extended public key not implemented")},t.prototype.estimateFeeDefaultsFromExtendedPublicKey=function(t,e,n,r){return o(this,void 0,void 0,function(){return i(this,function(t){return[2,Promise.reject("estimating default fees using extended public key not implemented")]})})},t.prototype.prepareTransactionFromExtendedPublicKey=function(t,e,n,r,o){return Promise.reject("extended public tx for ether not implemented")},t.prototype.estimateMaxTransactionValueFromPublicKey=function(t,e,n){return o(this,void 0,void 0,function(){var r,o,a,u,c;return i(this,function(i){switch(i.label){case 0:return[4,this.getBalanceOfPublicKey(t)];case 1:return r=i.sent(),o=new s.BigNumber(r),void 0===n?[3,2]:(a=new s.BigNumber(n),[3,4]);case 2:return[4,this.estimateFeeDefaultsFromPublicKey(t,e,[r])];case 3:u=i.sent(),a=new s.BigNumber(u.medium).shiftedBy(this.decimals),a.gte(o)&&(a=new s.BigNumber(0)),i.label=4;case 4:return c=o.minus(a),c.isNegative()&&(c=new s.BigNumber(0)),[2,c.toFixed()]}})})},t.prototype.estimateFeeDefaultsFromPublicKey=function(t,e,n,r){return o(this,void 0,void 0,function(){var r,o,a,u,c,l,f,d;return i(this,function(i){switch(i.label){case 0:return e.length!==n.length?[2,Promise.reject("recipients length does not match with values")]:1!==e.length?[2,Promise.reject("you cannot have 0 recipients")]:[4,this.getAddressFromPublicKey(t)];case 1:return r=i.sent(),[4,this.options.nodeClient.estimateTransactionGas(r,e[0],v.EthereumUtils.toHex(n[0]),void 0,v.EthereumUtils.toHex("21000"))];case 2:return o=i.sent(),[4,this.options.nodeClient.getGasPrice()];case 3:return a=i.sent(),u=new s.BigNumber(.5),c=o.times(a),l=c.minus(c.times(u).integerValue(s.BigNumber.ROUND_FLOOR)),f=c,d=f.plus(f.times(u).integerValue(s.BigNumber.ROUND_FLOOR)),[2,{low:l.shiftedBy(-this.feeDecimals).toFixed(),medium:f.shiftedBy(-this.feeDecimals).toFixed(),high:d.shiftedBy(-this.feeDecimals).toFixed()}]}})})},t.prototype.prepareTransactionFromPublicKey=function(t,e,n,r,a){return o(this,void 0,void 0,function(){var o,a,u,c,l,f,d,h,p;return i(this,function(i){switch(i.label){case 0:return o=n.map(function(t){return new s.BigNumber(t)}),a=new s.BigNumber(r),[4,this.getAddressFromPublicKey(t)];case 1:return u=i.sent(),e.length!==n.length?[2,Promise.reject("recipients length does not match with values")]:1!==e.length?[2,Promise.reject("you cannot have 0 recipients")]:(c=v.EthereumUtils.toHex(o[0].toFixed()),[4,this.getBalanceOfPublicKey(t)]);case 2:return l=i.sent(),[4,this.options.nodeClient.estimateTransactionGas(u,e[0],c,void 0,v.EthereumUtils.toHex("21000"))];case 3:return f=i.sent(),d=a.div(f).integerValue(s.BigNumber.ROUND_CEIL),new s.BigNumber(l).gte(new s.BigNumber(o[0].plus(a)))?[4,this.options.nodeClient.fetchTransactionCount(u)]:[3,5];case 4:return h=i.sent(),p={nonce:v.EthereumUtils.toHex(h),gasLimit:v.EthereumUtils.toHex(f.toFixed()),gasPrice:v.EthereumUtils.toHex(d.toFixed()),to:e[0],value:c,chainId:this.options.network.extras.chainID,data:"0x"},[2,p];case 5:throw new Error("not enough balance")}})})},t.prototype.broadcastTransaction=function(t){return o(this,void 0,void 0,function(){return i(this,function(e){return[2,this.options.nodeClient.sendSignedTransaction("0x"+t)]})})},t.prototype.getTransactionsFromExtendedPublicKey=function(t,e,n){return Promise.reject("extended public transaction list for ether not implemented")},t.prototype.getTransactionsFromPublicKey=function(t,e,n){return void 0===e&&(e=50),o(this,void 0,void 0,function(){var r;return i(this,function(o){switch(o.label){case 0:return[4,this.getAddressFromPublicKey(t)];case 1:return r=o.sent(),[2,this.getTransactionsFromAddresses([r],e,n)]}})})},t.prototype.getTransactionsFromAddresses=function(t,e,n){var r=this;return new Promise(function(o,i){for(var s=[],a=0,u=t;a<u.length;a++){var c=u[a];s.push(r.options.infoClient.fetchTransactions(r,c,e,n))}Promise.all(s).then(function(t){var e=Math.max.apply(Math,t.map(function(t){return t.cursor.page}));o(t.reduce(function(t,n){return{transactions:t.transactions.concat(n.transactions),cursor:{page:e}}}))}).catch(i)})},t.prototype.signMessage=function(t,e){return o(this,void 0,void 0,function(){return i(this,function(n){return[2,new h.EthereumCryptoClient(this).signMessage(t,e)]})})},t.prototype.verifyMessage=function(t,e,n){return o(this,void 0,void 0,function(){return i(this,function(r){return[2,new h.EthereumCryptoClient(this).verifyMessage(t,e,n)]})})},t.prototype.getTransactionStatuses=function(t){return o(this,void 0,void 0,function(){var e,n=this;return i(this,function(r){return e=t.map(function(t){return n.options.nodeClient.getTransactionStatus(t)}),[2,Promise.all(e)]})})},t}();e.BaseEthereumProtocol=m},23850(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(91160),i=n(50567),s=function(t){function e(){return t.call(this,new i.EthereumProtocolOptions(new i.EthereumProtocolNetwork(void 0,void 0,"https://mew.epool.io",void 0,new i.EthereumProtocolNetworkExtras(61,"https://classic.trustwalletapp.com"))))||this}return r(e,t),e}(o.BaseEthereumProtocol);e.EthereumClassicProtocol=s},27875(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function s(t){try{u(r.next(t))}catch(e){i(e)}}function a(t){try{u(r["throw"](t))}catch(e){i(e)}}function u(t){t.done?n(t.value):o(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(66467),a=n(33202),u=function(t){function e(e){var n=t.call(this)||this;return n.protocol=e,n}return r(e,t),e.prototype.signMessage=function(t,e){return o(this,void 0,void 0,function(){var n,r;return i(this,function(o){if(!e.privateKey)throw new Error("Private key not provided");return n=s.hashPersonalMessage(s.toBuffer(t)),r=s.ecsign(n,e.privateKey),[2,s.toRpcSig(r.v,r.r,r.s)]})})},e.prototype.verifyMessage=function(t,e,n){return o(this,void 0,void 0,function(){var r,o,a,u,c,l,f,d;return i(this,function(i){switch(i.label){case 0:return r=s.toBuffer(t),o=s.hashPersonalMessage(r),a=s.toBuffer(e),u=s.fromRpcSig(a),c=s.ecrecover(o,u.v,u.r,u.s),l=s.publicToAddress(c),f=s.bufferToHex(l),[4,this.protocol.getAddressFromPublicKey(n)];case 1:return d=i.sent(),[2,f.toLowerCase()===d.toLowerCase()]}})})},e}(a.CryptoClient);e.EthereumCryptoClient=u},67145(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(91160),i=n(50567),s=function(t){function e(e){void 0===e&&(e=new i.EthereumProtocolOptions);var n=t.call(this,e)||this;return n.options=e,n}return r(e,t),e}(o.BaseEthereumProtocol);e.EthereumProtocol=s},50567(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function s(t){try{u(r.next(t))}catch(e){i(e)}}function a(t){try{u(r["throw"](t))}catch(e){i(e)}}function u(t){t.done?n(t.value):o(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(66408),a=n(59293),u=n(70524),c="Mainnet";e.NODE_URL="https://eth-rpc-proxy.airgap.prod.gke.papers.tech";var l="https://etherscan.io";e.BLOCK_EXPLORER_API="https://api.etherscan.io";var f=function(){function t(t,n){void 0===t&&(t=1),void 0===n&&(n=e.BLOCK_EXPLORER_API),this.chainID=t,this.blockExplorerApi=n}return t}();e.EthereumProtocolNetworkExtras=f;var d=function(){function t(t){void 0===t&&(t=l),this.blockExplorer=t}return t.prototype.getAddressLink=function(t){return o(this,void 0,void 0,function(){return i(this,function(e){return[2,this.blockExplorer+"/address/"+t]})})},t.prototype.getTransactionLink=function(t){return o(this,void 0,void 0,function(){return i(this,function(e){return[2,this.blockExplorer+"/tx/"+t]})})},t}();e.EtherscanBlockExplorer=d;var h=function(t){function n(n,r,o,i,a){return void 0===n&&(n=c),void 0===r&&(r=s.NetworkType.MAINNET),void 0===o&&(o=e.NODE_URL),void 0===i&&(i=new d),void 0===a&&(a=new f),t.call(this,n,r,o,i,a)||this}return r(n,t),n}(s.ProtocolNetwork);e.EthereumProtocolNetwork=h;var p=function(){function t(){}return t}();e.EthereumProtocolConfig=p;var v=function(){function t(t,e){void 0===t&&(t=new h),void 0===e&&(e=new p),this.network=t,this.config=e,this.nodeClient=new u.AirGapNodeClient(t.rpcUrl),this.infoClient=new a.EtherscanInfoClient(t.extras.blockExplorerApi)}return t}();e.EthereumProtocolOptions=v;var y=function(){function t(t,e,n,r,o,i){this.symbol=t,this.name=e,this.marketSymbol=n,this.identifier=r,this.contractAddress=o,this.decimals=i}return t}();e.EthereumERC20ProtocolConfig=y;var m=function(t){function e(e,n){void 0===e&&(e=new h);var r=t.call(this,e,n)||this;return r.network=e,r.config=n,r}return r(e,t),e}(v);e.EthereumERC20ProtocolOptions=m},33248(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(91160),i=n(50567),s=function(t){function e(){return t.call(this,new i.EthereumProtocolOptions(new i.EthereumProtocolNetwork(void 0,void 0,"https://ropsten.infura.io",void 0,new i.EthereumProtocolNetworkExtras(3,"https://api-ropsten.etherscan.io/"))))||this}return r(e,t),e}(o.BaseEthereumProtocol);e.EthereumRopstenProtocol=s},59293(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function s(t){try{u(r.next(t))}catch(e){i(e)}}function a(t){try{u(r["throw"](t))}catch(e){i(e)}}function u(t){t.done?n(t.value):o(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(98449),a=n(21455),u=n(92476),c=n(50567),l=n(45792),f=n(82505),d=function(t){function e(e){return void 0===e&&(e=c.BLOCK_EXPLORER_API),t.call(this,e)||this}return r(e,t),e.prototype.fetchTransactions=function(t,e,n,r){return o(this,void 0,void 0,function(){var o,c,l,d,h,p,v,y,m,g;return i(this,function(i){switch(i.label){case 0:return o=[],c=r?this.baseURL+"/api?module=account&action=txlist&address="+e+"&page="+r.page+"&offset="+n+"&sort=desc&apiKey=P63MEHEYBM5BGEG5WFN76VPNCET8B2MAP7":this.baseURL+"/api?module=account&action=txlist&address="+e+"&page=1&offset="+n+"&sort=desc&apiKey=P63MEHEYBM5BGEG5WFN76VPNCET8B2MAP7",[4,s.default.get(c)];case 1:if(l=i.sent(),d=l.data,h=d.result,"0"===d.status&&(void 0===h||!f.isArray(h)))throw Error(d.message);for(p=0,v=h;p<v.length;p++)y=v[p],m=new a.BigNumber(y.gas).times(new a.BigNumber(y.gasPrice)),g={hash:y.hash,from:[y.from],to:[y.to],isInbound:y.to.toLowerCase()===e.toLowerCase(),amount:new a.BigNumber(y.value).toString(10),fee:m.toString(10),blockHeight:y.blockNumber,protocolIdentifier:t.identifier,network:t.options.network,timestamp:parseInt(y.timeStamp,10),status:void 0===y.txreceipt_status||"1"===y.txreceipt_status?u.AirGapTransactionStatus.APPLIED:u.AirGapTransactionStatus.FAILED},o.push(g);return[2,{transactions:o,cursor:{page:r?r.page+1:2}}]}})})},e.prototype.fetchContractTransactions=function(t,e,n,r,c){return o(this,void 0,void 0,function(){var o,l,d,h,p,v,y,m,g,b;return i(this,function(i){switch(i.label){case 0:return o=[],l=c?this.baseURL+"/api?module=account&action=tokentx&address="+n+"&contractAddress="+e+"&page="+c.page+"&offset="+r+"&sort=desc&apiKey=P63MEHEYBM5BGEG5WFN76VPNCET8B2MAP7":this.baseURL+"/api?module=account&action=tokentx&address="+n+"&contractAddress="+e+"&page=1&offset="+r+"&sort=desc&apiKey=P63MEHEYBM5BGEG5WFN76VPNCET8B2MAP7",[4,s.default.get(l)];case 1:if(d=i.sent(),h=d.data,p=h.result,"0"===h.status&&(void 0===p||!f.isArray(p)))throw Error(h.message);for(v=0,y=p;v<y.length;v++)m=y[v],g=new a.BigNumber(m.gas).times(new a.BigNumber(m.gasPrice)),b={hash:m.hash,from:[m.from],to:[m.to],isInbound:m.to.toLowerCase()===n.toLowerCase(),blockHeight:m.blockNumber,protocolIdentifier:t.identifier,network:t.options.network,amount:new a.BigNumber(m.value).toString(10),fee:g.toString(10),timestamp:parseInt(m.timeStamp,10),status:void 0===m.txreceipt_status||"1"===m.txreceipt_status?u.AirGapTransactionStatus.APPLIED:u.AirGapTransactionStatus.FAILED},o.push(b);return[2,{transactions:o,cursor:{page:c?c.page+1:2}}]}})})},e}(l.EthereumInfoClient);e.EtherscanInfoClient=d},45792(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.baseURL=t}return t}();e.EthereumInfoClient=n},70524(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function s(t){try{u(r.next(t))}catch(e){i(e)}}function a(t){try{u(r["throw"](t))}catch(e){i(e)}}function u(t){t.done?n(t.value):o(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(42714),a=n(98449),u=n(21455),c=n(92476),l=n(50567),f=n(63313),d=n(30084),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.toRPCBody=function(){return JSON.stringify(this.toJSON())},e.prototype.toJSON=function(){return{jsonrpc:this.jsonrpc,method:this.method,params:this.params,id:this.id}},e.blockEarliest="earliest",e.blockLatest="latest",e.blockPending="pending",e}(s.RPCBody),p=function(){function t(t){this.methodSignature=t}return t.prototype.abiEncoded=function(){var t=f.EthereumUtils.sha3(this.methodSignature);return null===t?"":"0x"+t.slice(2,10)},t.addLeadingZeroPadding=function(e,n){void 0===n&&(n=t.parametersLength);var r=e;while(r.length<n)r="0"+r;return r},t.removeLeadingZeroPadding=function(t){var e=t;while(e.startsWith("0"))e=e.slice(1);return e},t.parametersLength=64,t}();e.EthereumRPCData=p;var v=function(t){function e(n){var r=t.call(this,e.methodName+"(address)")||this;return r.address=n,r}return r(e,t),e.prototype.abiEncoded=function(){var e=this.address;return e.startsWith("0x")&&(e=e.slice(2)),t.prototype.abiEncoded.call(this)+p.addLeadingZeroPadding(e)},e.methodName="balanceOf",e}(p);e.EthereumRPCDataBalanceOf=v;var y=function(t){function e(n,r){var o=t.call(this,e.methodName+"(address,uint256)")||this;if(r){var i=n;o.recipient=i,o.amount=r}else{var s=n,a=t.prototype.abiEncoded.call(o);if(!s.startsWith(a))throw new Error("unexpected method ID");var u=s.slice(a.length),c=p.removeLeadingZeroPadding(u.slice(0,p.parametersLength)),l=p.removeLeadingZeroPadding(u.slice(p.parametersLength));o.recipient="0x"+c,o.amount="0x"+l}return o}return r(e,t),e.prototype.abiEncoded=function(){var e=this.recipient;e.startsWith("0x")&&(e=e.slice(2));var n=this.amount;return n.startsWith("0x")&&(n=n.slice(2)),t.prototype.abiEncoded.call(this)+p.addLeadingZeroPadding(e.toLowerCase())+p.addLeadingZeroPadding(n.toLowerCase())},e.methodName="transfer",e}(p);e.EthereumRPCDataTransfer=y;var m=function(t){function e(e){return void 0===e&&(e=l.NODE_URL),t.call(this,e)||this}return r(e,t),e.prototype.fetchBalance=function(t){return o(this,void 0,void 0,function(){var e,n;return i(this,function(r){switch(r.label){case 0:return e=new h("eth_getBalance",[t,h.blockLatest]),[4,this.send(e)];case 1:return n=r.sent(),[2,new u.BigNumber(n.result)]}})})},e.prototype.fetchTransactionCount=function(t){return o(this,void 0,void 0,function(){var e,n;return i(this,function(r){switch(r.label){case 0:return e=new h("eth_getTransactionCount",[t,h.blockLatest]),[4,this.send(e)];case 1:return n=r.sent(),[2,new u.BigNumber(n.result).toNumber()]}})})},e.prototype.sendSignedTransaction=function(t){return o(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return e=new h("eth_sendRawTransaction",[t]),[4,this.send(e)];case 1:return[2,n.sent().result]}})})},e.prototype.getTransactionStatus=function(t){return o(this,void 0,void 0,function(){var e,n;return i(this,function(r){switch(r.label){case 0:return e=new h("eth_getTransactionReceipt",[t]),[4,this.send(e)];case 1:return n=r.sent(),[2,"0x1"===n.result.status?c.AirGapTransactionStatus.APPLIED:c.AirGapTransactionStatus.FAILED]}})})},e.prototype.callBalanceOf=function(t,e){return o(this,void 0,void 0,function(){var n,r;return i(this,function(o){switch(o.label){case 0:return n=this.balanceOfBody(t,e),[4,this.send(n)];case 1:return r=o.sent(),[2,new u.BigNumber(r.result)]}})})},e.prototype.callBalanceOfOnContracts=function(t,e){return o(this,void 0,void 0,function(){var n,r,o,s=this;return i(this,function(i){switch(i.label){case 0:return n=t.map(function(t,n){return s.balanceOfBody(t,e,n)}),[4,this.batchSend(n)];case 1:return r=i.sent(),o={},r.forEach(function(e){var n;o[t[e.id]]=new u.BigNumber((n=e.result,null!==n&&void 0!==n?n:0))}),[2,o]}})})},e.prototype.balanceOfBody=function(t,e,n){void 0===n&&(n=0);var r=new v(e);return new h("eth_call",[{to:t,data:r.abiEncoded()},h.blockLatest],n)},e.prototype.estimateTransactionGas=function(t,e,n,r,s){return o(this,void 0,void 0,function(){var o,a;return i(this,function(i){switch(i.label){case 0:return o=new h("eth_estimateGas",[{from:t,to:e,gas:s,value:n,data:r}]),[4,this.send(o)];case 1:return a=i.sent(),[2,new u.BigNumber(a.result)]}})})},e.prototype.estimateTransferGas=function(t,e,n,r){return o(this,void 0,void 0,function(){var o,s;return i(this,function(i){return o=new y(n,r),s=this.estimateTransactionGas(e,t,void 0,o.abiEncoded()),[2,s]})})},e.prototype.getGasPrice=function(){return o(this,void 0,void 0,function(){var t,e;return i(this,function(n){switch(n.label){case 0:return t=new h("eth_gasPrice",[]),[4,this.send(t)];case 1:return e=n.sent(),[2,new u.BigNumber(e.result)]}})})},e.prototype.send=function(t){return o(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return[4,a.default.post(this.baseURL,t.toRPCBody())];case 1:if(e=n.sent().data,void 0!==e.error)throw new Error(e.error.message);return[2,e]}})})},e.prototype.batchSend=function(t){return o(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return[4,a.default.post(this.baseURL,JSON.stringify(t.map(function(t){return t.toJSON()})))];case 1:return e=n.sent().data,[2,e]}})})},e}(d.EthereumNodeClient);e.AirGapNodeClient=m},30084(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.baseURL=t}return t}();e.EthereumNodeClient=n},57518(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function s(t){try{u(r.next(t))}catch(e){i(e)}}function a(t){try{u(r["throw"](t))}catch(e){i(e)}}function u(t){t.done?n(t.value):o(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(21455),a=n(66467),u=n(52916),c=n(91160),l=n(70524),f=n(63313),d=n(52113),h=function(t){function e(e){var n=t.call(this,e)||this;return n.options=e,n.isSubProtocol=!0,n.subProtocolType=u.SubProtocolType.TOKEN,n.contractAddress=e.config.contractAddress,n.symbol=e.config.symbol,n.name=e.config.name,n.marketSymbol=e.config.marketSymbol,n.identifier=e.config.identifier,n.decimals=e.config.decimals,n}return r(e,t),e.prototype.getBalanceOfPublicKey=function(t){return o(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return[4,this.getAddressFromPublicKey(t)];case 1:return e=n.sent(),[2,this.getBalanceOfAddresses([e])]}})})},e.prototype.getBalanceOfAddresses=function(t){return o(this,void 0,void 0,function(){var e,n=this;return i(this,function(r){switch(r.label){case 0:return[4,Promise.all(t.map(function(t){return n.options.nodeClient.callBalanceOf(n.contractAddress,t)}))];case 1:return e=r.sent(),[2,e.reduce(function(t,e){return t.plus(e)}).toString(10)]}})})},e.prototype.signWithPrivateKey=function(e,n){return n.data&&"0x"!==n.data||(n.data=new l.EthereumRPCDataTransfer(n.to,n.value).abiEncoded()),t.prototype.signWithPrivateKey.call(this,e,n)},e.prototype.estimateGas=function(t,e,n){return o(this,void 0,void 0,function(){var r;return i(this,function(o){switch(o.label){case 0:return[4,this.options.nodeClient.estimateTransferGas(this.contractAddress,t,e,n)];case 1:return r=o.sent(),[2,r]}})})},e.prototype.estimateMaxTransactionValueFromPublicKey=function(t,e,n){return o(this,void 0,void 0,function(){return i(this,function(e){return[2,this.getBalanceOfPublicKey(t)]})})},e.prototype.estimateFeeDefaultsFromPublicKey=function(t,e,n,r){return o(this,void 0,void 0,function(){var r,o,a,u,c,l,d,h;return i(this,function(i){switch(i.label){case 0:return e.length!==n.length?[2,Promise.reject("recipients length does not match with values")]:1!==e.length?[2,Promise.reject("you cannot have 0 recipients")]:[4,this.getAddressFromPublicKey(t)];case 1:return r=i.sent(),[4,this.estimateGas(r,e[0],f.EthereumUtils.toHex(n[0]))];case 2:return o=i.sent(),[4,this.options.nodeClient.getGasPrice()];case 3:return a=i.sent(),u=new s.default(.5),c=o.times(a),l=c.minus(c.times(u).integerValue(s.default.ROUND_FLOOR)),d=c,h=d.plus(d.times(u).integerValue(s.default.ROUND_FLOOR)),[2,{low:l.shiftedBy(-this.feeDecimals).toFixed(),medium:d.shiftedBy(-this.feeDecimals).toFixed(),high:h.shiftedBy(-this.feeDecimals).toFixed()}]}})})},e.prototype.prepareTransactionFromPublicKey=function(e,n,r,a){return o(this,void 0,void 0,function(){var o,u,c,d,h,p,v,y,m,g,b;return i(this,function(i){switch(i.label){case 0:if(o=r.map(function(t){return new s.default(t)}),u=new s.default(a),n.length!==o.length)throw new Error("recipients length does not match with values");if(1!==n.length)throw new Error("you cannot have 0 recipients");return d=s.default.bind,[4,this.getBalanceOfPublicKey(e)];case 1:return c=new(d.apply(s.default,[void 0,i.sent()])),c.isGreaterThanOrEqualTo(o[0])?[4,this.getAddressFromPublicKey(e)]:[3,8];case 2:return h=i.sent(),v=s.default.bind,[4,t.prototype.getBalanceOfAddresses.call(this,[h])];case 3:return p=new(v.apply(s.default,[void 0,i.sent()])),[4,this.estimateGas(h,n[0],f.EthereumUtils.toHex(o[0].toFixed()))];case 4:return y=i.sent(),p.isGreaterThanOrEqualTo(u)?[4,this.options.nodeClient.fetchTransactionCount(h)]:[3,6];case 5:return m=i.sent(),g=u.isEqualTo(0)?new s.default(0):u.div(y).integerValue(s.default.ROUND_CEIL),b={nonce:f.EthereumUtils.toHex(m),gasLimit:f.EthereumUtils.toHex(y.toFixed()),gasPrice:f.EthereumUtils.toHex(g.toFixed()),to:this.contractAddress,value:f.EthereumUtils.toHex(new s.default(0).toFixed()),chainId:this.options.network.extras.chainID,data:new l.EthereumRPCDataTransfer(n[0],f.EthereumUtils.toHex(o[0].toFixed())).abiEncoded()},[2,b];case 6:throw new Error("not enough ETH balance");case 7:return[3,9];case 8:throw new Error("not enough token balance");case 9:return[2]}})})},e.prototype.getTransactionsFromAddresses=function(t,e,n){var r=this;return new Promise(function(o,i){for(var s=[],a=0,u=t;a<u.length;a++){var c=u[a];s.push(r.options.infoClient.fetchContractTransactions(r,r.contractAddress,c,e,n))}Promise.all(s).then(function(t){var e=Math.max.apply(Math,t.map(function(t){return t.cursor.page}));o(t.reduce(function(t,n){return{transactions:t.transactions.concat(n.transactions),cursor:{page:e}}}))}).catch(i)})},e.prototype.getTransactionDetailsFromSigned=function(e){return o(this,void 0,void 0,function(){var n,r,o,u;return i(this,function(i){switch(i.label){case 0:return[4,t.prototype.getTransactionDetailsFromSigned.call(this,e)];case 1:if(n=i.sent(),1!==n.length)throw new Error("More than one ETH transaction detected.");return r=n[0],o=new d(e.transaction),u=new l.EthereumRPCDataTransfer("0x"+o.data.toString("hex")),r.to=[a.toChecksumAddress(u.recipient)],r.amount=new s.default(u.amount).toString(10),[2,[r]]}})})},e.prototype.getTransactionDetails=function(e){return o(this,void 0,void 0,function(){var n,r,o,u;return i(this,function(i){switch(i.label){case 0:return n=e,[4,t.prototype.getTransactionDetails.call(this,n)];case 1:if(r=i.sent(),1!==r.length)throw new Error("More than one ETH transaction detected.");return o=r[0],u=new l.EthereumRPCDataTransfer(n.transaction.data),o.to=[a.toChecksumAddress(u.recipient)],o.amount=new s.default(u.amount).toString(10),[2,[o]]}})})},e}(c.BaseEthereumProtocol);e.GenericERC20=h},63313(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(21455),o=n(31266),i=n(40397),s=function(){function t(){}return t.toHex=function(e){if(t.isAddress(e))return"0x"+e.toLowerCase().replace(/^0x/i,"");if("boolean"===typeof e)return e?"0x01":"0x00";if(t.isObject(e)&&!t.isBigNumber(e))return t.utf8ToHex(JSON.stringify(e));if("string"===typeof e){if(0===e.indexOf("-0x")||0===e.indexOf("-0X"))return t.numberToHex(e);if(0===e.indexOf("0x")||0===e.indexOf("0X"))return e;if(!isFinite(Number(e)))return t.utf8ToHex(e)}return t.numberToHex(e)},t.sha3=function(e){var n=e;t.isHexStrict(e)&&/^0x/i.test(e.toString())&&(n=t.hexToBytes(e));var r=i("keccak256").update(n).digest("hex"),o="0x"+r;return o===t.SHA3_NULL_S?null:o},t.numberToHex=function(e){if(null===e||void 0===e)return e;if(!isFinite(Number(e))&&!t.isHexStrict(e))throw new Error('Given input "'+e+'" is not a number.');var n=new r.BigNumber(e),o=n.toString(16);return n.lt(new r.BigNumber(0))?"-0x"+o.substr(1):"0x"+o},t.hexToBytes=function(e){var n="number"===typeof e?e.toString(16):e;if(!t.isHexStrict(n))throw new Error('Given value "'+n+'" is not a valid hex string.');n=n.replace(/^0x/i,"");for(var r=[],o=0;o<n.length;o+=2)r.push(parseInt(n.substr(o,2),16));return r},t.isHexStrict=function(t){return("string"===typeof t||"number"===typeof t)&&/^(-)?0x[0-9a-f]*$/i.test(t.toString())},t.checkAddressChecksum=function(e){var n=e.replace(/^0x/i,""),r=t.sha3(n.toLowerCase());if(null===r)return!1;r=r.replace(/^0x/i,"");for(var o=0;o<40;o++)if(parseInt(r[o],16)>7&&n[o].toUpperCase()!==n[o]||parseInt(r[o],16)<=7&&n[o].toLowerCase()!==n[o])return!1;return!0},t.isAddress=function(e){return!!/^(0x)?[0-9a-f]{40}$/i.test(e)&&(!(!/^(0x|0X)?[0-9a-f]{40}$/.test(e)&&!/^(0x|0X)?[0-9A-F]{40}$/.test(e))||t.checkAddressChecksum(e))},t.isBigNumber=function(t){return t&&r.BigNumber.isBigNumber(t)},t.utf8ToHex=function(t){var e=o.encode(t),n="";e=e.replace(/^(?:\u0000)*/,""),e=e.split("").reverse().join(""),e=e.replace(/^(?:\u0000)*/,""),e=e.split("").reverse().join("");for(var r=0;r<e.length;r++){var i=e.charCodeAt(r),s=i.toString(16);n+=s.length<2?"0"+s:s}return"0x"+n},t.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},t.SHA3_NULL_S="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",t}();e.EthereumUtils=s}}]);