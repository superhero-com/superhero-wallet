"use strict";(self["webpackChunksuperhero_wallet"]=self["webpackChunksuperhero_wallet"]||[]).push([[2113],{28129:function(e,t,n){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):o(e.value).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(21455),s=n(60607),c=function(e){function t(t){var n=e.call(this,t)||this;return n.protocol=t,n}return r(t,e),t.prototype.computeBakingRewards=function(e,t){return o(this,void 0,void 0,(function(){var n,r,o,s,c=this;return i(this,(function(i){switch(i.label){case 0:return n=new a.default(0),r=[],o=e.map((function(e){return e.level})),t?[3,2]:[4,this.fetchEndorsementOperationCountAndTotalFees(o)];case 1:s=i.sent(),i.label=2;case 2:return n=e.reduce((function(e,n){var o,i=c.tezosNodeConstants.endorsers_per_block;if(!t&&void 0!==s){if(o=s.get(n.level),void 0===o)throw new Error("Cannot find endorsement operation count");i=parseInt(o.sum_number_of_slots)}var u=n.priority,l=i,f=c.specificBakingCalculation(l,u);return r.push({level:n.level,amount:f.toFixed(),deposit:c.tezosNodeConstants.block_security_deposit,fees:void 0!==o?new a.default(o.sum_fee).toFixed():"0"}),e.plus(f)}),new a.default(0)),[2,{totalBakingRewards:n.toFixed(),rewardsDetails:r}]}}))}))},t.prototype.specificBakingCalculation=function(e,t){var n=Math.floor(8+e/32*2),r=this.tezosNodeConstants.block_reward*n/10/(t+1);return new a.default(r)},t.prototype.computeEndorsingRewards=function(e,t){return o(this,void 0,void 0,(function(){var n,r,o,s,c=this;return i(this,(function(i){switch(i.label){case 0:return n=[],r=[],t?[3,2]:(o=e.map((function(e){return e.block_level})),o.length>0?[4,this.fetchBlockPriorities(o)]:[3,2]);case 1:n=i.sent(),i.label=2;case 2:return s=e.reduce((function(e,o){var i=0;if(!t){var a=n.find((function(e){return e.level===o.block_level}));if(void 0===a)throw new Error("Cannot find block priority");i=a.priority}var s=c.specificEndorsingCalculation(i,o.number_of_slots);return r.push({level:o.level,amount:s.toFixed(),deposit:c.tezosNodeConstants.endorsement_security_deposit}),e.plus(s)}),new a.default(0)),[2,{totalEndorsingRewards:s.toFixed(),rewardsDetails:r}]}}))}))},t.prototype.specificEndorsingCalculation=function(e,t){var n=new a.default(this.tezosNodeConstants.endorsement_reward).div(new a.default(e+1)),r=new a.default(t).times(n);return r},t}(s.TezosRewardsCalculationDefault);t.TezosRewardsCalculation005=c},97992:function(e,t,n){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(21455),i=n(28129),a=function(e){function t(t){var n=e.call(this,t)||this;return n.protocol=t,n.tezosNodeConstants={},n}return r(t,e),t.prototype.specificBakingCalculation=function(e,t){var n=this.tezosNodeConstants.baking_reward_per_endorsement,r="";r=t>0?n[1]:n[0];var i=new o.default(r).multipliedBy(e);return i},t.prototype.specificEndorsingCalculation=function(e,t){var n=e>0?1:0,r=new o.default(this.tezosNodeConstants.endorsement_reward[n]),i=new o.default(t).times(r);return i},t}(i.TezosRewardsCalculation005);t.TezosRewardsCalculation006=a},60607:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):o(e.value).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(98449),a=n(21455),s=n(37565),c=function(){function e(e){this.protocol=e,this.blockLevelFieldNameMap=new Map,this.tezosNodeConstants={}}return e.prototype.getConstants=function(e,t){return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return n=this,[4,i.default.get(this.protocol.jsonRPCAPI+"/chains/main/blocks/"+(t?"head":e)+"/context/constants")];case 1:return n.tezosNodeConstants=r.sent().data,[2]}}))}))},e.prototype.calculateRewards=function(e,t,n,i){return void 0===n&&(n=!0),r(this,void 0,void 0,(function(){var r,s,c,u,l,f,p;return o(this,(function(o){switch(o.label){case 0:return null===i||void 0===i?[3,1]:(s=i,[3,3]);case 1:return[4,this.protocol.fetchCurrentCycle()];case 2:s=o.sent(),o.label=3;case 3:return r=s,c=this.cycleToBlockLevel(t),[4,this.getConstants(c,r<t)];case 4:return o.sent(),t<r?[4,this.calculatePastRewards(e,t,n)]:[3,6];case 5:return u=o.sent(),[3,8];case 6:return[4,this.calculateFutureRewards(e,t,r,n)];case 7:u=o.sent(),o.label=8;case 8:return[4,this.computeSnapshotBlockLevel(Math.min(t,r))];case 9:return l=o.sent(),[4,this.fetchBakerInfo(e,l).catch((function(){return{staking_balance:"0",delegated_contracts:[]}}))];case 10:return f=o.sent(),p=new a.default(f.staking_balance),[2,{baker:e,stakingBalance:p.toFixed(),bakingRewards:u.bakingRewards,endorsingRewards:u.endorsingRewards,bakingDeposits:u.bakingRewardsDetails.map((function(e){return e&&e.deposit&&e.deposit?parseInt(e.deposit):0})).reduce((function(e,t){return e+t}),0).toString(),endorsingDeposits:u.endorsingRewardsDetails.map((function(e){return e&&e.deposit&&e.deposit?parseInt(e.deposit):0})).reduce((function(e,t){return e+t}),0).toString(),cycle:t,fees:u.fees,totalRewards:u.totalRewards,snapshotBlockLevel:l,delegatedContracts:f.delegated_contracts,bakingRewardsDetails:u.bakingRewardsDetails,endorsingRewardsDetails:u.endorsingRewardsDetails,deposit:u.deposit,endorsingRightsCount:u.endorsingRightsCount}]}}))}))},e.prototype.calculatePastRewards=function(e,t,n){return r(this,void 0,void 0,(function(){var r,i,a,s,c,u,l,f,p;return o(this,(function(o){switch(o.label){case 0:return r={totalBakingRewards:"0",rewardsDetails:[]},i={totalEndorsingRewards:"0",rewardsDetails:[]},a="0",s="0",c="0",u=0,n?[4,this.fetchBlocksForBaker(e,t)]:[3,6];case 1:return l=o.sent(),l.length>0?[4,this.computeBakingRewards(l,!1)]:[3,3];case 2:r=o.sent(),o.label=3;case 3:return[4,this.fetchEndorsementOperations(t,e)];case 4:return f=o.sent(),[4,this.computeEndorsingRewards(f,!1)];case 5:i=o.sent(),u=f.reduce((function(e,t){return e+t.number_of_slots}),0),o.label=6;case 6:return[4,this.fetchFrozenBalances(this.cycleToBlockLevel(t+1),e)];case 7:return p=o.sent().find((function(e){return e.cycle==t})),p&&(a=p.fees,s=p.rewards,c=p.deposit),[2,{bakingRewards:r.totalBakingRewards,endorsingRewards:i.totalEndorsingRewards,totalRewards:s,fees:a,bakingRewardsDetails:r.rewardsDetails,endorsingRewardsDetails:i.rewardsDetails,endorsingRightsCount:u,deposit:c}]}}))}))},e.prototype.calculateFutureRewards=function(e,t,n,i){return r(this,void 0,void 0,(function(){var r,s,c,u,l,f,p,d,h;return o(this,(function(o){switch(o.label){case 0:if(r={totalBakingRewards:"0",rewardsDetails:[]},s={totalEndorsingRewards:"0",rewardsDetails:[]},c="0",u="0",l=0,t-n>5)throw new Error("Provided cycle is invalid");return i?[4,this.fetchBakingRights(e,t)]:[3,5];case 1:return f=o.sent(),[4,this.computeBakingRewards(f,!0)];case 2:return r=o.sent(),[4,this.fetchEndorsingRights(e,t)];case 3:return p=o.sent(),[4,this.computeEndorsingRewards(p,!0)];case 4:s=o.sent(),l=p.reduce((function(e,t){return e+t.number_of_slots}),0),o.label=5;case 5:return u=new a.default(r.totalBakingRewards).plus(new a.default(s.totalEndorsingRewards)).toFixed(),[4,this.fetchFrozenBalances("head",e)];case 6:return d=o.sent(),d.length>0&&(h=d[d.length-1],c=h.fees),[2,{bakingRewards:r.totalBakingRewards,endorsingRewards:s.totalEndorsingRewards,totalRewards:u,fees:c,bakingRewardsDetails:r.rewardsDetails,endorsingRewardsDetails:s.rewardsDetails,endorsingRightsCount:l,deposit:"0"}]}}))}))},e.prototype.fetchEndorsementOperations=function(e,t){return r(this,void 0,void 0,(function(){var n,r,a,s;return o(this,(function(o){switch(o.label){case 0:return n=this.cycleToBlockLevel(e),r=n+this.tezosNodeConstants.blocks_per_cycle,a={fields:["level","delegate","number_of_slots","block_level"],predicates:[{field:"kind",operation:"eq",set:["endorsement"],inverse:!1},{field:"level",operation:"between",set:[n,r],inverse:!1},{field:"delegate",operation:"eq",set:[t]}]},[4,i.default.post(this.protocol.baseApiUrl+"/v2/data/tezos/"+this.protocol.baseApiNetwork+"/operations",a,{headers:this.protocol.headers})];case 1:return s=o.sent(),[2,s.data]}}))}))},e.prototype.fetchFrozenBalances=function(e,t){return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return[4,i.default.get(this.protocol.jsonRPCAPI+"/chains/main/blocks/"+e+"/context/delegates/"+t+"/frozen_balance_by_cycle")];case 1:return n=r.sent(),[2,n.data]}}))}))},e.prototype.computeBakingRewards=function(e,t){return r(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){return t=new a.default(0),n=[],t=new a.default(e.length*this.tezosNodeConstants.block_reward),[2,{totalBakingRewards:t.toFixed(),rewardsDetails:n}]}))}))},e.prototype.computeEndorsingRewards=function(e,t){return r(this,void 0,void 0,(function(){var n,r,i,s,c=this;return o(this,(function(o){switch(o.label){case 0:return n=[],r=[],t?[3,2]:(i=e.map((function(e){return e.level})),i.length>0?[4,this.fetchBlockPriorities(i)]:[3,2]);case 1:n=o.sent(),o.label=2;case 2:return s=e.reduce((function(e,o){var i=0;if(!t){var a=n.find((function(e){return e.level===o.level}));if(void 0===a)throw new Error("Cannot find block priority");i=a.priority}var s=c.specificEndorsingCalculation(i,o.number_of_slots);return r.push({level:o.level,amount:s.toFixed(),deposit:c.tezosNodeConstants.endorsement_security_deposit}),e.plus(s)}),new a.default(0)),[2,{totalEndorsingRewards:s.toFixed(),rewardsDetails:r}]}}))}))},e.prototype.specificEndorsingCalculation=function(e,t){var n=new a.default(this.tezosNodeConstants.endorsement_reward).div(new a.default(e+1)),r=new a.default(t).times(n);return r},e.prototype.computeSnapshotBlockLevel=function(e,t){return r(this,void 0,void 0,(function(){var n,r,a,s,c,u,l,f;return o(this,(function(o){switch(o.label){case 0:return n=void 0===t?this.cycleToBlockLevel(e):t,[4,i.default.get(this.protocol.jsonRPCAPI+"/chains/main/blocks/"+n+"/context/raw/json/cycle/"+e+"/roll_snapshot")];case 1:return r=o.sent(),a=r.data,s=e-7,c=this.cycleToBlockLevel(s),u=c/this.tezosNodeConstants.blocks_per_roll_snapshot,l=u+a+1,f=l*this.tezosNodeConstants.blocks_per_roll_snapshot,[2,f]}}))}))},e.prototype.fetchBakerInfo=function(e,t){return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return[4,i.default.get(this.protocol.jsonRPCAPI+"/chains/main/blocks/"+t+"/context/delegates/"+e)];case 1:return n=r.sent(),[2,n.data]}}))}))},e.prototype.fetchBlocksForBaker=function(e,t){return r(this,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:return n={fields:["level","priority"],predicates:[{field:"baker",operation:"eq",set:[e],inverse:!1},{field:"meta_cycle",operation:"eq",set:[t],inverse:!1}]},[4,i.default.post(this.protocol.baseApiUrl+"/v2/data/tezos/"+this.protocol.baseApiNetwork+"/blocks",n,{headers:this.protocol.headers})];case 1:return r=o.sent(),[2,r.data]}}))}))},e.prototype.fetchBlockLevelFieldName=function(e){return r(this,void 0,void 0,(function(){var t,n=this;return o(this,(function(r){return t=this.blockLevelFieldNameMap.get(e),t?[2,t]:(this.fetchBlockLevelFieldPromise||(this.fetchBlockLevelFieldPromise=i.default.get(this.protocol.baseApiUrl+"/v2/metadata/tezos/"+this.protocol.baseApiNetwork+"/"+e+"/attributes",{headers:this.protocol.headers}).then((function(t){var r="block_level",o=t.data.map((function(e){return e.name}));return o.includes("level")&&(r="level"),n.blockLevelFieldNameMap.set(e,r),r})).finally((function(){n.fetchBlockLevelFieldPromise=void 0}))),[2,this.fetchBlockLevelFieldPromise])}))}))},e.prototype.fetchBakingRights=function(e,t){return r(this,void 0,void 0,(function(){var n,r,a,s,c;return o(this,(function(o){switch(o.label){case 0:return n=this.cycleToBlockLevel(t),r=n+this.tezosNodeConstants.blocks_per_cycle,[4,this.fetchBlockLevelFieldName("baking_rights")];case 1:return a=o.sent(),s={fields:["priority",a],predicates:[{field:"delegate",operation:"eq",set:[e]},{field:"priority",operation:"eq",set:[0]},{field:a,operation:"between",set:[n,r]}],orderBy:[{field:a,direction:"desc"}],limit:1e4},[4,i.default.post(this.protocol.baseApiUrl+"/v2/data/tezos/"+this.protocol.baseApiNetwork+"/baking_rights",s,{headers:this.protocol.headers}).then((function(e){return e.data})).catch((function(e){return[]}))];case 2:return c=o.sent(),[2,c.map((function(t){return{level:t[a],priority:t.priority,delegate:e}}))]}}))}))},e.prototype.fetchEndorsingRights=function(e,t){return r(this,void 0,void 0,(function(){var n,r,a,s,c;return o(this,(function(o){switch(o.label){case 0:return n=this.cycleToBlockLevel(t),r=n+this.tezosNodeConstants.blocks_per_cycle,[4,this.fetchBlockLevelFieldName("endorsing_rights")];case 1:return a=o.sent(),s={fields:[a],predicates:[{field:"delegate",operation:"eq",set:[e]},{field:a,operation:"between",set:[n,r]}],aggregation:[{field:"slot",function:"count"}],limit:1e5},[4,i.default.post(this.protocol.baseApiUrl+"/v2/data/tezos/"+this.protocol.baseApiNetwork+"/endorsing_rights",s,{headers:this.protocol.headers}).then((function(e){return e.data})).catch((function(e){return[]}))];case 2:return c=o.sent(),[2,c.map((function(t){return{level:t[a],delegate:e,number_of_slots:Number(t.count_slot)}}))]}}))}))},e.prototype.fetchEndorsementOperationCountAndTotalFees=function(e){return r(this,void 0,void 0,(function(){var t,n,r,a,s,c;return o(this,(function(o){switch(o.label){case 0:return t={fields:["block_level"],predicates:[{field:"block_level",operation:"in",set:e,inverse:!1}],aggregation:[{field:"fee",function:"sum"},{field:"number_of_slots",function:"sum"}]},[4,i.default.post(this.protocol.baseApiUrl+"/v2/data/tezos/"+this.protocol.baseApiNetwork+"/operations",t,{headers:this.protocol.headers})];case 1:for(n=o.sent(),r=new Map,a=0,s=n.data;a<s.length;a++)c=s[a],r.set(c.block_level,c);return[2,r]}}))}))},e.prototype.fetchBlockPriorities=function(e){return r(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return t={fields:["priority","level"],predicates:[{field:"level",operation:"in",set:e,inverse:!1}]},[4,i.default.post(this.protocol.baseApiUrl+"/v2/data/tezos/"+this.protocol.baseApiNetwork+"/blocks",t,{headers:this.protocol.headers})];case 1:return n=r.sent(),[2,n.data]}}))}))},e.prototype.cycleToBlockLevel=function(e){var t,n=(t=this.tezosNodeConstants.blocks_per_cycle,null!==t&&void 0!==t?t:s.TezosProtocol.BLOCKS_PER_CYCLE[this.protocol.options.network.extras.network]);return e*n+1},e}();t.TezosRewardsCalculationDefault=c},43782:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e){e["ENDORSEMENT"]="endorsement",e["SEED_NONCE_REVELATION"]="seed_nonce_revelation",e["DOUBLE_ENDORSEMENT_EVIDENCE"]="double_endorsement_evidence",e["DOUBLE_BAKING_EVIDENCE"]="double_baking_evidence",e["ACTIVATE_ACCOUNT"]="activate_account",e["PROPOSALS"]="proposals",e["BALLOT"]="ballot",e["REVEAL"]="reveal",e["TRANSACTION"]="transaction",e["ORIGINATION"]="origination",e["DELEGATION"]="delegation"}(t.TezosOperationType||(t.TezosOperationType={}))},35937:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.name=e}return e.prototype.eval=function(){},e.prototype.setName=function(e){this.name=e},e}();t.MichelsonType=n},32680:function(e,t,n){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(17103),s=n(99055),c=n(98355),u=n(35937);(function(e){e["TYPE"]=":",e["VARIABLE"]="@",e["FIELD"]="%"})(i=t.MichelsonAnnotationPrefix||(t.MichelsonAnnotationPrefix={}));var l=function(){function e(e,t,n){void 0===n&&(n=[]),this.type=e,this.parent=t,this.annots=n}return e.fromMichelineNode=function(e){if(s.isMichelinePrimitiveApplication(e))return this.fromMichelinePrimitiveApplication(e)},e.fromMichelinePrimitiveApplication=function(e,t){var n,r,o;return this.from(e.prim,(n=e.annots,null!==n&&void 0!==n?n:[]),(o=null===(r=e.args)||void 0===r?void 0:r.filter(s.isMichelinePrimitiveApplication),null!==o&&void 0!==o?o:[]),t)},e.from=function(t,n,r,o){return 0===r.length?new e(t,o,n):new f(t,r,o,n)},e.prototype.createValue=function(e,t){var n;if(void 0===t&&(t={}),e instanceof u.MichelsonType)return e;var r=this.getRawValue(e);t.beforeNext&&t.beforeNext(this,r);var o=c.michelsonTypeFactories[this.type](r);return n=t.lazyEval,null===n||void 0===n||n||o.eval(),t.onNext&&t.onNext(this,r,o),o},e.prototype.getAnnotation=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=function(t){var n=e.find((function(e){return t.startsWith(e)}));if(void 0!==n)return{value:t.slice(n.length)}},r=0,o=this.annots;r<o.length;r++){var i=o[r],a=n(i);if("object"===typeof a)return a.value}},e.prototype.getRawValue=function(e){var t=this.getAnnotation(i.TYPE,i.FIELD);return e instanceof Object&&t&&t in e?e[t]:e},e}();t.MichelsonTypeMeta=l;var f=function(e){function t(t,n,r,o){void 0===o&&(o=[]);var i=e.call(this,t,r,o)||this;return i.generics=n.map((function(e){return new a.Lazy((function(){return l.fromMichelinePrimitiveApplication(e,i)}))})),i}return r(t,e),t.prototype.createValue=function(e,t){var n;if(e instanceof u.MichelsonType)return e;var r=this.getRawValue(e);t.beforeNext&&t.beforeNext(this,r);var i=this.generics.map((function(e){return function(n){return e.get().createValue(n,t)}})),a=c.michelsonTypeFactories[this.type].apply(c.michelsonTypeFactories,o([r],i));return n=t.lazyEval,null===n||void 0===n||n||a.eval(),t.onNext&&t.onNext(this,r,a),a},t}(l);t.MichelsonGenericTypeMeta=f},98355:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(67480),o=n(97281),i=n(95317),a=n(63568),s=n(17286),c=n(78416),u=n(29661),l=n(40431),f=n(7085),p=n(54606);function d(e){throw new Error("Michelson type "+e+" is not supported.")}t.michelsonTypeFactories={nat:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l.MichelsonInt.from(e[0])},int:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l.MichelsonInt.from(e[0])},string:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return f.MichelsonString.from(e[0])},bytes:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return u.MichelsonBytes.from(e[0])},mutez:function(){return d("mutez")},bool:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c.MichelsonBool.from(e[0])},key_hash:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return f.MichelsonString.from(e[0])},timestamp:function(){return d("timestamp")},address:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s.MichelsonAddress.from(e[0])},key:function(){return d("key")},unit:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return p.MichelsonUnit.from(e[0])},signature:function(){return d("signature")},option:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.MichelsonOption.from(e[0],e[1])},list:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.MichelsonList.from(e[0],e[1])},set:function(){return d("set")},operation:function(){return d("operation")},contract:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s.MichelsonAddress.from(e[0])},pair:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.MichelsonPair.from(e[0],e[1],e[2])},or:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.MichelsonOr.from(e[0],e[1],e[2])},lambda:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return f.MichelsonString.from(e[0])},map:function(){return d("map")},big_map:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l.MichelsonInt.from(e[0])},chain_id:function(){return d("chain_id")}}},67480:function(e,t,n){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(17103),i=n(75020),a=n(35937),s=function(e){function t(t,n){var r=e.call(this,n)||this;return r.elements=t,r}return r(t,e),t.from=function(e,n,r){if(e instanceof t)return e;if(!Array.isArray(e))throw i.invalidArgumentTypeError("MichelsonList","array",typeof e);if(e.some((function(e){return!(e instanceof a.MichelsonType)}))&&"function"!==typeof n)throw new Error("MichelsonList: unknown generic mapping factory function.");var s=new o.Lazy((function(){var t=e.map((function(e){return e instanceof a.MichelsonType?e:"function"===typeof n?n(e):void 0}));if(t.some((function(e){return!(e instanceof a.MichelsonType)})))throw new Error("MichelsonList: unknown generic mapping type.");return t}));return new t(s,r)},t.prototype.asRawValue=function(){var e,t=this.elements.get().map((function(e){return e.asRawValue()}));return this.name?(e={},e[this.name]=t,e):t},t.prototype.toMichelineJSON=function(){return this.elements.get().map((function(e){return e.toMichelineJSON()}))},t.prototype.eval=function(){this.elements.get()},t}(a.MichelsonType);t.MichelsonList=s},97281:function(e,t,n){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(17103),i=n(99055),a=n(35937),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.from=function(e,n,r){if(e instanceof t)return e;if(!(e instanceof a.MichelsonType)&&"function"!==typeof n)throw new Error("MichelsonOption: unknown generic mapping factory function.");return i.isMichelinePrimitiveApplication(e)?t.fromMicheline(e,n,r):t.fromUnknown(e,n,r)},t.fromMicheline=function(e,n,r){return t.fromUnknown("Some"===e.prim&&e.args?e.args[0]:null,n,r)},t.fromUnknown=function(e,t,n){if(void 0===e||null===e)return new u(n);var r=e instanceof a.MichelsonType?new o.Lazy((function(){return e})):new o.Lazy((function(){var n="function"===typeof t?t(e):void 0;if(!(n instanceof a.MichelsonType))throw new Error("MichelsonOption: unknown generic mapping type.");return n}));return new c(r,n)},t}(a.MichelsonType);t.MichelsonOption=s;var c=function(e){function t(t,n){var r=e.call(this,n)||this;return r.value=t,r.type="Some",r}return r(t,e),t.prototype.asRawValue=function(){var e,t=this.value.get().asRawValue();return this.name?(e={},e[this.name]=t,e):t},t.prototype.toMichelineJSON=function(){return{prim:"Some",args:[this.value.get().toMichelineJSON()]}},t.prototype.eval=function(){this.value.get()},t}(s);t.MichelsonSome=c;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="None",t}return r(t,e),t.prototype.asRawValue=function(){var e;return this.name?(e={},e[this.name]=null,e):null},t.prototype.toMichelineJSON=function(){return{prim:"None"}},t}(s);t.MichelsonNone=u},95317:function(e,t,n){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(17103),i=n(75020),a=n(99055),s=n(35937),c=function(e){function t(t,n){var r=e.call(this,n)||this;return r.value=t,r}return r(t,e),t.from=function(e,n,r,o){if(e instanceof t)return e;if(!(e instanceof s.MichelsonType)&&"function"!==typeof n||"function"!==typeof r)throw new Error("MichelsonPair: unknown generic mapping factory functions.");return a.isMichelinePrimitiveApplication(e)?t.fromMicheline(e,n,r,o):t.fromUnknown(e,n,r,o)},t.fromMicheline=function(e,n,r,o){if(!t.isOr(e))throw i.invalidArgumentTypeError("MichelsonOr","prim: Left | Right","prim: "+e.prim);if(void 0===e.args)throw i.invalidArgumentTypeError("MichelsonOr","args: <array>","args: undefined");return t.fromUnknown([e.prim,e.args[0]],n,r,o)},t.fromUnknown=function(e,n,r,o){if(!Array.isArray(e)||2!==e.length||"string"!==typeof e[0])throw i.invalidArgumentTypeError("MichelsonOr","MichelsonOr or tuple<'Left' | 'Right', any>",typeof e+": "+e);var a=e[0];if("left"===a.toLowerCase()||"l"===a.toLowerCase())return t.create("Left",e[1],n,o);if("right"===a.toLowerCase()||"r"===a.toLowerCase())return t.create("Right",e[1],r,o);throw new Error("MichelsonOr: unknown type "+e[0]+", expected 'Left' or 'Right'.")},t.isOr=function(e){return e instanceof t||a.isMichelinePrimitiveApplication(e)&&("Left"===e.prim||"Right"===e.prim)},t.create=function(e,t,n,r){var i=t instanceof s.MichelsonType?new o.Lazy((function(){return t})):new o.Lazy((function(){var e="function"===typeof n?n(t):void 0;if(!(e instanceof s.MichelsonType))throw new Error("MichelsonOr: unknown generic mapping type.");return e}));return"Left"===e?new u(i,r):new l(i,r)},t.prototype.asRawValue=function(){var e;return this.name?(e={},e[this.name]=this.value.get().asRawValue(),e):this.value.get().asRawValue()},t.prototype.toMichelineJSON=function(){return{prim:this.type,args:[this.value.get().toMichelineJSON()]}},t.prototype.eval=function(){this.value.get()},t}(s.MichelsonType);t.MichelsonOr=c;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="Left",t}return r(t,e),t}(c);t.MichelsonLeft=u;var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="Right",t}return r(t,e),t}(c);t.MichelsonRight=l},63568:function(e,t,n){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(17103),i=n(75020),a=n(72476),s=n(99055),c=n(35937),u=function(e){function t(t,n,r){var o=e.call(this,r)||this;return o.first=t,o.second=n,o}return r(t,e),t.from=function(e,n,r,o){return e instanceof t?e:s.isMichelinePrimitiveApplication(e)?t.fromMicheline(e,n,r,o):t.fromUnknown(e,n,r,o)},t.fromMicheline=function(e,n,r,o){if("Pair"!==e.prim)throw i.invalidArgumentTypeError("MichelsonPair","prim: Pair","prim: "+e.prim);if(void 0===e.args||2!==e.args.length)throw i.invalidArgumentTypeError("MichelsonPair","args: <tuple>","args: undefined | <array>");return t.fromUnknown(e.args,n,r,o)},t.fromUnknown=function(e,n,r,o){if(!(e instanceof Object)&&(!Array.isArray(e)||2!==e.length))throw i.invalidArgumentTypeError("MichelsonPair","tuple or object",typeof e+": "+e);var a=Array.isArray(e)?[t.asRawValue(e[0],n),t.asRawValue(e[1],r)]:[t.asRawValue(e,n),t.asRawValue(e,r)],s=a[0],c=a[1];return new t(s,c,o)},t.asRawValue=function(e,t){if(!(e instanceof c.MichelsonType)&&"function"!==typeof t)throw new Error("MichelsonPair: unknown generic mapping factory function.");return e instanceof c.MichelsonType?new o.Lazy((function(){return e})):new o.Lazy((function(){var n="function"===typeof t?t(e):void 0;if(!(n instanceof c.MichelsonType))throw new Error("MichelsonPair: unknown generic mapping type.");return n}))},t.prototype.asRawValue=function(){var e,t=this.first.get().asRawValue(),n=this.second.get().asRawValue(),r=a.isRecord(t)&&a.isRecord(n)?Object.assign(t,n):[t,n];return this.name?(e={},e[this.name]=r,e):r},t.prototype.toMichelineJSON=function(){return{prim:"Pair",args:[this.first.get().toMichelineJSON(),this.second.get().toMichelineJSON()]}},t.prototype.eval=function(){this.first.get(),this.second.get()},t}(c.MichelsonType);t.MichelsonPair=u},17286:function(e,t,n){var r=n(48287)["Buffer"],o=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(48191),a=n(99055),s=n(35937),c=n(29661),u=n(7085),l=function(e){function t(t,n){var r=e.call(this,n)||this;return r.address=t,r}return o(t,e),t.from=function(e,n){return a.isMichelinePrimitive("string",e)||a.isMichelinePrimitive("bytes",e)?t.fromMicheline(e,n):t.fromUnknown(e,n)},t.fromMicheline=function(e,n){var r=a.isMichelinePrimitive("string",e)?u.MichelsonString.fromMicheline(e):c.MichelsonBytes.fromMicheline(e);return new t(r,n)},t.fromUnknown=function(e,n){if(e instanceof t)return e;var o;if("string"===typeof e&&(e.toLowerCase().startsWith("tz")||e.toLowerCase().startsWith("kt")))o=u.MichelsonString.from(e);else{if(!("string"===typeof e&&i.isHex(e)||r.isBuffer(e)))throw new Error("MichelsonAddress: invalid value.");o=c.MichelsonBytes.from(e)}return new t(o,n)},t.prototype.asRawValue=function(){var e,t=r.isBuffer(this.address.value)?this.address.value.toString("hex"):this.address.value;return this.name?(e={},e[this.name]=t,e):t},t.prototype.toMichelineJSON=function(){return this.address.toMichelineJSON()},t}(s.MichelsonType);t.MichelsonAddress=l},78416:function(e,t,n){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(75020),i=n(99055),a=n(35937),s=function(e){function t(t,n){var r=e.call(this,n)||this;return r.value=t,r}return r(t,e),t.from=function(e,n){return i.isMichelinePrimitiveApplication(e)?t.fromMicheline(e,n):t.fromUnknown(e,n)},t.fromMicheline=function(e,n){if("True"!==e.prim&&"False"!==e.prim)throw o.invalidArgumentTypeError("MichelsonBool","prim: True | False","prim: "+e.prim);return new t("True"===e.prim,n)},t.fromUnknown=function(e,n){if(e instanceof t)return e;if("boolean"!==typeof e)throw o.invalidArgumentTypeError("MichelsonBool","boolean",typeof e);return new t(e,n)},t.prototype.asRawValue=function(){var e;return this.name?(e={},e[this.name]=this.value,e):this.value},t.prototype.toMichelineJSON=function(){return{prim:this.value?"True":"False"}},t}(a.MichelsonType);t.MichelsonBool=s},29661:function(e,t,n){var r=n(48287)["Buffer"],o=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(75020),a=n(48191),s=n(99055),c=n(35937),u=function(e){function t(t,n){var r=e.call(this,n)||this;return r.value=t,r}return o(t,e),t.from=function(e,n){return s.isMichelinePrimitive("bytes",e)?t.fromMicheline(e,n):t.fromUnknown(e,n)},t.fromMicheline=function(e,n){return t.fromUnknown(e.bytes,n)},t.fromUnknown=function(e,n){if(e instanceof t)return e;if("string"!==typeof e&&!r.isBuffer(e))throw i.invalidArgumentTypeError("MichelsonBytes","string or Buffer",typeof e+": "+e);return new t(a.hexToBytes(e),n)},t.prototype.asRawValue=function(){var e;return this.name?(e={},e[this.name]=this.value.toString("hex"),e):this.value.toString("hex")},t.prototype.toMichelineJSON=function(){return{bytes:this.value.toString("hex")}},t}(c.MichelsonType);t.MichelsonBytes=u},40431:function(e,t,n){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(21455),i=n(75020),a=n(99055),s=n(35937),c=function(e){function t(t,n){var r=e.call(this,n)||this;return r.value=t,r}return r(t,e),t.from=function(e,n){return a.isMichelinePrimitive("int",e)?t.fromMicheline(e,n):t.fromUnknown(e,n)},t.fromMicheline=function(e,n){return t.fromUnknown(parseInt(e.int,10),n)},t.fromUnknown=function(e,n){if(e instanceof t)return e;if("number"!==typeof e&&"string"!==typeof e&&!o.default.isBigNumber(e))throw i.invalidArgumentTypeError("MichelsonInt","number or string or BigNumber",typeof e);return new t(o.default.isBigNumber(e)?e:new o.default(e),n)},t.prototype.asRawValue=function(){var e;return this.name?(e={},e[this.name]=this.value,e):this.value},t.prototype.toMichelineJSON=function(){return{int:this.value.toString()}},t}(s.MichelsonType);t.MichelsonInt=c},7085:function(e,t,n){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(75020),i=n(99055),a=n(35937),s=function(e){function t(t,n){var r=e.call(this,n)||this;return r.value=t,r}return r(t,e),t.from=function(e,n){return i.isMichelinePrimitive("string",e)?t.fromMicheline(e,n):t.fromUnknown(e,n)},t.fromMicheline=function(e,n){return t.fromUnknown(e.string,n)},t.fromUnknown=function(e,n){if(e instanceof t)return e;if("string"!==typeof e)throw o.invalidArgumentTypeError("MichelsonString","string",typeof e);return new t(e,n)},t.prototype.asRawValue=function(){var e;return this.name?(e={},e[this.name]=this.value,e):this.value},t.prototype.toMichelineJSON=function(){return{string:this.value}},t}(a.MichelsonType);t.MichelsonString=s},54606:function(e,t,n){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(75020),i=n(99055),a=n(35937),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.from=function(e,n){return e instanceof t?e:i.isMichelinePrimitiveApplication(e)?t.fromMicheline(e,n):new t},t.fromMicheline=function(e,n){if("Unit"!==e.prim)throw o.invalidArgumentTypeError("MichelsonUnit","prim: Unit","prim: "+e.prim);return new t(n)},t.prototype.asRawValue=function(){},t.prototype.toMichelineJSON=function(){return{prim:"Unit"}},t}(a.MichelsonType);t.MichelsonUnit=s},99055:(e,t)=>{function n(e){return r(e,0)}function r(e,t){return o("int",e)||o("string",e)||o("bytes",e)||i(e)||c(e,t)}function o(e,t){return t instanceof Object&&e in t}function i(e){return e instanceof Object&&"prim"in e}Object.defineProperty(t,"__esModule",{value:!0}),t.isMichelineNode=n,t.isMichelinePrimitive=o,t.isMichelinePrimitiveApplication=i;var a=1;function s(e,t){return void 0===t&&(t=!0),c(e,t?0:a+1)}function c(e,t){return Array.isArray(e)&&(0===e.length||t>a||e.every((function(e){return r(e,t+1)})))}t.isMichelineSequence=s},44388:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=1;t.SERIALIZER_VERSION=n,function(e){e["CONTRACT_ADDRESS"]="KT1PWx2mnDueood7fEmfbBDKx1D9BAnnXitn"}(t.TezosBTCDetails||(t.TezosBTCDetails={}))},68905:(e,t,n)=>{var r=n(48287)["Buffer"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(85858),i=n(30428),a=n(52438),s=n(31662),c=n(82955),u=n(37629);function l(e,t){return e.currentPage-t.currentPage}var f=function(){function e(e){if(this.version=2,e instanceof c.FullPayload)this.payloadType=u.IACPayloadType.FULL,this.payload=e;else{if(!(e instanceof s.ChunkedPayload))throw new a.SerializerError(a.SerializerErrorType.PAYLOAD_TYPE_UNKNOWN,'Is neither "Full" nor "Chunked".');this.payloadType=u.IACPayloadType.CHUNKED,this.payload=e}}return e.prototype.decoded=function(){return[this.version,this.payloadType,this.payload]},e.prototype.encoded=function(){return o.encode(i.encode([this.version.toString(),this.payloadType.toString(),this.payload.asArray()]))},e.fromDecoded=function(t,n){void 0===n&&(n=0);var r=c.FullPayload.fromDecoded(t),o=r.asBuffer();if(n>0&&o.length>n){var i=[],a=o,u=o.length,l=0;while(l<u)i.push(a.slice(l,l+=n));return i.map((function(t,n){return new e(s.ChunkedPayload.fromDecoded({currentPage:n,total:i.length,payload:t}))}))}return[new e(r)]},e.fromEncoded=function(t){var n,f,p=[];if(t.forEach((function(e){var t=i.decode(o.decode(e)),r=parseInt(t[1].toString(),10);if(f=null!==f&&void 0!==f?f:r,f!==r)throw new a.SerializerError(a.SerializerErrorType.PAYLOAD_TYPE_MISMATCH,'All types within a group must either be "full" or "chunked".');if(r===u.IACPayloadType.FULL){var l=t[2];n=c.FullPayload.fromEncoded(l)}else{if(r!==u.IACPayloadType.CHUNKED)throw new a.SerializerError(a.SerializerErrorType.PAYLOAD_TYPE_NOT_SUPPORTED,'Type "'+r+'" is unknown.');l=t[2];p.push(s.ChunkedPayload.fromEncoded(l))}})),!n){var d=p.sort(l),h=d.map((function(e){return e.buffer})),y={availablePages:d.map((function(e){return e.currentPage})),totalPages:d[0].total};if(y.availablePages.length<y.totalPages)throw y;n=c.FullPayload.fromEncoded(i.decode(r.concat(h)))}return[new e(n)]},e}();t.IACProtocol=f},52213:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e["AccountShareRequest"]=3]="AccountShareRequest",e[e["AccountShareResponse"]=4]="AccountShareResponse",e[e["TransactionSignRequest"]=5]="TransactionSignRequest",e[e["TransactionSignResponse"]=6]="TransactionSignResponse",e[e["MessageSignRequest"]=7]="MessageSignRequest",e[e["MessageSignResponse"]=8]="MessageSignResponse"}(t.IACMessageType||(t.IACMessageType={}))},30446:(e,t,n)=>{var r=n(48287)["Buffer"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(52438),i=n(59159),a=n(37629),s=n(84033),c=n(83456),u=10,l=function(){function e(e,t,n,r,o){void 0===r&&(r=s.generateId(u)),void 0===o&&(o="1"),this.id=r,this.type=e,this.protocol=t,this.payload=n,this.version=o;var i=a.Serializer.getSchema(this.type,this.protocol);this.schema=c.unwrapSchema(i.schema)}return e.prototype.asJson=function(){return{type:this.type,protocol:this.protocol,id:this.id,payload:this.payload}},e.prototype.asArray=function(){var e=c.jsonToArray("root",this.schema,this.payload);return[this.version,this.type.toString(),this.protocol,e,this.id]},e.fromDecoded=function(t){return new e(t.type,t.protocol,t.payload,t.id)},e.fromEncoded=function(t){var n=this.parseVersion(t[0]),o=this.parseType(t[1]),i=this.parseProtocol(t[2]),l="0"===n?r.from(s.generateId(u)):t[4],f=this.parseId(l),p=this.parsePayload(t[3]),d=a.Serializer.getSchema(o,i),h=c.unwrapSchema(d.schema),y=d.transformer,v=c.rlpArrayToJson(h,p),m=y?y(v):v;return new e(o,i,m,f,n)},e.parseVersion=function(e){return this.validateProperty("Version",e,(function(e){return e.toString()}),(function(e){return"0"===e||"1"===e}))},e.parseType=function(e){return this.validateProperty("Type",e,(function(e){return parseInt(e.toString(),10)}),(function(e){try{return a.Serializer.getSchema(e,i.MainProtocolSymbols.ETH),!0}catch(t){return!1}}))},e.parseProtocol=function(e){return this.validateProperty("Protocol",e,(function(e){return e.toString()}),(function(e){return 0===e.length||Object.values(i.MainProtocolSymbols).some((function(t){return e.split("-")[0]===t}))}))},e.parseId=function(e){return this.validateProperty("Id",e,(function(e){return e.toString()}),(function(e){return e.length===u}))},e.parsePayload=function(e){return this.validateProperty("Payload",e,(function(e){return e}),(function(){return!0}))},e.validateProperty=function(e,t,n,r){if("undefined"===typeof t)throw new o.SerializerError(o.SerializerErrorType.PROPERTY_IS_EMPTY,e+" is empty");var i=n(t);if(r(i))return i;throw new o.SerializerError(o.SerializerErrorType.PROPERTY_IS_EMPTY,e+' is invalid: "'+i+'"')},e}();t.Message=l},31662:(e,t,n)=>{var r=n(48287)["Buffer"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(52438);function i(e){return Array.isArray(e)&&e.every((function(e){return e instanceof r}))}function a(e){return!!s(e)&&(void 0!==e.currentPage&&void 0!==e.total&&void 0!==e.payload)}function s(e){return"object"===typeof e}function c(e){return parseInt(e.toString(),10)}var u=function(){function e(e,t,n){this.currentPage=e,this.total=t,this.buffer=n}return e.fromDecoded=function(t){if(!a(t))throw new o.SerializerError(o.SerializerErrorType.UNEXPECTED_PAYLOAD,'Object does not match "Chunked serializer" interface');return new e(t.currentPage,t.total,t.payload)},e.fromEncoded=function(t){if(!i(t))throw new o.SerializerError(o.SerializerErrorType.UNEXPECTED_PAYLOAD,"Input value is not a buffer array");if(3!==t.length)throw new o.SerializerError(o.SerializerErrorType.UNEXPECTED_PAYLOAD,"Input value does not have the right length");var n=c(t[0]),r=c(t[1]),a=t[2];return new e(n,r,a)},e.prototype.asArray=function(){return[this.currentPage.toString(),this.total.toString(),this.buffer]},e}();t.ChunkedPayload=u},82955:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(85858),o=n(30428),i=n(30446),a=function(){function e(e){this.messages=e}return e.fromDecoded=function(t){return new e(t)},e.fromEncoded=function(t){var n=t.map((function(e){return i.Message.fromEncoded(e).asJson()}));return new e(n)},e.prototype.asJson=function(){return this.messages},e.prototype.asArray=function(){return this.messages.map((function(e){return i.Message.fromDecoded(e).asArray()}))},e.prototype.asBuffer=function(){return o.encode(this.asArray())},e.prototype.asString=function(){return r.encode(this.asBuffer())},e}();t.FullPayload=a},76139:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e){e["STRING"]="string",e["NUMBER"]="number",e["INTEGER"]="integer",e["BOOLEAN"]="boolean",e["NULL"]="null",e["ARRAY"]="array",e["OBJECT"]="object",e["HEX_STRING"]="hexString"}(t.SchemaTypes||(t.SchemaTypes={}))},37629:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):o(e.value).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(52438),a=n(10739),s=n(59159),c=n(68905),u=n(52213),l=n(44578),f=n(44029),p=n(14255),d=n(50224),h=n(97146),y=n(82752),v=n(68727),m=n(94682),g=n(33226),b=n(56846),w=n(52849),_=n(89828),S=n(74390),P=n(96671),T=n(63759),M=n(67529),E=n(47443),O=n(62382),k=n(29648),A=n(10361),x=n(52565),R=n(51763);function N(e){return e.transaction=a.CosmosTransaction.fromJSON(e),e}(function(e){e[e["FULL"]=0]="FULL",e[e["CHUNKED"]=1]="CHUNKED"})(t.IACPayloadType||(t.IACPayloadType={}));var C=function(){function e(){}return e.addSchema=function(t,n,r){var o=e.getSchemaName(t,r);if(this.schemas.has(o))throw new i.SerializerError(i.SerializerErrorType.SCHEMA_ALREADY_EXISTS,"Schema "+o+" already exists");this.schemas.set(o,n)},e.getSchema=function(t,n){var r,o=e.getSchemaName(t,n),a=(r=this.schemas.get(o),null!==r&&void 0!==r?r:this.schemas.get(e.getSchemaName(t)));if(!a)throw new i.SerializerError(i.SerializerErrorType.SCHEMA_DOES_NOT_EXISTS,"Schema "+o+" does not exist");return a},e.getSchemaName=function(e,t){var n=e+"-"+t;if(void 0!==t&&e===u.IACMessageType.TransactionSignRequest||e===u.IACMessageType.TransactionSignResponse){var r=n.split("-");if(r.length>=3&&r[1]+"-"+r[2]===s.SubProtocolSymbols.ETH_ERC20)return e+"-"+s.SubProtocolSymbols.ETH_ERC20}return t?e+"-"+t:e.toString()},e.prototype.serialize=function(t,n){return void 0===n&&(n=0),r(this,void 0,void 0,(function(){var r;return o(this,(function(o){if(t.every((function(t){return e.getSchema(t.type,t.protocol)})))return r=c.IACProtocol.fromDecoded(JSON.parse(JSON.stringify(t)),n),[2,r.map((function(e){return e.encoded()}))];throw new i.SerializerError(i.SerializerErrorType.SCHEMA_DOES_NOT_EXISTS,"Unknown schema")}))}))},e.prototype.deserialize=function(e){return r(this,void 0,void 0,(function(){var t,n,r=this;return o(this,(function(o){return t=c.IACProtocol.fromEncoded(e),n=t.map((function(e){return e.payload})).map((function(e){return e.asJson()})).reduce((function(e,t){return e.concat.apply(e,t)}),[]),[2,Promise.all(n.map((function(e){var t=e.payload,n=r.serializationValidatorByProtocolIdentifier(e.protocol);return n.validateUnsignedTransaction(t)}))).then((function(){return n}))]}))}))},e.prototype.serializationValidatorByProtocolIdentifier=function(e){var t={eth:d.EthereumTransactionValidator,btc:f.BitcoinTransactionValidator,grs:f.BitcoinTransactionValidator,ae:l.AeternityTransactionValidator,xtz:y.TezosTransactionValidator,cosmos:p.CosmosTransactionValidator,polkadot:h.SubstrateTransactionValidator,kusama:h.SubstrateTransactionValidator,"xtz-btc":v.TezosBTCTransactionValidator},n=Object.keys(t).find((function(t){return e===t})),r=Object.keys(t).find((function(t){return e.startsWith(t)})),o=n||r;return new t[null!==o&&void 0!==o?o:"eth"]},e.schemas=new Map,e}();t.Serializer=C,C.addSchema(u.IACMessageType.AccountShareResponse,{schema:m}),C.addSchema(u.IACMessageType.MessageSignRequest,{schema:g}),C.addSchema(u.IACMessageType.MessageSignResponse,{schema:b}),C.addSchema(u.IACMessageType.TransactionSignRequest,{schema:w},s.MainProtocolSymbols.AE),C.addSchema(u.IACMessageType.TransactionSignRequest,{schema:_},s.MainProtocolSymbols.BTC),C.addSchema(u.IACMessageType.TransactionSignRequest,{schema:_},s.MainProtocolSymbols.GRS),C.addSchema(u.IACMessageType.TransactionSignRequest,{schema:S,transformer:N},s.MainProtocolSymbols.COSMOS),C.addSchema(u.IACMessageType.TransactionSignRequest,{schema:P},s.MainProtocolSymbols.ETH),C.addSchema(u.IACMessageType.TransactionSignRequest,{schema:P},s.SubProtocolSymbols.ETH_ERC20),C.addSchema(u.IACMessageType.TransactionSignRequest,{schema:T},s.MainProtocolSymbols.XTZ),C.addSchema(u.IACMessageType.TransactionSignRequest,{schema:T},s.SubProtocolSymbols.XTZ_BTC),C.addSchema(u.IACMessageType.TransactionSignRequest,{schema:T},s.SubProtocolSymbols.XTZ_KT),C.addSchema(u.IACMessageType.TransactionSignRequest,{schema:T},s.SubProtocolSymbols.XTZ_USD),C.addSchema(u.IACMessageType.TransactionSignRequest,{schema:M},s.MainProtocolSymbols.POLKADOT),C.addSchema(u.IACMessageType.TransactionSignRequest,{schema:M},s.MainProtocolSymbols.KUSAMA),C.addSchema(u.IACMessageType.TransactionSignResponse,{schema:E},s.MainProtocolSymbols.AE),C.addSchema(u.IACMessageType.TransactionSignResponse,{schema:O},s.MainProtocolSymbols.BTC),C.addSchema(u.IACMessageType.TransactionSignResponse,{schema:O},s.MainProtocolSymbols.GRS),C.addSchema(u.IACMessageType.TransactionSignResponse,{schema:k},s.MainProtocolSymbols.COSMOS),C.addSchema(u.IACMessageType.TransactionSignResponse,{schema:A},s.MainProtocolSymbols.ETH),C.addSchema(u.IACMessageType.TransactionSignResponse,{schema:A},s.SubProtocolSymbols.ETH_ERC20),C.addSchema(u.IACMessageType.TransactionSignResponse,{schema:x},s.MainProtocolSymbols.XTZ),C.addSchema(u.IACMessageType.TransactionSignResponse,{schema:x},s.SubProtocolSymbols.XTZ_BTC),C.addSchema(u.IACMessageType.TransactionSignResponse,{schema:x},s.SubProtocolSymbols.XTZ_KT),C.addSchema(u.IACMessageType.TransactionSignResponse,{schema:x},s.SubProtocolSymbols.XTZ_USD),C.addSchema(u.IACMessageType.TransactionSignResponse,{schema:R},s.MainProtocolSymbols.POLKADOT),C.addSchema(u.IACMessageType.TransactionSignResponse,{schema:R},s.MainProtocolSymbols.KUSAMA)},44578:function(e,t,n){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):o(e.value).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(82505),s=n(8144),c=n(88318),u={transaction:{presence:{allowEmpty:!1},type:"String",isValidAeternityTx:!0},networkId:{presence:{allowEmpty:!1},type:"String",isMainNet:!0}},l={transaction:{presence:{allowEmpty:!1},type:"String",isValidAeternityTx:!0},accountIdentifier:{presence:{allowEmpty:!1},type:"String"}},f=function(){},p=function(e){return e},d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.validateUnsignedTransaction=function(e){var t=e.transaction;return c.validateSyncScheme({}),a.async(t,u).then(f,p)},t.prototype.validateSignedTransaction=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){return[2,a.async(e,l).then(f,p)]}))}))},t}(s.TransactionValidator);t.AeternityTransactionValidator=d},44029:function(e,t,n){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(82505),i=n(8144),a=n(88318),s={ins:{presence:{allowEmpty:!1},isValidBitcoinInput:!0},outs:{presence:{allowEmpty:!1},isValidBitcoinOutput:!0}},c={from:{presence:{allowEmpty:!1},isValidBitcoinFromArray:!0},amount:{type:"BigNumber",presence:{allowEmpty:!1}},fee:{type:"BigNumber",presence:{allowEmpty:!1}},accountIdentifier:{type:"String",presence:{allowEmpty:!1}},transaction:{isValidBitcoinTxString:!0,type:"String",presence:{allowEmpty:!1}}},u=function(){},l=function(e){return e},f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.validateUnsignedTransaction=function(e){var t=e.transaction;return a.validateSyncScheme({}),o.async(t,s).then(u,l)},t.prototype.validateSignedTransaction=function(e){return o.async(e,c).then(u,l)},t}(i.TransactionValidator);t.BitcoinTransactionValidator=f},14255:function(e,t,n){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):o(e.value).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(8144),s=n(88318),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.validateUnsignedTransaction=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(e){return s.validateSyncScheme({}),[2,void 0]}))}))},t.prototype.validateSignedTransaction=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(e){return[2,void 0]}))}))},t}(a.TransactionValidator);t.CosmosTransactionValidator=c},50224:function(e,t,n){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(82505),i=n(8144),a=n(88318),s={nonce:{presence:{allowEmpty:!1},type:"String",isHexStringWithPrefix:!0},gasPrice:{presence:{allowEmpty:!1},type:"String",isHexStringWithPrefix:!0},gasLimit:{presence:{allowEmpty:!1},type:"String",isHexStringWithPrefix:!0},to:{presence:{allowEmpty:!1},type:"String",isHexStringWithPrefix:!0,format:{pattern:"^0x[a-fA-F0-9]{40}$",flags:"i",message:"is not a valid ethereum address"}},value:{presence:{allowEmpty:!1},type:"String",isHexStringWithPrefix:!0},chainId:{presence:{allowEmpty:!1},numericality:{noStrings:!0,onlyInteger:!0,greaterThanOrEqualTo:0}},data:{presence:{allowEmpty:!1},type:"String",isHexStringWithPrefix:!0}},c={transaction:{presence:{allowEmpty:!1},type:"String",isValidEthereumTransactionString:!0}},u=function(){},l=function(e){return e},f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.validateUnsignedTransaction=function(e){var t=e.transaction;return a.validateSyncScheme({}),o.async(t,s).then(u,l)},t.prototype.validateSignedTransaction=function(e){return o.async(e,c).then(u,l)},t}(i.TransactionValidator);t.EthereumTransactionValidator=f},97146:function(e,t,n){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):o(e.value).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(82505),s=n(8144),c=n(88318),u={encoded:{presence:{allowEmpty:!1},type:"String"}},l={transaction:{isValidSubstrateTransaction:!0,presence:{allowEmpty:!1},type:"String"},accountIdentifier:{presence:{allowEmpty:!1},type:"String"}},f=function(){},p=function(e){return e},d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.validateUnsignedTransaction=function(e){return o(this,void 0,void 0,(function(){var t;return i(this,(function(n){return t=e.transaction,c.validateSyncScheme({}),[2,a.async(t,u).then(f,p)]}))}))},t.prototype.validateSignedTransaction=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){return[2,a.async(e,l).then(f,p)]}))}))},t}(s.TransactionValidator);t.SubstrateTransactionValidator=d},82752:function(e,t,n){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):o(e.value).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(82505),s=n(8144),c=n(88318),u={binaryTransaction:{isValidTezosUnsignedTransaction:!0,presence:{allowEmpty:!1},type:"String"}},l=function(){},f=function(e){return e},p={transaction:{isValidTezosSignedTransaction:!0,presence:{allowEmpty:!1},type:"String"},accountIdentifier:{presence:{allowEmpty:!1},type:"String"}},d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.validateUnsignedTransaction=function(e){return o(this,void 0,void 0,(function(){var t;return i(this,(function(n){return t=e.transaction,c.validateSyncScheme({}),[2,a.async(t,u).then(l,f)]}))}))},t.prototype.validateSignedTransaction=function(e){return a.async(e,p).then(l,f)},t}(s.TransactionValidator);t.TezosTransactionValidator=d},68727:function(e,t,n){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):o(e.value).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(82505),s=n(98086),c=n(8144),u=n(88318),l=n(21455),f={binaryTransaction:{isValidTezosUnsignedTransaction:!0,presence:{allowEmpty:!1},type:"String"}},p=function(){},d=function(e){return e},h={transaction:{isValidTezosSignedTransaction:!0,presence:{allowEmpty:!1},type:"String"},accountIdentifier:{presence:{allowEmpty:!1},type:"String"}},y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.validateUnsignedTransaction=function(e){return o(this,void 0,void 0,(function(){var t=this;return i(this,(function(n){return[2,new Promise((function(n,r){return o(t,void 0,void 0,(function(){var t,c,l,h,y=this;return i(this,(function(v){switch(v.label){case 0:return t=new s.TezosBTC,[4,t.unforgeUnsignedTezosWrappedOperation(e.transaction.binaryTransaction)];case 1:return c=v.sent(),l=e.transaction,u.validateSyncScheme({}),c.contents.forEach((function(e){return o(y,void 0,void 0,(function(){var o,s,c;return i(this,(function(i){switch(i.label){case 0:o=e,i.label=1;case 1:return i.trys.push([1,3,,4]),this.assertDestination(t,o),this.assertParameters(o),this.assertNoHiddenXTZAmount(o),[4,a.async(l,f).then(p,d)];case 2:return s=i.sent(),n(s),[3,4];case 3:return c=i.sent(),r(c),[3,4];case 4:return[2]}}))}))})),[4,a.async(l,f).then(p,d)];case 2:return h=v.sent(),n(h),[2]}}))}))}))]}))}))},t.prototype.validateSignedTransaction=function(e){return a.async(e,h).then(p,d)},t.prototype.assertDestination=function(e,t){if(t.destination!==e.options.config.contractAddress)throw new Error("the contract address for a xtz-btc transfer must be "+e.options.config.contractAddress+", but is "+t.destination)},t.prototype.assertParameters=function(e){var t;if(void 0===(null===(t=e.parameters)||void 0===t?void 0:t.entrypoint))throw new Error("a contract transaction for xtz-btc should have an entrypoint defined")},t.prototype.assertNoHiddenXTZAmount=function(e){if(!new l.default(e.amount).eq(0))throw new Error("a contract call cannot have the specified amount other than 0")},t}(c.TransactionValidator);t.TezosBTCTransactionValidator=y},84033:(e,t)=>{function n(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length,r="",o=0;o<e;o++)r+=t.charAt(Math.floor(Math.random()*n));return r}Object.defineProperty(t,"__esModule",{value:!0}),t.generateId=n},83456:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(52438),o=n(48866),i=n(76139);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=!1;n&&console.log.apply(console,e)}function s(e,t){var n=t.split("/").slice(-1)[0],r=e.definitions;return r[n]}function c(e){return a("UNWRAPPING SCHEMA",e),s(e,e.$ref)}function u(e,t,n){return new r.InvalidSchemaType(e+': expected type "'+t+'", but got "'+typeof n+'", value: '+("object"===typeof n?JSON.stringify(n):n))}function l(e,t,n,r){if("array"===t&&Array.isArray(n))return r(n);if(typeof n!==t||Array.isArray(n))throw u(e,t,n);return r(n)}function f(e){var t,n,r;return n=null===(t=e)||void 0===t?void 0:t.type,null!==n&&void 0!==n?n:"#/definitions/HexString"===(null===(r=e)||void 0===r?void 0:r.$ref)?i.SchemaTypes.HEX_STRING:i.SchemaTypes.STRING}function p(e,t,n){var s=f(t);switch(s){case i.SchemaTypes.STRING:return l(e,"string",n,(function(t){if(a("Parsing key "+e+" as string, which results in "+t),t.startsWith("0x"))throw new r.InvalidString('string "'+n+'" starts with "0x". This causes problems with RLP. Please use the "HexString" type instead of "string"');return t}));case i.SchemaTypes.HEX_STRING:return l(e,"string",n,(function(t){if(a("Parsing key "+e+" as hex-string, which results in "+t),!t.startsWith("0x"))throw new r.InvalidHexString('"'+n+'" does not start with "0x"');return t.substr(2)}));case i.SchemaTypes.NUMBER:case i.SchemaTypes.INTEGER:return l(e,"number",n,(function(t){return a("Parsing key "+e+" as number, which results in "+t.toString()),t.toString()}));case i.SchemaTypes.BOOLEAN:return l(e,"boolean",n,(function(t){return a("Parsing key "+e+" as boolean, which results in "+(t?"1":"0")),t?"1":"0"}));case i.SchemaTypes.NULL:if("undefined"===typeof n)return a("Parsing key "+e+" as undefined, which results in ''"),"";throw u(e,"undefined",n);case i.SchemaTypes.ARRAY:return l(e,"array",n,(function(n){return n.map((function(n,r){var o=t.items;return Array.isArray(o)?p(e,o[r],n):p(e,o,n)}))}));case i.SchemaTypes.OBJECT:return l(e,"object",n,(function(n){for(var r=t.properties,o=Object.keys(r).sort(),i=[],s=0,c=o;s<c.length;s++){var u=c[s];i.push(p(u,r[u],n[u]))}return a("Parsing key "+e+" as object, which results in "+i),i}));default:return o.assertNever(s),""}}function d(e,t){var n=f(e);switch(n){case i.SchemaTypes.BOOLEAN:if(""!==t.toString())return"1"===t.toString();break;case i.SchemaTypes.STRING:return t.toString();case i.SchemaTypes.HEX_STRING:return"0x"+t.toString();case i.SchemaTypes.NUMBER:case i.SchemaTypes.INTEGER:if(""!==t.toString())return parseInt(t.toString(),10);break;case i.SchemaTypes.NULL:return;case i.SchemaTypes.ARRAY:return t.map((function(t,n){var r=e.items;return Array.isArray(r)?d(r[n],t):d(r,t)}));case i.SchemaTypes.OBJECT:return h(e.properties,t);default:o.assertNever(n)}}function h(e,t){var n={};if(e.type===i.SchemaTypes.OBJECT){var r=e.properties;if(r)return h(r,t);throw new Error("Shema not available.")}var o=Object.keys(e).sort();a(o);for(var s=0;s<o.length;s++){var c=o[s];a(e),n[c]=d(e[c],t[s])}return n}t.getDefinitionByRefPath=s,t.unwrapSchema=c,t.jsonToArray=p,t.rlpArrayToJson=h},8144:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e}();t.TransactionValidator=n},88318:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):o(e.value).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(21455),a=n(82505),s=n(67145),c=n(70090),u=n(68719),l=n(76449),f=n(50377),p=n(37565);function d(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){return t={version:{presence:{allowEmpty:!1},numericality:{noStrings:!0,onlyInteger:!0,greaterThanOrEqualTo:0}},type:{presence:{allowEmpty:!1},numericality:{noStrings:!0,onlyInteger:!0,greaterThanOrEqualTo:0}},protocol:{presence:{allowEmpty:!1},type:"String",length:{minimum:1}},payload:{presence:{allowEmpty:!1},type:"Array"}},[2,a.validate(e,t)]}))}))}a.validators.type=function(e,t,n,r){if(null===e||"undefined"===typeof e)return null;if(!a.validators.type.checks[t])throw new Error("Could not find validator for type "+t);return a.validators.type.checks[t](e)?null:'is not of type "'+t+'"'},a.validators.type.checks={Object:function(e){return a.isObject(e)&&!a.isArray(e)},Array:a.isArray,Integer:a.isInteger,Number:a.isNumber,String:a.isString,Date:a.isDate,Boolean:function(e){return"boolean"===typeof e},BigNumber:function(e){return i.default.isBigNumber(e)}},a.validators.isHexStringWithPrefix=function(e){if("string"!==typeof e)return"is not hex string";if(!e.startsWith("0x"))return"is not hex string";var t=e.substr(2);return 0===t.length||/[0-9A-F]/gi.test(t)?null:"is not hex string"},a.validators.isPublicKey=function(e){return"string"!==typeof e?"is not a valid public key: should be of type string":64!==e.length?"is not a valid public key: wrong length":/[0-9A-F]/gi.test(e)?null:"is not a valid public key: invalid characters"},a.validators.isValidEthereumTransactionString=function(e){return new Promise((function(t,n){return r(void 0,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:null!==e&&"undefined"!==typeof e||t("not a valid Ethereum transaction"),r={accountIdentifier:"",transaction:e},i=new s.EthereumProtocol,null!==e&&"undefined"!==typeof e||n(),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.getTransactionDetailsFromSigned(r)];case 2:return o.sent(),t(),[3,4];case 3:return o.sent(),t("not a valid Ethereum transaction"),[3,4];case 4:return[2]}}))}))}))},a.validators.isValidBitcoinInput=function(e){if(!Array.isArray(e))return"not an array";for(var t=0;t<e.length;t++){var n=e[t];if(!n.hasOwnProperty("txId"))return"doesn't have property txId ";var r=RegExp("^[a-fA-F0-9]{64}$");if(!r.test(n.txId))return"not a valid txId";if(!n.hasOwnProperty("value"))return"doesn't have property value ";if(!i.default.isBigNumber(n.value))return"value not a valid BigNumber";if(!n.hasOwnProperty("vout"))return"doesn't have property vout";if("number"!==typeof n.vout)return"vout is not a number";if(n.vout<0)return"vout is not a positive value";if(!n.hasOwnProperty("address"))return"doesn't have property address ";r=RegExp((new f.BitcoinProtocol).addressValidationPattern);if(!r.test(n.address))return"not a valid bitcoin address";if(!n.hasOwnProperty("derivationPath"))return"doesn't have property derivationPath";var o=new f.BitcoinProtocol;try{var a="spell device they juice trial skirt amazing boat badge steak usage february virus art survey";o.getPublicKeyFromMnemonic(a,n.derivationPath)}catch(s){return"invalid derivation path"}}return null},a.validators.isValidBitcoinOutput=function(e){if(!Array.isArray(e))return"not an array";for(var t=0;t<e.length;t++){var n=e[t];if(!n.hasOwnProperty("recipient"))return"doesn't have property recipient";var r=RegExp((new f.BitcoinProtocol).addressValidationPattern);if(!r.test(n.recipient))return"invalid Bitcoin address";if(!n.hasOwnProperty("isChange"))return"doesn't have property isChange ";if("boolean"!==typeof n.isChange)return"change is not a boolean";if(!n.hasOwnProperty("value"))return"doesn't have property value ";if(!i.default.isBigNumber(n.value))return"value is not BigNumber"}return null},a.validators.isValidBitcoinFromArray=function(e){if(!Array.isArray(e))return"not an array of Bitcoin addresses";for(var t=0;t<e.length;t++){var n=e[t],r=RegExp((new f.BitcoinProtocol).addressValidationPattern);if(!r.test(n))return"not a valid bitcoin address"}return null},a.validators.isBitcoinAccount=function(e){if(null===e||"undefined"===typeof e)return null;try{var t=new f.BitcoinProtocol;return t.getAddressFromExtendedPublicKey(e,0,0),null}catch(n){return"not a valid Bitcoin account"}},a.validators.isValidBitcoinTxString=function(e){if(null===e||"undefined"===typeof e)return null;try{var t=new f.BitcoinProtocol,n=t.options.config.bitcoinJSLib;return n.Transaction.fromHex(e),null}catch(r){return"is not a valid hex encoded Bitcoin transaction"}},a.validators.isMainNet=function(e){return null===e||"undefined"===typeof e?null:"ae_mainnet"!==e?"is not on mainnet":null},a.validators.isValidAeternityTx=function(e){if(null===e||"undefined"===typeof e)return null;if("string"===typeof e&&!e.startsWith("tx_"))return"invalid tx format";if("string"!==typeof e)return"isn't a string";try{return u.default.decode(e.replace("tx_","")),null}catch(t){return"isn't base64 encoded"}},a.validators.isValidAeternityAccount=function(e){return new Promise((function(t){return r(void 0,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:null!==e&&"undefined"!==typeof e||t(),r.label=1;case 1:return r.trys.push([1,3,,4]),n=new l.AeternityProtocol,[4,n.getTransactionsFromPublicKey(e,1)];case 2:return r.sent(),t(),[3,4];case 3:return r.sent(),t("not a valid Aeternity account"),[3,4];case 4:return[2]}}))}))}))},a.validators.isValidTezosUnsignedTransaction=function(e){var t={binaryTransaction:e},n={transaction:t,publicKey:"",callbackURL:""};return new Promise((function(t,i){return r(void 0,void 0,void 0,(function(){var r;return o(this,(function(o){switch(o.label){case 0:null!==e&&"undefined"!==typeof e||t("not a valid Tezos transaction"),r=new p.TezosProtocol,null!==e&&"undefined"!==typeof e||i(),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r.getTransactionDetails(n)];case 2:return o.sent(),t(),[3,4];case 3:return o.sent(),t("not a valid Tezos transaction"),[3,4];case 4:return[2]}}))}))}))},a.validators.isValidTezosSignedTransaction=function(e){var t={accountIdentifier:"",transaction:e};return new Promise((function(n,i){return r(void 0,void 0,void 0,(function(){var r;return o(this,(function(o){switch(o.label){case 0:null!==e&&"undefined"!==typeof e||n("not a valid Tezos transaction"),r=new p.TezosProtocol,null!==e&&"undefined"!==typeof e||i(),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r.getTransactionDetailsFromSigned(t)];case 2:return o.sent(),n(),[3,4];case 3:return o.sent(),n("not a valid Tezos transaction"),[3,4];case 4:return[2]}}))}))}))},a.validators.isValidSubstrateUnsignedTransaction=function(e){var t={transaction:{encoded:e},publicKey:"",callbackURL:""};return new Promise((function(n,i){return r(void 0,void 0,void 0,(function(){var r;return o(this,(function(o){switch(o.label){case 0:null!==e&&"undefined"!==typeof e||n("not a valid Substrate transaction"),r=new c.KusamaProtocol,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r.getTransactionDetails(t)];case 2:return o.sent(),n(),[3,4];case 3:return o.sent(),n("not a valid Substrate transaction"),[3,4];case 4:return[2]}}))}))}))},a.validators.isValidSubstrateSignedTransaction=function(e){var t={accountIdentifier:"",transaction:e};return new Promise((function(n,i){return r(void 0,void 0,void 0,(function(){var r;return o(this,(function(o){switch(o.label){case 0:null!==e&&"undefined"!==typeof e||n("not a valid Substrate transaction"),r=new c.KusamaProtocol,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r.getTransactionDetailsFromSigned(t)];case 2:return o.sent(),n(),[3,4];case 3:return o.sent(),n("not a valid Substrate transaction"),[3,4];case 4:return[2]}}))}))}))},t.validateSyncScheme=d},26236:function(e,t){var n=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(t,n){var r=e.call(this,t)||this;return r.data=n,r}return n(t,e),t}(Error);t.ErrorWithData=r},84780:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isNetworkEqual=function(e,t){return e.name===t.name&&e.type===t.type&&e.rpcUrl===t.rpcUrl}},42200:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.blockExplorer=e}return e}();t.ProtocolBlockExplorer=n},66408:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(95605),o=function(e){var t=r("sha256");return t.update(e),t.digest("base64").slice(0,10)};(function(e){e["MAINNET"]="MAINNET",e["TESTNET"]="TESTNET",e["CUSTOM"]="CUSTOM"})(t.NetworkType||(t.NetworkType={}));var i=function(){function e(e,t,n,r,o){this.name=e,this.type=t,this.rpcUrl=n,this.blockExplorer=r,this.extras=o}return Object.defineProperty(e.prototype,"identifier",{get:function(){var e=o(this.name+"-"+this.rpcUrl);return this.type+"-"+e},enumerable:!0,configurable:!0}),e}();t.ProtocolNetwork=i},59159:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e){e["AE"]="ae",e["BTC"]="btc",e["ETH"]="eth",e["XTZ"]="xtz",e["GRS"]="grs",e["COSMOS"]="cosmos",e["POLKADOT"]="polkadot",e["KUSAMA"]="kusama"}(t.MainProtocolSymbols||(t.MainProtocolSymbols={})),function(e){e["XTZ_KT"]="xtz-kt",e["XTZ_BTC"]="xtz-btc",e["XTZ_USD"]="xtz-usd",e["XTZ_STKR"]="xtz-stkr",e["ETH_ERC20"]="eth-erc20",e["ETH_ERC20_XCHF"]="eth-erc20-xchf"}(t.SubProtocolSymbols||(t.SubProtocolSymbols={}))},48866:(e,t)=>{function n(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];n.forEach((function(r){if(void 0===t[r]||null===t[r])throw new Error(e+", required: "+n.join(", ")+", but "+r+" is missing.")}))}Object.defineProperty(t,"__esModule",{value:!0}),t.assertNever=function(e){},t.assertFields=n},68719:(e,t,n)=>{var r=n(48287)["Buffer"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(95605),i=function(e){var t=o("sha256");return t.update(e),t.digest()},a=function(e){return i(i(e)).slice(0,4)},s={encode:function(e){r.isBuffer(e)||(e=r.from(e));var t=a(e),n=r.concat([e,t],e.length+4);return n.toString("base64")},decode:function(e){r.isBuffer(e)||(e=r.from(e,"base64"));var t=e.slice(0,-4),n=e.slice(-4),o=a(t);if(n[0]^o[0]|n[1]^o[1]|n[2]^o[2]|n[3]^o[3])throw new Error("bs64check checksum does not match");return t},checkSum:a};t["default"]=s},93335:(e,t,n)=>{var r=n(48287)["Buffer"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(43160),i=n(48191);function a(e,t,n){void 0===n&&(n={withPrefix:!1});var o=s(e,t),a=r.from(o).toString("hex");return n.withPrefix?i.addHexPrefix(a):a}function s(e,t){var n=Math.ceil(t/8),r=new Uint8Array(n),a=o(n);return a.update(i.hexToBytes(e)),a.digest(r),r}t.blake2bAsHex=a,t.blake2bAsBytes=s},16775:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(48402),o=function(){return r.ready};t.isCoinlibReady=o},75020:(e,t)=>{function n(e,t,n){return new Error(e+": expected "+t+" but got "+n+".")}Object.defineProperty(t,"__esModule",{value:!0}),t.invalidArgumentTypeError=n},48191:(e,t,n)=>{var r=n(48287)["Buffer"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(7507),i="0x",a=new RegExp("^("+i+")?[0-9a-fA-F]*$");function s(e){return e.startsWith(i)}function c(e){return s(e)?e:i+e}function u(e){return s(e)?e.substring(2):e}function l(e){return a.test(e)}function f(e){return r.from(p(e),"hex")}function p(e,t){void 0===t&&(t=8);var n=Math.ceil(t/4),r=e.toString(16),i=r.length>=n?r.length:n;return i=i%2==0?i:i+1,o.padStart(e.toString(16),i,"0")}function d(e,t){return void 0===t&&(t=8),c(p(e,t))}function h(e){return"string"===typeof e&&l(e)?r.from(u(e),"hex"):"string"!==typeof e?r.from(e):r.from([0])}function y(e,t){var n,o;if("string"===typeof e)o=e;else{var i=r.isBuffer(e)?e:r.from(e);o=i.toString("hex")}return(null===(n=t)||void 0===n?void 0:n.withPrefix)?c(o):o}function v(e){var t=u(e);t=t.length%2!=0?"0"+t:t;var n=t.match(/.{2}/g)||[];return n.reverse().join("")}t.addHexPrefix=c,t.stripHexPrefix=u,t.isHex=l,t.toHexBuffer=f,t.toHexStringRaw=p,t.toHexString=d,t.hexToBytes=h,t.bytesToHex=y,t.changeEndianness=v},7507:(e,t)=>{function n(e,t,n){return t|=0,e.length>=t?e:(t-=e.length,t>n.length&&(n+=n.repeat(t/n.length)),n.slice(0,t)+e)}Object.defineProperty(t,"__esModule",{value:!0}),t.padStart=n},7370:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(49007),o=n(86535),i=n(66873),a=n(50567),s=n(62487),c=n(65050),u=n(39082),l=n(62644),f=n(86083),p=n(48866),d=n(59159),h=function(e,t){switch(e){case d.MainProtocolSymbols.AE:return new r.AeternityProtocolOptions(t||new r.AeternityProtocolNetwork);case d.MainProtocolSymbols.BTC:return new o.BitcoinProtocolOptions(t||new o.BitcoinProtocolNetwork);case d.MainProtocolSymbols.ETH:case d.SubProtocolSymbols.ETH_ERC20_XCHF:case d.SubProtocolSymbols.ETH_ERC20:return new a.EthereumProtocolOptions(t||new a.EthereumProtocolNetwork);case d.MainProtocolSymbols.GRS:return new s.GroestlcoinProtocolOptions(t||new s.GroestlcoinProtocolNetwork);case d.MainProtocolSymbols.COSMOS:return new i.CosmosProtocolOptions(t||new i.CosmosProtocolNetwork);case d.MainProtocolSymbols.POLKADOT:return new u.PolkadotProtocolOptions(t||new u.PolkadotProtocolNetwork);case d.MainProtocolSymbols.KUSAMA:return new c.KusamaProtocolOptions(t||new c.KusamaProtocolNetwork);case d.MainProtocolSymbols.XTZ:case d.SubProtocolSymbols.XTZ_KT:return new f.TezosProtocolOptions(t||new f.TezosProtocolNetwork);case d.SubProtocolSymbols.XTZ_BTC:return new l.TezosFAProtocolOptions(t||new f.TezosProtocolNetwork,new l.TezosBTCProtocolConfig);case d.SubProtocolSymbols.XTZ_USD:return new l.TezosFAProtocolOptions(t||new f.TezosProtocolNetwork,new l.TezosUSDProtocolConfig);case d.SubProtocolSymbols.XTZ_STKR:return new l.TezosFAProtocolOptions(t||new f.TezosProtocolNetwork,new l.TezosStakerProtocolConfig);default:if(e.includes("-"))return h(e.split("-")[0]);throw p.assertNever(e),new Error("No protocol options found for "+e)}};t.getProtocolOptionsByIdentifier=h},84721:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(52438),o=n(84780),i=n(7370),a=n(19459),s=function(e,t){if(!e||"string"!==typeof e)throw new Error("No protocol identifier provided");var n=t||i.getProtocolOptionsByIdentifier(e).network,s=a.supportedProtocols().map((function(e){var t=[e];return e.subProtocols&&t.push.apply(t,e.subProtocols),t})).reduce((function(e,t){return e.concat(t)}),[]),c=s.filter((function(t){return e.startsWith(t.identifier)&&o.isNetworkEqual(t.options.network,n)}));if(0===c.length)throw new r.ProtocolNotSupported;return c.sort((function(e,t){return t.identifier.length-e.identifier.length})),c[0]};t.getProtocolByIdentifier=s},13299:function(e,t,n){var r=n(48287)["Buffer"],o=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):o(e.value).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(77824),s=n(48191);function c(e){if(!["m","m/"].includes(e.slice(0,2)))throw new Error("Invalid derivation path")}function u(e){var t=new Uint8Array(32),n=parseInt(e,10),o=s.changeEndianness(s.toHexStringRaw(n));return t.fill(0),t.set(r.from(o,"hex")),t}function l(e){var t=["h","'"].includes(e.slice(-1)),n=t?e.slice(0,-1):e;return{chainCode:u(n),isHard:t}}function f(e,t){if(0==t.length)return r.from(e);var n=t.split("/").map(l),o=n.reduce((function(e,t){var n=t.isHard?a.sr25519DeriveKeypairHard:a.sr25519DeriveKeypairSoft;return n(e,t.chainCode)}),e);return r.from(o)}function p(e,t){return o(this,void 0,void 0,(function(){var n,o,u;return i(this,(function(i){switch(i.label){case 0:return c(t),[4,a.waitReady()];case 1:return i.sent(),n="string"===typeof e?r.from(s.stripHexPrefix(e),"hex"):e,o=a.sr25519KeypairFromSeed(n.subarray(0,32)),u=f(o,t.slice(2)),[2,{privateKey:u.slice(0,64),publicKey:u.slice(64)}]}}))}))}t.createSr25519KeyPair=p},86059:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(84780),o=n(7370),i={},a=function(e,t){return e+":"+t.identifier},s=function(e,t){if(!e||"string"!==typeof e)throw new Error("No protocol identifier provided");var n=t||o.getProtocolOptionsByIdentifier(e).network,r=a(e,n);return i[r]?Object.keys(i[r]).map((function(e){return i[r][e]})):[]};t.getSubProtocolsByIdentifier=s;var c=function(e,t){if(!t.identifier.startsWith(e.identifier))throw new Error("subprotocol "+t.name+" is not supported for protocol "+e.identifier);if(!r.isNetworkEqual(e.options.network,t.options.network))throw new Error("subprotocol "+t.name+" needs to have the same network as main protocol");var n=a(e.identifier,e.options.network);i[n]||(i[n]={}),i[n][t.identifier]=t};t.addSubProtocol=c;var u=function(e,t){if(!t.identifier.startsWith(e.identifier))throw new Error("subprotocol "+t.name+" is not supported for protocol "+e.identifier);if(!r.isNetworkEqual(e.options.network,t.options.network))throw new Error("subprotocol "+t.name+" needs to have the same network as main protocol");var n=a(e.identifier,e.options.network);i[n]&&delete i[n][t.identifier]};t.removeSubProtocol=u},19459:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(84780),o=[],i=function(){return o};t.supportedProtocols=i;var a=function(e){if(i().find((function(t){return t.identifier===e.identifier&&r.isNetworkEqual(t.options.network,e.options.network)})))throw new Error("protocol "+e.name+" on network "+e.options.network.type+"("+e.options.network.rpcUrl+") already exists");o.push(e)};t.addSupportedProtocol=a;var s=function(e){for(var t=0;t<o.length;t++)o[t].identifier===e.identifier&&r.isNetworkEqual(o[t].options.network,e.options.network)&&o.splice(t,1)};t.removeSupportedProtocol=s},72476:(e,t,n)=>{var r=n(48287)["Buffer"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(21455);function i(e){return e instanceof Object&&!Array.isArray(e)&&!r.isBuffer(e)&&!o.default.isBigNumber(e)&&Object.values(e).every((function(e){return"function"!==typeof e}))}t.isRecord=i},14716:(e,t,n)=>{var r=n(48287)["Buffer"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(46144),i=n(48191);function a(e,t,n){void 0===n&&(n={littleEndian:!0,withPrefix:!1});for(var a=Math.ceil(t/64),s="string"===typeof e&&i.isHex(e)?r.from(e,"hex"):r.from(e),c="",u=0;u<a;u++){var l=i.toHexStringRaw(o.h64(s,u),64);c+=n.littleEndian?i.changeEndianness(l):l}return n.withPrefix?i.addHexPrefix(c):c}t.xxhashAsHex=a},54603:function(e,t,n){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):o(e.value).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(21455),s=n(66408),c=n(59159),u=n(83039);(function(e){e["Hours"]="hours",e["Days"]="days",e["Minutes"]="minutes"})(t.TimeUnit||(t.TimeUnit={}));var l=function(e){function t(t,n,r,o,i,a){var s=e.call(this,t,n,r,o,a)||this;return s.protocol=t,s.publicKey=n,s.isExtendedPublicKey=r,s.derivationPath=o,s.priceService=i,s.addressIndex=a,s}return r(t,e),Object.defineProperty(t.prototype,"currentMarketPrice",{get:function(){return this._currentMarketPrice},set:function(e){this._currentMarketPrice=this.protocol.options.network.type===s.NetworkType.MAINNET?e:new a.default(0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"marketPriceOverTime",{get:function(){return this._marketPriceOverTime},set:function(e){var t;this._marketPriceOverTime=this.protocol.options.network.type===s.NetworkType.MAINNET?e:null===(t=e)||void 0===t?void 0:t.map((function(){return{time:0,close:0,high:0,low:0,open:0,volumefrom:0,volumeto:0}}))},enumerable:!0,configurable:!0}),t.prototype.synchronize=function(){return o(this,void 0,void 0,(function(){var e=this;return i(this,(function(t){return void 0===this.synchronizePromise&&(this.synchronizePromise=new Promise((function(t,n){Promise.all([e.balanceOf(),e.fetchCurrentMarketPrice()]).then((function(n){e.currentBalance=n[0],e.currentMarketPrice=n[1],e.synchronizePromise=void 0,t()})).catch((function(t){e.synchronizePromise=void 0,n(t)}))}))),[2,this.synchronizePromise]}))}))},t.prototype.setProtocol=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,e.prototype.setProtocol.call(this,t)];case 1:return n.sent(),this.currentBalance=void 0,this.currentMarketPrice=void 0,[4,this.synchronize()];case 2:return n.sent(),[2]}}))}))},t.prototype.fetchCurrentMarketPrice=function(e){return void 0===e&&(e="USD"),o(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return t=this,[4,this.priceService.getCurrentMarketPrice(this.protocol,e)];case 1:return t.currentMarketPrice=n.sent(),[2,this.currentMarketPrice]}}))}))},t.prototype.getMarketPricesOverTime=function(e,t,n,r){return void 0===r&&(r="USD"),o(this,void 0,void 0,(function(){var o;return i(this,(function(i){switch(i.label){case 0:return o=this,[4,this.priceService.getMarketPricesOverTime(this.protocol,e,t,n,r)];case 1:return o.marketPriceOverTime=i.sent(),[2,this.marketPriceOverTime]}}))}))},t.prototype.addressesToCheck=function(){var e=void 0!==this.addressIndex?[this.addresses[this.addressIndex]]:this.addresses;return e},t.prototype.balanceOf=function(){return o(this,void 0,void 0,(function(){var e,t,n,r;return i(this,(function(o){switch(o.label){case 0:return this.protocol.identifier!==c.MainProtocolSymbols.BTC&&this.protocol.identifier!==c.MainProtocolSymbols.GRS||!this.isExtendedPublicKey?[3,2]:(e=a.default.bind,[4,this.protocol.getBalanceOfExtendedPublicKey(this.publicKey,0)]);case 1:return[2,new(e.apply(a.default,[void 0,o.sent()]))];case 2:return this.addresses.length>0?(t=a.default.bind,[4,this.protocol.getBalanceOfAddresses(this.addressesToCheck())]):[3,4];case 3:return[2,new(t.apply(a.default,[void 0,o.sent()]))];case 4:return this.isExtendedPublicKey?(n=a.default.bind,[4,this.protocol.getBalanceOfExtendedPublicKey(this.publicKey,0)]):[3,6];case 5:return[2,new(n.apply(a.default,[void 0,o.sent()]))];case 6:return r=a.default.bind,[4,this.protocol.getBalanceOfPublicKey(this.publicKey)];case 7:return[2,new(r.apply(a.default,[void 0,o.sent()]))]}}))}))},t.prototype.fetchTransactions=function(e,t){return o(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return this.protocol.identifier!==c.MainProtocolSymbols.BTC&&this.protocol.identifier!==c.MainProtocolSymbols.GRS||!this.isExtendedPublicKey?[3,2]:[4,this.protocol.getTransactionsFromExtendedPublicKey(this.publicKey,e,t)];case 1:return n=r.sent(),[3,8];case 2:return this.addresses.length>0?[4,this.protocol.getTransactionsFromAddresses(this.addressesToCheck(),e,t)]:[3,4];case 3:return n=r.sent(),[3,8];case 4:return this.isExtendedPublicKey?[4,this.protocol.getTransactionsFromExtendedPublicKey(this.publicKey,e,t)]:[3,6];case 5:return n=r.sent(),[3,8];case 6:return[4,this.protocol.getTransactionsFromPublicKey(this.publicKey,e,t)];case 7:n=r.sent(),r.label=8;case 8:return[2,n]}}))}))},t.prototype.getMaxTransferValue=function(e,t){return o(this,void 0,void 0,(function(){var n,r;return i(this,(function(o){switch(o.label){case 0:return this.isExtendedPublicKey?(n=a.default.bind,[4,this.protocol.estimateMaxTransactionValueFromExtendedPublicKey(this.publicKey,e,t)]):[3,2];case 1:return[2,new(n.apply(a.default,[void 0,o.sent()]))];case 2:return r=a.default.bind,[4,this.protocol.estimateMaxTransactionValueFromPublicKey(this.publicKey,e,t)];case 3:return[2,new(r.apply(a.default,[void 0,o.sent()]))]}}))}))},t.prototype.prepareTransaction=function(e,t,n,r){return this.isExtendedPublicKey?this.protocol.prepareTransactionFromExtendedPublicKey(this.publicKey,0,e,t,n,r):(this.addressIndex&&(r={addressIndex:this.addressIndex}),this.protocol.prepareTransactionFromPublicKey(this.publicKey,e,t,n,r))},t.prototype.estimateFees=function(e,t,n){return o(this,void 0,void 0,(function(){return i(this,(function(r){return this.isExtendedPublicKey?[2,this.protocol.estimateFeeDefaultsFromExtendedPublicKey(this.publicKey,e,t,n)]:(this.addressIndex&&(n={addressIndex:this.addressIndex}),[2,this.protocol.estimateFeeDefaultsFromPublicKey(this.publicKey,e,t,n)])}))}))},t}(u.AirGapWallet);t.AirGapMarketWallet=l},83039:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):o(e.value).then(a,s)}c((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,n,r,o){this.protocol=e,this.publicKey=t,this.isExtendedPublicKey=n,this.derivationPath=r,this.addressIndex=o,this.addresses=[]}return Object.defineProperty(e.prototype,"receivingPublicAddress",{get:function(){return this.addresses[void 0!==this.addressIndex?this.addressIndex:0]},enumerable:!0,configurable:!0}),e.prototype.setProtocol=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){if(this.protocol.identifier!==e.identifier)throw new Error("Can only set same protocol with a different network");return this.protocol=e,[2]}))}))},e.prototype.deriveAddresses=function(e){return void 0===e&&(e=50),n(this,void 0,void 0,(function(){var t,n,i;return r(this,(function(r){switch(r.label){case 0:return this.isExtendedPublicKey?(t=this.derivationPath.split("/"),n=0,t[t.length-1].endsWith("'")||(n=Number.parseInt(t[t.length-1],10)),[4,this.protocol.getAddressesFromExtendedPublicKey(this.publicKey,0,e,n)]):[3,3];case 1:return i=[r.sent()],[4,this.protocol.getAddressesFromExtendedPublicKey(this.publicKey,1,e,n)];case 2:return[2,o.apply(void 0,i.concat([r.sent()]))];case 3:return[2,this.protocol.getAddressesFromPublicKey(this.publicKey)]}}))}))},e.prototype.toJSON=function(){return{protocolIdentifier:this.protocol.identifier,networkIdentifier:this.protocol.options.network.identifier,publicKey:this.publicKey,isExtendedPublicKey:this.isExtendedPublicKey,derivationPath:this.derivationPath,addresses:this.addresses,addressIndex:this.addressIndex}},e}();t.AirGapWallet=i},94682:e=>{e.exports=JSON.parse('{"$ref":"#/definitions/AccountShareResponse","$schema":"http://json-schema.org/draft-07/schema#","definitions":{"AccountShareResponse":{"additionalProperties":false,"properties":{"derivationPath":{"type":"string"},"isExtendedPublicKey":{"type":"boolean"},"publicKey":{"type":"string"}},"required":["publicKey","derivationPath","isExtendedPublicKey"],"type":"object"}}}')},33226:e=>{e.exports=JSON.parse('{"$ref":"#/definitions/MessageSignRequest","$schema":"http://json-schema.org/draft-07/schema#","definitions":{"MessageSignRequest":{"additionalProperties":false,"properties":{"callbackURL":{"type":"string"},"message":{"type":"string"},"publicKey":{"type":"string"}},"required":["message","publicKey"],"type":"object"}}}')},56846:e=>{e.exports=JSON.parse('{"$ref":"#/definitions/MessageSignResponse","$schema":"http://json-schema.org/draft-07/schema#","definitions":{"MessageSignResponse":{"additionalProperties":false,"properties":{"message":{"type":"string"},"publicKey":{"type":"string"},"signature":{"type":"string"}},"required":["message","publicKey","signature"],"type":"object"}}}')},52849:e=>{e.exports=JSON.parse('{"$ref":"#/definitions/UnsignedAeternityTransaction","$schema":"http://json-schema.org/draft-07/schema#","definitions":{"UnsignedAeternityTransaction":{"additionalProperties":false,"properties":{"callbackURL":{"type":"string"},"publicKey":{"type":"string"},"transaction":{"additionalProperties":false,"properties":{"networkId":{"type":"string"},"transaction":{"type":"string"}},"required":["networkId","transaction"],"type":"object"}},"required":["publicKey","transaction"],"type":"object"}}}')},89828:e=>{e.exports=JSON.parse('{"$ref":"#/definitions/UnsignedBitcoinTransaction","$schema":"http://json-schema.org/draft-07/schema#","definitions":{"UnsignedBitcoinTransaction":{"additionalProperties":false,"properties":{"callbackURL":{"type":"string"},"publicKey":{"type":"string"},"transaction":{"additionalProperties":false,"properties":{"ins":{"items":{"additionalProperties":false,"properties":{"address":{"type":"string"},"derivationPath":{"type":"string"},"txId":{"type":"string"},"value":{"type":"string"},"vout":{"type":"number"}},"required":["txId","value","vout","address"],"type":"object"},"type":"array"},"outs":{"items":{"additionalProperties":false,"properties":{"derivationPath":{"type":"string"},"isChange":{"type":"boolean"},"recipient":{"type":"string"},"value":{"type":"string"}},"required":["recipient","isChange","value"],"type":"object"},"type":"array"}},"required":["ins","outs"],"type":"object"}},"required":["publicKey","transaction"],"type":"object"}}}')},74390:e=>{e.exports=JSON.parse('{"$ref":"#/definitions/SerializableUnsignedCosmosTransaction","$schema":"http://json-schema.org/draft-07/schema#","definitions":{"SerializableUnsignedCosmosTransaction":{"additionalProperties":false,"properties":{"callbackURL":{"type":"string"},"publicKey":{"type":"string"},"transaction":{"additionalProperties":false,"properties":{"accountNumber":{"type":"string"},"chainID":{"type":"string"},"fee":{"additionalProperties":false,"properties":{"amount":{"items":{"additionalProperties":false,"properties":{"amount":{"type":"string"},"denom":{"type":"string"}},"required":["denom","amount"],"type":"object"},"type":"array"},"gas":{"type":"string"}},"required":["amount","gas"],"type":"object"},"memo":{"type":"string"},"messages":{"items":{"additionalProperties":false,"properties":{"amount":{"items":{"additionalProperties":false,"properties":{"amount":{"type":"string"},"denom":{"type":"string"}},"required":["denom","amount"],"type":"object"},"type":"array"},"fromAddress":{"type":"string"},"toAddress":{"type":"string"},"type":{"enum":[0,1,2,3],"type":"number"}},"required":["type","amount","fromAddress","toAddress"],"type":"object"},"type":"array"},"sequence":{"type":"string"}},"required":["messages","fee","memo","chainID","accountNumber","sequence"],"type":"object"}},"required":["publicKey","transaction"],"type":"object"}}}')},96671:e=>{e.exports=JSON.parse('{"$ref":"#/definitions/UnsignedEthereumTransaction","$schema":"http://json-schema.org/draft-07/schema#","definitions":{"HexString":{"type":"string"},"UnsignedEthereumTransaction":{"additionalProperties":false,"properties":{"callbackURL":{"type":"string"},"publicKey":{"type":"string"},"transaction":{"additionalProperties":false,"properties":{"chainId":{"type":"number"},"data":{"$ref":"#/definitions/HexString"},"gasLimit":{"$ref":"#/definitions/HexString"},"gasPrice":{"$ref":"#/definitions/HexString"},"nonce":{"$ref":"#/definitions/HexString"},"to":{"$ref":"#/definitions/HexString"},"value":{"$ref":"#/definitions/HexString"}},"required":["nonce","gasPrice","gasLimit","to","value","chainId","data"],"type":"object"}},"required":["publicKey","transaction"],"type":"object"}}}')},67529:e=>{e.exports=JSON.parse('{"$ref":"#/definitions/UnsignedSubstrateTransaction","$schema":"http://json-schema.org/draft-07/schema#","definitions":{"UnsignedSubstrateTransaction":{"additionalProperties":false,"properties":{"callbackURL":{"type":"string"},"publicKey":{"type":"string"},"transaction":{"additionalProperties":false,"properties":{"encoded":{"type":"string"}},"required":["encoded"],"type":"object"}},"required":["publicKey","transaction"],"type":"object"}}}')},63759:e=>{e.exports=JSON.parse('{"$ref":"#/definitions/UnsignedTezosTransaction","$schema":"http://json-schema.org/draft-07/schema#","definitions":{"UnsignedTezosTransaction":{"additionalProperties":false,"properties":{"callbackURL":{"type":"string"},"publicKey":{"type":"string"},"transaction":{"additionalProperties":false,"properties":{"binaryTransaction":{"type":"string"}},"required":["binaryTransaction"],"type":"object"}},"required":["publicKey","transaction"],"type":"object"}}}')},47443:e=>{e.exports=JSON.parse('{"$ref":"#/definitions/SignedAeternityTransaction","$schema":"http://json-schema.org/draft-07/schema#","definitions":{"SignedAeternityTransaction":{"additionalProperties":false,"properties":{"accountIdentifier":{"type":"string"},"transaction":{"type":"string"}},"required":["accountIdentifier","transaction"],"type":"object"}}}')},62382:e=>{e.exports=JSON.parse('{"$ref":"#/definitions/SignedBitcoinTransaction","$schema":"http://json-schema.org/draft-07/schema#","definitions":{"SignedBitcoinTransaction":{"additionalProperties":false,"properties":{"accountIdentifier":{"type":"string"},"amount":{"type":"string"},"fee":{"type":"string"},"from":{"items":{"type":"string"},"type":"array"},"to":{"items":{"type":"string"},"type":"array"},"transaction":{"type":"string"}},"required":["accountIdentifier","amount","fee","from","to","transaction"],"type":"object"}}}')},29648:e=>{e.exports=JSON.parse('{"$ref":"#/definitions/SignedCosmosTransaction","$schema":"http://json-schema.org/draft-07/schema#","definitions":{"IAirGapSignedTransaction":{"type":"string"},"SignedCosmosTransaction":{"additionalProperties":false,"properties":{"accountIdentifier":{"type":"string"},"transaction":{"$ref":"#/definitions/IAirGapSignedTransaction","type":"string"}},"required":["accountIdentifier","transaction"],"type":"object"}}}')},10361:e=>{e.exports=JSON.parse('{"$ref":"#/definitions/SignedEthereumTransaction","$schema":"http://json-schema.org/draft-07/schema#","definitions":{"SignedEthereumTransaction":{"additionalProperties":false,"properties":{"accountIdentifier":{"type":"string"},"transaction":{"type":"string"}},"required":["accountIdentifier","transaction"],"type":"object"}}}')},51763:e=>{e.exports=JSON.parse('{"$ref":"#/definitions/SignedSubstrateTransaction","$schema":"http://json-schema.org/draft-07/schema#","definitions":{"SignedSubstrateTransaction":{"additionalProperties":false,"properties":{"accountIdentifier":{"type":"string"},"transaction":{"type":"string"}},"required":["accountIdentifier","transaction"],"type":"object"}}}')},52565:e=>{e.exports=JSON.parse('{"$ref":"#/definitions/SignedTezosTransaction","$schema":"http://json-schema.org/draft-07/schema#","definitions":{"SignedTezosTransaction":{"additionalProperties":false,"properties":{"accountIdentifier":{"type":"string"},"transaction":{"type":"string"}},"required":["accountIdentifier","transaction"],"type":"object"}}}')}}]);