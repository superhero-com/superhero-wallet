(self["webpackChunksuperhero_wallet"]=self["webpackChunksuperhero_wallet"]||[]).push([[1247],{1843:(e,t,n)=>{var r=n(48162).stringify,o=n(9036);e.exports=function(e){return{parse:o(e),stringify:r}},e.exports.parse=o(),e.exports.stringify=r},1889:(e,t,n)=>{"use strict";n.r(t),n.d(t,{_getPollInterval:()=>d,awaitHeight:()=>m,getAccount:()=>g,getBalance:()=>w,getContract:()=>N,getContractByteCode:()=>$,getCurrentGeneration:()=>v,getGeneration:()=>A,getHeight:()=>h,getKeyBlock:()=>x,getMicroBlockHeader:()=>C,getMicroBlockTransactions:()=>b,getName:()=>O,poll:()=>p,resolveName:()=>I,txDryRun:()=>E,waitForTxConfirm:()=>y});var r=n(97170),o=n(68156),a=n(90185),s=n(64224),i=n(8204),c=n(55719),l=n(88882),u=n(35166);async function d(e,{_expectedMineRate:t,_microBlockCycle:n,onNode:r}){var o,a;const s=async(t,n,o,a)=>t!==e?null:null!=n?n:"ae_dev"===await(r?.getNetworkId())?o:a,i=null!==(o=null!==(a=await s("key-block",t,0,18e4))&&void 0!==a?a:await s("micro-block",n,0,3e3))&&void 0!==o?o:(()=>{throw new c.Gd(`Unknown type: ${e}`)})();return Math.floor(i/3)}const f=new WeakMap;async function h({cached:e=!1,...t}){const n=(0,a.q)(t.onNode);if(e){const e=f.get(n);if(null!=e&&e.time>Date.now()-await d("key-block",t))return e.height}const{height:r}=await n.getCurrentKeyBlockHeight();return f.set(n,{height:r,time:Date.now()}),r}async function p(e,{blocks:t=5,interval:n,...r}){var a;let s;null!==(a=n)&&void 0!==a||(n=await d("micro-block",r));do{const a=await r.onNode.getTransactionByHash(e);if(-1!==a.blockHeight)return a;null==s&&(s=0!==a.tx.ttl?-1:await h({...r,cached:!0})+t),await(0,o.v7)(n)}while(-1===s||await h({...r,cached:!0})<s);throw new c.q3(t,e)}async function m(e,{interval:t,...n}){var r;let a;null!==(r=t)&&void 0!==r||(t=Math.min(await d("key-block",n),5e3));do{null!=a&&await(0,o.v7)(t),a=await h(n)}while(a<e);return a}async function y(e,{confirm:t=3,onNode:n,...r}){const{blockHeight:o}=await n.getTransactionByHash(e),a=await m(o+t,{onNode:n,...r}),{blockHeight:s}=await n.getTransactionByHash(e);switch(s){case-1:throw new c.MT(e);case o:return a;default:return y(e,{onNode:n,confirm:t,...r})}}async function g(e,{height:t,hash:n,onNode:r}){return null!=t?r.getAccountByPubkeyAndHeight(e,t):null!=n?r.getAccountByPubkeyAndHash(e,n):r.getAccountByPubkey(e)}async function w(e,{format:t=r.j8.AETTOS,...n}){const a=e.startsWith("ok_")?(0,l.lF)((0,l.D4)(e),u.W.AccountAddress):e,{balance:s}=await g(a,n).catch(e=>{if(!(0,o.PI)(e))throw e;return{balance:0n}});return(0,r.ej)(s,{targetDenomination:t})}async function v({onNode:e}){return e.getCurrentGeneration()}async function A(e,{onNode:t}){return"number"===typeof e?t.getGenerationByHeight(e):t.getGenerationByHash(e)}async function b(e,{onNode:t}){return(await t.getMicroBlockTransactionsByHash(e)).transactions}async function x(e,{onNode:t}){return"number"===typeof e?t.getKeyBlockByHeight(e):t.getKeyBlockByHash(e)}async function C(e,{onNode:t}){return t.getMicroBlockHeaderByHash(e)}const T=new Map;async function S(e,t){const n=T.get(e);if(T.delete(e),null==n)throw new c.Gd("Can't get dry-run request");let r;try{const e="number"===typeof n[0].top?(await x(n[0].top,{onNode:t})).hash:n[0].top;r=await t.protectedDryRunTxs({top:e,txEvents:n[0].txEvents,txs:n.map(e=>({tx:e.tx})),accounts:Array.from(new Set(n.map(e=>e.accountAddress))).map(e=>({pubKey:e,amount:i.gx.amount}))})}catch(s){return void n.forEach(({reject:e})=>e(s))}const{results:o,txEvents:a}=r;o.forEach(({result:e,reason:t,...r},o)=>{const{resolve:s,reject:i,tx:l,accountAddress:u}=n[o];"ok"===e?s({...r,txEvents:a}):i(Object.assign(new c.Vz(t),{tx:l,accountAddress:u}))})}async function E(e,t,{top:n,txEvents:r,combine:o,onNode:a}){var s;const i=!0===o?[n,r].join():"immediate",c=null!==(s=T.get(i))&&void 0!==s?s:[];return T.set(i,c),new Promise((s,l)=>{var u;c.push({tx:e,accountAddress:t,top:n,txEvents:r,resolve:s,reject:l}),!0===o?null!==(u=c.timeout)&&void 0!==u||(c.timeout=setTimeout(()=>{S(i,a)})):S(i,a)})}async function $(e,{onNode:t}){return t.getContractCode(e)}async function N(e,{onNode:t}){return t.getContract(e)}async function O(e,{onNode:t}){return t.getNameEntryByName(e)}async function I(e,t,{verify:n=!0,resolveByNode:r=!1,onNode:o}){if((0,s.wJ)(e)){if(n||r){const n=await o.getNameEntryByName(e),a=n.pointers.find(e=>e.key===t);if(null==a)throw new c.Ue(e,t);if(r)return a.id}return(0,s.bt)(e)}try{return(0,l.D4)(e),e}catch(a){throw new c.So(`Invalid name or address: ${e}`)}}},3125:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(84825);const o={serialize(e){return(0,r.Z)(e)},deserialize(e){return e.toString()}}},8204:(e,t,n)=>{"use strict";n.d(t,{BL:()=>h,L_:()=>l,SM:()=>f,d$:()=>i,d0:()=>u,gx:()=>a,sF:()=>d,vw:()=>p,yY:()=>s});var r=n(60346),o=n(68156);const a={pub:"ak_11111111111111111111111111111111273Yts",amount:100000000000000000000000000000000000n},s=5e4,i=1e9,c=1e14,l=31,u=(0,o.s8)({31:3,30:5,29:8,28:13,27:21,26:34,25:55,24:89,23:144,22:233,21:377,20:610,19:987,18:1597,17:2584,16:4181,15:6765,14:10946,13:17711,12:28657,11:46368,10:75025,9:121393,8:196418,7:317811,6:514229,5:832040,4:1346269,3:2178309,2:3524578,1:5702887},([e,t])=>[e,new r.g(t).times(c)]);let d=function(e){return e[e["Ceres"]=6]="Ceres",e}({}),f=function(e){return e[e["NoVm"]=0]="NoVm",e[e["Sophia"]=1]="Sophia",e[e["SophiaImprovementsMinerva"]=3]="SophiaImprovementsMinerva",e[e["SophiaImprovementsFortuna"]=4]="SophiaImprovementsFortuna",e[e["Fate"]=5]="Fate",e[e["SophiaImprovementsLima"]=6]="SophiaImprovementsLima",e[e["Fate2"]=7]="Fate2",e[e["Fate3"]=8]="Fate3",e}({}),h=function(e){return e[e["NoAbi"]=0]="NoAbi",e[e["Sophia"]=1]="Sophia",e[e["Fate"]=3]="Fate",e}({}),p=function(e){return e[e["SignedTx"]=11]="SignedTx",e[e["SpendTx"]=12]="SpendTx",e[e["OracleRegisterTx"]=22]="OracleRegisterTx",e[e["OracleQueryTx"]=23]="OracleQueryTx",e[e["OracleResponseTx"]=24]="OracleResponseTx",e[e["OracleExtendTx"]=25]="OracleExtendTx",e[e["NameClaimTx"]=32]="NameClaimTx",e[e["NamePreclaimTx"]=33]="NamePreclaimTx",e[e["NameUpdateTx"]=34]="NameUpdateTx",e[e["NameRevokeTx"]=35]="NameRevokeTx",e[e["NameTransferTx"]=36]="NameTransferTx",e[e["ContractCreateTx"]=42]="ContractCreateTx",e[e["ContractCallTx"]=43]="ContractCallTx",e[e["ChannelCreateTx"]=50]="ChannelCreateTx",e[e["ChannelDepositTx"]=51]="ChannelDepositTx",e[e["ChannelWithdrawTx"]=52]="ChannelWithdrawTx",e[e["ChannelForceProgressTx"]=521]="ChannelForceProgressTx",e[e["ChannelCloseMutualTx"]=53]="ChannelCloseMutualTx",e[e["ChannelCloseSoloTx"]=54]="ChannelCloseSoloTx",e[e["ChannelSlashTx"]=55]="ChannelSlashTx",e[e["ChannelSettleTx"]=56]="ChannelSettleTx",e[e["ChannelOffChainTx"]=57]="ChannelOffChainTx",e[e["ChannelSnapshotSoloTx"]=59]="ChannelSnapshotSoloTx",e[e["GaAttachTx"]=80]="GaAttachTx",e[e["GaMetaTx"]=81]="GaMetaTx",e[e["PayingForTx"]=82]="PayingForTx",e}({})},8337:(e,t,n)=>{"use strict";n.d(t,{A:()=>$});var r=n(50180),o=n(8204),a=n(91454),s=n(88882),i=n(55719),c=n(16341),l=n(1889),u=n(48189),d=n(68156),f=n(64224);function h(e,t,n){m(e,t),t.set(e,n)}function p(e,t){m(e,t),t.add(e)}function m(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function y(e,t,n){return e.set(w(e,t),n),n}function g(e,t){return e.get(w(e,t))}function w(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var v=new WeakSet,A=new WeakMap;class b{async $compile(){if(null!=this.$options.bytecode)return this.$options.bytecode;if(null==this.$options.onCompiler)throw new i.qw("Can't compile without compiler");if(null!=this.$options.sourceCode){const{bytecode:e}=await this.$options.onCompiler.compileBySourceCode(this.$options.sourceCode,this.$options.fileSystem);this.$options.bytecode=e}if(null!=this.$options.sourceCodePath){const{bytecode:e}=await this.$options.onCompiler.compile(this.$options.sourceCodePath);this.$options.bytecode=e}if(null==this.$options.bytecode)throw new i.qw("Can't compile without sourceCode and sourceCodePath");return this.$options.bytecode}async $getCallResultByTxHash(e,t,n){const{callInfo:r}=await this.$options.onNode.getTransactionInfoByHash(e);if(null==r)throw new i.Vl(`callInfo is not available for transaction ${e}`);const o=r;return{...w(v,this,x).call(this,o,t,void 0,n),result:o}}async _estimateGas(e,t,n={}){const{result:r}=await this.$call(e,t,{...n,callStatic:!0});if(null==r)throw new i.rU;const{gasUsed:o}=r;return Math.floor(1.25*o)}async $deploy(e,t){var n;const{callStatic:r,...s}={...this.$options,...t};if(null==this.$options.bytecode&&await this.$compile(),!0===r)return this.$call("init",e,{...s,callStatic:r});if(null!=this.$options.address)throw new i.E0;if(null==s.onAccount)throw new i.qw("Can't deploy without account");const c=s.onAccount.address;if(null==this.$options.bytecode)throw new i.qw("Can't deploy without bytecode");const l=await(0,a.B4)({_isInternalBuild:!0,...s,tag:o.vw.ContractCreateTx,gasLimit:null!==(n=s.gasLimit)&&void 0!==n?n:await this._estimateGas("init",e,s),callData:this._calldata.encode(this._name,"init",e),code:this.$options.bytecode,ownerId:c}),{hash:u,...d}=await w(v,this,C).call(this,l,"init",{...s,onAccount:s.onAccount});return this.$options.address=(0,a.xD)(d.rawTx),{...d,...null!=d.result?.log&&{decodedEvents:this.$decodeEvents(d.result.log,s)},owner:c,transaction:u,address:this.$options.address}}async $call(e,t,n={}){var r;const{callStatic:s,top:c,...u}={...this.$options,...n},h=w(v,this,T).call(this,e),{address:p,name:m}=this.$options,y=null!=m?(0,f.bt)(m):p,{onNode:g}=u;if(null==e)throw new i.mh;if("init"===e&&!0!==s)throw new i.FL('"init" can be called only via dryRun');if("init"!==e&&null!=u.amount&&Number(u.amount)>0&&!h.payable)throw new i.Oz(u.amount,e);let A;try{if(null==u.onAccount)throw new i.Gd("Use fallback account");A=u.onAccount.address}catch(E){const e=!0===s&&(E instanceof i.hg&&"Account should be an address (ak-prefixed string), or instance of AccountBase, got undefined instead"===E.message||E instanceof i.Gq||E instanceof i.Gd&&"Use fallback account"===E.message);if(!e)throw E;A=o.gx.pub}const b=this._calldata.encode(this._name,e,t);if(!0===s){if(null==u.nonce){const e=null!=c&&{["number"===typeof c?"height":"hash"]:c},t=await(0,l.getAccount)(A,{...e,onNode:g}).catch(e=>{if(!(0,d.PI)(e))throw e;return{kind:"basic",nonce:0}});u.nonce="generalized"===t.kind?0:t.nonce+1}const t={...u,onNode:g,callData:b};let n;if("init"===e){if(null==this.$options.bytecode)throw new i.qw('Can\'t dry-run "init" without bytecode');n=await(0,a.B4)({...t,tag:o.vw.ContractCreateTx,code:this.$options.bytecode,ownerId:A})}else{if(null==y)throw new i.dp("Can't dry-run contract without address");n=await(0,a.B4)({...t,tag:o.vw.ContractCallTx,callerId:A,contractId:y})}const{callObj:r,...s}=await(0,l.txDryRun)(n,A,{...u,top:c});if(null==r)throw new i.Gd(`callObj is not available for transaction ${n}`);const f=r;return{...s,...w(v,this,x).call(this,f,e,n,u),tx:(0,a.pj)(n),result:f,rawTx:n,hash:(0,a.BN)(n),txData:void 0}}if(null!=c)throw new i.qw("Can't handle `top` option in on-chain contract call");if(null==y)throw new i.dp("Can't call contract without address");const S=await(0,a.B4)({_isInternalBuild:!0,...u,tag:o.vw.ContractCallTx,gasLimit:null!==(r=u.gasLimit)&&void 0!==r?r:await this._estimateGas(e,t,u),callerId:A,contractId:y,callData:b});if(null==u.onAccount)throw new i.qw("Can't call contract on chain without account");return w(v,this,C).call(this,S,e,{...u,onAccount:u.onAccount})}$decodeEvents(e,{omitUnknown:t,...n}={}){return e.map(e=>{let r;try{r=w(v,this,S).call(this,e.address,e.topics[0],n)}catch(c){if(null!==t&&void 0!==t&&t&&c instanceof i.Mk)return null;throw c}const o=this._calldata.decodeEvent(r,e.data,e.topics),[a,s]=Object.entries(o)[0];return{name:a,args:s,contract:{name:r,address:e.address}}}).filter(e=>null!=e)}static async initialize({onCompiler:e,onNode:t,bytecode:n,aci:r,address:o,sourceCodePath:a,sourceCode:s,fileSystem:c,validateBytecode:u,...d}){if(null==r&&null!=e){let t;var h;if(null!=a&&(t=await e.compile(a)),null!=s&&(t=await e.compileBySourceCode(s,c)),null!=t)r=t.aci,null!==(h=n)&&void 0!==h||(n=t.bytecode)}if(null==r)throw new i._H;let p;if(null!=o&&(o=await(0,l.resolveName)(o,"contract_pubkey",{resolveByNode:!0,onNode:t}),(0,f.wJ)(o)&&(p=o)),null==o&&null==s&&null==a&&null==n)throw new i.dp("Can't create instance by ACI without address");if(null!=o){const e=await(0,l.getContract)(o,{onNode:t});if(null==e.active)throw new i.K4(o)}if(!0===u){if(null==o)throw new i.dp("Can't validate bytecode without contract address");const r=(await(0,l.getContractByteCode)(o,{onNode:t})).bytecode;let u=!1;if(null!=n)u=n===r;else if(null!=s){if(null==e)throw new i.qw("Can't validate bytecode without compiler");u=await e.validateBySourceCode(r,s,c)}else if(null!=a){if(null==e)throw new i.qw("Can't validate bytecode without compiler");u=await e.validate(r,a)}if(!u)throw new i.Mb(null!=(null!==s&&void 0!==s?s:a)?"source code":"bytecode")}return new E({onCompiler:e,onNode:t,sourceCode:s,sourceCodePath:a,bytecode:n,aci:r,address:o,name:p,fileSystem:c,...d})}constructor({aci:e,...t}){p(this,v),h(this,A,void 0),this._aci=e;const n=e[e.length-1];if(null==n.contract)throw new i.qw(`The last 'aci' item should have 'contract' key, got ${Object.keys(n)} keys instead`);y(A,this,n.contract),this._name=g(A,this).name,this._calldata=new r.A(e),this.$options=t,Object.assign(this,Object.fromEntries(g(A,this).functions.map(({name:e,arguments:t,stateful:n})=>{const r="init"!==e&&!n;return[e,async(...n)=>{const o=n.length===t.length+1?n.pop():{};if("object"!==typeof o)throw new i.hg(`Options should be an object: ${o}`);return"init"===e?this.$deploy(n,{callStatic:r,...o}):this.$call(e,n,{callStatic:r,...o})}]})))}}function x({returnType:e,returnValue:t,log:n},r,o,a){let c;switch(e){case"ok":{const e=w(v,this,T).call(this,r);return{decodedResult:this._calldata.decode(this._name,e.name,t),decodedEvents:this.$decodeEvents(n,a)}}case"revert":c=this._calldata.decodeFateString(t);break;case"error":if(c=(0,s.D4)(t).toString(),/Expected \d+ arguments, got \d+/.test(c))throw new i.Vl(`ACI doesn't match called contract. Error provided by node: ${c}`);break;default:throw new i.Gd(`Unknown return type: ${e}`)}throw new i.vo(c,o)}async function C(e,t,n){const r=await(0,u.v)(e,{...this.$options,...n});return{hash:r.hash,tx:(0,a.pj)(r.rawTx),txData:r,rawTx:r.rawTx,...null!=r.blockHeight&&await this.$getCallResultByTxHash(r.hash,t,n)}}function T(e){const t=g(A,this).functions.find(t=>t.name===e);if(null!=t)return t;if("init"===e)return{arguments:[],name:"init",payable:!1,returns:"unit",stateful:!0};throw new i.$4(e)}function S(e,t,{contractAddressToName:n}){const r={...this.$options.contractAddressToName,...n};if(null!=r[e])return r[e];const o=(e,t)=>JSON.stringify(e)===JSON.stringify(t),a=this._aci.map(({contract:e})=>e).filter(e=>e?.event),s=a.map(e=>[e.name,e.event.variant]).map(([e,t])=>t.map(t=>[e,Object.keys(t)[0],Object.values(t)[0]])).flat().filter(([,e])=>BigInt(`0x${(0,c.tW)(e).toString("hex")}`)===t).filter(([,,e],t,n)=>!n.slice(0,t).some(t=>o(t[2],e)));switch(s.length){case 0:throw new i.Mk(t.toString(),e);case 1:return s[0][0];default:throw new i.m5(e,s)}}const E=b,$=E},9036:(e,t,n)=>{var r=null,o=function(e){"use strict";var t={strict:!1,storeAsString:!1};void 0!==e&&null!==e&&(!0===e.strict&&(t.strict=!0),!0===e.storeAsString&&(t.storeAsString=!0));var o,a,s,i,c={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},l=function(e){throw{name:"SyntaxError",message:e,at:o,text:s}},u=function(e){return e&&e!==a&&l("Expected '"+e+"' instead of '"+a+"'"),a=s.charAt(o),o+=1,a},d=function(){var e,o="";"-"===a&&(o="-",u("-"));while(a>="0"&&a<="9")o+=a,u();if("."===a){o+=".";while(u()&&a>="0"&&a<="9")o+=a}if("e"===a||"E"===a){o+=a,u(),"-"!==a&&"+"!==a||(o+=a,u());while(a>="0"&&a<="9")o+=a,u()}if(e=+o,isFinite(e))return null==r&&(r=n(61594)),o.length>15?!0===t.storeAsString?o:new r(o):e;l("Bad number")},f=function(){var e,t,n,r="";if('"'===a)while(u()){if('"'===a)return u(),r;if("\\"===a)if(u(),"u"===a){for(n=0,t=0;t<4;t+=1){if(e=parseInt(u(),16),!isFinite(e))break;n=16*n+e}r+=String.fromCharCode(n)}else{if("string"!==typeof c[a])break;r+=c[a]}else r+=a}l("Bad string")},h=function(){while(a&&a<=" ")u()},p=function(){switch(a){case"t":return u("t"),u("r"),u("u"),u("e"),!0;case"f":return u("f"),u("a"),u("l"),u("s"),u("e"),!1;case"n":return u("n"),u("u"),u("l"),u("l"),null}l("Unexpected '"+a+"'")},m=function(){var e=[];if("["===a){if(u("["),h(),"]"===a)return u("]"),e;while(a){if(e.push(i()),h(),"]"===a)return u("]"),e;u(","),h()}}l("Bad array")},y=function(){var e,n={};if("{"===a){if(u("{"),h(),"}"===a)return u("}"),n;while(a){if(e=f(),h(),u(":"),!0===t.strict&&Object.hasOwnProperty.call(n,e)&&l('Duplicate key "'+e+'"'),n[e]=i(),h(),"}"===a)return u("}"),n;u(","),h()}}l("Bad object")};return i=function(){switch(h(),a){case"{":return y();case"[":return m();case'"':return f();case"-":return d();default:return a>="0"&&a<="9"?d():p()}},function(e,t){var n;return s=e+"",o=0,a=" ",n=i(),h(),a&&l("Syntax error"),"function"===typeof t?function e(n,r){var o,a=n[r];return a&&"object"===typeof a&&Object.keys(a).forEach(function(t){o=e(a,t),void 0!==o?a[t]=o:delete a[t]}),t.call(n,r,a)}({"":n},""):n}};e.exports=o},12075:(e,t,n)=>{"use strict";function r(e){return{serialize(t,n){return t.map(t=>e.serialize(t,n))},deserialize(t,n){return t.map(t=>e.deserialize(t,n))}}}n.d(t,{A:()=>r})},15234:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>i,R9:()=>s,h:()=>a});var r=n(48287),o=n(8204);const a={[o.sF.Ceres]:{"contract-create":{vmVersion:[o.SM.Fate3],abiVersion:[o.BL.Fate]},"contract-call":{vmVersion:[],abiVersion:[o.BL.Fate]},"oracle-call":{vmVersion:[],abiVersion:[o.BL.NoAbi,o.BL.Fate]}}};function s(e,t){var n;const r=a[e][t];return{vmVersion:null!==(n=r.vmVersion[0])&&void 0!==n?n:o.SM.Fate2,abiVersion:r.abiVersion[0]}}const i={serialize(e,t,{consensusProtocolVersion:n=o.sF.Ceres}){var a;return null!==(a=e)&&void 0!==a||(e=s(n,"contract-create")),r.Buffer.from([e.vmVersion,0,e.abiVersion])},async prepare(e,t,n){return null!=e?e:null==n.consensusProtocolVersion&&2!==Object.keys(o.sF).length&&null!=n.onNode?s((await n.onNode.getNodeInfo()).consensusProtocolVersion,"contract-create"):void 0},deserialize(e){const[t,,n]=e;return{vmVersion:+t,abiVersion:+n}}}},15630:(e,t,n)=>{"use strict";n.d(t,{pj:()=>tt,N$:()=>Wt,fl:()=>xt,Fp:()=>lt,G6:()=>Tt,PR:()=>He,OD:()=>J});const r=new Set(["Deserialize","Serialize","Retry","Sign"]);class o{constructor(e){var t;this._policies=[],this._policies=null!==(t=null===e||void 0===e?void 0:e.slice(0))&&void 0!==t?t:[],this._orderedPolicies=void 0}addPolicy(e,t={}){if(t.phase&&t.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(t.phase&&!r.has(t.phase))throw new Error(`Invalid phase name: ${t.phase}`);if(t.afterPhase&&!r.has(t.afterPhase))throw new Error(`Invalid afterPhase name: ${t.afterPhase}`);this._policies.push({policy:e,options:t}),this._orderedPolicies=void 0}removePolicy(e){const t=[];return this._policies=this._policies.filter(n=>!(e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase)||(t.push(n.policy),!1)),this._orderedPolicies=void 0,t}sendRequest(e,t){const n=this.getOrderedPolicies(),r=n.reduceRight((e,t)=>n=>t.sendRequest(n,e),t=>e.sendRequest(t));return r(t)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new o(this._policies)}static create(){return new o}orderPolicies(){const e=[],t=new Map;function n(e){return{name:e,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}const r=n("Serialize"),o=n("None"),a=n("Deserialize"),s=n("Retry"),i=n("Sign"),c=[r,o,a,s,i];function l(e){return"Retry"===e?s:"Serialize"===e?r:"Deserialize"===e?a:"Sign"===e?i:o}for(const h of this._policies){const e=h.policy,n=h.options,r=e.name;if(t.has(r))throw new Error("Duplicate policy names not allowed in pipeline");const o={policy:e,dependsOn:new Set,dependants:new Set};n.afterPhase&&(o.afterPhase=l(n.afterPhase),o.afterPhase.hasAfterPolicies=!0),t.set(r,o);const a=l(n.phase);a.policies.add(o)}for(const h of this._policies){const{policy:e,options:n}=h,r=e.name,o=t.get(r);if(!o)throw new Error(`Missing node for policy ${r}`);if(n.afterPolicies)for(const a of n.afterPolicies){const e=t.get(a);e&&(o.dependsOn.add(e),e.dependants.add(o))}if(n.beforePolicies)for(const a of n.beforePolicies){const e=t.get(a);e&&(e.dependsOn.add(o),o.dependants.add(e))}}function u(n){n.hasRun=!0;for(const r of n.policies)if((!r.afterPhase||r.afterPhase.hasRun&&!r.afterPhase.policies.size)&&0===r.dependsOn.size){e.push(r.policy);for(const e of r.dependants)e.dependsOn.delete(r);t.delete(r.policy.name),n.policies.delete(r)}}function d(){for(const e of c){if(u(e),e.policies.size>0&&e!==o)return void(o.hasRun||u(o));e.hasAfterPolicies&&u(o)}}let f=0;while(t.size>0){f++;const t=e.length;if(d(),e.length<=t&&f>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}}function a(){return o.create()}var s=n(21222);const i=(0,s.KV)("core-rest-pipeline");var c=n(19862);function l(e,t){e=Math.ceil(e),t=Math.floor(t);const n=Math.floor(Math.random()*(t-e+1));return n+e}function u(e,t){const n=t.retryDelayInMs*Math.pow(2,e),r=Math.min(t.maxRetryDelayInMs,n),o=r/2+l(0,r/2);return{retryAfterInMs:o}}function d(e){return"object"===typeof e&&null!==e&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}function f(e){if(d(e)){const t="string"===typeof e.name,n="string"===typeof e.message;return t&&n}return!1}function h(e){if(f(e))return e.message;{let n;try{n="object"===typeof e&&e?JSON.stringify(e):String(e)}catch(t){n="[unable to stringify input]"}return`Unknown error ${n}`}}function p(e,t){switch(t){case"utf-8":return m(e);case"base64":return y(e);case"base64url":return g(e);case"hex":return v(e)}}function m(e){return(new TextEncoder).encode(e)}function y(e){return new Uint8Array([...atob(e)].map(e=>e.charCodeAt(0)))}function g(e){const t=e.replace(/-/g,"+").replace(/_/g,"/");return y(t)}const w=new Set("0123456789abcdefABCDEF");function v(e){const t=new Uint8Array(e.length/2);for(let n=0;n<e.length/2;++n){const r=e[2*n],o=e[2*n+1];if(!w.has(r)||!w.has(o))return t.slice(0,n);t[n]=parseInt(`${r}${o}`,16)}return t}function A(){let e="";for(let t=0;t<32;t++){const n=Math.floor(16*Math.random());e+=12===t?"4":16===t?3&n|8:n.toString(16),7!==t&&11!==t&&15!==t&&19!==t||(e+="-")}return e}var b;const x="function"===typeof(null===(b=null===globalThis||void 0===globalThis?void 0:globalThis.crypto)||void 0===b?void 0:b.randomUUID)?globalThis.crypto.randomUUID.bind(globalThis.crypto):A;function C(){return x()}var T,S,E,$;"undefined"!==typeof window&&window.document,"object"===typeof self&&"function"===typeof(null===self||void 0===self?void 0:self.importScripts)&&("DedicatedWorkerGlobalScope"===(null===(T=self.constructor)||void 0===T?void 0:T.name)||"ServiceWorkerGlobalScope"===(null===(S=self.constructor)||void 0===S?void 0:S.name)||null===(E=self.constructor)||void 0===E||E.name),"undefined"!==typeof Deno&&"undefined"!==typeof Deno.version&&Deno.version.deno,"undefined"!==typeof Bun&&Bun.version;const N="undefined"!==typeof globalThis.process&&Boolean(globalThis.process.version)&&Boolean(null===($=globalThis.process.versions)||void 0===$?void 0:$.node),O=("undefined"!==typeof navigator&&(null===navigator||void 0===navigator||navigator.product),"REDACTED"),I=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],P=["api-version"];class B{constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:t=[]}={}){e=I.concat(e),t=P.concat(t),this.allowedHeaderNames=new Set(e.map(e=>e.toLowerCase())),this.allowedQueryParameters=new Set(t.map(e=>e.toLowerCase()))}sanitize(e){const t=new Set;return JSON.stringify(e,(e,n)=>{if(n instanceof Error)return Object.assign(Object.assign({},n),{name:n.name,message:n.message});if("headers"===e)return this.sanitizeHeaders(n);if("url"===e)return this.sanitizeUrl(n);if("query"===e)return this.sanitizeQuery(n);if("body"!==e&&"response"!==e&&"operationSpec"!==e){if(Array.isArray(n)||d(n)){if(t.has(n))return"[Circular]";t.add(n)}return n}},2)}sanitizeUrl(e){if("string"!==typeof e||null===e||""===e)return e;const t=new URL(e);if(!t.search)return e;for(const[n]of t.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||t.searchParams.set(n,O);return t.toString()}sanitizeHeaders(e){const t={};for(const n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?t[n]=e[n]:t[n]=O;return t}sanitizeQuery(e){if("object"!==typeof e||null===e)return e;const t={};for(const n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?t[n]=e[n]:t[n]=O;return t}}const W="logPolicy";function R(e={}){var t;const n=null!==(t=e.logger)&&void 0!==t?t:i.info,r=new B({additionalAllowedHeaderNames:e.additionalAllowedHeaderNames,additionalAllowedQueryParameters:e.additionalAllowedQueryParameters});return{name:W,async sendRequest(e,t){if(!n.enabled)return t(e);n(`Request: ${r.sanitize(e)}`);const o=await t(e);return n(`Response status code: ${o.status}`),n(`Headers: ${r.sanitize(o.headers)}`),o}}}const k="redirectPolicy",D=["GET","HEAD"];function M(e={}){const{maxRetries:t=20}=e;return{name:k,async sendRequest(e,n){const r=await n(e);return z(n,r,t)}}}async function z(e,t,n,r=0){const{request:o,status:a,headers:s}=t,i=s.get("location");if(i&&(300===a||301===a&&D.includes(o.method)||302===a&&D.includes(o.method)||303===a&&"POST"===o.method||307===a)&&r<n){const t=new URL(i,o.url);o.url=t.toString(),303===a&&(o.method="GET",o.headers.delete("Content-Length"),delete o.body),o.headers.delete("Authorization");const s=await e(o);return z(e,s,n,r+1)}return t}function q(){return"x-ms-useragent"}function j(e){const t=[{name:"Firefox",regex:/Firefox\/([\d.]+)/},{name:"Safari",regex:/Version\/([\d.]+).*Safari/}];for(const n of t){const t=e.match(n.regex);if(t)return{brand:n.name,version:t[1]}}}function _(e){const t=["Google Chrome","Microsoft Edge","Opera","Brave","Chromium"];for(const n of t){const t=e.find(e=>e.brand===n);if(t)return t}}async function U(e){const t=globalThis.navigator;let n="unknown";if(null===t||void 0===t?void 0:t.userAgentData){const r=await t.userAgentData.getHighEntropyValues(["architecture","platformVersion"]);n=`${r.architecture}-${r.platform}-${r.platformVersion}`;const o=_(t.userAgentData.brands);o&&e.set(o.brand,o.version)}else if(null===t||void 0===t?void 0:t.platform){n=t.platform;const r=j(t.userAgent);r&&e.set(r.brand,r.version)}else"string"===typeof globalThis.EdgeRuntime&&e.set("EdgeRuntime",globalThis.EdgeRuntime);e.set("OS",n)}const F="1.19.1",V=3;function L(e){const t=[];for(const[n,r]of e){const e=r?`${n}/${r}`:n;t.push(e)}return t.join(" ")}function H(){return q()}async function G(e){const t=new Map;t.set("core-rest-pipeline",F),await U(t);const n=L(t),r=e?`${e} ${n}`:n;return r}const K=H(),J="userAgentPolicy";function Q(e={}){const t=G(e.userAgentPrefix);return{name:J,async sendRequest(e,n){return e.headers.has(K)||e.headers.set(K,await t),n(e)}}}const X=Symbol("rawContent");function Z(e){return"function"===typeof e[X]}function Y(e){return Z(e)?e[X]():e.stream()}function ee(e){return Boolean(e&&"function"===typeof e["pipe"])}function te(e){return Boolean(e&&"function"===typeof e.getReader&&"function"===typeof e.tee)}function ne(e){return"function"===typeof e.stream}function re(e){return new Response(e).blob()}async function oe(e){if(e instanceof Blob||e instanceof Uint8Array)return e;if(te(e))return re(e);const t=Y(e);if(ee(t))throw new Error("Encountered unexpected type. In the browser, `concat` supports Web ReadableStream, Blob, Uint8Array, and files created using `createFile` only.");return oe(t)}async function ae(e){const t=[];for(const n of e)t.push(await oe("function"===typeof n?n():n));return new Blob(t)}function se(){return`----AzSDKFormBoundary${C()}`}function ie(e){let t="";for(const[n,r]of e)t+=`${n}: ${r}\r\n`;return t}function ce(e){return e instanceof Uint8Array?e.byteLength:ne(e)?-1===e.size?void 0:e.size:void 0}function le(e){let t=0;for(const n of e){const e=ce(n);if(void 0===e)return;t+=e}return t}async function ue(e,t,n){const r=[p(`--${n}`,"utf-8"),...t.flatMap(e=>[p("\r\n","utf-8"),p(ie(e.headers),"utf-8"),p("\r\n","utf-8"),e.body,p(`\r\n--${n}`,"utf-8")]),p("--\r\n\r\n","utf-8")],o=le(r);o&&e.headers.set("Content-Length",o),e.body=await ae(r)}const de="multipartPolicy",fe=70,he=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function pe(e){if(e.length>fe)throw new Error(`Multipart boundary "${e}" exceeds maximum length of 70 characters`);if(Array.from(e).some(e=>!he.has(e)))throw new Error(`Multipart boundary "${e}" contains invalid characters`)}function me(){return{name:de,async sendRequest(e,t){var n;if(!e.multipartBody)return t(e);if(e.body)throw new Error("multipartBody and regular body cannot be set at the same time");let r=e.multipartBody.boundary;const o=null!==(n=e.headers.get("Content-Type"))&&void 0!==n?n:"multipart/mixed",a=o.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!a)throw new Error(`Got multipart request body, but content-type header was not multipart: ${o}`);const[,s,i]=a;if(i&&r&&i!==r)throw new Error(`Multipart boundary was specified as ${i} in the header, but got ${r} in the request body`);return null!==r&&void 0!==r||(r=i),r?pe(r):r=se(),e.headers.set("Content-Type",`${s}; boundary=${r}`),await ue(e,e.multipartBody.parts,r),e.multipartBody=void 0,t(e)}}}function ye(){throw new Error("decompressResponsePolicy is not supported in browser environment")}const ge="The operation was aborted.";function we(e,t,n){return new Promise((r,o)=>{let a,s;const i=()=>o(new c.l((null===n||void 0===n?void 0:n.abortErrorMsg)?null===n||void 0===n?void 0:n.abortErrorMsg:ge)),l=()=>{(null===n||void 0===n?void 0:n.abortSignal)&&s&&n.abortSignal.removeEventListener("abort",s)};if(s=()=>(a&&clearTimeout(a),l(),i()),(null===n||void 0===n?void 0:n.abortSignal)&&n.abortSignal.aborted)return i();a=setTimeout(()=>{l(),r(t)},e),(null===n||void 0===n?void 0:n.abortSignal)&&n.abortSignal.addEventListener("abort",s)})}function ve(e,t){const n=e.headers.get(t);if(!n)return;const r=Number(n);return Number.isNaN(r)?void 0:r}const Ae="Retry-After",be=["retry-after-ms","x-ms-retry-after-ms",Ae];function xe(e){if(e&&[429,503].includes(e.status))try{for(const o of be){const t=ve(e,o);if(0===t||t){const e=o===Ae?1e3:1;return t*e}}const t=e.headers.get(Ae);if(!t)return;const n=Date.parse(t),r=n-Date.now();return Number.isFinite(r)?Math.max(0,r):void 0}catch(b){return}}function Ce(e){return Number.isFinite(xe(e))}function Te(){return{name:"throttlingRetryStrategy",retry({response:e}){const t=xe(e);return Number.isFinite(t)?{retryAfterInMs:t}:{skipStrategy:!0}}}}const Se=1e3,Ee=64e3;function $e(e={}){var t,n;const r=null!==(t=e.retryDelayInMs)&&void 0!==t?t:Se,o=null!==(n=e.maxRetryDelayInMs)&&void 0!==n?n:Ee;return{name:"exponentialRetryStrategy",retry({retryCount:t,response:n,responseError:a}){const s=Oe(a),i=s&&e.ignoreSystemErrors,c=Ne(n),l=c&&e.ignoreHttpStatusCodes,d=n&&(Ce(n)||!c);return d||l||i?{skipStrategy:!0}:!a||s||c?u(t,{retryDelayInMs:r,maxRetryDelayInMs:o}):{errorToThrow:a}}}}function Ne(e){return Boolean(e&&void 0!==e.status&&(e.status>=500||408===e.status)&&501!==e.status&&505!==e.status)}function Oe(e){return!!e&&("ETIMEDOUT"===e.code||"ESOCKETTIMEDOUT"===e.code||"ECONNREFUSED"===e.code||"ECONNRESET"===e.code||"ENOENT"===e.code||"ENOTFOUND"===e.code)}const Ie=(0,s.KV)("core-rest-pipeline retryPolicy"),Pe="retryPolicy";function Be(e,t={maxRetries:V}){const n=t.logger||Ie;return{name:Pe,async sendRequest(r,o){var a,s;let i,l,u=-1;e:while(1){u+=1,i=void 0,l=void 0;try{n.info(`Retry ${u}: Attempting to send request`,r.requestId),i=await o(r),n.info(`Retry ${u}: Received a response from request`,r.requestId)}catch(d){if(n.error(`Retry ${u}: Received an error from request`,r.requestId),l=d,!d||"RestError"!==l.name)throw d;i=l.response}if(null===(a=r.abortSignal)||void 0===a?void 0:a.aborted){n.error(`Retry ${u}: Request aborted.`);const e=new c.l;throw e}if(u>=(null!==(s=t.maxRetries)&&void 0!==s?s:V)){if(n.info(`Retry ${u}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),l)throw l;if(i)return i;throw new Error("Maximum retries reached with no response or error to throw")}n.info(`Retry ${u}: Processing ${e.length} retry strategies.`);t:for(const t of e){const e=t.logger||Ie;e.info(`Retry ${u}: Processing retry strategy ${t.name}.`);const n=t.retry({retryCount:u,response:i,responseError:l});if(n.skipStrategy){e.info(`Retry ${u}: Skipped.`);continue t}const{errorToThrow:o,retryAfterInMs:a,redirectTo:s}=n;if(o)throw e.error(`Retry ${u}: Retry strategy ${t.name} throws error:`,o),o;if(a||0===a){e.info(`Retry ${u}: Retry strategy ${t.name} retries after ${a}`),await we(a,void 0,{abortSignal:r.abortSignal});continue e}if(s){e.info(`Retry ${u}: Retry strategy ${t.name} redirects to ${s}`),r.url=s;continue e}}if(l)throw n.info("None of the retry strategies could work with the received error. Throwing it."),l;if(i)return n.info("None of the retry strategies could work with the received response. Returning it."),i}}}}const We="defaultRetryPolicy";function Re(e={}){var t;return{name:We,sendRequest:Be([Te(),$e(e)],{maxRetries:null!==(t=e.maxRetries)&&void 0!==t?t:V}).sendRequest}}function ke(e){return e.toLowerCase()}function*De(e){for(const t of e.values())yield[t.name,t.value]}class Me{constructor(e){if(this._headersMap=new Map,e)for(const t of Object.keys(e))this.set(t,e[t])}set(e,t){this._headersMap.set(ke(e),{name:e,value:String(t).trim()})}get(e){var t;return null===(t=this._headersMap.get(ke(e)))||void 0===t?void 0:t.value}has(e){return this._headersMap.has(ke(e))}delete(e){this._headersMap.delete(ke(e))}toJSON(e={}){const t={};if(e.preserveCase)for(const n of this._headersMap.values())t[n.name]=n.value;else for(const[n,r]of this._headersMap)t[n]=r.value;return t}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return De(this._headersMap)}}function ze(e){return new Me(e)}const qe="formDataPolicy";function je(e){var t;const n={};for(const[r,o]of e.entries())null!==(t=n[r])&&void 0!==t||(n[r]=[]),n[r].push(o);return n}function _e(){return{name:qe,async sendRequest(e,t){if(N&&"undefined"!==typeof FormData&&e.body instanceof FormData&&(e.formData=je(e.body),e.body=void 0),e.formData){const t=e.headers.get("Content-Type");t&&-1!==t.indexOf("application/x-www-form-urlencoded")?e.body=Ue(e.formData):await Fe(e.formData,e),e.formData=void 0}return t(e)}}}function Ue(e){const t=new URLSearchParams;for(const[n,r]of Object.entries(e))if(Array.isArray(r))for(const e of r)t.append(n,e.toString());else t.append(n,r.toString());return t.toString()}async function Fe(e,t){const n=t.headers.get("Content-Type");if(n&&!n.startsWith("multipart/form-data"))return;t.headers.set("Content-Type",null!==n&&void 0!==n?n:"multipart/form-data");const r=[];for(const[o,a]of Object.entries(e))for(const e of Array.isArray(a)?a:[a])if("string"===typeof e)r.push({headers:ze({"Content-Disposition":`form-data; name="${o}"`}),body:p(e,"utf-8")});else{if(void 0===e||null===e||"object"!==typeof e)throw new Error(`Unexpected value for key ${o}: ${e}. Value should be serialized to string first.`);{const t=e.name||"blob",n=ze();n.set("Content-Disposition",`form-data; name="${o}"; filename="${t}"`),n.set("Content-Type",e.type||"application/octet-stream"),r.push({headers:n,body:e})}}t.multipartBody={parts:r}}const Ve="proxyPolicy is not supported in browser environment";function Le(){throw new Error(Ve)}const He="setClientRequestIdPolicy";function Ge(e="x-ms-client-request-id"){return{name:He,async sendRequest(t,n){return t.headers.has(e)||t.headers.set(e,t.requestId),n(t)}}}const Ke="agentPolicy";function Je(e){return{name:Ke,sendRequest:async(t,n)=>(t.agent||(t.agent=e),n(t))}}const Qe="tlsPolicy";function Xe(e){return{name:Qe,sendRequest:async(t,n)=>(t.tlsSettings||(t.tlsSettings=e),n(t))}}var Ze=n(97806);const Ye={},et=new B;class tt extends Error{constructor(e,t={}){super(e),this.name="RestError",this.code=t.code,this.statusCode=t.statusCode,Object.defineProperty(this,"request",{value:t.request,enumerable:!1}),Object.defineProperty(this,"response",{value:t.response,enumerable:!1}),Object.setPrototypeOf(this,tt.prototype)}[Ye](){return`RestError: ${this.message} \n ${et.sanitize(Object.assign(Object.assign({},this),{request:this.request,response:this.response}))}`}}function nt(e){return e instanceof tt||f(e)&&"RestError"===e.name}tt.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",tt.PARSE_ERROR="PARSE_ERROR";const rt="tracingPolicy";function ot(e={}){const t=G(e.userAgentPrefix),n=new B({additionalAllowedQueryParameters:e.additionalAllowedQueryParameters}),r=at();return{name:rt,async sendRequest(e,o){var a;if(!r)return o(e);const s=await t,i={"http.url":n.sanitizeUrl(e.url),"http.method":e.method,"http.user_agent":s,requestId:e.requestId};s&&(i["http.user_agent"]=s);const{span:c,tracingContext:l}=null!==(a=st(r,e,i))&&void 0!==a?a:{};if(!c||!l)return o(e);try{const t=await r.withContext(l,o,e);return ct(c,t),t}catch(u){throw it(c,u),u}}}}function at(){try{return(0,Ze.y)({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:F})}catch(e){return void i.warning(`Error when creating the TracingClient: ${h(e)}`)}}function st(e,t,n){try{const{span:r,updatedOptions:o}=e.startSpan(`HTTP ${t.method}`,{tracingOptions:t.tracingOptions},{spanKind:"client",spanAttributes:n});if(!r.isRecording())return void r.end();const a=e.createRequestHeaders(o.tracingOptions.tracingContext);for(const[e,n]of Object.entries(a))t.headers.set(e,n);return{span:r,tracingContext:o.tracingOptions.tracingContext}}catch(r){return void i.warning(`Skipping creating a tracing span due to an error: ${h(r)}`)}}function it(e,t){try{e.setStatus({status:"error",error:f(t)?t:void 0}),nt(t)&&t.statusCode&&e.setAttribute("http.status_code",t.statusCode),e.end()}catch(n){i.warning(`Skipping tracing span processing due to an error: ${h(n)}`)}}function ct(e,t){try{e.setAttribute("http.status_code",t.status);const n=t.headers.get("x-ms-request-id");n&&e.setAttribute("serviceRequestId",n),t.status>=400&&e.setStatus({status:"error"}),e.end()}catch(n){i.warning(`Skipping tracing span processing due to an error: ${h(n)}`)}}function lt(e){var t;const n=a();return N&&(e.agent&&n.addPolicy(Je(e.agent)),e.tlsOptions&&n.addPolicy(Xe(e.tlsOptions)),n.addPolicy(Le(e.proxyOptions)),n.addPolicy(ye())),n.addPolicy(_e(),{beforePolicies:[de]}),n.addPolicy(Q(e.userAgentOptions)),n.addPolicy(Ge(null===(t=e.telemetryOptions)||void 0===t?void 0:t.clientRequestIdHeaderName)),n.addPolicy(me(),{afterPhase:"Deserialize"}),n.addPolicy(Re(e.retryOptions),{phase:"Retry"}),n.addPolicy(ot(Object.assign(Object.assign({},e.userAgentOptions),e.loggingOptions)),{afterPhase:"Retry"}),N&&n.addPolicy(M(e.redirectOptions),{afterPhase:"Retry"}),n.addPolicy(R(e.loggingOptions),{afterPhase:"Sign"}),n}function ut(e){return("function"===typeof Blob||"object"===typeof Blob)&&e instanceof Blob}class dt{async sendRequest(e){const t=new URL(e.url),n="https:"!==t.protocol;if(n&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);if(e.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");try{return await ft(e)}catch(r){throw mt(r,e)}}}async function ft(e){const{abortController:t,abortControllerCleanup:n}=pt(e);try{const r=yt(e.headers),{streaming:o,body:a}=wt(e),s=Object.assign(Object.assign({body:a,method:e.method,headers:r,signal:t.signal},"credentials"in Request.prototype?{credentials:e.withCredentials?"include":"same-origin"}:{}),"cache"in Request.prototype?{cache:"no-store"}:{});o&&(s.duplex="half");const i=await fetch(e.url,s);return ut(e.body)&&e.onUploadProgress&&e.onUploadProgress({loadedBytes:e.body.size}),ht(i,e,n)}catch(r){throw null===n||void 0===n||n(),r}}async function ht(e,t,n){var r,o;const a=gt(e),s={request:t,headers:a,status:e.status},i=te(e.body)?vt(e.body,{onProgress:t.onDownloadProgress,onEnd:n}):e.body;if((null===(r=t.streamResponseStatusCodes)||void 0===r?void 0:r.has(Number.POSITIVE_INFINITY))||(null===(o=t.streamResponseStatusCodes)||void 0===o?void 0:o.has(s.status)))if(t.enableBrowserStreams)s.browserStreamBody=null!==i&&void 0!==i?i:void 0;else{const e=new Response(i);s.blobBody=e.blob(),null===n||void 0===n||n()}else{const e=new Response(i);s.bodyAsText=await e.text(),null===n||void 0===n||n()}return s}function pt(e){const t=new AbortController;let n,r;if(e.abortSignal){if(e.abortSignal.aborted)throw new c.l("The operation was aborted. Request has already been canceled.");r=e=>{"abort"===e.type&&t.abort()},e.abortSignal.addEventListener("abort",r),n=()=>{var t;r&&(null===(t=e.abortSignal)||void 0===t||t.removeEventListener("abort",r))}}return e.timeout>0&&setTimeout(()=>{t.abort()},e.timeout),{abortController:t,abortControllerCleanup:n}}function mt(e,t){var n;return e&&"AbortError"===(null===e||void 0===e?void 0:e.name)?e:new tt(`Error sending request: ${e.message}`,{code:null!==(n=null===e||void 0===e?void 0:e.code)&&void 0!==n?n:tt.REQUEST_SEND_ERROR,request:t})}function yt(e){const t=new Headers;for(const[n,r]of e)t.append(n,r);return t}function gt(e){const t=ze();for(const[n,r]of e.headers)t.set(n,r);return t}function wt(e){const t="function"===typeof e.body?e.body():e.body;if(ee(t))throw new Error("Node streams are not supported in browser environment.");return te(t)?{streaming:!0,body:vt(t,{onProgress:e.onUploadProgress})}:{streaming:!1,body:t}}function vt(e,t={}){let n=0;const{onProgress:r,onEnd:o}=t;if(bt(e))return e.pipeThrough(new TransformStream({transform(e,t){null!==e?(t.enqueue(e),n+=e.length,r&&r({loadedBytes:n})):t.terminate()},flush(){null===o||void 0===o||o()}}));{const t=e.getReader();return new ReadableStream({async pull(e){var a;const{done:s,value:i}=await t.read();if(s||!i)return null===o||void 0===o||o(),e.close(),void t.releaseLock();n+=null!==(a=null===i||void 0===i?void 0:i.length)&&void 0!==a?a:0,e.enqueue(i),r&&r({loadedBytes:n})},cancel(e){return null===o||void 0===o||o(),t.cancel(e)}})}}function At(){return new dt}function bt(e){return void 0!==e.pipeThrough&&void 0!==self.TransformStream}function xt(){return At()}class Ct{constructor(e){var t,n,r,o,a,s,i;this.url=e.url,this.body=e.body,this.headers=null!==(t=e.headers)&&void 0!==t?t:ze(),this.method=null!==(n=e.method)&&void 0!==n?n:"GET",this.timeout=null!==(r=e.timeout)&&void 0!==r?r:0,this.multipartBody=e.multipartBody,this.formData=e.formData,this.disableKeepAlive=null!==(o=e.disableKeepAlive)&&void 0!==o&&o,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=null!==(a=e.withCredentials)&&void 0!==a&&a,this.abortSignal=e.abortSignal,this.tracingOptions=e.tracingOptions,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||C(),this.allowInsecureConnection=null!==(s=e.allowInsecureConnection)&&void 0!==s&&s,this.enableBrowserStreams=null!==(i=e.enableBrowserStreams)&&void 0!==i&&i,this.agent=e.agent,this.tlsSettings=e.tlsSettings}}function Tt(e){return new Ct(e)}const St={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};async function Et(e,t,n){async function r(){if(!(Date.now()<n)){const t=await e();if(null===t)throw new Error("Failed to refresh access token.");return t}try{return await e()}catch(b){return null}}let o=await r();while(null===o)await we(t),o=await r();return o}function $t(e,t){let n,r=null,o=null;const a=Object.assign(Object.assign({},St),t),s={get isRefreshing(){return null!==r},get shouldRefresh(){var e;return!s.isRefreshing&&(!!((null===o||void 0===o?void 0:o.refreshAfterTimestamp)&&o.refreshAfterTimestamp<Date.now())||(null!==(e=null===o||void 0===o?void 0:o.expiresOnTimestamp)&&void 0!==e?e:0)-a.refreshWindowInMs<Date.now())},get mustRefresh(){return null===o||o.expiresOnTimestamp-a.forcedRefreshWindowInMs<Date.now()}};function i(t,i){var c;if(!s.isRefreshing){const s=()=>e.getToken(t,i);r=Et(s,a.retryIntervalInMs,null!==(c=null===o||void 0===o?void 0:o.expiresOnTimestamp)&&void 0!==c?c:Date.now()).then(e=>(r=null,o=e,n=i.tenantId,o)).catch(e=>{throw r=null,o=null,n=void 0,e})}return r}return async(e,t)=>{const r=Boolean(t.claims),a=n!==t.tenantId;r&&(o=null);const c=a||r||s.mustRefresh;return c?i(e,t):(s.shouldRefresh&&i(e,t),o)}}const Nt="bearerTokenAuthenticationPolicy";async function Ot(e,t){try{return[await t(e),void 0]}catch(n){if(nt(n)&&n.response)return[n.response,n];throw n}}async function It(e){const{scopes:t,getAccessToken:n,request:r}=e,o={abortSignal:r.abortSignal,tracingOptions:r.tracingOptions,enableCae:!0},a=await n(t,o);a&&e.request.headers.set("Authorization",`Bearer ${a.token}`)}function Pt(e){return 401===e.status&&e.headers.has("WWW-Authenticate")}async function Bt(e,t){var n;const{scopes:r}=e,o=await e.getAccessToken(r,{enableCae:!0,claims:t});return!!o&&(e.request.headers.set("Authorization",`${null!==(n=o.tokenType)&&void 0!==n?n:"Bearer"} ${o.token}`),!0)}function Wt(e){var t,n,r;const{credential:o,scopes:a,challengeCallbacks:s}=e,c=e.logger||i,l={authorizeRequest:null!==(n=null===(t=null===s||void 0===s?void 0:s.authorizeRequest)||void 0===t?void 0:t.bind(s))&&void 0!==n?n:It,authorizeRequestOnChallenge:null===(r=null===s||void 0===s?void 0:s.authorizeRequestOnChallenge)||void 0===r?void 0:r.bind(s)},u=o?$t(o):()=>Promise.resolve(null);return{name:Nt,async sendRequest(e,t){if(!e.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");let n,r,o;if(await l.authorizeRequest({scopes:Array.isArray(a)?a:[a],request:e,getAccessToken:u,logger:c}),[n,r]=await Ot(e,t),Pt(n)){let i=kt(n.headers.get("WWW-Authenticate"));if(i){let l;try{l=atob(i)}catch(s){return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${i}`),n}o=await Bt({scopes:Array.isArray(a)?a:[a],response:n,request:e,getAccessToken:u,logger:c},l),o&&([n,r]=await Ot(e,t))}else if(l.authorizeRequestOnChallenge&&(o=await l.authorizeRequestOnChallenge({scopes:Array.isArray(a)?a:[a],request:e,response:n,getAccessToken:u,logger:c}),o&&([n,r]=await Ot(e,t)),Pt(n)&&(i=kt(n.headers.get("WWW-Authenticate")),i))){let l;try{l=atob(i)}catch(s){return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${i}`),n}o=await Bt({scopes:Array.isArray(a)?a:[a],response:n,request:e,getAccessToken:u,logger:c},l),o&&([n,r]=await Ot(e,t))}}if(r)throw r;return n}}}function Rt(e){const t=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,n=/(\w+)="([^"]*)"/g,r=[];let o;while(null!==(o=t.exec(e))){const e=o[1],t=o[2],a={};let s;while(null!==(s=n.exec(t)))a[s[1]]=s[2];r.push({scheme:e,params:a})}return r}function kt(e){var t;if(!e)return;const n=Rt(e);return null===(t=n.find(e=>"Bearer"===e.scheme&&e.params.claims&&"insufficient_claims"===e.params.error))||void 0===t?void 0:t.params.claims}},16341:(e,t,n)=>{"use strict";n.d(t,{AV:()=>y,JS:()=>g,MX:()=>p,j$:()=>f,pL:()=>d,tW:()=>h});var r=n(48287),o=n(88947),a=n(74156),s=n(94297),i=n(68156),c=n(35166),l=n(88882),u=n(55719);function d(e,...t){0===t.length&&(t=[c.W.AccountAddress]);try{(0,l.D4)(e);const n=e.split("_")[0];if(!(0,i.ET)(n,t))throw new u.c1("Encoded string type",t.length>1?`one of ${t.join(", ")}`:t[0],n);return!0}catch(n){return!1}}function f(){const[e]=new BigUint64Array(o.randomBytes(8).buffer);return Number(e%BigInt(Number.MAX_SAFE_INTEGER))}function h(e){return r.Buffer.from((0,a.blake2b)(e,void 0,32))}function p(e,t,n){return o.sign.detached.verify(e,t,(0,l.D4)(n))}const m=r.Buffer.from("aeternity Signed Message:\n","utf8"),y=(0,s.lF)(m.length).buffer;function g(e){const t=r.Buffer.from(e,"utf8");return h((0,i.wh)([y,m,(0,s.lF)(t.length).buffer,t]))}},16381:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(55719),o=n(8204),a=n(82766),s=n(51902);function i(e,t,n,r){return e-+(0,s.S)(t(e),n,r)}const c={...a.A,serialize(e,{tag:t,rebuildTx:n,unpackTx:s,buildTx:c,_computingGasLimit:l},{gasMax:u=6e6}){if(null!=l)return a.A.serialize(l);const d=t===o.vw.GaMetaTx?o.yY:i(u,e=>n({_computingGasLimit:e,_canIncreaseFee:!0}),s,c),f=null!==e&&void 0!==e?e:d;if(f>d)throw new r.qw(`Gas limit ${f} must be less or equal to ${d}`);return a.A.serialize(f)}}},17489:(e,t,n)=>{"use strict";n.d(t,{j:()=>f,v:()=>c});var r=n(78910),o=n(99369),a=n(53624),s=n(35166),i=n(88882);let c=function(e){return e[e["AensWildcard"]=1]="AensWildcard",e[e["AensName"]=2]="AensName",e[e["AensPreclaim"]=3]="AensPreclaim",e[e["Oracle"]=4]="Oracle",e[e["OracleResponse"]=5]="OracleResponse",e}({});const l=(0,r.A)(s.W.OracleAddress),u={serialize(e){return l.serialize((0,i.lF)((0,i.D4)(e),s.W.OracleAddress))},deserialize(e){return(0,i.lF)((0,i.D4)(l.deserialize(e)),s.W.OracleQueryId)}},d=(0,r.A)(s.W.ContractAddress),f=[{tag:(0,a.A)(c.AensWildcard),version:(0,a.A)(1,!0),accountAddress:(0,r.A)(s.W.AccountAddress),contractAddress:d},{tag:(0,a.A)(c.AensName),version:(0,a.A)(1,!0),accountAddress:(0,r.A)(s.W.AccountAddress),nameId:o.A,contractAddress:d},{tag:(0,a.A)(c.AensPreclaim),version:(0,a.A)(1,!0),accountAddress:(0,r.A)(s.W.AccountAddress),contractAddress:d},{tag:(0,a.A)(c.Oracle),version:(0,a.A)(1,!0),accountAddress:(0,r.A)(s.W.AccountAddress),contractAddress:d},{tag:(0,a.A)(c.OracleResponse),version:(0,a.A)(1,!0),queryId:u,contractAddress:d}]},19343:(e,t,n)=>{"use strict";n.r(t),n.d(t,{buildAuthTxHash:()=>g,buildAuthTxHashByGaMetaTx:()=>w,createGeneralizedAccount:()=>y});var r=n(48287),o=n(8204),a=n(91454),s=n(16341),i=n(88882),c=n(35166),l=n(55719),u=n(68156),d=n(8337),f=n(1889),h=n(48189),p=n(24377),m=n(30683);async function y(e,t,{onAccount:n,onCompiler:r,onNode:i,bytecode:c,aci:u,sourceCodePath:p,sourceCode:m,fileSystem:y,...g}){var w;const v=n.address;if("generalized"===(await(0,f.getAccount)(v,{onNode:i})).kind)throw new l.qw(`Account ${v} is already GA`);const A=await d.A.initialize({onAccount:n,onCompiler:r,onNode:i,bytecode:c,aci:u,sourceCodePath:p,sourceCode:m,fileSystem:y}),b=await(0,a.B4)({_isInternalBuild:!0,...g,tag:o.vw.GaAttachTx,onNode:i,code:await A.$compile(),gasLimit:null!==(w=g.gasLimit)&&void 0!==w?w:await A._estimateGas("init",t,g),ownerId:v,callData:A._calldata.encode(A._name,"init",t),authFun:(0,s.tW)(e)}),{hash:x,rawTx:C}=await(0,h.v)(b,{onNode:i,onAccount:n,onCompiler:r,...g}),T=(0,a.xD)(C);return Object.freeze({owner:v,transaction:x,rawTx:C,gaContractId:T})}async function g(e,{fee:t,gasPrice:n,onNode:a}){const{nodeNetworkId:d,consensusProtocolVersion:f}=await a.getNodeInfo();let h=(0,s.tW)((0,u.wh)([r.Buffer.from(d),(0,i.D4)(e)]));if(f===o.sF.Ceres){if(null==t)throw new l.c1("fee","provided (in Ceres)",t);if(null==n)throw new l.c1("gasPrice","provided (in Ceres)",n);h=(0,s.tW)((0,i.D4)((0,p.A)({tag:m.D.GaMetaTxAuthData,fee:t,gasPrice:n,txHash:(0,i.lF)(h,c.W.TxHash)})))}return h}async function w(e,{onNode:t}){const n=(0,a.pj)(e,o.vw.SignedTx);if(n.encodedTx.tag!==o.vw.GaMetaTx)throw new l.c1("transaction","to include GaMetaTx",o.vw[n.encodedTx.tag]);return g((0,a.pr)(n.encodedTx.tx.encodedTx),{fee:n.encodedTx.fee,gasPrice:n.encodedTx.gasPrice,onNode:t})}},20697:(e,t,n)=>{"use strict";n.d(t,{BL:()=>w,C3:()=>m,DM:()=>y,F4:()=>h,Iv:()=>v,jG:()=>g,rl:()=>l,wP:()=>p});var r=n(15630),o=n(54495),a=n(68156),s=n(71232),i=n(55719);const c="_sdk-big-int-",l=(...e)=>{const t=(0,o.rl)(...e),{serialize:n,deserialize:r}=t;return Object.assign(t,{serialize(...[e,t,r,o]){if("BigInt"!==e.type.name||null==t)return n.call(this,e,t,r,o);var a;if("bigint"!==typeof t)throw null!==(a=r)&&void 0!==a||(r=e.serializedName),new Error(`${r} with value ${t} must be of type bigint.`);return t.toString()},deserialize(...[e,t,n,o]){if("BigInt"!==e.type.name||null==t){"string"===typeof t&&t.startsWith(c)&&(console.warn(`AeSdk internal error: BigInt value ${t} handled incorrectly`),t=+t.replace(c,""));const a=r.call(this,e,t,n,o);return a instanceof Date?new Date(+a/1e3):a}if("number"===typeof t&&t>Number.MAX_SAFE_INTEGER)throw new i.Gd(`Number ${t} is not accurate to be converted to BigInt`);return BigInt(t.toString().replace(c,""))}})},u=Number.MAX_SAFE_INTEGER.toString().length,d=new RegExp(String.raw`("\w+":\s*)(\d{${u},})(\s*[,}])`,"m"),f=new RegExp(String.raw`([[,]\s*)(\d{${u},})\b`,"m"),h={name:"parse-big-int",async sendRequest(e,t){const n=await t(e);return null==n.bodyAsText||(n.bodyAsText=n.bodyAsText.replaceAll(new RegExp(d,"g"),e=>{const t=e.match(d);if(null==t)throw new i.rU;const[,n,r,o]=t;return[n,+r>Number.MAX_SAFE_INTEGER?`"${c}${r}"`:r,o].join("")}),n.bodyAsText=n.bodyAsText.replaceAll(new RegExp(f,"g"),e=>{const t=e.match(f);if(null==t)throw new i.rU;const[,n,r]=t;return`${n}"${c}${r}"`})),n}},p=()=>{const e=new Map;return{policy:{name:"request-queues",async sendRequest(t,n){var r;const o=t.headers.get("__queue");t.headers.delete("__queue");const a=async()=>n(t);if(null==o)return a();const s=(null!==(r=e.get(o))&&void 0!==r?r:Promise.resolve()).then(a);return e.set(o,s.catch(()=>{})),s}},position:"perCall"}},m=()=>{const e=new Map;return{policy:{name:"combine-get-requests",async sendRequest(t,n){var r;if("GET"!==t.method)return n(t);const o=JSON.stringify([t.url,t.body]),a=null!==(r=e.get(o))&&void 0!==r?r:n(t);e.set(o,a);try{return await a}finally{e.delete(o)}}},position:"perCall"}},y=()=>{const e=new Map;return{policy:{name:"aggressive-cache-get-responses",async sendRequest(t,n){var r;if("GET"!==t.method)return n(t);const o=JSON.stringify([t.url,t.body]),a=null!==(r=e.get(o))&&void 0!==r?r:n(t);return e.set(o,a),a}},position:"perCall"}},g=e=>({policy:{name:"error-formatter",async sendRequest(t,n){try{return await n(t)}catch(o){if(!(o instanceof r.pj)||null==o.request||o.message.startsWith("Error "))throw o;const t=`${new URL(o.request.url).pathname.slice(1)} error`;if(null==o.response?.bodyAsText)throw""===o.message&&(o.message=`${t}: ${o.code}`),o;const n=o.response.parsedBody;o.message=t;const a=null==n?` ${o.response.status} status code`:e(n);throw""!==a&&(o.message+=`:${a}`),o}}},position:"perCall"}),w=(e,t,n,r)=>({policy:{name:"version-check",async sendRequest(o,a){if(o.headers.has("__version-check"))return o.headers.delete("__version-check"),a(o);const c={requestOptions:{customHeaders:{"__version-check":"true"}}},l=[await t(c),n,r];if(!(0,s.A)(...l))throw new i.K$(e,...l);return a(o)}},position:"perCall"}),v=(e,t)=>({policy:{name:"retry-on-failure",async sendRequest(n,o){var s;const i=null!==(s=n.headers.get("__retry-code"))&&void 0!==s?s:NaN;n.headers.delete("__retry-code");const c=[200,400,403,410,500].filter(e=>e!==+i),l=new Array(e).fill(0).map((t,n)=>((n+1)/e)**2),u=l.reduce((e,t)=>e+t,0),d=l.map(e=>Math.floor(e/u*t));let f=new r.pj("Not expected to be thrown");for(let t=0;t<=e;t+=1){if(0!==t){await(0,a.v7)(d[t-1]);const e=new URL(n.url);e.searchParams.set("__sdk-retry",t.toString()),n.url=e.toString()}try{return await o(n)}catch(p){var h;if(!(p instanceof r.pj))throw p;if(c.includes(null!==(h=p.response?.status)&&void 0!==h?h:0))throw p;f=p}}throw f}},position:"perCall"})},21222:(e,t,n)=>{"use strict";function r(...e){if(e.length>0){const t=String(e[0]);t.includes(":error")?console.error(...e):t.includes(":warning")?console.warn(...e):t.includes(":info")?console.info(...e):(t.includes(":verbose"),console.debug(...e))}}n.d(t,{KV:()=>E});var o=n(65606);const a="undefined"!==typeof o&&o.env&&o.env.DEBUG||void 0;let s,i=[],c=[];const l=[];a&&d(a);const u=Object.assign(e=>p(e),{enable:d,enabled:f,disable:h,log:r});function d(e){s=e,i=[],c=[];const t=/\*/g,n=e.split(",").map(e=>e.trim().replace(t,".*?"));for(const r of n)r.startsWith("-")?c.push(new RegExp(`^${r.substr(1)}$`)):i.push(new RegExp(`^${r}$`));for(const r of l)r.enabled=f(r.namespace)}function f(e){if(e.endsWith("*"))return!0;for(const t of c)if(t.test(e))return!1;for(const t of i)if(t.test(e))return!0;return!1}function h(){const e=s||"";return d(""),e}function p(e){const t=Object.assign(n,{enabled:f(e),destroy:m,log:u.log,namespace:e,extend:y});function n(...n){t.enabled&&(n.length>0&&(n[0]=`${e} ${n[0]}`),t.log(...n))}return l.push(t),t}function m(){const e=l.indexOf(this);return e>=0&&(l.splice(e,1),!0)}function y(e){const t=p(`${this.namespace}:${e}`);return t.log=this.log,t}const g=u;var w=n(65606);const v=new Set,A="undefined"!==typeof w&&w.env&&w.env.AZURE_LOG_LEVEL||void 0;let b;const x=g("azure");x.log=(...e)=>{g.log(...e)};const C=["verbose","info","warning","error"];function T(e){if(e&&!I(e))throw new Error(`Unknown log level '${e}'. Acceptable values: ${C.join(",")}`);b=e;const t=[];for(const n of v)O(n)&&t.push(n.namespace);g.enable(t.join(","))}A&&(I(A)?T(A):console.error(`AZURE_LOG_LEVEL set to unknown log level '${A}'; logging is not enabled. Acceptable values: ${C.join(", ")}.`));const S={verbose:400,info:300,warning:200,error:100};function E(e){const t=x.extend(e);return $(x,t),{error:N(t,"error"),warning:N(t,"warning"),info:N(t,"info"),verbose:N(t,"verbose")}}function $(e,t){t.log=(...t)=>{e.log(...t)}}function N(e,t){const n=Object.assign(e.extend(t),{level:t});if($(e,n),O(n)){const e=g.disable();g.enable(e+","+n.namespace)}return v.add(n),n}function O(e){return Boolean(b&&S[e.level]<=S[b])}function I(e){return C.includes(e)}},24377:(e,t,n)=>{"use strict";n.d(t,{A:()=>se,$:()=>ie});var r=n(35166),o=n(55636),a=n(94465),s=n(78910),i=n(12075),c=n(48287);const l={serialize(e){return c.Buffer.from([e?1:0])},deserialize(e){return 1===e[0]}};var u=n(53234),d=n(15234),f=n(65072),h=n(73106),p=n(94373),m=n(16381),y=n(34743),g=n(30683),w=n(88882);function v(e,t){return{serialize(e,{packEntry:n}){return(0,w.D4)(n({tag:g.D.Mtree,values:Object.entries(e).map(([e,r])=>({tag:g.D.MtreeValue,key:(0,w.D4)(e),value:(0,w.D4)(n({...r,tag:t}))}))}))},deserialize(n,{unpackEntry:o}){const{values:a}=o((0,w.lF)(n,r.W.Bytearray),g.D.Mtree);return Object.fromEntries(a.filter(({key:t})=>e!==r.W.ContractAddress||32===t.length).map(({key:n,value:a})=>[(0,w.lF)(n,e),o((0,w.lF)(a,r.W.Bytearray),t)]))},recursiveType:!0}}var A,b=n(50858),x=n(16341),C=n(55719);function T(e,t){E(e,t),t.add(e)}function S(e,t,n){E(e,t),t.set(e,n)}function E(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $(e,t,n){return e.set(O(e,t),n),n}function N(e,t){return e.get(O(e,t))}function O(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var I=function(e){return e[e["Branch"]=0]="Branch",e[e["Extension"]=1]="Extension",e[e["Leaf"]=2]="Leaf",e}(I||{}),P=new WeakMap,B=new WeakMap,W=new WeakMap,R=new WeakMap,k=new WeakMap,D=new WeakMap,M=new WeakSet;class z{get isComplete(){return N(B,this)}constructor(e,t,n,r){if(T(this,M),S(this,P,void 0),S(this,B,!0),S(this,W,void 0),S(this,R,void 0),S(this,k,void 0),S(this,D,void 0),$(R,this,t),$(k,this,n),$(D,this,r),$(P,this,e[0].toString("hex")),$(W,this,Object.fromEntries(e[1].map(e=>[e[0].toString("hex"),e[1]]))),null!=N(W,this)[N(P,this)])Object.entries(N(W,this)).forEach(([e,t])=>{if(q.call(z,t)!==e)throw new C.nC;const{type:n}=j.call(z,t);switch(n){case I.Branch:t.slice(0,16).filter(e=>e.length).forEach(e=>{null==N(W,this)[e.toString("hex")]&&$(B,this,!1)});break;case I.Extension:if(null==N(W,this)[t[1].toString("hex")])throw new C.aL("Can't find a node by hash in extension node");break;case I.Leaf:break;default:throw new C.Gd(`Unknown MPTree node type: ${n}`)}});else{if(0!==Object.keys(N(W,this)).length)throw new C.aL("Can't find a node by root hash");$(B,this,!1)}}isEqual(e){return N(P,this)===N(P,e)}serialize(){return[c.Buffer.from(N(P,this),"hex"),Object.entries(N(W,this)).map(([e,t])=>[c.Buffer.from(e,"hex"),t])]}get(e){const t=O(M,this,_).call(this,(0,w.D4)(e).toString("hex"));return null==t?t:N(D,this).call(this,(0,w.lF)(t,r.W.Bytearray),N(k,this))}toObject(){return Object.fromEntries(O(M,this,U).call(this).filter(([e])=>N(R,this)!==r.W.ContractAddress||66!==e.length).map(([e,t])=>[(0,w.lF)(c.Buffer.from(e,"hex"),N(R,this)),N(D,this).call(this,(0,w.lF)(t,r.W.Bytearray),N(k,this))]))}}function q(e){return c.Buffer.from((0,x.tW)((0,b.encode)(e))).toString("hex")}function j(e){switch(e.length){case 17:return{type:I.Branch,...0!==e[16].length&&{value:e[16]}};case 2:{const t=e[0][0]>>4;if(t>3)throw new C.o4(t);const n=t<=1?I.Extension:I.Leaf,r=[0,2].includes(t)?2:1;return{type:n,...n===I.Leaf&&{value:e[1]},path:e[0].toString("hex").slice(r)}}default:throw new C.pC(e.length)}}function _(e){let t=N(P,this),n=e;while(1){const e=N(W,this)[t];if(null==e){if(!this.isComplete)return;throw new C.Gd("Can't find node in complete tree")}const{type:r,value:o,path:a}=j.call(A,e);switch(r){case I.Branch:if(0===n.length)return o;t=e[+`0x${n[0]}`].toString("hex"),n=n.substring(1);break;case I.Extension:if(n.substring(0,a?.length)!==a)return;t=e[1].toString("hex"),n=n.substring(a.length);break;case I.Leaf:if(a!==n)return;return o;default:throw new C.Gd(`Unknown MPTree node type: ${r}`)}}}function U(){const e=[],t=(n,r)=>{const o=N(W,this)[n];if(null==o){if(!this.isComplete)return;throw new C.Gd("Can't find node in complete tree")}const{type:a,value:s,path:i}=j.call(A,o);switch(a){case I.Branch:o.slice(0,16).map((e,t)=>[e,t]).filter(([e])=>e.length).forEach(([e,n])=>t(e.toString("hex"),r+n.toString(16))),null!=s&&e.push([r,s]);break;case I.Extension:t(o[1].toString("hex"),r+i);break;case I.Leaf:if(null==s)throw new C.rU;e.push([r+i,s]);break;default:throw new C.Gd(`Unknown MPTree node type: ${a}`)}};return t(N(P,this),""),e}function F(e,t){return{serialize(e){return e.serialize()},deserialize(n,{unpackEntry:r}){return new z(n,e,t,r)}}}A=z;var V=n(84686),L=n(80364),H=n(82766),G=n(53624),K=n(3125),J=n(46581);function Q(e){return{serialize(t,{packEntry:n}){return(0,w.D4)(n({tag:e,payload:t}))},deserialize(t,{unpackEntry:n}){return n((0,w.lF)(t,r.W.Bytearray),e).payload},recursiveType:!0}}const X=(0,i.A)((0,h.A)(g.D.MtreeValue)),Z=v(r.W.ContractAddress,g.D.Contract),Y=v(r.W.AccountAddress,g.D.Account),ee=v(r.W.Bytearray,g.D.ContractCall),te=v(r.W.Channel,g.D.Channel),ne=v(r.W.Name,g.D.Name),re=v(r.W.OracleAddress,g.D.Oracle),oe=[{tag:(0,G.A)(g.D.Account),version:(0,G.A)(1),nonce:H.A,balance:J.A},{tag:(0,G.A)(g.D.Account),version:(0,G.A)(2,!0),flags:J.A,nonce:H.A,balance:J.A,gaContract:(0,s.A)(r.W.ContractAddress,r.W.Name),gaAuthFun:(0,f.A)(r.W.ContractBytearray)},{tag:(0,G.A)(g.D.Name),version:(0,G.A)(1,!0),accountId:(0,s.A)(r.W.AccountAddress),nameTtl:H.A,status:L.A,clientTtl:H.A,pointers:V.A},{tag:(0,G.A)(g.D.Contract),version:(0,G.A)(1,!0),owner:(0,s.A)(r.W.AccountAddress),ctVersion:d.Ay,code:(0,f.A)(r.W.ContractBytearray),log:(0,f.A)(r.W.ContractBytearray),active:l,referers:(0,i.A)((0,s.A)(r.W.AccountAddress)),deposit:u.A},{tag:(0,G.A)(g.D.ContractCall),version:(0,G.A)(2,!0),callerId:(0,s.A)(r.W.AccountAddress),callerNonce:H.A,height:H.A,contractId:(0,s.A)(r.W.ContractAddress),gasPrice:J.A,gasUsed:H.A,returnValue:(0,f.A)(r.W.ContractBytearray),returnType:(0,p.A)(g.d),log:(0,i.A)(L.A)},{tag:(0,G.A)(g.D.Oracle),version:(0,G.A)(1,!0),accountId:(0,s.A)(r.W.AccountAddress),queryFormat:K.A,responseFormat:K.A,queryFee:u.A,oracleTtlValue:H.A,abiVersion:a.A},{tag:(0,G.A)(g.D.Channel),version:(0,G.A)(3,!0),initiator:(0,s.A)(r.W.AccountAddress),responder:(0,s.A)(r.W.AccountAddress),channelAmount:J.A,initiatorAmount:J.A,responderAmount:J.A,channelReserve:J.A,initiatorDelegateIds:(0,i.A)((0,s.A)(...s.o)),responderDelegateIds:(0,i.A)((0,s.A)(...s.o)),stateHash:(0,f.A)(r.W.State),round:H.A,soloRound:J.A,lockPeriod:J.A,lockedUntil:J.A,initiatorAuth:(0,f.A)(r.W.ContractBytearray),responderAuth:(0,f.A)(r.W.ContractBytearray)},{tag:(0,G.A)(g.D.ChannelOffChainUpdateTransfer),version:(0,G.A)(1,!0),from:(0,s.A)(r.W.AccountAddress),to:(0,s.A)(r.W.AccountAddress),amount:J.A},{tag:(0,G.A)(g.D.ChannelOffChainUpdateDeposit),version:(0,G.A)(1,!0),from:(0,s.A)(r.W.AccountAddress),amount:J.A},{tag:(0,G.A)(g.D.ChannelOffChainUpdateWithdraw),version:(0,G.A)(1,!0),from:(0,s.A)(r.W.AccountAddress),amount:J.A},{tag:(0,G.A)(g.D.ChannelOffChainUpdateCreateContract),version:(0,G.A)(1,!0),owner:(0,s.A)(r.W.AccountAddress),ctVersion:d.Ay,code:(0,f.A)(r.W.ContractBytearray),deposit:J.A,callData:(0,f.A)(r.W.ContractBytearray)},{tag:(0,G.A)(g.D.ChannelOffChainUpdateCallContract),version:(0,G.A)(1,!0),caller:(0,s.A)(r.W.AccountAddress),contract:(0,s.A)(r.W.ContractAddress),abiVersion:a.A,amount:J.A,callData:(0,f.A)(r.W.ContractBytearray),callStack:L.A,gasPrice:y.A,gasLimit:m.A},{tag:(0,G.A)(g.D.TreesPoi),version:(0,G.A)(1,!0),accounts:(0,i.A)(F(r.W.AccountAddress,g.D.Account)),calls:(0,i.A)(F(r.W.Bytearray,g.D.ContractCall)),channels:(0,i.A)(F(r.W.Channel,g.D.Channel)),contracts:(0,i.A)(F(r.W.ContractAddress,g.D.Contract)),ns:(0,i.A)(F(r.W.Name,g.D.Name)),oracles:(0,i.A)(F(r.W.OracleAddress,g.D.Oracle))},{tag:(0,G.A)(g.D.StateTrees),version:(0,G.A)(0,!0),contracts:Q(g.D.ContractsMtree),calls:Q(g.D.CallsMtree),channels:Q(g.D.ChannelsMtree),ns:Q(g.D.NameserviceMtree),oracles:Q(g.D.OraclesMtree),accounts:Q(g.D.AccountsMtree)},{tag:(0,G.A)(g.D.Mtree),version:(0,G.A)(1,!0),values:X},{tag:(0,G.A)(g.D.MtreeValue),version:(0,G.A)(1,!0),key:L.A,value:L.A},{tag:(0,G.A)(g.D.ContractsMtree),version:(0,G.A)(1,!0),payload:Z},{tag:(0,G.A)(g.D.CallsMtree),version:(0,G.A)(1,!0),payload:ee},{tag:(0,G.A)(g.D.ChannelsMtree),version:(0,G.A)(1,!0),payload:te},{tag:(0,G.A)(g.D.NameserviceMtree),version:(0,G.A)(1,!0),payload:ne},{tag:(0,G.A)(g.D.OraclesMtree),version:(0,G.A)(1,!0),payload:re},{tag:(0,G.A)(g.D.AccountsMtree),version:(0,G.A)(1,!0),payload:Y},{tag:(0,G.A)(g.D.GaMetaTxAuthData),version:(0,G.A)(1,!0),fee:u.A,gasPrice:y.A,txHash:(0,f.A)(r.W.TxHash)}],ae=[[g.D.CallsMtree,r.W.CallStateTree],[g.D.StateTrees,r.W.StateTrees],[g.D.TreesPoi,r.W.Poi]];function se(e){var t;const n=null!==(t=ae.find(([t])=>t===e.tag)?.[1])&&void 0!==t?t:r.W.Bytearray;return(0,o.RM)(oe,g.D,e,{packEntry:se},n)}function ie(e,t){var n;return null!==(n=t)&&void 0!==n||(t=ae.find(([,t])=>e.startsWith(t))?.[0]),(0,o.Qc)(oe,g.D,e,t,{unpackEntry:ie})}},25988:(e,t,n)=>{"use strict";n.d(t,{Zh:()=>d});var r=n(51845),o=n(56028),a=n(82341),s=n(88882),i=n(16341),c=n(68156);function l(e){var t;return(0,i.tW)(null!==(t=a(e))&&void 0!==t?t:"")}function u(e){const t={record:[{name:"name",type:{option:["string"]}},{name:"version",type:{option:["int"]}},{name:"networkId",type:{option:["string"]}},{name:"contractAddress",type:{option:["contract_pubkey"]}}]},n=(new r.A).resolveType(t,{}),a=(new o.A).encodeWithType(e,n);return(0,i.tW)((0,s.D4)(a))}function d(e,t,n){return(0,i.tW)((0,c.wh)([i.AV,new Uint8Array([0]),u(n),l(t),(0,i.tW)((0,s.D4)(e))]))}},30683:(e,t,n)=>{"use strict";n.d(t,{D:()=>o,d:()=>r});let r=function(e){return e[e["Ok"]=0]="Ok",e[e["Error"]=1]="Error",e[e["Revert"]=2]="Revert",e}({}),o=function(e){return e[e["Account"]=10]="Account",e[e["Oracle"]=20]="Oracle",e[e["Name"]=30]="Name",e[e["Contract"]=40]="Contract",e[e["ContractCall"]=41]="ContractCall",e[e["ChannelOffChainUpdateTransfer"]=570]="ChannelOffChainUpdateTransfer",e[e["ChannelOffChainUpdateDeposit"]=571]="ChannelOffChainUpdateDeposit",e[e["ChannelOffChainUpdateWithdraw"]=572]="ChannelOffChainUpdateWithdraw",e[e["ChannelOffChainUpdateCreateContract"]=573]="ChannelOffChainUpdateCreateContract",e[e["ChannelOffChainUpdateCallContract"]=574]="ChannelOffChainUpdateCallContract",e[e["Channel"]=58]="Channel",e[e["TreesPoi"]=60]="TreesPoi",e[e["StateTrees"]=62]="StateTrees",e[e["Mtree"]=63]="Mtree",e[e["MtreeValue"]=64]="MtreeValue",e[e["ContractsMtree"]=621]="ContractsMtree",e[e["CallsMtree"]=622]="CallsMtree",e[e["ChannelsMtree"]=623]="ChannelsMtree",e[e["NameserviceMtree"]=624]="NameserviceMtree",e[e["OraclesMtree"]=625]="OraclesMtree",e[e["AccountsMtree"]=626]="AccountsMtree",e[e["GaMetaTxAuthData"]=810]="GaMetaTxAuthData",e}({})},30709:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(21013),o=n(60346),a=n(68156);const s=r({storeAsString:!0}),i=e=>{if("object"===typeof e&&null!==e&&e.constructor===Object)return(0,a.s8)(e,([e,t])=>[e,i(t)]);if(Array.isArray(e))return e.map(e=>i(e));if("string"===typeof e&&new o.g(e).toString(10)===e){const t=new o.g(e);return t.toJSON=()=>t.toString(10),t}return e},c={stringify:(...e)=>s.stringify(i(e[0]),...e.slice(1)),parse:s.parse}},34496:(e,t,n)=>{"use strict";n.d(t,{l:()=>a});var r=n(55636),o=n(17489);function a(e,t){return(0,r.Qc)(o.j,o.v,e,t,{})}},34743:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,x:()=>l});var r=n(60346),o=n(53234),a=n(55719),s=n(8204),i=n(97170);const c=new WeakMap;async function l(e){const t=c.get(e);if(null!=t&&t.time>Date.now()-2e4)return t.gasPrice;const{minGasPrice:n,utilization:o}=(await e.getRecentGasPrices())[0];let a=o<70?0n:BigInt(new r.g(n.toString()).times(1.01).integerValue().toFixed());const i=100000n*BigInt(s.d$);return a>i&&(console.warn(`Estimated gas price ${a} exceeds the maximum safe value for unknown reason. It will be limited to ${i}. To overcome this restriction provide \`gasPrice\`/\`fee\` in options.`),a=i),c.set(e,{gasPrice:a,time:Date.now()}),a}const u={...o.A,async prepare(e,t,{onNode:n,denomination:r}){if(null!=e)return e;if(null==n)throw new a.c1("onNode","provided (or provide `gasPrice` instead)",n);const o=await l(n);return 0n!==o?(0,i.ej)(o,{targetDenomination:r}):void 0},serializeAettos(e=s.d$.toString()){if(+e<s.d$)throw new a.qw(`Gas price ${e.toString()} must be bigger than ${s.d$}`);return e}}},35166:(e,t,n)=>{"use strict";n.d(t,{W:()=>r});let r=function(e){return e["KeyBlockHash"]="kh",e["MicroBlockHash"]="mh",e["BlockPofHash"]="bf",e["BlockTxHash"]="bx",e["BlockStateHash"]="bs",e["Channel"]="ch",e["ContractAddress"]="ct",e["ContractBytearray"]="cb",e["ContractStoreKey"]="ck",e["ContractStoreValue"]="cv",e["Transaction"]="tx",e["TxHash"]="th",e["OracleAddress"]="ok",e["OracleQuery"]="ov",e["OracleQueryId"]="oq",e["OracleResponse"]="or",e["AccountAddress"]="ak",e["AccountSecretKey"]="sk",e["Signature"]="sg",e["Commitment"]="cm",e["PeerPubkey"]="pp",e["Name"]="nm",e["State"]="st",e["Poi"]="pi",e["StateTrees"]="ss",e["CallStateTree"]="cs",e["Bytearray"]="ba",e}({})},41284:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(91454),o=n(8204),a=n(55719);function s(e){const t=(0,r.pj)(e);switch(t.tag){case o.vw.SignedTx:return s((0,r.pr)(t.encodedTx));case o.vw.GaMetaTx:return t.gaId;default:}const n=(0,r._w)(t.tag,t.version).find(([e])=>"nonce"===e)?.[1];if(null==n)throw new a.Jn(`Transaction doesn't have nonce: ${o.vw[t.tag]}`);if(!("senderKey"in n))throw new a.rU;const i=t[n.senderKey];return i.replace(/^ok_/,"ak_")}},46581:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(64224),o=n(55719),a=n(84825);const s={serialize(e){if(Number(e)<0)throw new o.c1("value","greater or equal to 0",e);return(0,a.Z)(e,!0)},deserialize(e){return(0,r.Uk)(e)}}},48162:(e,t,n)=>{var r=n(61594),o=e.exports;(function(){"use strict";var e,t,n,a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function i(e){return a.lastIndex=0,a.test(e)?'"'+e.replace(a,function(e){var t=s[e];return"string"===typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function c(o,a){var s,l,u,d,f,h=e,p=a[o],m=null!=p&&(p instanceof r||r.isBigNumber(p));switch(p&&"object"===typeof p&&"function"===typeof p.toJSON&&(p=p.toJSON(o)),"function"===typeof n&&(p=n.call(a,o,p)),typeof p){case"string":return m?p:i(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(e+=t,f=[],"[object Array]"===Object.prototype.toString.apply(p)){for(d=p.length,s=0;s<d;s+=1)f[s]=c(s,p)||"null";return u=0===f.length?"[]":e?"[\n"+e+f.join(",\n"+e)+"\n"+h+"]":"["+f.join(",")+"]",e=h,u}if(n&&"object"===typeof n)for(d=n.length,s=0;s<d;s+=1)"string"===typeof n[s]&&(l=n[s],u=c(l,p),u&&f.push(i(l)+(e?": ":":")+u));else Object.keys(p).forEach(function(t){var n=c(t,p);n&&f.push(i(t)+(e?": ":":")+n)});return u=0===f.length?"{}":e?"{\n"+e+f.join(",\n"+e)+"\n"+h+"}":"{"+f.join(",")+"}",e=h,u}}"function"!==typeof o.stringify&&(o.stringify=function(r,o,a){var s;if(e="",t="","number"===typeof a)for(s=0;s<a;s+=1)t+=" ";else"string"===typeof a&&(t=a);if(n=o,o&&"function"!==typeof o&&("object"!==typeof o||"number"!==typeof o.length))throw new Error("JSON.stringify");return c("",{"":r})})})()},48189:(e,t,n)=>{"use strict";n.d(t,{E:()=>c,v:()=>l});var r=n(68951),o=n(68156),a=n(55719),s=n(91454),i=n(1889);class c extends a.Jn{constructor(e,t,n){super(e),this.name="InvalidTxError",this.validation=t,this.transaction=n}}async function l(e,{onNode:t,onAccount:n,verify:a=!0,waitMined:l=!0,confirm:u,innerTx:d,...f}){const h=await n.signTransaction(e,{...f,onNode:t,innerTx:d,networkId:await t.getNetworkId()});if(!0===d)return{hash:(0,s.BN)(h),rawTx:h};if(a){const e=await(0,r.A)(h,t);if(e.length>0){const t=`Transaction verification errors: ${e.map(e=>e.message).join(", ")}`;throw new c(t,e,h)}}try{let e;try{e=null!=n?`tx-${n.address}`:null}catch(p){e=null}const{txHash:r}=await t.postTransaction({tx:h},{requestOptions:{customHeaders:{"__retry-code":"400",...null!=e?{__queue:e}:{}}}});if(l){const e=await(0,i.poll)(r,{onNode:t,...f}),n={...e,hash:e.hash,rawTx:h};if(null!=u&&+u>0){const e="boolean"===typeof u?void 0:u;return{...n,confirmationHeight:await(0,i.waitForTxConfirm)(r,{onNode:t,confirm:e,...f})}}return n}return{hash:r,rawTx:h}}catch(p){throw(0,o.$)(p),Object.assign(p,{rawTx:h,verifyTx:async()=>(0,r.A)(h,t)})}}},51902:(e,t,n)=>{"use strict";n.d(t,{A:()=>A,S:()=>g});var r=n(60346),o=n(55719),a=n(8204),s=n(46581),i=n(53234),c=n(34743),l=n(68156),u=n(88882);const d=15e3,f=20,h=3,p=e=>{var t;const n={[a.vw.ChannelForceProgressTx]:30,[a.vw.ChannelOffChainTx]:0,[a.vw.ContractCreateTx]:5,[a.vw.ContractCallTx]:12,[a.vw.GaAttachTx]:5,[a.vw.GaMetaTx]:5,[a.vw.PayingForTx]:.2},r=null!==(t=n[e])&&void 0!==t?t:1;return r*d},m=(e,t,{relativeTtl:n,innerTxSize:r})=>{switch(e){case a.vw.OracleRegisterTx:case a.vw.OracleExtendTx:case a.vw.OracleQueryTx:case a.vw.OracleResponseTx:return t*f+Math.ceil(32e3*n/Math.floor(525600/h));case a.vw.GaMetaTx:case a.vw.PayingForTx:return(t-r)*f;default:return t*f}};function y(e){const t={[a.vw.OracleRegisterTx]:"oracleTtlValue",[a.vw.OracleExtendTx]:"oracleTtlValue",[a.vw.OracleQueryTx]:"queryTtlValue",[a.vw.OracleResponseTx]:"responseTtlValue"},{tag:n}=e;return(0,l.Uu)(n,t)?e[t[n]]:1}function g(e,t,n){const{length:r}=(0,u.D4)(e),o=t(e);let s=0;return o.tag!==a.vw.GaMetaTx&&o.tag!==a.vw.PayingForTx||(s=(0,u.D4)(n(o.tx.encodedTx)).length),p(o.tag)+m(o.tag,r,{relativeTtl:y(o),innerTxSize:s})}function w(e,t,n){let o,s=new r.g(0);do{o=s,s=new r.g(a.d$).times(g(e(s),t,n))}while(!s.eq(o));return s}const v="_gas-price:",A={...i.A,async prepare(e,t,{onNode:n}){if(null!=e)return e;if(null==n)throw new o.c1("onNode","provided (or provide `fee` instead)",n);const r=await(0,c.x)(n);return 0n!==r?v+r:void 0},serializeAettos(e,{rebuildTx:t,unpackTx:n,buildTx:s,_computingMinFee:i},{_canIncreaseFee:c}){if(null!=i)return i.toFixed();const l=w(e=>t({_computingMinFee:e}),n,s),u=!0===e?.startsWith(v)?l.dividedBy(a.d$).times(e.replace(v,"")):new r.g(null!==e&&void 0!==e?e:l);if(l.gt(u)){if(!0===c)return l.toFixed();throw new o.qw(`Fee ${u.toString()} must be bigger than ${l}`)}return u.toFixed()},serialize(e,t,n){return"string"===typeof e&&e.startsWith(v)?s.A.serialize(this.serializeAettos(e,t,n)):i.A.serialize.call(this,e,t,n)}}},53234:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(46581),o=n(97170);const a={...r.A,serializeAettos(e,t,n){return null!==e&&void 0!==e?e:"0"},serialize(e,t,{denomination:n=o.j8.AETTOS,...a}){return r.A.serialize(this.serializeAettos(null!=e?(0,o.ej)(e,{denomination:n}):e,t,a))}}},53624:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(55719),o=n(82766);function a(e,t){return{serialize(n){if((!0!==t||null!=n)&&n!==e)throw new r.c1("ShortUIntConst",e,n);return o.A.serialize(e)},deserialize(t){const n=o.A.deserialize(t);if(n!==e)throw new r.c1("ShortUIntConst",e,n);return e},constValue:e,constValueOptional:!0===t}}},54495:(e,t,n)=>{"use strict";function r(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t)}function o(e){const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}n.d(t,{Nl:()=>Ne,rl:()=>m});const a="$",s="_";function i(e,t){return"Composite"!==t&&"Dictionary"!==t&&("string"===typeof e||"number"===typeof e||"boolean"===typeof e||null!==(null===t||void 0===t?void 0:t.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i))||void 0===e||null===e)}const c=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function l(e){return c.test(e)}const u=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function d(e){return u.test(e)}function f(e){const t=Object.assign(Object.assign({},e.headers),e.body);return e.hasNullableType&&0===Object.getOwnPropertyNames(t).length?e.shouldWrapBody?{body:null}:null:e.shouldWrapBody?Object.assign(Object.assign({},e.headers),{body:e.body}):t}function h(e,t){var n,r;const o=e.parsedHeaders;if("HEAD"===e.request.method)return Object.assign(Object.assign({},o),{body:e.parsedBody});const a=t&&t.bodyMapper,s=Boolean(null===a||void 0===a?void 0:a.nullable),c=null===a||void 0===a?void 0:a.type.name;if("Stream"===c)return Object.assign(Object.assign({},o),{blobBody:e.blobBody,readableStreamBody:e.readableStreamBody});const l="Composite"===c&&a.type.modelProperties||{},u=Object.keys(l).some(e=>""===l[e].serializedName);if("Sequence"===c||u){const t=null!==(n=e.parsedBody)&&void 0!==n?n:[];for(const n of Object.keys(l))l[n].serializedName&&(t[n]=null===(r=e.parsedBody)||void 0===r?void 0:r[n]);if(o)for(const e of Object.keys(o))t[e]=o[e];return!s||e.parsedBody||o||0!==Object.getOwnPropertyNames(l).length?t:null}return f({body:e.parsedBody,headers:o,hasNullableType:s,shouldWrapBody:i(e.parsedBody,c)})}class p{constructor(e={},t=!1){this.modelMappers=e,this.isXML=t}validateConstraints(e,t,n){const r=(e,r)=>{throw new Error(`"${n}" with value "${t}" should satisfy the constraint "${e}": ${r}.`)};if(e.constraints&&void 0!==t&&null!==t){const{ExclusiveMaximum:n,ExclusiveMinimum:o,InclusiveMaximum:a,InclusiveMinimum:s,MaxItems:i,MaxLength:c,MinItems:l,MinLength:u,MultipleOf:d,Pattern:f,UniqueItems:h}=e.constraints;if(void 0!==n&&t>=n&&r("ExclusiveMaximum",n),void 0!==o&&t<=o&&r("ExclusiveMinimum",o),void 0!==a&&t>a&&r("InclusiveMaximum",a),void 0!==s&&t<s&&r("InclusiveMinimum",s),void 0!==i&&t.length>i&&r("MaxItems",i),void 0!==c&&t.length>c&&r("MaxLength",c),void 0!==l&&t.length<l&&r("MinItems",l),void 0!==u&&t.length<u&&r("MinLength",u),void 0!==d&&t%d!==0&&r("MultipleOf",d),f){const e="string"===typeof f?new RegExp(f):f;"string"===typeof t&&null!==t.match(e)||r("Pattern",f)}h&&t.some((e,t,n)=>n.indexOf(e)!==t)&&r("UniqueItems",h)}}serialize(e,t,n,r={xml:{}}){var o,a,i;const c={xml:{rootName:null!==(o=r.xml.rootName)&&void 0!==o?o:"",includeRoot:null!==(a=r.xml.includeRoot)&&void 0!==a&&a,xmlCharKey:null!==(i=r.xml.xmlCharKey)&&void 0!==i?i:s}};let l={};const u=e.type.name;n||(n=e.serializedName),null!==u.match(/^Sequence$/i)&&(l=[]),e.isConstant&&(t=e.defaultValue);const{required:d,nullable:f}=e;if(d&&f&&void 0===t)throw new Error(`${n} cannot be undefined.`);if(d&&!f&&(void 0===t||null===t))throw new Error(`${n} cannot be null or undefined.`);if(!d&&!1===f&&null===t)throw new Error(`${n} cannot be null.`);if(void 0===t||null===t)l=t;else if(null!==u.match(/^any$/i))l=t;else if(null!==u.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i))l=x(u,n,t);else if(null!==u.match(/^Enum$/i)){const r=e;l=C(n,r.type.allowedValues,t)}else null!==u.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)?l=E(u,t,n):null!==u.match(/^ByteArray$/i)?l=T(n,t):null!==u.match(/^Base64Url$/i)?l=S(n,t):null!==u.match(/^Sequence$/i)?l=$(this,e,t,n,Boolean(this.isXML),c):null!==u.match(/^Dictionary$/i)?l=N(this,e,t,n,Boolean(this.isXML),c):null!==u.match(/^Composite$/i)&&(l=B(this,e,t,n,Boolean(this.isXML),c));return l}deserialize(e,t,n,r={xml:{}}){var i,c,l,u;const d={xml:{rootName:null!==(i=r.xml.rootName)&&void 0!==i?i:"",includeRoot:null!==(c=r.xml.includeRoot)&&void 0!==c&&c,xmlCharKey:null!==(l=r.xml.xmlCharKey)&&void 0!==l?l:s},ignoreUnknownProperties:null!==(u=r.ignoreUnknownProperties)&&void 0!==u&&u};if(void 0===t||null===t)return this.isXML&&"Sequence"===e.type.name&&!e.xmlIsWrapped&&(t=[]),void 0!==e.defaultValue&&(t=e.defaultValue),t;let f;const h=e.type.name;if(n||(n=e.serializedName),null!==h.match(/^Composite$/i))f=k(this,e,t,n,d);else{if(this.isXML){const e=d.xml.xmlCharKey;void 0!==t[a]&&void 0!==t[e]&&(t=t[e])}null!==h.match(/^Number$/i)?(f=parseFloat(t),isNaN(f)&&(f=t)):null!==h.match(/^Boolean$/i)?f="true"===t||"false"!==t&&t:null!==h.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)?f=t:null!==h.match(/^(Date|DateTime|DateTimeRfc1123)$/i)?f=new Date(t):null!==h.match(/^UnixTime$/i)?f=b(t):null!==h.match(/^ByteArray$/i)?f=o(t):null!==h.match(/^Base64Url$/i)?f=w(t):null!==h.match(/^Sequence$/i)?f=M(this,e,t,n,d):null!==h.match(/^Dictionary$/i)&&(f=D(this,e,t,n,d))}return e.isConstant&&(f=e.defaultValue),f}}function m(e={},t=!1){return new p(e,t)}function y(e,t){let n=e.length;while(n-1>=0&&e[n-1]===t)--n;return e.substr(0,n)}function g(e){if(!e)return;if(!(e instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");const t=r(e);return y(t,"=").replace(/\+/g,"-").replace(/\//g,"_")}function w(e){if(e){if(e&&"string"!==typeof e.valueOf())throw new Error("Please provide an input of type string for converting to Uint8Array");return e=e.replace(/-/g,"+").replace(/_/g,"/"),o(e)}}function v(e){const t=[];let n="";if(e){const r=e.split(".");for(const e of r)"\\"===e.charAt(e.length-1)?n+=e.substr(0,e.length-1)+".":(n+=e,t.push(n),n="")}return t}function A(e){if(e)return"string"===typeof e.valueOf()&&(e=new Date(e)),Math.floor(e.getTime()/1e3)}function b(e){if(e)return new Date(1e3*e)}function x(e,t,n){if(null!==n&&void 0!==n)if(null!==e.match(/^Number$/i)){if("number"!==typeof n)throw new Error(`${t} with value ${n} must be of type number.`)}else if(null!==e.match(/^String$/i)){if("string"!==typeof n.valueOf())throw new Error(`${t} with value "${n}" must be of type string.`)}else if(null!==e.match(/^Uuid$/i)){if("string"!==typeof n.valueOf()||!d(n))throw new Error(`${t} with value "${n}" must be of type string and a valid uuid.`)}else if(null!==e.match(/^Boolean$/i)){if("boolean"!==typeof n)throw new Error(`${t} with value ${n} must be of type boolean.`)}else if(null!==e.match(/^Stream$/i)){const e=typeof n;if("string"!==e&&"function"!==typeof n.pipe&&"function"!==typeof n.tee&&!(n instanceof ArrayBuffer)&&!ArrayBuffer.isView(n)&&("function"!==typeof Blob&&"object"!==typeof Blob||!(n instanceof Blob))&&"function"!==e)throw new Error(`${t} must be a string, Blob, ArrayBuffer, ArrayBufferView, ReadableStream, or () => ReadableStream.`)}return n}function C(e,t,n){if(!t)throw new Error(`Please provide a set of allowedValues to validate ${e} as an Enum Type.`);const r=t.some(e=>"string"===typeof e.valueOf()?e.toLowerCase()===n.toLowerCase():e===n);if(!r)throw new Error(`${n} is not a valid value for ${e}. The valid values are: ${JSON.stringify(t)}.`);return n}function T(e,t){if(void 0!==t&&null!==t){if(!(t instanceof Uint8Array))throw new Error(`${e} must be of type Uint8Array.`);t=r(t)}return t}function S(e,t){if(void 0!==t&&null!==t){if(!(t instanceof Uint8Array))throw new Error(`${e} must be of type Uint8Array.`);t=g(t)}return t}function E(e,t,n){if(void 0!==t&&null!==t)if(null!==e.match(/^Date$/i)){if(!(t instanceof Date||"string"===typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${n} must be an instanceof Date or a string in ISO8601 format.`);t=t instanceof Date?t.toISOString().substring(0,10):new Date(t).toISOString().substring(0,10)}else if(null!==e.match(/^DateTime$/i)){if(!(t instanceof Date||"string"===typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${n} must be an instanceof Date or a string in ISO8601 format.`);t=t instanceof Date?t.toISOString():new Date(t).toISOString()}else if(null!==e.match(/^DateTimeRfc1123$/i)){if(!(t instanceof Date||"string"===typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${n} must be an instanceof Date or a string in RFC-1123 format.`);t=t instanceof Date?t.toUTCString():new Date(t).toUTCString()}else if(null!==e.match(/^UnixTime$/i)){if(!(t instanceof Date||"string"===typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${n} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);t=A(t)}else if(null!==e.match(/^TimeSpan$/i)&&!l(t))throw new Error(`${n} must be a string in ISO 8601 format. Instead was "${t}".`);return t}function $(e,t,n,r,o,s){var i;if(!Array.isArray(n))throw new Error(`${r} must be of type Array.`);let c=t.type.element;if(!c||"object"!==typeof c)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${r}.`);"Composite"===c.type.name&&c.type.className&&(c=null!==(i=e.modelMappers[c.type.className])&&void 0!==i?i:c);const l=[];for(let u=0;u<n.length;u++){const t=e.serialize(c,n[u],r,s);if(o&&c.xmlNamespace){const e=c.xmlNamespacePrefix?`xmlns:${c.xmlNamespacePrefix}`:"xmlns";"Composite"===c.type.name?(l[u]=Object.assign({},t),l[u][a]={[e]:c.xmlNamespace}):(l[u]={},l[u][s.xml.xmlCharKey]=t,l[u][a]={[e]:c.xmlNamespace})}else l[u]=t}return l}function N(e,t,n,r,o,s){if("object"!==typeof n)throw new Error(`${r} must be of type object.`);const i=t.type.value;if(!i||"object"!==typeof i)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${r}.`);const c={};for(const a of Object.keys(n)){const t=e.serialize(i,n[a],r,s);c[a]=W(i,t,o,s)}if(o&&t.xmlNamespace){const e=t.xmlNamespacePrefix?`xmlns:${t.xmlNamespacePrefix}`:"xmlns",n=c;return n[a]={[e]:t.xmlNamespace},n}return c}function O(e,t,n){const r=t.type.additionalProperties;if(!r&&t.type.className){const r=I(e,t,n);return null===r||void 0===r?void 0:r.type.additionalProperties}return r}function I(e,t,n){const r=t.type.className;if(!r)throw new Error(`Class name for model "${n}" is not provided in the mapper "${JSON.stringify(t,void 0,2)}".`);return e.modelMappers[r]}function P(e,t,n){let r=t.type.modelProperties;if(!r){const o=I(e,t,n);if(!o)throw new Error(`mapper() cannot be null or undefined for model "${t.type.className}".`);if(r=null===o||void 0===o?void 0:o.type.modelProperties,!r)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(o)}" of type "${t.type.className}" for object "${n}".`)}return r}function B(e,t,n,r,o,s){if(j(e,t)&&(t=q(e,t,n,"clientName")),void 0!==n&&null!==n){const i={},c=P(e,t,r);for(const u of Object.keys(c)){const l=c[u];if(l.readOnly)continue;let d,f=i;if(e.isXML)d=l.xmlIsWrapped?l.xmlName:l.xmlElementName||l.xmlName;else{const e=v(l.serializedName);d=e.pop();for(const t of e){const e=f[t];void 0!==e&&null!==e||(void 0===n[u]||null===n[u])&&void 0===l.defaultValue||(f[t]={}),f=f[t]}}if(void 0!==f&&null!==f){if(o&&t.xmlNamespace){const e=t.xmlNamespacePrefix?`xmlns:${t.xmlNamespacePrefix}`:"xmlns";f[a]=Object.assign(Object.assign({},f[a]),{[e]:t.xmlNamespace})}const i=""!==l.serializedName?r+"."+l.serializedName:r;let c=n[u];const h=j(e,t);!h||h.clientName!==u||void 0!==c&&null!==c||(c=t.serializedName);const p=e.serialize(l,c,i,s);if(void 0!==p&&void 0!==d&&null!==d){const e=W(l,p,o,s);o&&l.xmlIsAttribute?(f[a]=f[a]||{},f[a][d]=p):o&&l.xmlIsWrapped?f[d]={[l.xmlElementName]:e}:f[d]=e}}}const l=O(e,t,r);if(l){const t=Object.keys(c);for(const o in n){const a=t.every(e=>e!==o);a&&(i[o]=e.serialize(l,n[o],r+'["'+o+'"]',s))}}return i}return n}function W(e,t,n,r){if(!n||!e.xmlNamespace)return t;const o=e.xmlNamespacePrefix?`xmlns:${e.xmlNamespacePrefix}`:"xmlns",s={[o]:e.xmlNamespace};if(["Composite"].includes(e.type.name)){if(t[a])return t;{const e=Object.assign({},t);return e[a]=s,e}}const i={};return i[r.xml.xmlCharKey]=t,i[a]=s,i}function R(e,t){return[a,t.xml.xmlCharKey].includes(e)}function k(e,t,n,r,o){var i,c;const l=null!==(i=o.xml.xmlCharKey)&&void 0!==i?i:s;j(e,t)&&(t=q(e,t,n,"serializedName"));const u=P(e,t,r);let d={};const f=[];for(const s of Object.keys(u)){const i=u[s],h=v(u[s].serializedName);f.push(h[0]);const{serializedName:p,xmlName:m,xmlElementName:y}=i;let g=r;""!==p&&void 0!==p&&(g=r+"."+p);const w=i.headerCollectionPrefix;if(w){const t={};for(const r of Object.keys(n))r.startsWith(w)&&(t[r.substring(w.length)]=e.deserialize(i.type.value,n[r],g,o)),f.push(r);d[s]=t}else if(e.isXML)if(i.xmlIsAttribute&&n[a])d[s]=e.deserialize(i,n[a][m],g,o);else if(i.xmlIsMsText)void 0!==n[l]?d[s]=n[l]:"string"===typeof n&&(d[s]=n);else{const t=y||m||p;if(i.xmlIsWrapped){const t=n[m],r=null!==(c=null===t||void 0===t?void 0:t[y])&&void 0!==c?c:[];d[s]=e.deserialize(i,r,g,o),f.push(m)}else{const r=n[t];d[s]=e.deserialize(i,r,g,o),f.push(t)}}else{let r,a=n,c=0;for(const e of h){if(!a)break;c++,a=a[e]}null===a&&c<h.length&&(a=void 0),r=a;const l=t.type.polymorphicDiscriminator;let f;if(!l||s!==l.clientName||void 0!==r&&null!==r||(r=t.serializedName),Array.isArray(n[s])&&""===u[s].serializedName){r=n[s];const t=e.deserialize(i,r,g,o);for(const[e,n]of Object.entries(d))Object.prototype.hasOwnProperty.call(t,e)||(t[e]=n);d=t}else void 0===r&&void 0===i.defaultValue||(f=e.deserialize(i,r,g,o),d[s]=f)}}const h=t.type.additionalProperties;if(h){const t=e=>{for(const t in u){const n=v(u[t].serializedName);if(n[0]===e)return!1}return!0};for(const a in n)t(a)&&(d[a]=e.deserialize(h,n[a],r+'["'+a+'"]',o))}else if(n&&!o.ignoreUnknownProperties)for(const a of Object.keys(n))void 0!==d[a]||f.includes(a)||R(a,o)||(d[a]=n[a]);return d}function D(e,t,n,r,o){const a=t.type.value;if(!a||"object"!==typeof a)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${r}`);if(n){const t={};for(const s of Object.keys(n))t[s]=e.deserialize(a,n[s],r,o);return t}return n}function M(e,t,n,r,o){var a;let s=t.type.element;if(!s||"object"!==typeof s)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${r}`);if(n){Array.isArray(n)||(n=[n]),"Composite"===s.type.name&&s.type.className&&(s=null!==(a=e.modelMappers[s.type.className])&&void 0!==a?a:s);const t=[];for(let a=0;a<n.length;a++)t[a]=e.deserialize(s,n[a],`${r}[${a}]`,o);return t}return n}function z(e,t,n){const r=[n];while(r.length){const n=r.shift(),o=t===n?t:n+"."+t;if(Object.prototype.hasOwnProperty.call(e,o))return e[o];for(const[t,a]of Object.entries(e))t.startsWith(n+".")&&a.type.uberParent===n&&a.type.className&&r.push(a.type.className)}}function q(e,t,n,r){var o;const a=j(e,t);if(a){let s=a[r];if(s){"serializedName"===r&&(s=s.replace(/\\/gi,""));const a=n[s],i=null!==(o=t.type.uberParent)&&void 0!==o?o:t.type.className;if("string"===typeof a&&i){const n=z(e.modelMappers.discriminators,a,i);n&&(t=n)}}}return t}function j(e,t){return t.type.polymorphicDiscriminator||_(e,t.type.uberParent)||_(e,t.type.className)}function _(e,t){return t&&e.modelMappers[t]&&e.modelMappers[t].type.polymorphicDiscriminator}const U={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};var F=n(15630);const V={operationRequestMap:new WeakMap};function L(e,t,n){let r=t.parameterPath;const o=t.mapper;let a;if("string"===typeof r&&(r=[r]),Array.isArray(r)){if(r.length>0)if(o.isConstant)a=o.defaultValue;else{let t=H(e,r);!t.propertyFound&&n&&(t=H(n,r));let s=!1;t.propertyFound||(s=o.required||"options"===r[0]&&2===r.length),a=s?o.defaultValue:t.propertyValue}}else{o.required&&(a={});for(const t in r){const s=o.type.modelProperties[t],i=r[t],c=L(e,{parameterPath:i,mapper:s},n);void 0!==c&&(a||(a={}),a[t]=c)}}return a}function H(e,t){const n={propertyFound:!1};let r=0;for(;r<t.length;++r){const n=t[r];if(!e||!(n in e))break;e=e[n]}return r===t.length&&(n.propertyValue=e,n.propertyFound=!0),n}const G=Symbol.for("@azure/core-client original request");function K(e){return G in e}function J(e){if(K(e))return J(e[G]);let t=V.operationRequestMap.get(e);return t||(t={},V.operationRequestMap.set(e,t)),t}const Q=["application/json","text/json"],X=["application/xml","application/atom+xml"],Z="deserializationPolicy";function Y(e={}){var t,n,r,o,a,i,c;const l=null!==(n=null===(t=e.expectedContentTypes)||void 0===t?void 0:t.json)&&void 0!==n?n:Q,u=null!==(o=null===(r=e.expectedContentTypes)||void 0===r?void 0:r.xml)&&void 0!==o?o:X,d=e.parseXML,f=e.serializerOptions,h={xml:{rootName:null!==(a=null===f||void 0===f?void 0:f.xml.rootName)&&void 0!==a?a:"",includeRoot:null!==(i=null===f||void 0===f?void 0:f.xml.includeRoot)&&void 0!==i&&i,xmlCharKey:null!==(c=null===f||void 0===f?void 0:f.xml.xmlCharKey)&&void 0!==c?c:s}};return{name:Z,async sendRequest(e,t){const n=await t(e);return ne(l,u,n,h,d)}}}function ee(e){let t;const n=e.request,r=J(n),o=null===r||void 0===r?void 0:r.operationSpec;return o&&(t=(null===r||void 0===r?void 0:r.operationResponseGetter)?null===r||void 0===r?void 0:r.operationResponseGetter(o,e):o.responses[e.status]),t}function te(e){const t=e.request,n=J(t),r=null===n||void 0===n?void 0:n.shouldDeserialize;let o;return o=void 0===r||("boolean"===typeof r?r:r(e)),o}async function ne(e,t,n,r,o){const a=await ae(e,t,n,r,o);if(!te(a))return a;const s=J(a.request),i=null===s||void 0===s?void 0:s.operationSpec;if(!i||!i.responses)return a;const c=ee(a),{error:l,shouldReturnResponse:u}=oe(a,i,c,r);if(l)throw l;if(u)return a;if(c){if(c.bodyMapper){let e=a.parsedBody;i.isXML&&c.bodyMapper.type.name===U.Sequence&&(e="object"===typeof e?e[c.bodyMapper.xmlElementName]:[]);try{a.parsedBody=i.serializer.deserialize(c.bodyMapper,e,"operationRes.parsedBody",r)}catch(d){const e=new F.pj(`Error ${d} occurred in deserializing the responseBody - ${a.bodyAsText}`,{statusCode:a.status,request:a.request,response:a});throw e}}else"HEAD"===i.httpMethod&&(a.parsedBody=n.status>=200&&n.status<300);c.headersMapper&&(a.parsedHeaders=i.serializer.deserialize(c.headersMapper,a.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return a}function re(e){const t=Object.keys(e.responses);return 0===t.length||1===t.length&&"default"===t[0]}function oe(e,t,n,r){var o,a,s,i,c;const l=200<=e.status&&e.status<300,u=re(t)?l:!!n;if(u){if(!n)return{error:null,shouldReturnResponse:!1};if(!n.isError)return{error:null,shouldReturnResponse:!1}}const d=null!==n&&void 0!==n?n:t.responses.default,f=(null===(o=e.request.streamResponseStatusCodes)||void 0===o?void 0:o.has(e.status))?`Unexpected status code: ${e.status}`:e.bodyAsText,h=new F.pj(f,{statusCode:e.status,request:e.request,response:e});if(!d&&(!(null===(s=null===(a=e.parsedBody)||void 0===a?void 0:a.error)||void 0===s?void 0:s.code)||!(null===(c=null===(i=e.parsedBody)||void 0===i?void 0:i.error)||void 0===c?void 0:c.message)))throw h;const p=null===d||void 0===d?void 0:d.bodyMapper,m=null===d||void 0===d?void 0:d.headersMapper;try{if(e.parsedBody){const n=e.parsedBody;let o;if(p){let e=n;if(t.isXML&&p.type.name===U.Sequence){e=[];const t=p.xmlElementName;"object"===typeof n&&t&&(e=n[t])}o=t.serializer.deserialize(p,e,"error.response.parsedBody",r)}const a=n.error||o||n;h.code=a.code,a.message&&(h.message=a.message),p&&(h.response.parsedBody=o)}e.headers&&m&&(h.response.parsedHeaders=t.serializer.deserialize(m,e.headers.toJSON(),"operationRes.parsedHeaders"))}catch(y){h.message=`Error "${y.message}" occurred in deserializing the responseBody - "${e.bodyAsText}" for the default response.`}return{error:h,shouldReturnResponse:!1}}async function ae(e,t,n,r,o){var a;if(!(null===(a=n.request.streamResponseStatusCodes)||void 0===a?void 0:a.has(n.status))&&n.bodyAsText){const a=n.bodyAsText,i=n.headers.get("Content-Type")||"",c=i?i.split(";").map(e=>e.toLowerCase()):[];try{if(0===c.length||c.some(t=>-1!==e.indexOf(t)))return n.parsedBody=JSON.parse(a),n;if(c.some(e=>-1!==t.indexOf(e))){if(!o)throw new Error("Parsing XML not supported.");const e=await o(a,r.xml);return n.parsedBody=e,n}}catch(s){const e=`Error "${s}" occurred while parsing the response body - ${n.bodyAsText}.`,t=s.code||F.pj.PARSE_ERROR,r=new F.pj(e,{code:t,statusCode:n.status,request:n.request,response:n});throw r}}return n}function se(e){const t=new Set;for(const n in e.responses){const r=e.responses[n];r.bodyMapper&&r.bodyMapper.type.name===U.Stream&&t.add(Number(n))}return t}function ie(e){const{parameterPath:t,mapper:n}=e;let r;return r="string"===typeof t?t:Array.isArray(t)?t.join("."):n.serializedName,r}const ce="serializationPolicy";function le(e={}){const t=e.stringifyXML;return{name:ce,async sendRequest(e,n){const r=J(e),o=null===r||void 0===r?void 0:r.operationSpec,a=null===r||void 0===r?void 0:r.operationArguments;return o&&a&&(ue(e,a,o),de(e,a,o,t)),n(e)}}}function ue(e,t,n){var r,o;if(n.headerParameters)for(const s of n.headerParameters){let r=L(t,s);if(null!==r&&void 0!==r||s.mapper.required){r=n.serializer.serialize(s.mapper,r,ie(s));const t=s.mapper.headerCollectionPrefix;if(t)for(const n of Object.keys(r))e.headers.set(t+n,r[n]);else e.headers.set(s.mapper.serializedName||ie(s),r)}}const a=null===(o=null===(r=t.options)||void 0===r?void 0:r.requestOptions)||void 0===o?void 0:o.customHeaders;if(a)for(const s of Object.keys(a))e.headers.set(s,a[s])}function de(e,t,n,r=function(){throw new Error("XML serialization unsupported!")}){var o,a,i,c,l;const u=null===(o=t.options)||void 0===o?void 0:o.serializerOptions,d={xml:{rootName:null!==(a=null===u||void 0===u?void 0:u.xml.rootName)&&void 0!==a?a:"",includeRoot:null!==(i=null===u||void 0===u?void 0:u.xml.includeRoot)&&void 0!==i&&i,xmlCharKey:null!==(c=null===u||void 0===u?void 0:u.xml.xmlCharKey)&&void 0!==c?c:s}},f=d.xml.xmlCharKey;if(n.requestBody&&n.requestBody.mapper){e.body=L(t,n.requestBody);const o=n.requestBody.mapper,{required:a,serializedName:s,xmlName:i,xmlElementName:c,xmlNamespace:u,xmlNamespacePrefix:p,nullable:m}=o,y=o.type.name;try{if(void 0!==e.body&&null!==e.body||m&&null===e.body||a){const t=ie(n.requestBody);e.body=n.serializer.serialize(o,e.body,t,d);const a=y===U.Stream;if(n.isXML){const t=p?`xmlns:${p}`:"xmlns",n=fe(u,t,y,e.body,d);y===U.Sequence?e.body=r(he(n,c||i||s,t,u),{rootName:i||s,xmlCharKey:f}):a||(e.body=r(n,{rootName:i||s,xmlCharKey:f}))}else{if(y===U.String&&((null===(l=n.contentType)||void 0===l?void 0:l.match("text/plain"))||"text"===n.mediaType))return;a||(e.body=JSON.stringify(e.body))}}}catch(h){throw new Error(`Error "${h.message}" occurred in serializing the payload - ${JSON.stringify(s,void 0,"  ")}.`)}}else if(n.formDataParameters&&n.formDataParameters.length>0){e.formData={};for(const r of n.formDataParameters){const o=L(t,r);if(void 0!==o&&null!==o){const t=r.mapper.serializedName||ie(r);e.formData[t]=n.serializer.serialize(r.mapper,o,ie(r),d)}}}}function fe(e,t,n,r,o){if(e&&!["Composite","Sequence","Dictionary"].includes(n)){const n={};return n[o.xml.xmlCharKey]=r,n[a]={[t]:e},n}return r}function he(e,t,n,r){if(Array.isArray(e)||(e=[e]),!n||!r)return{[t]:e};const o={[t]:e};return o[a]={[n]:r},o}function pe(e={}){const t=(0,F.Fp)(null!==e&&void 0!==e?e:{});return e.credentialOptions&&t.addPolicy((0,F.N$)({credential:e.credentialOptions.credential,scopes:e.credentialOptions.credentialScopes})),t.addPolicy(le(e.serializationOptions),{phase:"Serialize"}),t.addPolicy(Y(e.deserializationOptions),{phase:"Deserialize"}),t}let me;function ye(){return me||(me=(0,F.fl)()),me}const ge={CSV:",",SSV:" ",Multi:"Multi",TSV:"\t",Pipes:"|"};function we(e,t,n,r){const o=Ae(t,n,r);let a=!1,s=ve(e,o);if(t.path){let e=ve(t.path,o);"/{nextLink}"===t.path&&e.startsWith("/")&&(e=e.substring(1)),be(e)?(s=e,a=!0):s=xe(s,e)}const{queryParams:i,sequenceParams:c}=Ce(t,n,r);return s=Se(s,i,c,a),s}function ve(e,t){let n=e;for(const[r,o]of t)n=n.split(r).join(o);return n}function Ae(e,t,n){var r;const o=new Map;if(null===(r=e.urlParameters)||void 0===r?void 0:r.length)for(const a of e.urlParameters){let r=L(t,a,n);const s=ie(a);r=e.serializer.serialize(a.mapper,r,s),a.skipEncoding||(r=encodeURIComponent(r)),o.set(`{${a.mapper.serializedName||s}}`,r)}return o}function be(e){return e.includes("://")}function xe(e,t){if(!t)return e;const n=new URL(e);let r=n.pathname;r.endsWith("/")||(r=`${r}/`),t.startsWith("/")&&(t=t.substring(1));const o=t.indexOf("?");if(-1!==o){const e=t.substring(0,o),a=t.substring(o+1);r+=e,a&&(n.search=n.search?`${n.search}&${a}`:a)}else r+=t;return n.pathname=r,n.toString()}function Ce(e,t,n){var r;const o=new Map,a=new Set;if(null===(r=e.queryParameters)||void 0===r?void 0:r.length)for(const s of e.queryParameters){"Sequence"===s.mapper.type.name&&s.mapper.serializedName&&a.add(s.mapper.serializedName);let r=L(t,s,n);if(void 0!==r&&null!==r||s.mapper.required){r=e.serializer.serialize(s.mapper,r,ie(s));const t=s.collectionFormat?ge[s.collectionFormat]:"";if(Array.isArray(r)&&(r=r.map(e=>null===e||void 0===e?"":e)),"Multi"===s.collectionFormat&&0===r.length)continue;!Array.isArray(r)||"SSV"!==s.collectionFormat&&"TSV"!==s.collectionFormat||(r=r.join(t)),s.skipEncoding||(r=Array.isArray(r)?r.map(e=>encodeURIComponent(e)):encodeURIComponent(r)),!Array.isArray(r)||"CSV"!==s.collectionFormat&&"Pipes"!==s.collectionFormat||(r=r.join(t)),o.set(s.mapper.serializedName||ie(s),r)}}return{queryParams:o,sequenceParams:a}}function Te(e){const t=new Map;if(!e||"?"!==e[0])return t;e=e.slice(1);const n=e.split("&");for(const r of n){const[e,n]=r.split("=",2),o=t.get(e);o?Array.isArray(o)?o.push(n):t.set(e,[o,n]):t.set(e,n)}return t}function Se(e,t,n,r=!1){if(0===t.size)return e;const o=new URL(e),a=Te(o.search);for(const[i,c]of t){const e=a.get(i);if(Array.isArray(e))if(Array.isArray(c)){e.push(...c);const t=new Set(e);a.set(i,Array.from(t))}else e.push(c);else e?(Array.isArray(c)?c.unshift(e):n.has(i)&&a.set(i,[e,c]),r||a.set(i,c)):a.set(i,c)}const s=[];for(const[i,c]of a)if("string"===typeof c)s.push(`${i}=${c}`);else if(Array.isArray(c))for(const e of c)s.push(`${i}=${e}`);else s.push(`${i}=${c}`);return o.search=s.length?`?${s.join("&")}`:"",o.toString()}var Ee=n(21222);const $e=(0,Ee.KV)("core-client");class Ne{constructor(e={}){var t,n;if(this._requestContentType=e.requestContentType,this._endpoint=null!==(t=e.endpoint)&&void 0!==t?t:e.baseUri,e.baseUri&&$e.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=e.allowInsecureConnection,this._httpClient=e.httpClient||ye(),this.pipeline=e.pipeline||Oe(e),null===(n=e.additionalPolicies)||void 0===n?void 0:n.length)for(const{policy:r,position:o}of e.additionalPolicies){const e="perRetry"===o?"Sign":void 0;this.pipeline.addPolicy(r,{afterPhase:e})}}async sendRequest(e){return this.pipeline.sendRequest(this._httpClient,e)}async sendOperationRequest(e,t){const n=t.baseUrl||this._endpoint;if(!n)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");const r=we(n,t,e,this),o=(0,F.G6)({url:r});o.method=t.httpMethod;const a=J(o);a.operationSpec=t,a.operationArguments=e;const s=t.contentType||this._requestContentType;s&&t.requestBody&&o.headers.set("Content-Type",s);const i=e.options;if(i){const e=i.requestOptions;e&&(e.timeout&&(o.timeout=e.timeout),e.onUploadProgress&&(o.onUploadProgress=e.onUploadProgress),e.onDownloadProgress&&(o.onDownloadProgress=e.onDownloadProgress),void 0!==e.shouldDeserialize&&(a.shouldDeserialize=e.shouldDeserialize),e.allowInsecureConnection&&(o.allowInsecureConnection=!0)),i.abortSignal&&(o.abortSignal=i.abortSignal),i.tracingOptions&&(o.tracingOptions=i.tracingOptions)}this._allowInsecureConnection&&(o.allowInsecureConnection=!0),void 0===o.streamResponseStatusCodes&&(o.streamResponseStatusCodes=se(t));try{const e=await this.sendRequest(o),n=h(e,t.responses[e.status]);return(null===i||void 0===i?void 0:i.onResponse)&&i.onResponse(e,n),n}catch(c){if("object"===typeof c&&(null===c||void 0===c?void 0:c.response)){const e=c.response,n=h(e,t.responses[c.statusCode]||t.responses["default"]);c.details=n,(null===i||void 0===i?void 0:i.onResponse)&&i.onResponse(e,n,c)}throw c}}}function Oe(e){const t=Ie(e),n=e.credential&&t?{credentialScopes:t,credential:e.credential}:void 0;return pe(Object.assign(Object.assign({},e),{credentialOptions:n}))}function Ie(e){if(e.credentialScopes)return e.credentialScopes;if(e.endpoint)return`${e.endpoint}/.default`;if(e.baseUri)return`${e.baseUri}/.default`;if(e.credential&&!e.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}},55636:(e,t,n)=>{"use strict";n.d(t,{Qc:()=>l,RM:()=>c,_w:()=>i});var r=n(50858),o=n(55719),a=n(88882),s=n(64224);function i(e,t,n,r){const a=e.filter(e=>e.tag.constValue===n);if(0===a.length)throw new o.HR(`${t[n]} (${n})`,0);if(null==r){const e=a.find(e=>e.version.constValueOptional);if(null==e)throw new o.Gd(`Can't find default schema of ${t[n]} (${n})`);r=e.version.constValue}const s=a.find(e=>e.version.constValue===r);if(null==s)throw new o.HR(`${t[n]} (${n})`,r);return Object.entries(s)}function c(e,t,n,o,s){const c=i(e,t,n.tag,n.version),l=c.map(([e,t])=>t.serialize(n[e],{...n,...o},n));return(0,a.lF)((0,r.encode)(l),s)}function l(e,t,n,c,l){const u=(0,r.decode)((0,a.D4)(n)),d=+(0,s.Uk)(u[0]),f=+(0,s.Uk)(u[1]),h=i(e,t,d,f);if(null!=c&&c!==d)throw new o.Xc(`Expected ${t[c]} tag, got ${t[d]} instead`);if(u.length!==h.length)throw new o.c1("RLP length",h.length,u.length);return Object.fromEntries(h.map(([e,t],n)=>[e,t.deserialize(u[n],l)]))}},55719:(e,t,n)=>{"use strict";n.d(t,{$4:()=>q,Cf:()=>r,E0:()=>B,E5:()=>m,EC:()=>i,EH:()=>w,FL:()=>R,G8:()=>I,Gd:()=>b,Gq:()=>oe,HR:()=>ee,Jn:()=>d,Jp:()=>O,K$:()=>v,K4:()=>W,MT:()=>ne,Mb:()=>P,Mk:()=>_,OT:()=>ae,OZ:()=>C,Oz:()=>j,P3:()=>X,Qh:()=>$,So:()=>E,Ue:()=>T,Vl:()=>c,Vz:()=>Z,Xc:()=>Q,YR:()=>Y,ZB:()=>S,_H:()=>D,_M:()=>J,_j:()=>te,aL:()=>L,c1:()=>h,dp:()=>k,hg:()=>g,iQ:()=>re,je:()=>F,m5:()=>U,mh:()=>M,nC:()=>V,o4:()=>G,pC:()=>H,q3:()=>y,qB:()=>N,qs:()=>K,qw:()=>p,rU:()=>x,vo:()=>z,z5:()=>A});class r extends Error{constructor(e){super(e),this.name="BaseError"}}class o extends r{constructor(e){super(e),this.name="AccountError"}}class a extends r{constructor(e){super(e),this.name="AensError"}}class s extends r{constructor(e){super(e),this.name="AeppError"}}class i extends r{constructor(e){super(e),this.name="CompilerError"}}class c extends r{constructor(e){super(e),this.name="ContractError"}}class l extends r{constructor(e){super(e),this.name="CryptographyError"}}class u extends r{constructor(e){super(e),this.name="NodeError"}}class d extends r{constructor(e){super(e),this.name="TransactionError"}}class f extends r{constructor(e){super(e),this.name="WalletError"}}class h extends r{constructor(e,t,n){super(`${e} should be ${t}, got ${n} instead`),this.name="ArgumentError"}}class p extends l{constructor(e){super(e),this.name="IllegalArgumentError"}}class m extends r{constructor(){super("Byte serialization not supported"),this.name="NoSerializerFoundError"}}class y extends r{constructor(e,t){super(`Giving up after ${e} blocks mined, transaction hash: ${t}`),this.name="TxTimedOutError"}}class g extends r{constructor(e){super(e),this.name="TypeError"}}class w extends r{constructor(e){super(e),this.name="NotImplementedError"}}class v extends r{constructor(e,t,n,r){super(`Unsupported ${e} version ${t}. Supported: >= ${n}`+(null==r?"":` < ${r}`)),this.name="UnsupportedVersionError"}}class A extends r{constructor(e){super(e),this.name="LogicError"}}class b extends r{constructor(e){super(e),this.name="InternalError"}}class x extends b{constructor(e="Expected to not happen, required for TS"){super(e),this.name="UnexpectedTsError"}}class C extends o{constructor(e){super(`Account for ${e} not available`),this.name="UnavailableAccountError"}}class T extends a{constructor(e,t){super(`Name ${e} don't have pointers for ${t}`),this.name="AensPointerContextError"}}class S extends a{constructor(e,t){super(`the provided fee ${e.toString()} is not enough to execute the claim, required: ${t.toString()}`),this.name="InsufficientNameFeeError"}}class E extends a{constructor(e){super(e),this.name="InvalidAensNameError"}}class $ extends s{constructor(e){super(`Received invalid message: ${e}`),this.name="InvalidRpcMessageError"}}class N extends s{constructor(e){super(`Can't find callback for this messageId ${e}`),this.name="MissingCallbackError"}}class O extends s{constructor(e){super(`RpcClient with id ${e} do not exist`),this.name="UnknownRpcClientError"}}class I extends i{constructor(e){super(e),this.name="InvalidAuthDataError"}}class P extends c{constructor(e){super(`Contract ${e} do not correspond to the bytecode deployed on the chain`),this.name="BytecodeMismatchError"}}class B extends c{constructor(){super("Contract already deployed"),this.name="DuplicateContractError"}}class W extends c{constructor(e){super(`Contract with address ${e} not active`),this.name="InactiveContractError"}}class R extends c{constructor(e){super(e),this.name="InvalidMethodInvocationError"}}class k extends c{constructor(e){super(e),this.name="MissingContractAddressError"}}class D extends c{constructor(){super("Either ACI or sourceCode or sourceCodePath is required"),this.name="MissingContractDefError"}}class M extends c{constructor(){super("Function name is required"),this.name="MissingFunctionNameError"}}class z extends c{constructor(e,t){super("Invocation failed"+(null==e?"":`: "${e}"`)),this.name="NodeInvocationError",this.transaction=t}}class q extends c{constructor(e){super(`Function ${e} doesn't exist in contract`),this.name="NoSuchContractFunctionError"}}class j extends c{constructor(e,t){super(`You try to pay "${e}" to function "${t}" which is not payable. Only payable function can accept coins`),this.name="NotPayableFunctionError"}}class _ extends c{constructor(e,t){super(`Can't find definition of ${e} event emitted by ${t} (use omitUnknown option to ignore events like this)`),this.name="MissingEventDefinitionError"}}class U extends c{constructor(e,t){super(`Found multiple definitions of "${t[0][1]}" event with different types emitted by ${e} in ${t.map(([e])=>`"${e}"`).join(", ")} contracts (use contractAddressToName option to specify contract name corresponding to address)`),this.name="AmbiguousEventDefinitionError"}}class F extends l{constructor(){super("Invalid checksum"),this.name="InvalidChecksumError"}}class V extends l{constructor(){super("Node hash is not equal to provided one"),this.name="MerkleTreeHashMismatchError"}}class L extends l{constructor(e){super(e),this.name="MissingNodeInTreeError"}}class H extends l{constructor(e){super(`Unknown node length: ${e}`),this.name="UnknownNodeLengthError"}}class G extends l{constructor(e){super(`Unknown path nibble: ${e}`),this.name="UnknownPathNibbleError"}}class K extends u{constructor(e){super(`Node with name ${e} already exist`),this.name="DuplicateNodeError"}}class J extends u{constructor(e){super(e),this.name="NodeNotFoundError"}}class Q extends d{constructor(e){super(e),this.name="DecodeError"}}class X extends d{constructor(e){super(e),this.name="PayloadLengthError"}}class Z extends d{constructor(e){super(e),this.name="DryRunError"}}class Y extends d{constructor(e){super(`Prefix for id-tag ${e} not found.`),this.name="PrefixNotFoundError"}}class ee extends d{constructor(e,t){super(`Transaction schema not implemented for tag ${e} version ${t}`),this.name="SchemaNotFoundError"}}class te extends d{constructor(e){super(`Id tag for prefix ${e} not found.`),this.name="DecodeError"}}class ne extends d{constructor(e){super(`Transaction ${e} is removed from chain`),this.name="TxNotInChainError"}}class re extends f{constructor(e){super(e),this.name="AlreadyConnectedError"}}class oe extends f{constructor(e){super(e),this.name="NoWalletConnectedError"}}class ae extends f{constructor(e){super(e),this.name="RpcConnectionError"}}},64224:(e,t,n)=>{"use strict";n.d(t,{JC:()=>b,MN:()=>y,Uk:()=>g,YQ:()=>A,bt:()=>m,sP:()=>f,wJ:()=>v});var r=n(48287),o=n(60346),a=n(16341),s=n(88882),i=n(35166),c=n(84825),l=n(68156),u=n(8204),d=n(55719);function f(e,t){const n=r.Buffer.from([...(0,s.D4)(e),...(0,c.Z)(t)]),o=(0,a.tW)(n);return(0,s.lF)(o,i.W.ContractAddress)}const h=".chain";function p(e){const[t,n,...r]=e.split(".");if(0!==r.length)throw new d.c1("aens name","including only one dot",e);if(n!==h.slice(1))throw new d.c1("aens name",`suffixed with ${h}`,e);if(/\p{Emoji_Presentation}/u.test(t))throw new d.c1("aens name","not containing emoji",e);if("-"===t[2]&&"-"===t[3])throw new d.c1("aens name",'without "-" char in both the third and fourth positions',e);if("-"===t[0])throw new d.c1("aens name",'starting with no "-" char',e);if("-"===t.at(-1))throw new d.c1("aens name",'ending with no "-" char',e);let o;try{const r=new URL(`http://${t}.${n}`);if(r.username+r.password+r.port+r.search+r.hash!==""||"/"!==r.pathname)throw new d.c1("aens name","valid",e);o=r.host}catch(a){if(a instanceof TypeError&&a.message.includes("Invalid URL"))throw new d.c1("aens name","valid",e);throw a}if(!/^[a-z0-9.-]+$/i.test(o))throw new d.c1("aens name","without illegal chars",e);if(o.length>63+h.length)throw new d.c1("aens name","not too long",e);return o}function m(e){return(0,s.lF)((0,a.tW)(p(e)),i.W.Name)}function y(e,t=(0,a.j$)()){return(0,s.lF)((0,a.tW)((0,l.wh)([r.Buffer.from(p(e)),r.Buffer.from(t.toString(16).padStart(64,"0"),"hex")])),i.W.Commitment)}function g(e=r.Buffer.from([])){return new o.g(r.Buffer.from(e).toString("hex"),16).toString(10)}function w(e){p(e)}function v(e){try{return w(e),!0}catch(t){return!1}}i.W.AccountAddress,i.W.OracleAddress,i.W.ContractAddress,i.W.Channel;function A(e){const t=p(e).length-h.length;return u.d0[Math.min(t,u.L_)]}function b(e){return p(e).length<13+h.length}},65072:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(48287),o=n(88882),a=n(55719);function s(e,t){return{serialize(e){if(null==e){if(!0===t)return r.Buffer.from([]);throw new a.c1("Encoded data","provided",e)}return(0,o.D4)(e)},deserialize(t){return(0,o.lF)(t,e)}}}},68156:(e,t,n)=>{"use strict";n.d(t,{$:()=>f,ET:()=>u,PI:()=>d,Uu:()=>l,s8:()=>s,v7:()=>a,wh:()=>c});var r=n(48287),o=n(15630);const a=async e=>new Promise(t=>{setTimeout(t,e)}),s=(e,t)=>Object.fromEntries(Object.entries(e).map(t)),i=(()=>{try{return r.Buffer.concat([Uint8Array.from([])]),!1}catch(e){return!0}})(),c=i?(e,t)=>r.Buffer.concat(e.map(e=>r.Buffer.from(e)),t):r.Buffer.concat;function l(e,t){return e in t}function u(e,t){return t.includes(e)}function d(e){return e instanceof o.pj&&404===e.statusCode&&e.message.includes("Account not found")}function f(e){if(!(e instanceof Error))throw e}},68951:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var r=n(48287),o=n(15630),a=n(16341),s=n(15234),i=n(8204),c=n(91454),l=n(68156),u=n(88882),d=n(35166),f=n(98417),h=n(20697),p=n(55719),m=n(41284),y=n(85825);const g=[];async function w(e,t,n){const r=(0,m.A)((0,c.pr)(e)),[o,{height:a},{consensusProtocolVersion:s,nodeNetworkId:i}]=await Promise.all([t.getAccountByPubkey(r).catch(e=>{if(!(0,l.PI)(e))throw e;return{id:r,balance:0n,nonce:0}}).then(e=>({...e,id:e.id})),t.getCurrentKeyBlockHeight(),t.getNodeInfo()]);return(await Promise.all(g.map(async r=>r(e,{node:t,account:o,height:a,consensusProtocolVersion:s,nodeNetworkId:i,parentTxTypes:n})))).flat()}async function v(e,t){const n=t.pipeline.clone();n.removePolicy({name:"parse-big-int"});const r=new f.A(t.$host,{ignoreVersion:!0,pipeline:n,additionalPolicies:[(0,h.DM)()]});return w((0,c.pj)(e),r,[])}g.push((e,{account:t,nodeNetworkId:n,parentTxTypes:o})=>{if(e.tag!==i.vw.SignedTx)return[];const{encodedTx:s,signatures:d}=e;if(null==(null!==s&&void 0!==s?s:d))return[];if(1!==d.length)return[];const f=r.Buffer.from([n,...o.includes(i.vw.PayingForTx)?["inner_tx"]:[]].join("-")),h=(0,u.D4)((0,c.pr)(s)),p=(0,l.wh)([f,h]),m=(0,l.wh)([f,(0,a.tW)(h)]);return(0,a.MX)(p,d[0],t.id)||(0,a.MX)(m,d[0],t.id)?[]:[{message:"Signature cannot be verified, please ensure that you transaction have the correct prefix and the correct private key for the sender address",key:"InvalidSignature",checkedKeys:["encodedTx","signatures"]}]},async(e,{node:t,parentTxTypes:n})=>{let r;return"encodedTx"in e&&(r=e.encodedTx),"tx"in e&&(r=e.tx),null==r?[]:w(r,t,[...n,e.tag])},(e,{height:t})=>"ttl"in e?0===e.ttl||e.ttl>t?[]:[{message:`TTL ${e.ttl} is already expired, current height is ${t}`,key:"ExpiredTTL",checkedKeys:["ttl"]}]:[],async(e,{account:t,parentTxTypes:n,node:r})=>{if(0!==n.length)return[];const o=await(0,y.wE)((0,c.pr)(e),r).catch(()=>0n);return o<=t.balance?[]:[{message:`Account balance ${t.balance} is not enough to execute the transaction that costs ${o}`,key:"InsufficientBalance",checkedKeys:["amount","fee","nameFee","gasLimit","gasPrice"]}]},async(e,{node:t})=>{if(e.tag!==i.vw.SpendTx||(0,a.pL)(e.recipientId,d.W.Name))return[];const n=await t.getAccountByPubkey(e.recipientId).catch(e=>{if(!(0,l.PI)(e))throw e;return null});return null==n||!0===n.payable?[]:[{message:"Recipient account is not payable",key:"RecipientAccountNotPayable",checkedKeys:["recipientId"]}]},(e,{account:t})=>{let n;return e.tag===i.vw.SignedTx&&"generalized"===t.kind&&0!==e.signatures.length&&(n="Generalized account can't be used to generate SignedTx with signatures"),e.tag===i.vw.GaMetaTx&&"basic"===t.kind&&(n="Basic account can't be used to generate GaMetaTx"),null==n?[]:[{message:n,key:"InvalidAccountType",checkedKeys:["tag"]}]},(e,{consensusProtocolVersion:t})=>{var n,r;const o=i.vw.OracleRegisterTx===e.tag,a=i.vw.ContractCreateTx===e.tag||i.vw.GaAttachTx===e.tag,c=i.vw.ContractCallTx===e.tag||i.vw.GaMetaTx===e.tag,l=null!==(n=null!==(r=o?"oracle-call":null)&&void 0!==r?r:a?"contract-create":null)&&void 0!==n?n:c?"contract-call":null;if(null==l)return[];const u=s.h[t][l];let d;if("abiVersion"in e&&(d={abiVersion:e.abiVersion}),"ctVersion"in e&&(d=e.ctVersion),null==d)throw new p.rU;return!u.abiVersion.includes(d.abiVersion)||a&&!u.vmVersion.includes(d.vmVersion)?[{message:`ABI/VM version ${JSON.stringify(d)} is wrong, supported is: ${JSON.stringify(u)}`,key:"VmAndAbiVersionMismatch",checkedKeys:["ctVersion","abiVersion"]}]:[]},async(e,{node:t})=>{if(i.vw.ContractCallTx!==e.tag)return[];if(e.contractId.startsWith("nm_"))return[];try{const{active:n}=await t.getContract(e.contractId);return n?[]:[{message:`Contract ${e.contractId} is not active`,key:"ContractNotActive",checkedKeys:["contractId"]}]}catch(n){if(!(n instanceof o.pj)||null==n.response?.bodyAsText)throw n;return[{message:JSON.parse(n.response.bodyAsText).reason,key:"ContractNotFound",checkedKeys:["contractId"]}]}})},71232:(e,t,n)=>{"use strict";function r(e,t){const n=e=>e.split(/[-+]/)[0].split(".").map(e=>+e),r=n(e),o=n(t),a=Math.max(...r,...o)+1,s=e=>e.reverse().reduce((e,t,n)=>e+t*a**n,0);return s(r)-s(o)}function o(e,t,n){return r(e,t)>=0&&(null==n||r(e,n)<0)}n.d(t,{A:()=>o})},73106:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(48287),o=n(88882),a=n(35166);function s(e){return{serialize(t,{packEntry:n}){return ArrayBuffer.isView(t)?r.Buffer.from(t):"string"===typeof t&&t.startsWith("tx_")?(0,o.D4)(t):(0,o.D4)(n({...t,...null!=e&&{tag:e}}))},deserialize(t,{unpackEntry:n}){return n((0,o.lF)(t,a.W.Bytearray),e)}}}},78910:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,o:()=>l});var r=n(48287),o=n(55719),a=n(84825),s=n(35166),i=n(88882),c=n(68156);const l=[s.W.AccountAddress,s.W.Name,s.W.Commitment,s.W.OracleAddress,s.W.ContractAddress,s.W.Channel];function u(...e){return{serialize(t){const n=t.slice(0,2);if(!(0,c.ET)(n,l))throw new o._j(n);if(!(0,c.ET)(n,e))throw new o.c1("Address encoding",e.join(", "),n);const s=l.indexOf(n)+1;return r.Buffer.from([...(0,a.Z)(s),...(0,i.D4)(t)])},deserialize(t){const n=r.Buffer.from(t).readUIntBE(0,1),a=l[n-1];if(null==a)throw new o.YR(n);if(!(0,c.ET)(a,e))throw new o.c1("Address encoding",e.join(", "),a);return(0,i.lF)(t.subarray(1),a)}}}},80364:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(48287);const o={serialize(e){return r.Buffer.from(e)},deserialize(e){return e}}},82766:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(46581);const o={serialize(e){return r.A.serialize(e)},deserialize(e){return+r.A.deserialize(e)}}},84686:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(48287),o=n(84825),a=n(35166),s=n(88882),i=n(16341),c=n(55719),l=n(78910);const u=r.Buffer.from([1]),d=r.Buffer.from([2]),f=1024,h=(0,l.A)(...l.o),p=e=>({serialize(t){if(t.length>32)throw new c.qw(`Expected 32 pointers or less, got ${t.length} instead`);return t.map(({key:t,id:n})=>{let p;if((0,i.pL)(n,...l.o)&&(p=[...e?[u]:[],h.serialize(n)]),(0,i.pL)(n,a.W.Bytearray)){const e=(0,s.D4)(n);if(e.length>f)throw new c.c1("Raw pointer",`shorter than ${f+1} bytes`,`${e.length} bytes`);p=[d,e]}if(null==p)throw new c.Xc(`Unknown AENS pointer value: ${n}`);return[(0,o.Z)(t),r.Buffer.concat(p)]})},deserialize(t){return t.map(([t,n])=>{if(!e)return{key:t.toString(),id:h.deserialize(n)};const r=n.subarray(0,1),o=n.subarray(1);let i;if(r.equals(u)&&(i=h.deserialize(o)),r.equals(d)&&(i=(0,s.lF)(o,a.W.Bytearray)),null==i)throw new c.Xc(`Unknown AENS pointer tag: ${r}`);return{key:t.toString(),id:i}})}})},84825:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(48287),o=n(60346),a=n(55719);function s(e,t=!1){if(null==e)return r.Buffer.from([]);if(Number.isInteger(e)||o.g.isBigNumber(e)||t){if(o.g.isBigNumber(e)||(e=new o.g(e)),!e.isInteger())throw new a.hg(`Unexpected not integer value: ${e.toFixed()}`);let t=e.toString(16);return t.length%2===1&&(t=`0${t}`),r.Buffer.from(t,"hex")}if("string"===typeof e)return r.Buffer.from(e);throw new a.E5}},85320:(e,t,n)=>{"use strict";n.r(t),n.d(t,{payForTransaction:()=>d,spend:()=>l,transferFunds:()=>u});var r=n(60346),o=n(1889),a=n(48189),s=n(91454),i=n(55719),c=n(8204);async function l(e,t,n){return(0,a.v)(await(0,s.B4)({_isInternalBuild:!0,...n,tag:c.vw.SpendTx,senderId:n.onAccount.address,recipientId:await(0,o.resolveName)(t,"account_pubkey",n),amount:e}),n)}async function u(e,t,n){if(+e<0||+e>1)throw new i.c1("fraction","a number between 0 and 1",e);const l=await(0,o.resolveName)(t,"account_pubkey",n),u=n.onAccount.address,d=new r.g(await o.getBalance.bind(n.onAccount)(u,n)),f=d.times(e).integerValue(r.g.ROUND_HALF_UP),{fee:h}=(0,s.pj)(await(0,s.B4)({_isInternalBuild:!0,...n,tag:c.vw.SpendTx,senderId:u,recipientId:l,amount:f}),c.vw.SpendTx),p=f.plus(h).gt(d)?d.minus(h):f;return(0,a.v)(await(0,s.B4)({_isInternalBuild:!0,...n,tag:c.vw.SpendTx,senderId:u,recipientId:l,amount:p}),n)}async function d(e,t){return(0,a.v)(await(0,s.B4)({_isInternalBuild:!0,...t,tag:c.vw.PayingForTx,payerId:t.onAccount.address,tx:e}),t)}},85825:(e,t,n)=>{"use strict";n.d(t,{oo:()=>l,wE:()=>d});var r=n(91454),o=n(8204),a=n(16341),s=n(85533),i=n(55719),c=n(41284);function l(e,{innerTx:t,gasUsed:n,queryFee:a,isInitiator:s}={}){const c=(0,r.pj)(e);if(c.tag===o.vw.SignedTx)throw new i.qw("Transaction shouldn't be a SignedTx, use `getExecutionCostBySignedTx` instead");let u=0n;return"fee"in c&&"freeloader"!==t&&(u+=BigInt(c.fee)),c.tag===o.vw.NameClaimTx&&(u+=BigInt(c.nameFee)),c.tag===o.vw.OracleQueryTx&&(u+=BigInt(c.queryFee)),c.tag===o.vw.OracleResponseTx&&(u-=BigInt(null!==a&&void 0!==a?a:0)),c.tag===o.vw.ChannelSettleTx&&(!0===s&&(u-=BigInt(c.initiatorAmountFinal)),!1===s&&(u-=BigInt(c.responderAmountFinal))),c.tag!==o.vw.SpendTx&&c.tag!==o.vw.ContractCreateTx&&c.tag!==o.vw.ContractCallTx&&c.tag!==o.vw.ChannelDepositTx||"fee-payer"===t||(u+=BigInt(c.amount)),c.tag===o.vw.ContractCreateTx&&(u+=BigInt(c.deposit)),c.tag!==o.vw.ContractCreateTx&&c.tag!==o.vw.ContractCallTx&&c.tag!==o.vw.GaAttachTx&&c.tag!==o.vw.GaMetaTx||"freeloader"===t||(u+=BigInt(c.gasPrice)*BigInt(null!==n&&void 0!==n?n:c.gasLimit)),c.tag!==o.vw.GaMetaTx&&c.tag!==o.vw.PayingForTx||(u+=l((0,r.pr)(c.tx.encodedTx),c.tag===o.vw.PayingForTx?{innerTx:"fee-payer"}:{})),u}function u(e,t,n){const u=(0,r.pj)(e,o.vw.SignedTx);if(u.encodedTx.tag===o.vw.GaMetaTx)return l((0,r.pr)(u.encodedTx),n);const d=(0,r.pr)(u.encodedTx),f=(0,c.A)(d),[h,p]=[!0,!1].map(e=>(0,a.MX)((0,s.J)(d,t,e),u.signatures[0],f));if(!h&&!p)throw new i.Jn("Can't verify signature");return l((0,r.pr)(u.encodedTx),{...h&&{innerTx:"freeloader"},...n})}async function d(e,t,{isMined:n,...a}={}){let s=(0,r.pj)(e);const c=s.tag===o.vw.SignedTx,d=c&&!0===n&&(0,r.BN)(e);if(s.tag===o.vw.SignedTx&&(s=s.encodedTx),null==a.gasUsed&&!1!==d&&[o.vw.ContractCreateTx,o.vw.ContractCallTx,o.vw.GaAttachTx,o.vw.GaMetaTx].includes(s.tag)){const{callInfo:e,gaInfo:n}=await t.getTransactionInfoByHash(d),r=null!==e&&void 0!==e?e:n;if(null==r)throw new i.Gd(`callInfo and gaInfo is not available for transaction ${d}`);a.gasUsed=r.gasUsed}if(null==a.queryFee&&o.vw.OracleResponseTx===s.tag&&(a.queryFee=(await t.getOracleByPubkey(s.oracleId)).queryFee.toString()),null==a.isInitiator&&o.vw.ChannelSettleTx===s.tag&&!0!==n){const{initiatorId:e}=await t.getChannelByPubkey(s.channelId);a.isInitiator=s.fromId===e}return c?u(e,await t.getNetworkId(),a):l(e,a)}},88882:(e,t,n)=>{"use strict";n.d(t,{D4:()=>A,lF:()=>b});var r=n(48287),o=n(66339),a=n(24107),s=n(55719),i=n(68156),c=n(35166);function l(e){return(new a).update(e).digest()}const u=[c.W.ContractBytearray,c.W.ContractStoreKey,c.W.ContractStoreValue,c.W.Transaction,c.W.OracleQuery,c.W.OracleResponse,c.W.State,c.W.Poi,c.W.StateTrees,c.W.CallStateTree,c.W.Bytearray],d=[c.W.KeyBlockHash,c.W.MicroBlockHash,c.W.BlockPofHash,c.W.BlockTxHash,c.W.BlockStateHash,c.W.Channel,c.W.ContractAddress,c.W.TxHash,c.W.OracleAddress,c.W.OracleQueryId,c.W.AccountAddress,c.W.AccountSecretKey,c.W.Signature,c.W.Commitment,c.W.PeerPubkey,c.W.Name],f={[c.W.KeyBlockHash]:32,[c.W.MicroBlockHash]:32,[c.W.BlockPofHash]:32,[c.W.BlockTxHash]:32,[c.W.BlockStateHash]:32,[c.W.Channel]:32,[c.W.ContractAddress]:32,[c.W.TxHash]:32,[c.W.OracleAddress]:32,[c.W.OracleQueryId]:32,[c.W.AccountAddress]:32,[c.W.AccountSecretKey]:32,[c.W.Signature]:64,[c.W.Commitment]:32,[c.W.PeerPubkey]:32,[c.W.State]:32};function h(e,t){if(!(0,i.Uu)(t,f))return;const n=f[t];if(null!=n&&e.length!==n)throw new s.P3(`Payload should be ${n} bytes, got ${e.length} instead`)}const p=e=>l(l(e)).slice(0,4),m=e=>(0,i.wh)([e,p(e)]);function y(e){const t=e.slice(0,-4);if(!p(t).equals(e.slice(-4)))throw new s.je;return t}const g={encode:e=>m(e).toString("base64"),decode:e=>y(r.Buffer.from(e,"base64"))},w={encode:e=>o.A.encode(m(e)),decode:e=>y(r.Buffer.from(o.A.decode(e)))},v=e=>{const t=u.find(t=>t===e);if(null!=t)return[t,g];const n=d.find(t=>t===e);if(null!=n)return[n,w];throw new s.c1("prefix",`one of ${[...d,...u].join(", ")}`,e)};function A(e){const[t,n,r]=e.split("_");if(null==n)throw new s.Xc(`Encoded string missing payload: ${e}`);if(null!=r)throw new s.Xc(`Encoded string have extra parts: ${e}`);const[o,a]=v(t),i=a.decode(n);return h(i,o),i}function b(e,t){const[,n]=v(t);return h(e,t),`${t}_${n.encode(e)}`}},90185:(e,t,n)=>{"use strict";n.d(t,{R:()=>o,q:()=>a});var r=n(55719);function o(e){return new Proxy({},Object.fromEntries(["apply","construct","defineProperty","deleteProperty","getOwnPropertyDescriptor","getPrototypeOf","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf","get","has"].map(t=>[t,(n,...o)=>{const a=e();if(null==a)throw new r.c1("wrapped value","defined",a);if("get"===t&&"_wrappedValue"===o[0])return a;const s=Reflect[t](a,...o);return"function"===typeof s&&"get"===t?s.bind(a):s}])))}function a(e){var t;return null!==(t=e._wrappedValue)&&void 0!==t?t:e}},91454:(e,t,n)=>{"use strict";n.d(t,{xD:()=>te,pr:()=>X,B4:()=>Z,BN:()=>ee,_w:()=>Q,pj:()=>Y});var r=n(35166),o=n(88882),a=n(16341),s=n(8204),i=n(94465),c=n(78910),l=n(12075),u=n(53234),d=n(15234),f=n(65072),h=n(73106),p=n(94373),m=n(51902),y=n(16381),g=n(34743),w=n(48287);const v={serialize(e){return w.Buffer.from(e)},deserialize(e){return e.toString()}},A={serialize(e){return v.serialize(e)},deserialize(e){return v.deserialize(e)}};var b=n(60346),x=n(64224),C=n(55719);const T={...u.A,serializeAettos(e,t){const n=(0,x.YQ)(t.name),r=new b.g(null!==e&&void 0!==e?e:n);if(n.gt(r))throw new C.ZB(r,n);return r.toFixed()},serialize(e,t,n){return u.A.serialize.call(this,e,t,n)}};var S=n(99369),E=n(68156),$=n(82766);function N(e){return{...$.A,serialize(e,{tag:t}){if(s.vw.GaAttachTx===t&&1!==e)throw new C.c1("nonce","equal 1 if GaAttachTx",e);return $.A.serialize(e)},async prepare(t,n,r){if(null!=t)return t;const{onNode:o,strategy:a}=r,s=r[e],i="provided (or provide `nonce` instead)";if(null==o)throw new C.c1("onNode",i,o);if(null==s)throw new C.c1("senderId",i,s);return(await o.getAccountNextNonce(s.replace(/^ok_/,"ak_"),{strategy:a}).catch(e=>{if(!(0,E.PI)(e))throw e;return{nextNonce:1}})).nextNonce},senderKey:e}}var O=n(84686);const I={...u.A,async prepare(e,t,n){if(null!=e)return e;const{onNode:r,oracleId:o}=n,a="provided (or provide `queryFee` instead)";if(null==r)throw new C.c1("onNode",a,r);if(null==o)throw new C.c1("oracleId",a,o);return(await r.getOracleByPubkey(o)).queryFee.toString()}};var P=n(80364),B=n(53624),W=n(3125);function R(e){return{serialize(t,{buildTx:n}){return ArrayBuffer.isView(t)?w.Buffer.from(t):"string"===typeof t&&t.startsWith("tx_")?(0,o.D4)(t):(0,o.D4)(n({...t,...null!=e&&{tag:e}}))},deserialize(t,{unpackTx:n}){return n((0,o.lF)(t,r.W.Transaction),e)}}}var k=n(1889);const D={...$.A,serialize(e){return $.A.serialize(null!==e&&void 0!==e?e:0)},async prepare(e,t,{onNode:n,absoluteTtl:r,_isInternalBuild:o,...a}){if(!0!==r&&0!==e&&(null!=e||!0===o)){var s;if(null==n)throw new C.c1("onNode","provided",n);e=(null!==(s=e)&&void 0!==s?s:3)+await(0,k.getHeight)({...a,onNode:n,cached:!0})}return e}};var M=n(46581);function z(e,t){return{...t,serialize(n,r){return t.serialize(null!==n&&void 0!==n?n:e,r)}}}function q(e,t){return{...t,serialize(n,r,o){return t.serialize(e(n),r,o)}}}var j=n(30683);let _=function(e){return e[e["delta"]=0]="delta",e[e["block"]=1]="block",e}({});const U=R(),F=R(s.vw.SignedTx),V=(0,h.A)(j.D.TreesPoi),L=z(3600,$.A),H=q(e=>{var t;const n=18e4;if(null!==(t=e)&&void 0!==t||(e=n),e>=1&&e<=n)return e;throw new C.c1("nameTtl",`a number between 1 and ${n} blocks`,e)},$.A),G=[{tag:(0,B.A)(s.vw.SignedTx),version:(0,B.A)(1,!0),signatures:(0,l.A)(P.A),encodedTx:U},{tag:(0,B.A)(s.vw.SpendTx),version:(0,B.A)(1,!0),senderId:(0,c.A)(r.W.AccountAddress),recipientId:(0,c.A)(r.W.AccountAddress,r.W.ContractAddress,r.W.Name),amount:u.A,fee:m.A,ttl:D,nonce:N("senderId"),payload:(0,f.A)(r.W.Bytearray,!0)},{tag:(0,B.A)(s.vw.NamePreclaimTx),version:(0,B.A)(1,!0),accountId:(0,c.A)(r.W.AccountAddress),nonce:N("accountId"),commitmentId:(0,c.A)(r.W.Commitment),fee:m.A,ttl:D},{tag:(0,B.A)(s.vw.NameClaimTx),version:(0,B.A)(2,!0),accountId:(0,c.A)(r.W.AccountAddress),nonce:N("accountId"),name:A,nameSalt:z(0,M.A),nameFee:T,fee:m.A,ttl:D},{tag:(0,B.A)(s.vw.NameUpdateTx),version:(0,B.A)(1,!0),accountId:(0,c.A)(r.W.AccountAddress),nonce:N("accountId"),nameId:S.A,nameTtl:H,pointers:(0,O.A)(!1),clientTtl:L,fee:m.A,ttl:D},{tag:(0,B.A)(s.vw.NameUpdateTx),version:(0,B.A)(2),accountId:(0,c.A)(r.W.AccountAddress),nonce:N("accountId"),nameId:S.A,nameTtl:H,pointers:(0,O.A)(!0),clientTtl:L,fee:m.A,ttl:D},{tag:(0,B.A)(s.vw.NameTransferTx),version:(0,B.A)(1,!0),accountId:(0,c.A)(r.W.AccountAddress),nonce:N("accountId"),nameId:S.A,recipientId:(0,c.A)(r.W.AccountAddress,r.W.Name),fee:m.A,ttl:D},{tag:(0,B.A)(s.vw.NameRevokeTx),version:(0,B.A)(1,!0),accountId:(0,c.A)(r.W.AccountAddress),nonce:N("accountId"),nameId:S.A,fee:m.A,ttl:D},{tag:(0,B.A)(s.vw.ContractCreateTx),version:(0,B.A)(1,!0),ownerId:(0,c.A)(r.W.AccountAddress),nonce:N("ownerId"),code:(0,f.A)(r.W.ContractBytearray),ctVersion:d.Ay,fee:m.A,ttl:D,deposit:q((e=0)=>{if(0===+e)return e;throw new C.c1("deposit","equal 0 (because is not refundable)",e)},u.A),amount:u.A,gasLimit:y.A,gasPrice:g.A,callData:(0,f.A)(r.W.ContractBytearray)},{tag:(0,B.A)(s.vw.ContractCallTx),version:(0,B.A)(1,!0),callerId:(0,c.A)(r.W.AccountAddress),nonce:N("callerId"),contractId:(0,c.A)(r.W.ContractAddress,r.W.Name),abiVersion:i.A,fee:m.A,ttl:D,amount:u.A,gasLimit:y.A,gasPrice:g.A,callData:(0,f.A)(r.W.ContractBytearray)},{tag:(0,B.A)(s.vw.OracleRegisterTx),version:(0,B.A)(1,!0),accountId:(0,c.A)(r.W.AccountAddress),nonce:N("accountId"),queryFormat:W.A,responseFormat:W.A,queryFee:u.A,oracleTtlType:z(_.delta,(0,p.A)(_)),oracleTtlValue:z(500,$.A),fee:m.A,ttl:D,abiVersion:i.A},{tag:(0,B.A)(s.vw.OracleExtendTx),version:(0,B.A)(1,!0),oracleId:(0,c.A)(r.W.OracleAddress,r.W.Name),nonce:N("oracleId"),oracleTtlType:z(_.delta,(0,p.A)(_)),oracleTtlValue:z(500,$.A),fee:m.A,ttl:D},{tag:(0,B.A)(s.vw.OracleQueryTx),version:(0,B.A)(1,!0),senderId:(0,c.A)(r.W.AccountAddress),nonce:N("senderId"),oracleId:(0,c.A)(r.W.OracleAddress,r.W.Name),query:W.A,queryFee:I,queryTtlType:z(_.delta,(0,p.A)(_)),queryTtlValue:z(10,$.A),responseTtlType:z(_.delta,(0,p.A)(_)),responseTtlValue:z(10,$.A),fee:m.A,ttl:D},{tag:(0,B.A)(s.vw.OracleResponseTx),version:(0,B.A)(1,!0),oracleId:(0,c.A)(r.W.OracleAddress),nonce:N("oracleId"),queryId:(0,f.A)(r.W.OracleQueryId),response:W.A,responseTtlType:z(_.delta,(0,p.A)(_)),responseTtlValue:z(10,$.A),fee:m.A,ttl:D},{tag:(0,B.A)(s.vw.ChannelCreateTx),version:(0,B.A)(2,!0),initiator:(0,c.A)(r.W.AccountAddress),initiatorAmount:M.A,responder:(0,c.A)(r.W.AccountAddress),responderAmount:M.A,channelReserve:M.A,lockPeriod:M.A,ttl:D,fee:m.A,initiatorDelegateIds:(0,l.A)((0,c.A)(...c.o)),responderDelegateIds:(0,l.A)((0,c.A)(...c.o)),stateHash:(0,f.A)(r.W.State),nonce:N("initiator")},{tag:(0,B.A)(s.vw.ChannelCloseMutualTx),version:(0,B.A)(1,!0),channelId:(0,c.A)(r.W.Channel),fromId:(0,c.A)(r.W.AccountAddress),initiatorAmountFinal:M.A,responderAmountFinal:M.A,ttl:D,fee:m.A,nonce:N("fromId")},{tag:(0,B.A)(s.vw.ChannelCloseSoloTx),version:(0,B.A)(1,!0),channelId:(0,c.A)(r.W.Channel),fromId:(0,c.A)(r.W.AccountAddress),payload:(0,f.A)(r.W.Transaction),poi:V,ttl:D,fee:m.A,nonce:N("fromId")},{tag:(0,B.A)(s.vw.ChannelSlashTx),version:(0,B.A)(1,!0),channelId:(0,c.A)(r.W.Channel),fromId:(0,c.A)(r.W.AccountAddress),payload:(0,f.A)(r.W.Transaction),poi:V,ttl:D,fee:m.A,nonce:N("fromId")},{tag:(0,B.A)(s.vw.ChannelDepositTx),version:(0,B.A)(1,!0),channelId:(0,c.A)(r.W.Channel),fromId:(0,c.A)(r.W.AccountAddress),amount:M.A,ttl:D,fee:m.A,stateHash:(0,f.A)(r.W.State),round:$.A,nonce:N("fromId")},{tag:(0,B.A)(s.vw.ChannelWithdrawTx),version:(0,B.A)(1,!0),channelId:(0,c.A)(r.W.Channel),toId:(0,c.A)(r.W.AccountAddress),amount:M.A,ttl:D,fee:m.A,stateHash:(0,f.A)(r.W.State),round:$.A,nonce:N("fromId")},{tag:(0,B.A)(s.vw.ChannelSettleTx),version:(0,B.A)(1,!0),channelId:(0,c.A)(r.W.Channel),fromId:(0,c.A)(r.W.AccountAddress),initiatorAmountFinal:M.A,responderAmountFinal:M.A,ttl:D,fee:m.A,nonce:N("fromId")},{tag:(0,B.A)(s.vw.ChannelForceProgressTx),version:(0,B.A)(1,!0),channelId:(0,c.A)(r.W.Channel),fromId:(0,c.A)(r.W.AccountAddress),payload:(0,f.A)(r.W.Transaction),round:$.A,update:(0,f.A)(r.W.ContractBytearray),stateHash:(0,f.A)(r.W.State),offChainTrees:(0,f.A)(r.W.StateTrees),ttl:D,fee:m.A,nonce:N("fromId")},{tag:(0,B.A)(s.vw.ChannelOffChainTx),version:(0,B.A)(2,!0),channelId:(0,c.A)(r.W.Channel),round:$.A,stateHash:(0,f.A)(r.W.State)},{tag:(0,B.A)(s.vw.ChannelSnapshotSoloTx),version:(0,B.A)(1,!0),channelId:(0,c.A)(r.W.Channel),fromId:(0,c.A)(r.W.AccountAddress),payload:(0,f.A)(r.W.Transaction),ttl:D,fee:m.A,nonce:N("fromId")},{tag:(0,B.A)(s.vw.GaAttachTx),version:(0,B.A)(1,!0),ownerId:(0,c.A)(r.W.AccountAddress),nonce:N("ownerId"),code:(0,f.A)(r.W.ContractBytearray),authFun:P.A,ctVersion:d.Ay,fee:m.A,ttl:D,gasLimit:y.A,gasPrice:g.A,callData:(0,f.A)(r.W.ContractBytearray)},{tag:(0,B.A)(s.vw.GaMetaTx),version:(0,B.A)(2,!0),gaId:(0,c.A)(r.W.AccountAddress),authData:(0,f.A)(r.W.ContractBytearray),abiVersion:i.A,fee:m.A,gasLimit:y.A,gasPrice:g.A,tx:F},{tag:(0,B.A)(s.vw.PayingForTx),version:(0,B.A)(1,!0),payerId:(0,c.A)(r.W.AccountAddress),nonce:N("payerId"),fee:m.A,tx:F}];var K=n(55636),J=n(24377);function Q(e,t){return(0,K._w)(G,s.vw,e,t)}function X(e){return(0,K.RM)(G,s.vw,e,{unpackTx:Y,buildTx:X,rebuildTx:t=>X({...e,...t}),packEntry:J.A},r.W.Transaction)}async function Z(e){return await Promise.all(Q(e.tag,e.version).map(async([t,n])=>{null!=n.prepare&&(e[t]=await n.prepare(e[t],e,e))})),X(e)}function Y(e,t){return(0,K.Qc)(G,s.vw,e,t,{unpackTx:Y,unpackEntry:J.$})}function ee(e){const t="string"===typeof e&&e.startsWith("tx_")?(0,o.D4)(e):e;return(0,o.lF)((0,a.tW)(t),r.W.TxHash)}function te(e){let t=Y(e);if(s.vw.SignedTx===t.tag&&(t=t.encodedTx),s.vw.ContractCreateTx!==t.tag&&s.vw.GaAttachTx!==t.tag)throw new C.c1("contractTx","a contractCreateTx or gaAttach",t.tag);return(0,x.sP)(t.ownerId,t.nonce)}},94373:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(48287),o=n(55719),a=n(68156);function s(e){const t=Object.values(e).filter(e=>"number"===typeof e);return{serialize(e){if("number"!==typeof e)throw new o.c1("value","to be a number",e);if(e>255)throw new o.c1("value","to be less than 256",e);if(!(0,a.ET)(e,t))throw new o.c1("value","to be a value of Enum",e);return r.Buffer.from([e])},deserialize(e){if(1!==e.length)throw new o.c1("buffer","to have single element",e.length);const n=e[0];if(!(0,a.ET)(n,t))throw new o.c1("value","to be a value of Enum",n);return n}}}},94465:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(48287),o=n(8204),a=n(15234);const s={_getProtocolDetails(e,t){const n=o.vw.ContractCallTx===t||o.vw.GaMetaTx===t?"contract-call":"oracle-call";return(0,a.R9)(e,n).abiVersion},serialize(e,{tag:t},{consensusProtocolVersion:n=o.sF.Ceres}){const a=null!==e&&void 0!==e?e:this._getProtocolDetails(n,t);return r.Buffer.from([a])},async prepare(e,{tag:t},n){return null!=e?e:null==n.consensusProtocolVersion&&2!==Object.keys(o.sF).length&&null!=n.onNode?this._getProtocolDetails((await n.onNode.getNodeInfo()).consensusProtocolVersion,t):void 0},deserialize(e){return e[0]}}},96615:(e,t,n)=>{"use strict";n.d(t,{No:()=>l});var r=n(48287),o=n(82341),a=n(88882);const s=e=>r.Buffer.from(e).toString("base64").replaceAll("/","_").replaceAll("+","-").replace(/=+$/,""),i=e=>{var t;return s(null!==(t=o(e))&&void 0!==t?t:"")},c="eyJhbGciOiJFZERTQSIsInR5cCI6IkpXVCJ9";async function l(e,t){const n={...e};"sub_jwk"in n||(n.sub_jwk={kty:"OKP",crv:"Ed25519",x:s((0,a.D4)(t.address))}),void 0===n.sub_jwk&&delete n.sub_jwk;const r=`${c}.${i(n)}`,o=await t.sign(r);return`${r}.${s(o)}`}},97170:(e,t,n)=>{"use strict";n.d(t,{j8:()=>s,ej:()=>c});var r=n(60346);const o=e=>"bigint"===typeof e||["number","object","string"].includes(typeof e)&&(!isNaN(e)||Number.isInteger(e)||r.g.isBigNumber(e));var a=n(55719);let s=function(e){return e["AE"]="ae",e["MILI_AE"]="miliAE",e["MICRO_AE"]="microAE",e["NANO_AE"]="nanoAE",e["PICO_AE"]="picoAE",e["FEMTO_AE"]="femtoAE",e["AETTOS"]="aettos",e}({});const i={[s.AE]:0,[s.MILI_AE]:-3,[s.MICRO_AE]:-6,[s.NANO_AE]:-9,[s.PICO_AE]:-12,[s.FEMTO_AE]:-15,[s.AETTOS]:-18},c=(e,{denomination:t=s.AETTOS,targetDenomination:n=s.AETTOS})=>{if(!o(e))throw new a.c1("value","a number",e);return new r.g("bigint"===typeof e?e.toString():e).shiftedBy(i[t]-i[n]).toFixed()}},99369:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(64224),o=n(78910),a=n(35166);const s=(0,o.A)(a.W.Name),i={...s,serialize(e){return s.serialize((0,r.wJ)(e)?(0,r.bt)(e):e)}}}}]);