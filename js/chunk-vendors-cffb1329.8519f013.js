"use strict";(self["webpackChunksuperhero_wallet"]=self["webpackChunksuperhero_wallet"]||[]).push([[6513],{38196:(t,e)=>{function n(t){let e;return"undefined"!==typeof window&&"undefined"!==typeof window[t]&&(e=window[t]),e}function r(t){const e=n(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}function o(){return r("document")}function i(){return n("document")}function s(){return r("navigator")}function f(){return n("navigator")}function c(){return r("location")}function a(){return n("location")}function u(){return r("crypto")}function l(){return n("crypto")}function h(){return r("localStorage")}function d(){return n("localStorage")}Object.defineProperty(e,"__esModule",{value:!0}),e.getLocalStorage=e.getLocalStorageOrThrow=e.getCrypto=e.getCryptoOrThrow=e.getLocation=e.getLocationOrThrow=e.getNavigator=e.getNavigatorOrThrow=e.getDocument=e.getDocumentOrThrow=e.getFromWindowOrThrow=e.getFromWindow=void 0,e.getFromWindow=n,e.getFromWindowOrThrow=r,e.getDocumentOrThrow=o,e.getDocument=i,e.getNavigatorOrThrow=s,e.getNavigator=f,e.getLocationOrThrow=c,e.getLocation=a,e.getCryptoOrThrow=u,e.getCrypto=l,e.getLocalStorageOrThrow=h,e.getLocalStorage=d},42063:(t,e,n)=>{e.g=void 0;const r=n(38196);function o(){let t,e;try{t=r.getDocumentOrThrow(),e=r.getLocationOrThrow()}catch(h){return null}function n(){const n=t.getElementsByTagName("link"),r=[];for(let t=0;t<n.length;t++){const o=n[t],i=o.getAttribute("rel");if(i&&i.toLowerCase().indexOf("icon")>-1){const t=o.getAttribute("href");if(t)if(-1===t.toLowerCase().indexOf("https:")&&-1===t.toLowerCase().indexOf("http:")&&0!==t.indexOf("//")){let n=e.protocol+"//"+e.host;if(0===t.indexOf("/"))n+=t;else{const r=e.pathname.split("/");r.pop();const o=r.join("/");n+=o+"/"+t}r.push(n)}else if(0===t.indexOf("//")){const n=e.protocol+t;r.push(n)}else r.push(t)}}return r}function o(...e){const n=t.getElementsByTagName("meta");for(let t=0;t<n.length;t++){const r=n[t],o=["itemprop","property","name"].map(t=>r.getAttribute(t)).filter(t=>!!t&&e.includes(t));if(o.length&&o){const t=r.getAttribute("content");if(t)return t}}return""}function i(){let e=o("name","og:site_name","og:title","twitter:title");return e||(e=t.title),e}function s(){const t=o("description","og:description","twitter:description","keywords");return t}const f=i(),c=s(),a=e.origin,u=n(),l={description:c,url:a,icons:u,name:f};return l}e.g=o},45049:(t,e,n)=>{n.d(e,{bEt:()=>Cs,EWt:()=>Ts,Pa8:()=>_s,ZbZ:()=>re,nyL:()=>zc,Lp_:()=>Fs,EHS:()=>Hs,ewq:()=>Tf,Van:()=>Hf,muJ:()=>Wc,Xw0:()=>Ft,Wx8:()=>jt,e8_:()=>jr,K3g:()=>Ct,x0t:()=>Qs,F$L:()=>sf,YcA:()=>rf,ovp:()=>Ws,iui:()=>cf,Tw2:()=>of,wa2:()=>nf,hEn:()=>qt,PAk:()=>ir,gOF:()=>Dt,hwK:()=>Sr,jUZ:()=>Pt,ADD:()=>_t,ojD:()=>Rt,QJh:()=>xf,TZl:()=>Zs,two:()=>Gs,QV1:()=>ar,R7U:()=>It,lFF:()=>St,WWN:()=>Fr,jTh:()=>Gt,q_h:()=>Or,GuA:()=>Kf,$Bq:()=>Bf,sc_:()=>zr,xkc:()=>Ir,KLX:()=>fr,VBM:()=>Hr,aa1:()=>yf,n6V:()=>wf,Hjj:()=>Zf,$hI:()=>Wt,nYL:()=>lr,mXn:()=>sr,n3s:()=>Mt,EN$:()=>Ys,ALl:()=>Xs,m01:()=>vt,sKr:()=>_c,BdH:()=>xt,XqR:()=>Ac,_dF:()=>Ht,aRZ:()=>Et,Lln:()=>bt,sc7:()=>Pc,CTo:()=>rc,lVv:()=>mt,HNf:()=>Qf,mr0:()=>oc,w8K:()=>Xt,V7m:()=>lf,ps1:()=>hf,b07:()=>Yf,OP1:()=>Gf,tk0:()=>ic,X3c:()=>mc,FR8:()=>xc,Alu:()=>yc,FiO:()=>pc,tLy:()=>Bc,z2N:()=>Oc,oKp:()=>Ic,aF0:()=>Wf,TeY:()=>bc,kuU:()=>gc,V9G:()=>wc,iV1:()=>vc,Hbs:()=>Rc,esh:()=>dc,M8n:()=>Ec,Qhg:()=>Xf,AYU:()=>nc,h0Y:()=>$t,hVC:()=>Tr,XEe:()=>qf,PUk:()=>Lt,_Yb:()=>rt,c82:()=>zt,wYp:()=>mf,Ds_:()=>At,yy4:()=>ne,uym:()=>jc,gZm:()=>Yt,C5G:()=>af,AwN:()=>uf,IjX:()=>Ar,U0i:()=>pf});var r=n(48468),o=n(88900),i=n(38196),s=n(42063);const f="2.31.0";let c={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${f}`};class a extends Error{constructor(t,e={}){const n=(()=>e.cause instanceof a?e.cause.details:e.cause?.message?e.cause.message:e.details)(),r=(()=>e.cause instanceof a&&e.cause.docsPath||e.docsPath)(),o=c.getDocsUrl?.({...e,docsPath:r}),i=[t||"An error occurred.","",...e.metaMessages?[...e.metaMessages,""]:[],...o?[`Docs: ${o}`]:[],...n?[`Details: ${n}`]:[],...c.version?[`Version: ${c.version}`]:[]].join("\n");super(i,e.cause?{cause:e.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=r,this.metaMessages=e.metaMessages,this.name=e.name??this.name,this.shortMessage=t,this.version=f}walk(t){return u(this,t)}}function u(t,e){return e?.(t)?t:t&&"object"===typeof t&&"cause"in t&&void 0!==t.cause?u(t.cause,e):e?null:t}function l(t,{strict:e=!0}={}){return!!t&&("string"===typeof t&&(e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")))}class h extends a{constructor({size:t,targetSize:e,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${t}) exceeds padding size (${e}).`,{name:"SizeExceedsPaddingSizeError"})}}function d(t,{dir:e,size:n=32}={}){return"string"===typeof t?p(t,{dir:e,size:n}):g(t,{dir:e,size:n})}function p(t,{dir:e,size:n=32}={}){if(null===n)return t;const r=t.replace("0x","");if(r.length>2*n)throw new h({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r["right"===e?"padEnd":"padStart"](2*n,"0")}`}function g(t,{dir:e,size:n=32}={}){if(null===n)return t;if(t.length>n)throw new h({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let o=0;o<n;o++){const i="right"===e;r[i?o:n-o-1]=t[i?o:t.length-o-1]}return r}class w extends a{constructor({max:t,min:e,signed:n,size:r,value:o}){super(`Number "${o}" is not in safe ${r?`${8*r}-bit ${n?"signed":"unsigned"} `:""}integer range ${t?`(${e} to ${t})`:`(above ${e})`}`,{name:"IntegerOutOfRangeError"})}}class y extends a{constructor({givenSize:t,maxSize:e}){super(`Size cannot exceed ${e} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}}function b(t){return l(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function m(t,{size:e}){if(b(t)>e)throw new y({givenSize:b(t),maxSize:e})}function v(t,e={}){const{signed:n}=e;e.size&&m(t,{size:e.size});const r=BigInt(t);if(!n)return r;const o=(t.length-2)/2,i=(1n<<8n*BigInt(o)-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(2*o,"f")}`)-1n}function E(t,e={}){return Number(v(t,e))}const x=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function B(t,e={}){return"number"===typeof t||"bigint"===typeof t?A(t,e):"string"===typeof t?N(t,e):"boolean"===typeof t?I(t,e):O(t,e)}function I(t,e={}){const n=`0x${Number(t)}`;return"number"===typeof e.size?(m(n,{size:e.size}),d(n,{size:e.size})):n}function O(t,e={}){let n="";for(let o=0;o<t.length;o++)n+=x[t[o]];const r=`0x${n}`;return"number"===typeof e.size?(m(r,{size:e.size}),d(r,{dir:"right",size:e.size})):r}function A(t,e={}){const{signed:n,size:r}=e,o=BigInt(t);let i;r?i=n?(1n<<8n*BigInt(r)-1n)-1n:2n**(8n*BigInt(r))-1n:"number"===typeof t&&(i=BigInt(Number.MAX_SAFE_INTEGER));const s="bigint"===typeof i&&n?-i-1n:0;if(i&&o>i||o<s){const e="bigint"===typeof t?"n":"";throw new w({max:i?`${i}${e}`:void 0,min:`${s}${e}`,signed:n,size:r,value:`${t}${e}`})}const f=`0x${(n&&o<0?(1n<<BigInt(8*r))+BigInt(o):o).toString(16)}`;return r?d(f,{size:r}):f}const S=new TextEncoder;function N(t,e={}){const n=S.encode(t);return O(n,e)}const U=new TextEncoder;function R(t,e={}){return"number"===typeof t||"bigint"===typeof t?j(t,e):"boolean"===typeof t?P(t,e):l(t)?L(t,e):C(t,e)}function P(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),"number"===typeof e.size?(m(n,{size:e.size}),d(n,{size:e.size})):n}const k={zero:48,nine:57,A:65,F:70,a:97,f:102};function $(t){return t>=k.zero&&t<=k.nine?t-k.zero:t>=k.A&&t<=k.F?t-(k.A-10):t>=k.a&&t<=k.f?t-(k.a-10):void 0}function L(t,e={}){let n=t;e.size&&(m(n,{size:e.size}),n=d(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const o=r.length/2,i=new Uint8Array(o);for(let s=0,f=0;s<o;s++){const t=$(r.charCodeAt(f++)),e=$(r.charCodeAt(f++));if(void 0===t||void 0===e)throw new a(`Invalid byte sequence ("${r[f-2]}${r[f-1]}" in "${r}").`);i[s]=16*t+e}return i}function j(t,e){const n=A(t,e);return L(n)}function C(t,e={}){const n=U.encode(t);return"number"===typeof e.size?(m(n,{size:e.size}),d(n,{dir:"right",size:e.size})):n}var T=n(77238);function _(t,e){const n=e||"hex",r=(0,T.lY)(l(t,{strict:!1})?R(t):t);return"bytes"===n?r:B(r)}class D extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const e=super.get(t);return super.has(t)&&void 0!==e&&(this.delete(t),super.set(t,e)),e}set(t,e){if(super.set(t,e),this.maxSize&&this.size>this.maxSize){const t=this.keys().next().value;t&&this.delete(t)}return this}}const z=new D(8192);function F(t,e){if(z.has(`${t}.${e}`))return z.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=_(C(n),"bytes"),o=(e?n.substring(`${e}0x`.length):n).split("");for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&o[s]&&(o[s]=o[s].toUpperCase()),(15&r[s>>1])>=8&&o[s+1]&&(o[s+1]=o[s+1].toUpperCase());const i=`0x${o.join("")}`;return z.set(`${t}.${e}`,i),i}function H(t){const e=_(`0x${t.substring(4)}`).substring(26);return F(`0x${e}`)}async function q({hash:t,signature:e}){const r=l(t)?t:B(t),{secp256k1:o}=await Promise.all([n.e(7993),n.e(1247),n.e(3798),n.e(4234),n.e(3556),n.e(9662),n.e(9580),n.e(1242),n.e(6078),n.e(2113),n.e(9121),n.e(6311),n.e(9710),n.e(2694),n.e(8547),n.e(7144),n.e(4897),n.e(2252),n.e(2475),n.e(6772),n.e(3169),n.e(683),n.e(4854),n.e(6615),n.e(1540),n.e(5634),n.e(950),n.e(3284),n.e(8685),n.e(9735),n.e(2255),n.e(3813),n.e(4949),n.e(3853),n.e(9456),n.e(4267),n.e(8563),n.e(783),n.e(2161),n.e(6037),n.e(8787),n.e(8033),n.e(2944),n.e(7733),n.e(7636),n.e(61),n.e(6513),n.e(6048),n.e(2466),n.e(9830),n.e(3429)]).then(n.bind(n,52661)),i=(()=>{if("object"===typeof e&&"r"in e&&"s"in e){const{r:t,s:n,v:r,yParity:i}=e,s=Number(i??r),f=V(s);return new o.Signature(v(t),v(n)).addRecoveryBit(f)}const t=l(e)?e:B(e);if(65!==b(t))throw new Error("invalid signature length");const n=E(`0x${t.slice(130)}`),r=V(n);return o.Signature.fromCompact(t.substring(2,130)).addRecoveryBit(r)})(),s=i.recoverPublicKey(r.substring(2)).toHex(!1);return`0x${s}`}function V(t){if(0===t||1===t)return t;if(27===t)return 0;if(28===t)return 1;throw new Error("Invalid yParityOrV value")}async function M({hash:t,signature:e}){return H(await q({hash:t,signature:e}))}var K=n(66339),Z=n(95414),G=n(84172),W=n(57324),Y=n(38236),X=n(35484),J=n(43228),Q=n(92493),tt=n(65606),et=n(48287)["Buffer"];const nt=":";function rt(t){const[e,n]=t.split(nt);return{namespace:e,reference:n}}function ot(t,e){return t.includes(":")?[t]:e.chains||[]}var it=Object.defineProperty,st=Object.defineProperties,ft=Object.getOwnPropertyDescriptors,ct=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,ut=Object.prototype.propertyIsEnumerable,lt=(t,e,n)=>e in t?it(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ht=(t,e)=>{for(var n in e||(e={}))at.call(e,n)&&lt(t,n,e[n]);if(ct)for(var n of ct(e))ut.call(e,n)&&lt(t,n,e[n]);return t},dt=(t,e)=>st(t,ft(e)),pt=(t,e,n)=>lt(t,"symbol"!=typeof e?e+"":e,n);const gt="ReactNative",wt={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},yt="js";function bt(){return typeof tt<"u"&&typeof tt.versions<"u"&&typeof tt.versions.node<"u"}function mt(){return!(0,i.getDocument)()&&!!(0,i.getNavigator)()&&navigator.product===gt}function vt(){return mt()&&typeof n.g<"u"&&typeof(null==n.g?void 0:n.g.Platform)<"u"&&"android"===(null==n.g?void 0:n.g.Platform.OS)}function Et(){return mt()&&typeof n.g<"u"&&typeof(null==n.g?void 0:n.g.Platform)<"u"&&"ios"===(null==n.g?void 0:n.g.Platform.OS)}function xt(){return!bt()&&!!(0,i.getNavigator)()&&!!(0,i.getDocument)()}function Bt(){return mt()?wt.reactNative:bt()?wt.node:xt()?wt.browser:wt.unknown}function It(){var t;try{return mt()&&typeof n.g<"u"&&typeof(null==n.g?void 0:n.g.Application)<"u"?null==(t=n.g.Application)?void 0:t.applicationId:void 0}catch{return}}function Ot(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const t=e[r];void 0!==t&&n.set(r,t)}return n.toString()}function At(t){var e,n;const r=St();try{return null!=t&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),null!=(e=t?.icons)&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(t=>""!==t)),dt(ht(ht({},r),t),{url:t?.url||r.url,name:t?.name||r.name,description:t?.description||r.description,icons:null!=(n=t?.icons)&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(o){return console.warn("Error populating app metadata",o),t||r}}function St(){return(0,s.g)()||{name:"",description:"",url:"",icons:[""]}}function Nt(){if(Bt()===wt.reactNative&&typeof n.g<"u"&&typeof(null==n.g?void 0:n.g.Platform)<"u"){const{OS:t,Version:e}=n.g.Platform;return[t,e].join("-")}const t=(0,r.o0)();if(null===t)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return"browser"===t.type?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Ut(){var t;const e=Bt();return e===wt.browser?[e,(null==(t=(0,i.getLocation)())?void 0:t.host)||"unknown"].join(":"):e}function Rt(t,e,n){const r=Nt(),o=Ut();return[[t,e].join("-"),[yt,n].join("-"),r,o].join("/")}function Pt({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:o,projectId:i,useOnCloseEvent:s,bundleId:f,packageName:c}){const a=n.split("?"),u=Rt(t,e,r),l={auth:o,ua:u,projectId:i,useOnCloseEvent:s||void 0,packageName:c||void 0,bundleId:f||void 0},h=Ot(a[1]||"",l);return a[0]+"?"+h}function kt(t,e){return t.filter(t=>e.includes(t)).length===t.length}function $t(t){return Object.fromEntries(t.entries())}function Lt(t){return new Map(Object.entries(t))}function jt(t=o.FIVE_MINUTES,e){const n=(0,o.toMiliseconds)(t||o.FIVE_MINUTES);let r,i,s,f;return{resolve:t=>{s&&r&&(clearTimeout(s),r(t),f=Promise.resolve(t))},reject:t=>{s&&i&&(clearTimeout(s),i(t))},done:()=>new Promise((t,o)=>{if(f)return t(f);s=setTimeout(()=>{const t=new Error(e);f=Promise.reject(t),o(t)},n),r=t,i=o})}}function Ct(t,e,n){return new Promise(async(r,o)=>{const i=setTimeout(()=>o(new Error(n)),e);try{const e=await t;r(e)}catch(s){o(s)}clearTimeout(i)})}function Tt(t,e){if("string"==typeof e&&e.startsWith(`${t}:`))return e;if("topic"===t.toLowerCase()){if("string"!=typeof e)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}if("id"===t.toLowerCase()){if("number"!=typeof e)throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function _t(t){return Tt("topic",t)}function Dt(t){return Tt("id",t)}function zt(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if("topic"===e&&"string"==typeof n)r.topic=n;else{if("id"!==e||!Number.isInteger(Number(n)))throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);r.id=Number(n)}return r}function Ft(t,e){return(0,o.fromMiliseconds)((e||Date.now())+(0,o.toMiliseconds)(t))}function Ht(t){return Date.now()>=(0,o.toMiliseconds)(t)}function qt(t,e){return`${t}${e?`:${e}`:""}`}function Vt(t=[],e=[]){return[...new Set([...t,...e])]}async function Mt({id:t,topic:e,wcDeepLink:r}){var o;try{if(!r)return;const s="string"==typeof r?JSON.parse(r):r,f=s?.href;if("string"!=typeof f)return;const c=Kt(f,t,e),a=Bt();if(a===wt.browser){if(null==(o=(0,i.getDocument)())||!o.hasFocus())return void console.warn("Document does not have focus, skipping deeplink.");Zt(c)}else a===wt.reactNative&&typeof(null==n.g?void 0:n.g.Linking)<"u"&&await n.g.Linking.openURL(c)}catch(s){console.error(s)}}function Kt(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let o=`${t}`;if(t.startsWith("https://t.me")){const e=t.includes("?")?"&startapp=":"?startapp=";o=`${o}${e}${te(r,!0)}`}else o=`${o}/wc?${r}`;return o}function Zt(t){let e="_self";Qt()?e="_top":(Jt()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function Gt(t,e){let n="";try{if(xt()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function Wt(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function Yt(){return typeof crypto<"u"&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}function Xt(){return typeof tt<"u"&&"true"===tt.env.IS_VITEST}function Jt(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function Qt(){try{return window.self!==window.top}catch{return!1}}function te(t,e=!1){const n=et.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function ee(t){return et.from(t,"base64").toString("utf-8")}function ne(t){return new Promise(e=>setTimeout(e,t))}class re{constructor({limit:t}){pt(this,"limit"),pt(this,"set"),this.limit=t,this.set=new Set}add(t){if(!this.set.has(t)){if(this.set.size>=this.limit){const t=this.set.values().next().value;t&&this.set.delete(t)}this.set.add(t)}}has(t){return this.set.has(t)}}const oe=BigInt(2**32-1),ie=BigInt(32);function se(t,e=!1){return e?{h:Number(t&oe),l:Number(t>>ie&oe)}:{h:0|Number(t>>ie&oe),l:0|Number(t&oe)}}function fe(t,e=!1){const n=t.length;let r=new Uint32Array(n),o=new Uint32Array(n);for(let i=0;i<n;i++){const{h:n,l:s}=se(t[i],e);[r[i],o[i]]=[n,s]}return[r,o]}const ce=(t,e,n)=>t>>>n,ae=(t,e,n)=>t<<32-n|e>>>n,ue=(t,e,n)=>t>>>n|e<<32-n,le=(t,e,n)=>t<<32-n|e>>>n,he=(t,e,n)=>t<<64-n|e>>>n-32,de=(t,e,n)=>t>>>n-32|e<<64-n,pe=(t,e)=>e,ge=(t,e)=>t,we=(t,e,n)=>t<<n|e>>>32-n,ye=(t,e,n)=>e<<n|t>>>32-n,be=(t,e,n)=>e<<n-32|t>>>64-n,me=(t,e,n)=>t<<n-32|e>>>64-n;function ve(t,e,n,r){const o=(e>>>0)+(r>>>0);return{h:t+n+(o/2**32|0)|0,l:0|o}}const Ee=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),xe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Be=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Ie=(t,e,n,r,o)=>e+n+r+o+(t/2**32|0)|0,Oe=(t,e,n,r,o)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(o>>>0),Ae=(t,e,n,r,o,i)=>e+n+r+o+i+(t/2**32|0)|0,Se="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function Ne(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function Ue(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Re(t,...e){if(!Ne(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Pe(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.createHasher");Ue(t.outputLen),Ue(t.blockLen)}function ke(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function $e(t,e){Re(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Le(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function je(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Ce(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Te(t,e){return t<<32-e|t>>>e}const _e=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function De(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const ze=_e?t=>t:t=>De(t);function Fe(t){for(let e=0;e<t.length;e++)t[e]=De(t[e]);return t}const He=_e?t=>t:Fe,qe="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,Ve=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Me(t){if(Re(t),qe)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=Ve[t[n]];return e}const Ke={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ze(t){return t>=Ke._0&&t<=Ke._9?t-Ke._0:t>=Ke.A&&t<=Ke.F?t-(Ke.A-10):t>=Ke.a&&t<=Ke.f?t-(Ke.a-10):void 0}function Ge(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);if(qe)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let o=0,i=0;o<n;o++,i+=2){const e=Ze(t.charCodeAt(i)),n=Ze(t.charCodeAt(i+1));if(void 0===e||void 0===n){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}r[o]=16*e+n}return r}function We(t){if("string"!=typeof t)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(t))}function Ye(t){return"string"==typeof t&&(t=We(t)),Re(t),t}function Xe(...t){let e=0;for(let r=0;r<t.length;r++){const n=t[r];Re(n),e+=n.length}const n=new Uint8Array(e);for(let r=0,o=0;r<t.length;r++){const e=t[r];n.set(e,o),o+=e.length}return n}class Je{}function Qe(t){const e=e=>t().update(Ye(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function tn(t){const e=(e,n)=>t(n).update(Ye(e)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e}function en(t=32){if(Se&&"function"==typeof Se.getRandomValues)return Se.getRandomValues(new Uint8Array(t));if(Se&&"function"==typeof Se.randomBytes)return Uint8Array.from(Se.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const nn=BigInt(0),rn=BigInt(1),on=BigInt(2),sn=BigInt(7),fn=BigInt(256),cn=BigInt(113),an=[],un=[],ln=[];for(let Yc=0,Xc=rn,Jc=1,Qc=0;Yc<24;Yc++){[Jc,Qc]=[Qc,(2*Jc+3*Qc)%5],an.push(2*(5*Qc+Jc)),un.push((Yc+1)*(Yc+2)/2%64);let t=nn;for(let e=0;e<7;e++)Xc=(Xc<<rn^(Xc>>sn)*cn)%fn,Xc&on&&(t^=rn<<(rn<<BigInt(e))-rn);ln.push(t)}const hn=fe(ln,!0),dn=hn[0],pn=hn[1],gn=(t,e,n)=>n>32?be(t,e,n):we(t,e,n),wn=(t,e,n)=>n>32?me(t,e,n):ye(t,e,n);function yn(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let r=0;r<10;r++)n[r]=t[r]^t[r+10]^t[r+20]^t[r+30]^t[r+40];for(let r=0;r<10;r+=2){const e=(r+8)%10,o=(r+2)%10,i=n[o],s=n[o+1],f=gn(i,s,1)^n[e],c=wn(i,s,1)^n[e+1];for(let n=0;n<50;n+=10)t[r+n]^=f,t[r+n+1]^=c}let e=t[2],o=t[3];for(let n=0;n<24;n++){const r=un[n],i=gn(e,o,r),s=wn(e,o,r),f=an[n];e=t[f],o=t[f+1],t[f]=i,t[f+1]=s}for(let r=0;r<50;r+=10){for(let e=0;e<10;e++)n[e]=t[r+e];for(let e=0;e<10;e++)t[r+e]^=~n[(e+2)%10]&n[(e+4)%10]}t[0]^=dn[r],t[1]^=pn[r]}je(n)}class bn extends Je{constructor(t,e,n,r=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=r,this.rounds=o,Ue(n),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Le(this.state)}clone(){return this._cloneInto()}keccak(){He(this.state32),yn(this.state32,this.rounds),He(this.state32),this.posOut=0,this.pos=0}update(t){ke(this),t=Ye(t),Re(t);const{blockLen:e,state:n}=this,r=t.length;for(let o=0;o<r;){const i=Math.min(e-this.pos,r-o);for(let e=0;e<i;e++)n[this.pos++]^=t[o++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:r}=this;t[n]^=e,0!==(128&e)&&n===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){ke(this,!1),Re(t),this.finish();const e=this.state,{blockLen:n}=this;for(let r=0,o=t.length;r<o;){this.posOut>=n&&this.keccak();const i=Math.min(n-this.posOut,o-r);t.set(e.subarray(this.posOut,this.posOut+i),r),this.posOut+=i,r+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Ue(t),this.xofInto(new Uint8Array(t))}digestInto(t){if($e(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,je(this.state)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:r,rounds:o,enableXOF:i}=this;return t||(t=new bn(e,n,r,i,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=n,t.outputLen=r,t.enableXOF=i,t.destroyed=this.destroyed,t}}const mn=(t,e,n)=>Qe(()=>new bn(e,t,n)),vn=mn(1,136,32);function En(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),f=Number(n&i),c=r?4:0,a=r?0:4;t.setUint32(e+c,s,r),t.setUint32(e+a,f,r)}function xn(t,e,n){return t&e^~t&n}function Bn(t,e,n){return t&e^t&n^e&n}class In extends Je{constructor(t,e,n,r){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.buffer=new Uint8Array(t),this.view=Ce(this.buffer)}update(t){ke(this),t=Ye(t),Re(t);const{view:e,buffer:n,blockLen:r}=this,o=t.length;for(let i=0;i<o;){const s=Math.min(r-this.pos,o-i);if(s===r){const e=Ce(t);for(;r<=o-i;i+=r)this.process(e,i);continue}n.set(t.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ke(this),$e(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:o}=this;let{pos:i}=this;e[i++]=128,je(this.buffer.subarray(i)),this.padOffset>r-i&&(this.process(n,0),i=0);for(let u=i;u<r;u++)e[u]=0;En(n,r-8,BigInt(8*this.length),o),this.process(n,0);const s=Ce(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=f/4,a=this.get();if(c>a.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<c;u++)s.setUint32(4*u,a[u],o)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:o,destroyed:i,pos:s}=this;return t.destroyed=i,t.finished=o,t.length=r,t.pos=s,r%e&&t.buffer.set(n),t}clone(){return this._cloneInto()}}const On=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),An=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Sn=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Nn=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Un=new Uint32Array(64);class Rn extends In{constructor(t=32){super(64,t,8,!1),this.A=0|On[0],this.B=0|On[1],this.C=0|On[2],this.D=0|On[3],this.E=0|On[4],this.F=0|On[5],this.G=0|On[6],this.H=0|On[7]}get(){const{A:t,B:e,C:n,D:r,E:o,F:i,G:s,H:f}=this;return[t,e,n,r,o,i,s,f]}set(t,e,n,r,o,i,s,f){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|o,this.F=0|i,this.G=0|s,this.H=0|f}process(t,e){for(let u=0;u<16;u++,e+=4)Un[u]=t.getUint32(e,!1);for(let u=16;u<64;u++){const t=Un[u-15],e=Un[u-2],n=Te(t,7)^Te(t,18)^t>>>3,r=Te(e,17)^Te(e,19)^e>>>10;Un[u]=r+Un[u-7]+n+Un[u-16]|0}let{A:n,B:r,C:o,D:i,E:s,F:f,G:c,H:a}=this;for(let u=0;u<64;u++){const t=Te(s,6)^Te(s,11)^Te(s,25),e=a+t+xn(s,f,c)+Nn[u]+Un[u]|0,l=(Te(n,2)^Te(n,13)^Te(n,22))+Bn(n,r,o)|0;a=c,c=f,f=s,s=i+e|0,i=o,o=r,r=n,n=e+l|0}n=n+this.A|0,r=r+this.B|0,o=o+this.C|0,i=i+this.D|0,s=s+this.E|0,f=f+this.F|0,c=c+this.G|0,a=a+this.H|0,this.set(n,r,o,i,s,f,c,a)}roundClean(){je(Un)}destroy(){this.set(0,0,0,0,0,0,0,0),je(this.buffer)}}const Pn=fe(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),kn=Pn[0],$n=Pn[1],Ln=new Uint32Array(80),jn=new Uint32Array(80);class Cn extends In{constructor(t=64){super(128,t,16,!1),this.Ah=0|Sn[0],this.Al=0|Sn[1],this.Bh=0|Sn[2],this.Bl=0|Sn[3],this.Ch=0|Sn[4],this.Cl=0|Sn[5],this.Dh=0|Sn[6],this.Dl=0|Sn[7],this.Eh=0|Sn[8],this.El=0|Sn[9],this.Fh=0|Sn[10],this.Fl=0|Sn[11],this.Gh=0|Sn[12],this.Gl=0|Sn[13],this.Hh=0|Sn[14],this.Hl=0|Sn[15]}get(){const{Ah:t,Al:e,Bh:n,Bl:r,Ch:o,Cl:i,Dh:s,Dl:f,Eh:c,El:a,Fh:u,Fl:l,Gh:h,Gl:d,Hh:p,Hl:g}=this;return[t,e,n,r,o,i,s,f,c,a,u,l,h,d,p,g]}set(t,e,n,r,o,i,s,f,c,a,u,l,h,d,p,g){this.Ah=0|t,this.Al=0|e,this.Bh=0|n,this.Bl=0|r,this.Ch=0|o,this.Cl=0|i,this.Dh=0|s,this.Dl=0|f,this.Eh=0|c,this.El=0|a,this.Fh=0|u,this.Fl=0|l,this.Gh=0|h,this.Gl=0|d,this.Hh=0|p,this.Hl=0|g}process(t,e){for(let b=0;b<16;b++,e+=4)Ln[b]=t.getUint32(e),jn[b]=t.getUint32(e+=4);for(let b=16;b<80;b++){const t=0|Ln[b-15],e=0|jn[b-15],n=ue(t,e,1)^ue(t,e,8)^ce(t,e,7),r=le(t,e,1)^le(t,e,8)^ae(t,e,7),o=0|Ln[b-2],i=0|jn[b-2],s=ue(o,i,19)^he(o,i,61)^ce(o,i,6),f=le(o,i,19)^de(o,i,61)^ae(o,i,6),c=Be(r,f,jn[b-7],jn[b-16]),a=Ie(c,n,s,Ln[b-7],Ln[b-16]);Ln[b]=0|a,jn[b]=0|c}let{Ah:n,Al:r,Bh:o,Bl:i,Ch:s,Cl:f,Dh:c,Dl:a,Eh:u,El:l,Fh:h,Fl:d,Gh:p,Gl:g,Hh:w,Hl:y}=this;for(let b=0;b<80;b++){const t=ue(u,l,14)^ue(u,l,18)^he(u,l,41),e=le(u,l,14)^le(u,l,18)^de(u,l,41),m=u&h^~u&p,v=l&d^~l&g,E=Oe(y,e,v,$n[b],jn[b]),x=Ae(E,w,t,m,kn[b],Ln[b]),B=0|E,I=ue(n,r,28)^he(n,r,34)^he(n,r,39),O=le(n,r,28)^de(n,r,34)^de(n,r,39),A=n&o^n&s^o&s,S=r&i^r&f^i&f;w=0|p,y=0|g,p=0|h,g=0|d,h=0|u,d=0|l,({h:u,l}=ve(0|c,0|a,0|x,0|B)),c=0|s,a=0|f,s=0|o,f=0|i,o=0|n,i=0|r;const N=Ee(B,O,S);n=xe(N,x,I,A),r=0|N}({h:n,l:r}=ve(0|this.Ah,0|this.Al,0|n,0|r)),({h:o,l:i}=ve(0|this.Bh,0|this.Bl,0|o,0|i)),({h:s,l:f}=ve(0|this.Ch,0|this.Cl,0|s,0|f)),({h:c,l:a}=ve(0|this.Dh,0|this.Dl,0|c,0|a)),({h:u,l}=ve(0|this.Eh,0|this.El,0|u,0|l)),({h,l:d}=ve(0|this.Fh,0|this.Fl,0|h,0|d)),({h:p,l:g}=ve(0|this.Gh,0|this.Gl,0|p,0|g)),({h:w,l:y}=ve(0|this.Hh,0|this.Hl,0|w,0|y)),this.set(n,r,o,i,s,f,c,a,u,l,h,d,p,g,w,y)}roundClean(){je(Ln,jn)}destroy(){je(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Tn extends Cn{constructor(){super(48),this.Ah=0|An[0],this.Al=0|An[1],this.Bh=0|An[2],this.Bl=0|An[3],this.Ch=0|An[4],this.Cl=0|An[5],this.Dh=0|An[6],this.Dl=0|An[7],this.Eh=0|An[8],this.El=0|An[9],this.Fh=0|An[10],this.Fl=0|An[11],this.Gh=0|An[12],this.Gl=0|An[13],this.Hh=0|An[14],this.Hl=0|An[15]}}const _n=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class Dn extends Cn{constructor(){super(32),this.Ah=0|_n[0],this.Al=0|_n[1],this.Bh=0|_n[2],this.Bl=0|_n[3],this.Ch=0|_n[4],this.Cl=0|_n[5],this.Dh=0|_n[6],this.Dl=0|_n[7],this.Eh=0|_n[8],this.El=0|_n[9],this.Fh=0|_n[10],this.Fl=0|_n[11],this.Gh=0|_n[12],this.Gl=0|_n[13],this.Hh=0|_n[14],this.Hl=0|_n[15]}}const zn=Qe(()=>new Rn),Fn=Qe(()=>new Cn),Hn=Qe(()=>new Tn),qn=Qe(()=>new Dn),Vn=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Mn=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Kn=new Uint32Array(32);function Zn(t,e,n,r,o,i){const s=o[i],f=o[i+1];let c=Kn[2*t],a=Kn[2*t+1],u=Kn[2*e],l=Kn[2*e+1],h=Kn[2*n],d=Kn[2*n+1],p=Kn[2*r],g=Kn[2*r+1],w=Ee(c,u,s);a=xe(w,a,l,f),c=0|w,({Dh:g,Dl:p}={Dh:g^a,Dl:p^c}),({Dh:g,Dl:p}={Dh:pe(g,p),Dl:ge(g)}),({h:d,l:h}=ve(d,h,g,p)),({Bh:l,Bl:u}={Bh:l^d,Bl:u^h}),({Bh:l,Bl:u}={Bh:ue(l,u,24),Bl:le(l,u,24)}),Kn[2*t]=c,Kn[2*t+1]=a,Kn[2*e]=u,Kn[2*e+1]=l,Kn[2*n]=h,Kn[2*n+1]=d,Kn[2*r]=p,Kn[2*r+1]=g}function Gn(t,e,n,r,o,i){const s=o[i],f=o[i+1];let c=Kn[2*t],a=Kn[2*t+1],u=Kn[2*e],l=Kn[2*e+1],h=Kn[2*n],d=Kn[2*n+1],p=Kn[2*r],g=Kn[2*r+1],w=Ee(c,u,s);a=xe(w,a,l,f),c=0|w,({Dh:g,Dl:p}={Dh:g^a,Dl:p^c}),({Dh:g,Dl:p}={Dh:ue(g,p,16),Dl:le(g,p,16)}),({h:d,l:h}=ve(d,h,g,p)),({Bh:l,Bl:u}={Bh:l^d,Bl:u^h}),({Bh:l,Bl:u}={Bh:he(l,u,63),Bl:de(l,u,63)}),Kn[2*t]=c,Kn[2*t+1]=a,Kn[2*e]=u,Kn[2*e+1]=l,Kn[2*n]=h,Kn[2*n+1]=d,Kn[2*r]=p,Kn[2*r+1]=g}function Wn(t,e={},n,r,o){if(Ue(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:s,personalization:f}=e;if(void 0!==i&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(void 0!==s&&s.length!==r)throw new Error("salt must be undefined or "+r);if(void 0!==f&&f.length!==o)throw new Error("personalization must be undefined or "+o)}class Yn extends Je{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Ue(t),Ue(e),this.blockLen=t,this.outputLen=e,this.buffer=new Uint8Array(t),this.buffer32=Le(this.buffer)}update(t){ke(this),t=Ye(t),Re(t);const{blockLen:e,buffer:n,buffer32:r}=this,o=t.length,i=t.byteOffset,s=t.buffer;for(let f=0;f<o;){this.pos===e&&(He(r),this.compress(r,0,!1),He(r),this.pos=0);const c=Math.min(e-this.pos,o-f),a=i+f;if(c===e&&!(a%4)&&f+c<o){const t=new Uint32Array(s,a,Math.floor((o-f)/4));He(t);for(let n=0;f+e<o;n+=r.length,f+=e)this.length+=e,this.compress(t,n,!1);He(t);continue}n.set(t.subarray(f,f+c),this.pos),this.pos+=c,this.length+=c,f+=c}return this}digestInto(t){ke(this),$e(t,this);const{pos:e,buffer32:n}=this;this.finished=!0,je(this.buffer.subarray(e)),He(n),this.compress(n,0,!0),He(n);const r=Le(t);this.get().forEach((t,e)=>r[e]=ze(t))}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){const{buffer:e,length:n,finished:r,destroyed:o,outputLen:i,pos:s}=this;return t||(t=new this.constructor({dkLen:i})),t.set(...this.get()),t.buffer.set(e),t.destroyed=o,t.finished=r,t.length=n,t.pos=s,t.outputLen=i,t}clone(){return this._cloneInto()}}class Xn extends Yn{constructor(t={}){const e=void 0===t.dkLen?64:t.dkLen;super(128,e),this.v0l=0|Mn[0],this.v0h=0|Mn[1],this.v1l=0|Mn[2],this.v1h=0|Mn[3],this.v2l=0|Mn[4],this.v2h=0|Mn[5],this.v3l=0|Mn[6],this.v3h=0|Mn[7],this.v4l=0|Mn[8],this.v4h=0|Mn[9],this.v5l=0|Mn[10],this.v5h=0|Mn[11],this.v6l=0|Mn[12],this.v6h=0|Mn[13],this.v7l=0|Mn[14],this.v7h=0|Mn[15],Wn(e,t,64,16,16);let{key:n,personalization:r,salt:o}=t,i=0;if(void 0!==n&&(n=Ye(n),i=n.length),this.v0l^=this.outputLen|i<<8|65536|1<<24,void 0!==o){o=Ye(o);const t=Le(o);this.v4l^=ze(t[0]),this.v4h^=ze(t[1]),this.v5l^=ze(t[2]),this.v5h^=ze(t[3])}if(void 0!==r){r=Ye(r);const t=Le(r);this.v6l^=ze(t[0]),this.v6h^=ze(t[1]),this.v7l^=ze(t[2]),this.v7h^=ze(t[3])}if(void 0!==n){const t=new Uint8Array(this.blockLen);t.set(n),this.update(t)}}get(){let{v0l:t,v0h:e,v1l:n,v1h:r,v2l:o,v2h:i,v3l:s,v3h:f,v4l:c,v4h:a,v5l:u,v5h:l,v6l:h,v6h:d,v7l:p,v7h:g}=this;return[t,e,n,r,o,i,s,f,c,a,u,l,h,d,p,g]}set(t,e,n,r,o,i,s,f,c,a,u,l,h,d,p,g){this.v0l=0|t,this.v0h=0|e,this.v1l=0|n,this.v1h=0|r,this.v2l=0|o,this.v2h=0|i,this.v3l=0|s,this.v3h=0|f,this.v4l=0|c,this.v4h=0|a,this.v5l=0|u,this.v5h=0|l,this.v6l=0|h,this.v6h=0|d,this.v7l=0|p,this.v7h=0|g}compress(t,e,n){this.get().forEach((t,e)=>Kn[e]=t),Kn.set(Mn,16);let{h:r,l:o}=se(BigInt(this.length));Kn[24]=Mn[8]^o,Kn[25]=Mn[9]^r,n&&(Kn[28]=~Kn[28],Kn[29]=~Kn[29]);let i=0;const s=Vn;for(let f=0;f<12;f++)Zn(0,4,8,12,t,e+2*s[i++]),Gn(0,4,8,12,t,e+2*s[i++]),Zn(1,5,9,13,t,e+2*s[i++]),Gn(1,5,9,13,t,e+2*s[i++]),Zn(2,6,10,14,t,e+2*s[i++]),Gn(2,6,10,14,t,e+2*s[i++]),Zn(3,7,11,15,t,e+2*s[i++]),Gn(3,7,11,15,t,e+2*s[i++]),Zn(0,5,10,15,t,e+2*s[i++]),Gn(0,5,10,15,t,e+2*s[i++]),Zn(1,6,11,12,t,e+2*s[i++]),Gn(1,6,11,12,t,e+2*s[i++]),Zn(2,7,8,13,t,e+2*s[i++]),Gn(2,7,8,13,t,e+2*s[i++]),Zn(3,4,9,14,t,e+2*s[i++]),Gn(3,4,9,14,t,e+2*s[i++]);this.v0l^=Kn[0]^Kn[16],this.v0h^=Kn[1]^Kn[17],this.v1l^=Kn[2]^Kn[18],this.v1h^=Kn[3]^Kn[19],this.v2l^=Kn[4]^Kn[20],this.v2h^=Kn[5]^Kn[21],this.v3l^=Kn[6]^Kn[22],this.v3h^=Kn[7]^Kn[23],this.v4l^=Kn[8]^Kn[24],this.v4h^=Kn[9]^Kn[25],this.v5l^=Kn[10]^Kn[26],this.v5h^=Kn[11]^Kn[27],this.v6l^=Kn[12]^Kn[28],this.v6h^=Kn[13]^Kn[29],this.v7l^=Kn[14]^Kn[30],this.v7h^=Kn[15]^Kn[31],je(Kn)}destroy(){this.destroyed=!0,je(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Jn=tn(t=>new Xn(t)),Qn="https://rpc.walletconnect.org/v1";function tr(t){const e=`Ethereum Signed Message:\n${t.length}`,n=(new TextEncoder).encode(e+t);return"0x"+et.from(vn(n)).toString("hex")}async function er(t,e,n,r,o,i){switch(n.t){case"eip191":return await nr(t,e,n.s);case"eip1271":return await rr(t,e,n.s,r,o,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function nr(t,e,n){return(await M({hash:tr(e),signature:n})).toLowerCase()===t.toLowerCase()}async function rr(t,e,n,r,o,i){const s=rt(r);if(!s.namespace||!s.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const s="0x1626ba7e",f="0000000000000000000000000000000000000000000000000000000000000040",c=n.substring(2),a=(c.length/2).toString(16).padStart(64,"0"),u=(e.startsWith("0x")?e:tr(e)).substring(2),l=s+u+f+a+c,h=await fetch(`${i||Qn}/?chainId=${r}&projectId=${o}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:or(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:l},"latest"]})}),{result:d}=await h.json();return!!d&&d.slice(0,s.length).toLowerCase()===s.toLowerCase()}catch(f){return console.error("isValidEip1271Signature: ",f),!1}}function or(){return Date.now()+Math.floor(1e3*Math.random())}function ir(t){const e=atob(t),n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);const r=n[0];if(0===r)throw new Error("No signatures found");const o=1+64*r;if(n.length<o)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=et.from(t,"base64").slice(1,65);return K.A.encode(i)}function sr(t){const e=new Uint8Array(et.from(t,"base64")),n=Array.from("TransactionData::").map(t=>t.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const o=Jn(r,{dkLen:32});return K.A.encode(o)}function fr(t){const e=new Uint8Array(zn(cr(t)));return K.A.encode(e)}function cr(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if("object"==typeof t&&null!=t&&t.data)return new Uint8Array(Object.values(t.data));if("object"==typeof t&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function ar(t){const e=et.from(t,"base64"),n=(0,Z.D)(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=(0,G.l)(n),o=et.from("TX"),i=et.concat([o,et.from(r)]),s=qn(i);return W.RG.encode(s).replace(/=+$/,"")}function ur(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),et.from(e)}function lr(t){const e=et.from(t.signed.bodyBytes,"base64"),n=et.from(t.signed.authInfoBytes,"base64"),r=et.from(t.signature.signature,"base64"),o=[];o.push(et.from([10])),o.push(ur(e.length)),o.push(e),o.push(et.from([18])),o.push(ur(n.length)),o.push(n),o.push(et.from([26])),o.push(ur(r.length)),o.push(r);const i=et.concat(o),s=zn(i);return et.from(s).toString("hex").toUpperCase()}var hr=Object.defineProperty,dr=Object.defineProperties,pr=Object.getOwnPropertyDescriptors,gr=Object.getOwnPropertySymbols,wr=Object.prototype.hasOwnProperty,yr=Object.prototype.propertyIsEnumerable,br=(t,e,n)=>e in t?hr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mr=(t,e)=>{for(var n in e||(e={}))wr.call(e,n)&&br(t,n,e[n]);if(gr)for(var n of gr(e))yr.call(e,n)&&br(t,n,e[n]);return t},vr=(t,e)=>dr(t,pr(e));const Er="did:pkh:",xr=t=>t?.split(":"),Br=t=>{const e=t&&xr(t);if(e)return t.includes(Er)?e[3]:e[1]},Ir=t=>{const e=t&&xr(t);if(e)return e[2]+":"+e[3]},Or=t=>{const e=t&&xr(t);if(e)return e.pop()};async function Ar(t){const{cacao:e,projectId:n}=t,{s:r,p:o}=e,i=Sr(o,o.iss),s=Or(o.iss);return await er(s,i,r,Ir(o.iss),n)}const Sr=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=Or(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let o=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,s=`Version: ${t.version}`,f=`Chain ID: ${Br(e)}`,c=`Nonce: ${t.nonce}`,a=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,l=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,d=t.resources?`Resources:${t.resources.map(t=>`\n- ${t}`).join("")}`:void 0,p=Hr(t.resources);if(p){const t=Lr(p);o=Dr(o,t)}return[n,r,"",o,"",i,s,f,c,a,u,l,h,d].filter(t=>null!=t).join("\n")};function Nr(t){return et.from(JSON.stringify(t)).toString("base64")}function Ur(t){return JSON.parse(et.from(t,"base64").toString("utf-8"))}function Rr(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(null==e||!e.length)throw new Error("No resources found in `att` property");e.forEach(e=>{const n=t.att[e];if(Array.isArray(n))throw new Error(`Resource must be an object: ${e}`);if("object"!=typeof n)throw new Error(`Resource must be an object: ${e}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${e}`);Object.keys(n).forEach(t=>{const e=n[t];if(!Array.isArray(e))throw new Error(`Ability limits ${t} must be an array of objects, found: ${e}`);if(!e.length)throw new Error(`Value of ${t} is empty array, must be an array with objects`);e.forEach(e=>{if("object"!=typeof e)throw new Error(`Ability limits (${t}) must be an array of objects, found: ${e}`)})})})}function Pr(t,e,n,r={}){return n?.sort((t,e)=>t.localeCompare(e)),{att:{[t]:kr(e,n,r)}}}function kr(t,e,n={}){e=e?.sort((t,e)=>t.localeCompare(e));const r=e.map(e=>({[`${t}/${e}`]:[n]}));return Object.assign({},...r)}function $r(t){return Rr(t),`urn:recap:${Nr(t).replace(/=/g,"")}`}function Lr(t){const e=Ur(t.replace("urn:recap:",""));return Rr(e),e}function jr(t,e,n){const r=Pr(t,e,n);return $r(r)}function Cr(t){return t&&t.includes("urn:recap:")}function Tr(t,e){const n=Lr(t),r=Lr(e),o=_r(n,r);return $r(o)}function _r(t,e){Rr(t),Rr(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((t,e)=>t.localeCompare(e)),r={att:{}};return n.forEach(n=>{var o,i;Object.keys((null==(o=t.att)?void 0:o[n])||{}).concat(Object.keys((null==(i=e.att)?void 0:i[n])||{})).sort((t,e)=>t.localeCompare(e)).forEach(o=>{var i,s;r.att[n]=vr(mr({},r.att[n]),{[o]:(null==(i=t.att[n])?void 0:i[o])||(null==(s=e.att[n])?void 0:s[o])})})}),r}function Dr(t="",e){Rr(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let o=0;Object.keys(e.att).forEach(t=>{const n=Object.keys(e.att[t]).map(t=>({ability:t.split("/")[0],action:t.split("/")[1]}));n.sort((t,e)=>t.action.localeCompare(e.action));const i={};n.forEach(t=>{i[t.ability]||(i[t.ability]=[]),i[t.ability].push(t.action)});const s=Object.keys(i).map(e=>(o++,`(${o}) '${e}': '${i[e].join("', '")}' for '${t}'.`));r.push(s.join(", ").replace(".,","."))});const i=r.join(" "),s=`${n}${i}`;return`${t?t+" ":""}${s}`}function zr(t){var e;const n=Lr(t);Rr(n);const r=null==(e=n.att)?void 0:e.eip155;return r?Object.keys(r).map(t=>t.split("/")[1]):[]}function Fr(t){const e=Lr(t);Rr(e);const n=[];return Object.values(e.att).forEach(t=>{Object.values(t).forEach(t=>{var e;null!=(e=t?.[0])&&e.chains&&n.push(t[0].chains)})}),[...new Set(n.flat())]}function Hr(t){if(!t)return;const e=t?.[t.length-1];return Cr(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function qr(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function Vr(t){if("boolean"!=typeof t)throw new Error(`boolean expected, not ${t}`)}function Mr(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Kr(t,...e){if(!qr(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Zr(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Gr(t,e){Kr(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Wr(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Yr(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Xr(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const Jr=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Qr(t){if("string"!=typeof t)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(t))}function to(t){if("string"==typeof t)t=Qr(t);else{if(!qr(t))throw new Error("Uint8Array expected, got "+typeof t);t=co(t)}return t}function eo(t,e){if(null==e||"object"!=typeof e)throw new Error("options must be defined");return Object.assign(t,e)}function no(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return 0===n}const ro=(t,e)=>{function n(n,...r){if(Kr(n),!Jr)throw new Error("Non little-endian hardware is not yet supported");if(void 0!==t.nonceLength){const e=r[0];if(!e)throw new Error("nonce / iv required");t.varSizeNonce?Kr(e):Kr(e,t.nonceLength)}const o=t.tagLength;o&&void 0!==r[1]&&Kr(r[1]);const i=e(n,...r),s=(t,e)=>{if(void 0!==e){if(2!==t)throw new Error("cipher output not supported");Kr(e)}};let f=!1;return{encrypt(t,e){if(f)throw new Error("cannot encrypt() twice with same key + nonce");return f=!0,Kr(t),s(i.encrypt.length,e),i.encrypt(t,e)},decrypt(t,e){if(Kr(t),o&&t.length<o)throw new Error("invalid ciphertext length: smaller than tagLength="+o);return s(i.decrypt.length,e),i.decrypt(t,e)}}}return Object.assign(n,t),n};function oo(t,e,n=!0){if(void 0===e)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!fo(e))throw new Error("invalid output, must be aligned");return e}function io(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),f=Number(n&i),c=r?4:0,a=r?0:4;t.setUint32(e+c,s,r),t.setUint32(e+a,f,r)}function so(t,e,n){Vr(n);const r=new Uint8Array(16),o=Xr(r);return io(o,0,BigInt(e),n),io(o,8,BigInt(t),n),r}function fo(t){return t.byteOffset%4===0}function co(t){return Uint8Array.from(t)}const ao=t=>Uint8Array.from(t.split("").map(t=>t.charCodeAt(0))),uo=ao("expand 16-byte k"),lo=ao("expand 32-byte k"),ho=Wr(uo),po=Wr(lo);function go(t,e){return t<<e|t>>>32-e}function wo(t){return t.byteOffset%4===0}const yo=64,bo=16,mo=2**32-1,vo=new Uint32Array;function Eo(t,e,n,r,o,i,s,f){const c=o.length,a=new Uint8Array(yo),u=Wr(a),l=wo(o)&&wo(i),h=l?Wr(o):vo,d=l?Wr(i):vo;for(let p=0;p<c;s++){if(t(e,n,r,u,s,f),s>=mo)throw new Error("arx: counter overflow");const g=Math.min(yo,c-p);if(l&&g===yo){const t=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let e,n=0;n<bo;n++)e=t+n,d[e]=h[e]^u[n];p+=yo;continue}for(let t,e=0;e<g;e++)t=p+e,i[t]=o[t]^a[e];p+=g}}function xo(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:o,counterRight:i,rounds:s}=eo({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if("function"!=typeof t)throw new Error("core must be a function");return Mr(o),Mr(s),Vr(i),Vr(n),(e,f,c,a,u=0)=>{Kr(e),Kr(f),Kr(c);const l=c.length;if(void 0===a&&(a=new Uint8Array(l)),Kr(a),Mr(u),u<0||u>=mo)throw new Error("arx: counter overflow");if(a.length<l)throw new Error(`arx: output (${a.length}) is shorter than data (${l})`);const h=[];let d,p,g=e.length;if(32===g)h.push(d=co(e)),p=po;else{if(16!==g||!n)throw new Error(`arx: invalid 32-byte key, got length=${g}`);d=new Uint8Array(32),d.set(e),d.set(e,16),p=ho,h.push(d)}wo(f)||h.push(f=co(f));const w=Wr(d);if(r){if(24!==f.length)throw new Error("arx: extended nonce must be 24 bytes");r(p,w,Wr(f.subarray(0,16)),w),f=f.subarray(16)}const y=16-o;if(y!==f.length)throw new Error(`arx: nonce must be ${y} or 16 bytes`);if(12!==y){const t=new Uint8Array(12);t.set(f,i?0:12-f.length),f=t,h.push(f)}const b=Wr(f);return Eo(t,p,w,b,c,a,u,s),Yr(...h),a}}const Bo=(t,e)=>255&t[e++]|(255&t[e++])<<8;class Io{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=to(t),Kr(t,32);const e=Bo(t,0),n=Bo(t,2),r=Bo(t,4),o=Bo(t,6),i=Bo(t,8),s=Bo(t,10),f=Bo(t,12),c=Bo(t,14);this.r[0]=8191&e,this.r[1]=8191&(e>>>13|n<<3),this.r[2]=7939&(n>>>10|r<<6),this.r[3]=8191&(r>>>7|o<<9),this.r[4]=255&(o>>>4|i<<12),this.r[5]=i>>>1&8190,this.r[6]=8191&(i>>>14|s<<2),this.r[7]=8065&(s>>>11|f<<5),this.r[8]=8191&(f>>>8|c<<8),this.r[9]=c>>>5&127;for(let a=0;a<8;a++)this.pad[a]=Bo(t,16+2*a)}process(t,e,n=!1){const r=n?0:2048,{h:o,r:i}=this,s=i[0],f=i[1],c=i[2],a=i[3],u=i[4],l=i[5],h=i[6],d=i[7],p=i[8],g=i[9],w=Bo(t,e+0),y=Bo(t,e+2),b=Bo(t,e+4),m=Bo(t,e+6),v=Bo(t,e+8),E=Bo(t,e+10),x=Bo(t,e+12),B=Bo(t,e+14);let I=o[0]+(8191&w),O=o[1]+(8191&(w>>>13|y<<3)),A=o[2]+(8191&(y>>>10|b<<6)),S=o[3]+(8191&(b>>>7|m<<9)),N=o[4]+(8191&(m>>>4|v<<12)),U=o[5]+(v>>>1&8191),R=o[6]+(8191&(v>>>14|E<<2)),P=o[7]+(8191&(E>>>11|x<<5)),k=o[8]+(8191&(x>>>8|B<<8)),$=o[9]+(B>>>5|r),L=0,j=L+I*s+O*(5*g)+A*(5*p)+S*(5*d)+N*(5*h);L=j>>>13,j&=8191,j+=U*(5*l)+R*(5*u)+P*(5*a)+k*(5*c)+$*(5*f),L+=j>>>13,j&=8191;let C=L+I*f+O*s+A*(5*g)+S*(5*p)+N*(5*d);L=C>>>13,C&=8191,C+=U*(5*h)+R*(5*l)+P*(5*u)+k*(5*a)+$*(5*c),L+=C>>>13,C&=8191;let T=L+I*c+O*f+A*s+S*(5*g)+N*(5*p);L=T>>>13,T&=8191,T+=U*(5*d)+R*(5*h)+P*(5*l)+k*(5*u)+$*(5*a),L+=T>>>13,T&=8191;let _=L+I*a+O*c+A*f+S*s+N*(5*g);L=_>>>13,_&=8191,_+=U*(5*p)+R*(5*d)+P*(5*h)+k*(5*l)+$*(5*u),L+=_>>>13,_&=8191;let D=L+I*u+O*a+A*c+S*f+N*s;L=D>>>13,D&=8191,D+=U*(5*g)+R*(5*p)+P*(5*d)+k*(5*h)+$*(5*l),L+=D>>>13,D&=8191;let z=L+I*l+O*u+A*a+S*c+N*f;L=z>>>13,z&=8191,z+=U*s+R*(5*g)+P*(5*p)+k*(5*d)+$*(5*h),L+=z>>>13,z&=8191;let F=L+I*h+O*l+A*u+S*a+N*c;L=F>>>13,F&=8191,F+=U*f+R*s+P*(5*g)+k*(5*p)+$*(5*d),L+=F>>>13,F&=8191;let H=L+I*d+O*h+A*l+S*u+N*a;L=H>>>13,H&=8191,H+=U*c+R*f+P*s+k*(5*g)+$*(5*p),L+=H>>>13,H&=8191;let q=L+I*p+O*d+A*h+S*l+N*u;L=q>>>13,q&=8191,q+=U*a+R*c+P*f+k*s+$*(5*g),L+=q>>>13,q&=8191;let V=L+I*g+O*p+A*d+S*h+N*l;L=V>>>13,V&=8191,V+=U*u+R*a+P*c+k*f+$*s,L+=V>>>13,V&=8191,L=(L<<2)+L|0,L=L+j|0,j=8191&L,L>>>=13,C+=L,o[0]=j,o[1]=C,o[2]=T,o[3]=_,o[4]=D,o[5]=z,o[6]=F,o[7]=H,o[8]=q,o[9]=V}finalize(){const{h:t,pad:e}=this,n=new Uint16Array(10);let r=t[1]>>>13;t[1]&=8191;for(let s=2;s<10;s++)t[s]+=r,r=t[s]>>>13,t[s]&=8191;t[0]+=5*r,r=t[0]>>>13,t[0]&=8191,t[1]+=r,r=t[1]>>>13,t[1]&=8191,t[2]+=r,n[0]=t[0]+5,r=n[0]>>>13,n[0]&=8191;for(let s=1;s<10;s++)n[s]=t[s]+r,r=n[s]>>>13,n[s]&=8191;n[9]-=8192;let o=(1^r)-1;for(let s=0;s<10;s++)n[s]&=o;o=~o;for(let s=0;s<10;s++)t[s]=t[s]&o|n[s];t[0]=65535&(t[0]|t[1]<<13),t[1]=65535&(t[1]>>>3|t[2]<<10),t[2]=65535&(t[2]>>>6|t[3]<<7),t[3]=65535&(t[3]>>>9|t[4]<<4),t[4]=65535&(t[4]>>>12|t[5]<<1|t[6]<<14),t[5]=65535&(t[6]>>>2|t[7]<<11),t[6]=65535&(t[7]>>>5|t[8]<<8),t[7]=65535&(t[8]>>>8|t[9]<<5);let i=t[0]+e[0];t[0]=65535&i;for(let s=1;s<8;s++)i=(t[s]+e[s]|0)+(i>>>16)|0,t[s]=65535&i;Yr(n)}update(t){Zr(this),t=to(t),Kr(t);const{buffer:e,blockLen:n}=this,r=t.length;for(let o=0;o<r;){const i=Math.min(n-this.pos,r-o);if(i!==n)e.set(t.subarray(o,o+i),this.pos),this.pos+=i,o+=i,this.pos===n&&(this.process(e,0,!1),this.pos=0);else for(;n<=r-o;o+=n)this.process(t,o)}return this}destroy(){Yr(this.h,this.r,this.buffer,this.pad)}digestInto(t){Zr(this),Gr(t,this),this.finished=!0;const{buffer:e,h:n}=this;let{pos:r}=this;if(r){for(e[r++]=1;r<16;r++)e[r]=0;this.process(e,0,!0)}this.finalize();let o=0;for(let i=0;i<8;i++)t[o++]=n[i]>>>0,t[o++]=n[i]>>>8;return t}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}}function Oo(t){const e=(e,n)=>t(n).update(to(e)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e}const Ao=Oo(t=>new Io(t));function So(t,e,n,r,o,i=20){let s=t[0],f=t[1],c=t[2],a=t[3],u=e[0],l=e[1],h=e[2],d=e[3],p=e[4],g=e[5],w=e[6],y=e[7],b=o,m=n[0],v=n[1],E=n[2],x=s,B=f,I=c,O=a,A=u,S=l,N=h,U=d,R=p,P=g,k=w,$=y,L=b,j=m,C=v,T=E;for(let D=0;D<i;D+=2)x=x+A|0,L=go(L^x,16),R=R+L|0,A=go(A^R,12),x=x+A|0,L=go(L^x,8),R=R+L|0,A=go(A^R,7),B=B+S|0,j=go(j^B,16),P=P+j|0,S=go(S^P,12),B=B+S|0,j=go(j^B,8),P=P+j|0,S=go(S^P,7),I=I+N|0,C=go(C^I,16),k=k+C|0,N=go(N^k,12),I=I+N|0,C=go(C^I,8),k=k+C|0,N=go(N^k,7),O=O+U|0,T=go(T^O,16),$=$+T|0,U=go(U^$,12),O=O+U|0,T=go(T^O,8),$=$+T|0,U=go(U^$,7),x=x+S|0,T=go(T^x,16),k=k+T|0,S=go(S^k,12),x=x+S|0,T=go(T^x,8),k=k+T|0,S=go(S^k,7),B=B+N|0,L=go(L^B,16),$=$+L|0,N=go(N^$,12),B=B+N|0,L=go(L^B,8),$=$+L|0,N=go(N^$,7),I=I+U|0,j=go(j^I,16),R=R+j|0,U=go(U^R,12),I=I+U|0,j=go(j^I,8),R=R+j|0,U=go(U^R,7),O=O+A|0,C=go(C^O,16),P=P+C|0,A=go(A^P,12),O=O+A|0,C=go(C^O,8),P=P+C|0,A=go(A^P,7);let _=0;r[_++]=s+x|0,r[_++]=f+B|0,r[_++]=c+I|0,r[_++]=a+O|0,r[_++]=u+A|0,r[_++]=l+S|0,r[_++]=h+N|0,r[_++]=d+U|0,r[_++]=p+R|0,r[_++]=g+P|0,r[_++]=w+k|0,r[_++]=y+$|0,r[_++]=b+L|0,r[_++]=m+j|0,r[_++]=v+C|0,r[_++]=E+T|0}const No=xo(So,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Uo=new Uint8Array(16),Ro=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(Uo.subarray(n))},Po=new Uint8Array(32);function ko(t,e,n,r,o){const i=t(e,n,Po),s=Ao.create(i);o&&Ro(s,o),Ro(s,r);const f=so(r.length,o?o.length:0,!0);s.update(f);const c=s.digest();return Yr(i,f),c}const $o=t=>(e,n,r)=>({encrypt(o,i){const s=o.length;i=oo(s+16,i,!1),i.set(o);const f=i.subarray(0,-16);t(e,n,f,f,1);const c=ko(t,e,n,f,r);return i.set(c,s),Yr(c),i},decrypt(o,i){i=oo(o.length-16,i,!1);const s=o.subarray(0,-16),f=o.subarray(-16),c=ko(t,e,n,s,r);if(!no(f,c))throw new Error("invalid tag");return i.set(o.subarray(0,-16)),t(e,n,i,i,1),Yr(c),i}}),Lo=ro({blockSize:64,nonceLength:12,tagLength:16},$o(No));class jo extends Je{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Pe(t);const n=Ye(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,o=new Uint8Array(r);o.set(n.length>r?t.create().update(n).digest():n);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=t.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),je(o)}update(t){return ke(this),this.iHash.update(t),this}digestInto(t){ke(this),Re(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:o,blockLen:i,outputLen:s}=this;return t.finished=r,t.destroyed=o,t.blockLen=i,t.outputLen=s,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Co=(t,e,n)=>new jo(t,e).update(n).digest();function To(t,e,n){return Pe(t),void 0===n&&(n=new Uint8Array(t.outputLen)),Co(t,Ye(n),Ye(e))}Co.create=(t,e)=>new jo(t,e);const _o=Uint8Array.from([0]),Do=Uint8Array.of();function zo(t,e,n,r=32){Pe(t),Ue(r);const o=t.outputLen;if(r>255*o)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/o);void 0===n&&(n=Do);const s=new Uint8Array(i*o),f=Co.create(t,e),c=f._cloneInto(),a=new Uint8Array(f.outputLen);for(let u=0;u<i;u++)_o[0]=u+1,c.update(0===u?Do:a).update(n).update(_o).digestInto(a),s.set(a,o*u),f._cloneInto(c);return f.destroy(),c.destroy(),je(a,_o),s.slice(0,r)}const Fo=(t,e,n,r,o)=>zo(t,To(t,e,n),r,o),Ho=zn,qo=BigInt(0),Vo=BigInt(1);function Mo(t,e){if("boolean"!=typeof e)throw new Error(t+" boolean expected, got "+e)}function Ko(t){const e=t.toString(16);return 1&e.length?"0"+e:e}function Zo(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return""===t?qo:BigInt("0x"+t)}function Go(t){return Zo(Me(t))}function Wo(t){return Re(t),Zo(Me(Uint8Array.from(t).reverse()))}function Yo(t,e){return Ge(t.toString(16).padStart(2*e,"0"))}function Xo(t,e){return Yo(t,e).reverse()}function Jo(t,e,n){let r;if("string"==typeof e)try{r=Ge(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else{if(!Ne(e))throw new Error(t+" must be hex string or Uint8Array");r=Uint8Array.from(e)}const o=r.length;if("number"==typeof n&&o!==n)throw new Error(t+" of length "+n+" expected, got "+o);return r}const Qo=t=>"bigint"==typeof t&&qo<=t;function ti(t,e,n){return Qo(t)&&Qo(e)&&Qo(n)&&e<=t&&t<n}function ei(t,e,n,r){if(!ti(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function ni(t){let e;for(e=0;t>qo;t>>=Vo,e+=1);return e}const ri=t=>(Vo<<BigInt(t))-Vo;function oi(t,e,n){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");const r=t=>new Uint8Array(t),o=t=>Uint8Array.of(t);let i=r(t),s=r(t),f=0;const c=()=>{i.fill(1),s.fill(0),f=0},a=(...t)=>n(s,i,...t),u=(t=r(0))=>{s=a(o(0),t),i=a(),0!==t.length&&(s=a(o(1),t),i=a())},l=()=>{if(f++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const n=[];for(;t<e;){i=a();const e=i.slice();n.push(e),t+=i.length}return Xe(...n)};return(t,e)=>{let n;for(c(),u(t);!(n=e(l()));)u();return c(),n}}function ii(t,e,n={}){if(!t||"object"!=typeof t)throw new Error("expected valid options object");function r(e,n,r){const o=t[e];if(r&&void 0===o)return;const i=typeof o;if(i!==n||null===o)throw new Error(`param "${e}" is invalid: expected ${n}, got ${i}`)}Object.entries(e).forEach(([t,e])=>r(t,e,!1)),Object.entries(n).forEach(([t,e])=>r(t,e,!0))}function si(t){const e=new WeakMap;return(n,...r)=>{const o=e.get(n);if(void 0!==o)return o;const i=t(n,...r);return e.set(n,i),i}}const fi=BigInt(0),ci=BigInt(1),ai=BigInt(2),ui=BigInt(3),li=BigInt(4),hi=BigInt(5),di=BigInt(8);function pi(t,e){const n=t%e;return n>=fi?n:e+n}function gi(t,e,n){let r=t;for(;e-- >fi;)r*=r,r%=n;return r}function wi(t,e){if(t===fi)throw new Error("invert: expected non-zero number");if(e<=fi)throw new Error("invert: expected positive modulus, got "+e);let n=pi(t,e),r=e,o=fi,i=ci;for(;n!==fi;){const t=r/n,e=r%n,s=o-i*t;r=n,n=e,o=i,i=s}if(r!==ci)throw new Error("invert: does not exist");return pi(o,e)}function yi(t,e){const n=(t.ORDER+ci)/li,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function bi(t,e){const n=(t.ORDER-hi)/di,r=t.mul(e,ai),o=t.pow(r,n),i=t.mul(e,o),s=t.mul(t.mul(i,ai),o),f=t.mul(i,t.sub(s,t.ONE));if(!t.eql(t.sqr(f),e))throw new Error("Cannot find square root");return f}function mi(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-ci,n=0;for(;e%ai===fi;)e/=ai,n++;let r=ai;const o=Si(t);for(;1===Oi(o,r);)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(1===n)return yi;let i=o.pow(r,e);const s=(e+ci)/ai;return function(t,r){if(t.is0(r))return r;if(1!==Oi(t,r))throw new Error("Cannot find square root");let o=n,f=t.mul(t.ONE,i),c=t.pow(r,e),a=t.pow(r,s);for(;!t.eql(c,t.ONE);){if(t.is0(c))return t.ZERO;let e=1,n=t.sqr(c);for(;!t.eql(n,t.ONE);)if(e++,n=t.sqr(n),e===o)throw new Error("Cannot find square root");const r=ci<<BigInt(o-e-1),i=t.pow(f,r);o=e,f=t.sqr(i),c=t.mul(c,f),a=t.mul(a,i)}return a}}function vi(t){return t%li===ui?yi:t%di===hi?bi:mi(t)}const Ei=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function xi(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Ei.reduce((t,e)=>(t[e]="function",t),e);return ii(t,n),t}function Bi(t,e,n){if(n<fi)throw new Error("invalid exponent, negatives unsupported");if(n===fi)return t.ONE;if(n===ci)return e;let r=t.ONE,o=e;for(;n>fi;)n&ci&&(r=t.mul(r,o)),o=t.sqr(o),n>>=ci;return r}function Ii(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),o=e.reduce((e,n,o)=>t.is0(n)?e:(r[o]=e,t.mul(e,n)),t.ONE),i=t.inv(o);return e.reduceRight((e,n,o)=>t.is0(n)?e:(r[o]=t.mul(e,r[o]),t.mul(e,n)),i),r}function Oi(t,e){const n=(t.ORDER-ci)/ai,r=t.pow(e,n),o=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),s=t.eql(r,t.neg(t.ONE));if(!o&&!i&&!s)throw new Error("invalid Legendre symbol result");return o?1:i?0:-1}function Ai(t,e){void 0!==e&&Ue(e);const n=void 0!==e?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Si(t,e,n=!1,r={}){if(t<=fi)throw new Error("invalid field: expected ORDER > 0, got "+t);let o,i;if("object"==typeof e&&null!=e){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const t=e;t.BITS&&(o=t.BITS),t.sqrt&&(i=t.sqrt),"boolean"==typeof t.isLE&&(n=t.isLE)}else"number"==typeof e&&(o=e),r.sqrt&&(i=r.sqrt);const{nBitLength:s,nByteLength:f}=Ai(t,o);if(f>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:f,MASK:ri(s),ZERO:fi,ONE:ci,create:e=>pi(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("invalid field element: expected bigint, got "+typeof e);return fi<=e&&e<t},is0:t=>t===fi,isValidNot0:t=>!a.is0(t)&&a.isValid(t),isOdd:t=>(t&ci)===ci,neg:e=>pi(-e,t),eql:(t,e)=>t===e,sqr:e=>pi(e*e,t),add:(e,n)=>pi(e+n,t),sub:(e,n)=>pi(e-n,t),mul:(e,n)=>pi(e*n,t),pow:(t,e)=>Bi(a,t,e),div:(e,n)=>pi(e*wi(n,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>wi(e,t),sqrt:i||(e=>(c||(c=vi(t)),c(a,e))),toBytes:t=>n?Xo(t,f):Yo(t,f),fromBytes:t=>{if(t.length!==f)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+t.length);return n?Wo(t):Go(t)},invertBatch:t=>Ii(a,t),cmov:(t,e,n)=>n?e:t});return Object.freeze(a)}function Ni(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Ui(t){const e=Ni(t);return e+Math.ceil(e/2)}function Ri(t,e,n=!1){const r=t.length,o=Ni(e),i=Ui(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const s=n?Wo(t):Go(t),f=pi(s,e-ci)+ci;return n?Xo(f,o):Yo(f,o)}const Pi=BigInt(0),ki=BigInt(1);function $i(t,e){const n=e.negate();return t?n:e}function Li(t,e,n){const r="pz"===e?t=>t.pz:t=>t.ez,o=Ii(t.Fp,n.map(r));return n.map((t,e)=>t.toAffine(o[e])).map(t.fromAffine)}function ji(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Ci(t,e){ji(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),o=2**t,i=ri(t),s=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:o,shiftBy:s}}function Ti(t,e,n){const{windowSize:r,mask:o,maxNumber:i,shiftBy:s}=n;let f=Number(t&o),c=t>>s;f>r&&(f-=i,c+=ki);const a=e*r,u=a+Math.abs(f)-1,l=0===f,h=f<0,d=e%2!==0;return{nextN:c,offset:u,isZero:l,isNeg:h,isNegF:d,offsetF:a}}function _i(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function Di(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const zi=new WeakMap,Fi=new WeakMap;function Hi(t){return Fi.get(t)||1}function qi(t){if(t!==Pi)throw new Error("invalid wNAF")}function Vi(t,e){return{constTimeNegate:$i,hasPrecomputes(t){return 1!==Hi(t)},unsafeLadder(e,n,r=t.ZERO){let o=e;for(;n>Pi;)n&ki&&(r=r.add(o)),o=o.double(),n>>=ki;return r},precomputeWindow(t,n){const{windows:r,windowSize:o}=Ci(n,e),i=[];let s=t,f=s;for(let e=0;e<r;e++){f=s,i.push(f);for(let t=1;t<o;t++)f=f.add(s),i.push(f);s=f.double()}return i},wNAF(n,r,o){let i=t.ZERO,s=t.BASE;const f=Ci(n,e);for(let t=0;t<f.windows;t++){const{nextN:e,offset:n,isZero:c,isNeg:a,isNegF:u,offsetF:l}=Ti(o,t,f);o=e,c?s=s.add($i(u,r[l])):i=i.add($i(a,r[n]))}return qi(o),{p:i,f:s}},wNAFUnsafe(n,r,o,i=t.ZERO){const s=Ci(n,e);for(let t=0;t<s.windows&&o!==Pi;t++){const{nextN:e,offset:n,isZero:f,isNeg:c}=Ti(o,t,s);if(o=e,!f){const t=r[n];i=i.add(c?t.negate():t)}}return qi(o),i},getPrecomputes(t,e,n){let r=zi.get(e);return r||(r=this.precomputeWindow(e,t),1!==t&&("function"==typeof n&&(r=n(r)),zi.set(e,r))),r},wNAFCached(t,e,n){const r=Hi(t);return this.wNAF(r,this.getPrecomputes(r,t,n),e)},wNAFCachedUnsafe(t,e,n,r){const o=Hi(t);return 1===o?this.unsafeLadder(t,e,r):this.wNAFUnsafe(o,this.getPrecomputes(o,t,n),e,r)},setWindowSize(t,n){ji(n,e),Fi.set(t,n),zi.delete(t)}}}function Mi(t,e,n,r){let o=e,i=t.ZERO,s=t.ZERO;for(;n>Pi||r>Pi;)n&ki&&(i=i.add(o)),r&ki&&(s=s.add(o)),o=o.double(),n>>=ki,r>>=ki;return{p1:i,p2:s}}function Ki(t,e,n,r){_i(n,t),Di(r,e);const o=n.length,i=r.length;if(o!==i)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,f=ni(BigInt(o));let c=1;f>12?c=f-3:f>4?c=f-2:f>0&&(c=2);const a=ri(c),u=new Array(Number(a)+1).fill(s),l=Math.floor((e.BITS-1)/c)*c;let h=s;for(let d=l;d>=0;d-=c){u.fill(s);for(let e=0;e<i;e++){const t=r[e],o=Number(t>>BigInt(d)&a);u[o]=u[o].add(n[e])}let t=s;for(let e=u.length-1,n=s;e>0;e--)n=n.add(u[e]),t=t.add(n);if(h=h.add(t),0!==d)for(let e=0;e<c;e++)h=h.double()}return h}function Zi(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return xi(e),e}return Si(t)}function Gi(t,e,n={}){if(!e||"object"!=typeof e)throw new Error(`expected valid ${t} CURVE object`);for(const s of["p","n","h"]){const t=e[s];if(!("bigint"==typeof t&&t>Pi))throw new Error(`CURVE.${s} must be positive bigint`)}const r=Zi(e.p,n.Fp),o=Zi(e.n,n.Fn),i=["Gx","Gy","a","weierstrass"===t?"b":"d"];for(const s of i)if(!r.isValid(e[s]))throw new Error(`CURVE.${s} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:o}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Wi=BigInt(0),Yi=BigInt(1),Xi=BigInt(2);function Ji(t){return ii(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function Qi(t){const e=Ji(t),{P:n,type:r,adjustScalarBytes:o,powPminus2:i,randomBytes:s}=e,f="x25519"===r;if(!f&&"x448"!==r)throw new Error("invalid type");const c=s||en,a=f?255:448,u=f?32:56,l=BigInt(f?9:5),h=BigInt(f?121665:39081),d=f?Xi**BigInt(254):Xi**BigInt(447),p=f?BigInt(8)*Xi**BigInt(251)-Yi:BigInt(4)*Xi**BigInt(445)-Yi,g=d+p+Yi,w=t=>pi(t,n),y=b(l);function b(t){return Xo(w(t),u)}function m(t){const e=Jo("u coordinate",t,u);return f&&(e[31]&=127),w(Wo(e))}function v(t){return Wo(o(Jo("scalar",t,u)))}function E(t,e){const n=I(m(e),v(t));if(n===Wi)throw new Error("invalid private or public key received");return b(n)}function x(t){return E(t,y)}function B(t,e,n){const r=w(t*(e-n));return e=w(e-r),n=w(n+r),{x_2:e,x_3:n}}function I(t,e){ei("u",t,Wi,n),ei("scalar",e,d,g);const r=e,o=t;let s=Yi,f=Wi,c=t,u=Yi,l=Wi;for(let n=BigInt(a-1);n>=Wi;n--){const t=r>>n&Yi;l^=t,({x_2:s,x_3:c}=B(l,s,c)),({x_2:f,x_3:u}=B(l,f,u)),l=t;const e=s+f,i=w(e*e),a=s-f,d=w(a*a),p=i-d,g=c+u,y=c-u,b=w(y*e),m=w(g*a),v=b+m,E=b-m;c=w(v*v),u=w(o*w(E*E)),s=w(i*d),f=w(p*(i+w(h*p)))}({x_2:s,x_3:c}=B(l,s,c)),({x_2:f,x_3:u}=B(l,f,u));const p=i(f);return w(s*p)}return{scalarMult:E,scalarMultBase:x,getSharedSecret:(t,e)=>E(t,e),getPublicKey:t=>x(t),utils:{randomPrivateKey:()=>c(u)},GuBytes:y.slice()}}BigInt(0);const ts=BigInt(1),es=BigInt(2),ns=BigInt(3),rs=BigInt(5),os=BigInt(8),is={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:os,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function ss(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),o=BigInt(80),i=is.p,s=t*t%i*t%i,f=gi(s,es,i)*s%i,c=gi(f,ts,i)*t%i,a=gi(c,rs,i)*c%i,u=gi(a,e,i)*a%i,l=gi(u,n,i)*u%i,h=gi(l,r,i)*l%i,d=gi(h,o,i)*h%i,p=gi(d,o,i)*h%i,g=gi(p,e,i)*a%i;return{pow_p_5_8:gi(g,es,i)*t%i,b2:s}}function fs(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const cs=(()=>{const t=is.p;return Qi({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=ss(e);return pi(gi(n,ns,t)*r,t)},adjustScalarBytes:fs})})();function as(t){void 0!==t.lowS&&Mo("lowS",t.lowS),void 0!==t.prehash&&Mo("prehash",t.prehash)}class us extends Error{constructor(t=""){super(t)}}const ls={Err:us,_tlv:{encode:(t,e)=>{const{Err:n}=ls;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(1&e.length)throw new n("tlv.encode: unpadded data");const r=e.length/2,o=Ko(r);if(o.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Ko(o.length/2|128):"";return Ko(t)+i+o+e},decode(t,e){const{Err:n}=ls;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const o=e[r++],i=!!(128&o);let s=0;if(i){const t=127&o;if(!t)throw new n("tlv.decode(long): indefinite length not supported");if(t>4)throw new n("tlv.decode(long): byte length is too big");const i=e.subarray(r,r+t);if(i.length!==t)throw new n("tlv.decode: length bytes not complete");if(0===i[0])throw new n("tlv.decode(long): zero leftmost byte");for(const e of i)s=s<<8|e;if(r+=t,s<128)throw new n("tlv.decode(long): not minimal encoding")}else s=o;const f=e.subarray(r,r+s);if(f.length!==s)throw new n("tlv.decode: wrong value length");return{v:f,l:e.subarray(r+s)}}},_int:{encode(t){const{Err:e}=ls;if(t<hs)throw new e("integer: negative integers are not allowed");let n=Ko(t);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=ls;if(128&t[0])throw new e("invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new e("invalid signature integer: unnecessary leading zero");return Go(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=ls,o=Jo("signature",t),{v:i,l:s}=r.decode(48,o);if(s.length)throw new e("invalid signature: left bytes after parsing");const{v:f,l:c}=r.decode(2,i),{v:a,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(f),s:n.decode(a)}},hexFromSig(t){const{_tlv:e,_int:n}=ls,r=e.encode(2,n.encode(t.r)),o=e.encode(2,n.encode(t.s)),i=r+o;return e.encode(48,i)}},hs=BigInt(0),ds=BigInt(1),ps=BigInt(2),gs=BigInt(3),ws=BigInt(4);function ys(t,e,n){function r(r){const o=t.sqr(r),i=t.mul(o,r);return t.add(t.add(i,t.mul(r,e)),n)}return r}function bs(t,e,n){const{BYTES:r}=t;function o(o){let i;if("bigint"==typeof o)i=o;else{let n=Jo("private key",o);if(e){if(!e.includes(2*n.length))throw new Error("invalid private key");const t=new Uint8Array(r);t.set(n,t.length-n.length),n=t}try{i=t.fromBytes(n)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof o}`)}}if(n&&(i=t.create(i)),!t.isValidNot0(i))throw new Error("invalid private key: out of range [1..N-1]");return i}return o}function ms(t,e={}){const{Fp:n,Fn:r}=Gi("weierstrass",t,e),{h:o,n:i}=t;ii(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:s}=e;if(s&&(!n.is0(t.a)||"bigint"!=typeof s.beta||"function"!=typeof s.splitScalar))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function f(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(t,e,r){const{x:o,y:i}=e.toAffine(),s=n.toBytes(o);if(Mo("isCompressed",r),r){f();const t=!n.isOdd(i);return Xe(vs(t),s)}return Xe(Uint8Array.of(4),s,n.toBytes(i))}function a(t){Re(t);const e=n.BYTES,r=e+1,o=2*e+1,i=t.length,s=t[0],c=t.subarray(1);if(i!==r||2!==s&&3!==s){if(i===o&&4===s){const t=n.fromBytes(c.subarray(0*e,1*e)),r=n.fromBytes(c.subarray(1*e,2*e));if(!d(t,r))throw new Error("bad point: is not on curve");return{x:t,y:r}}throw new Error(`bad point: got length ${i}, expected compressed=${r} or uncompressed=${o}`)}{const t=n.fromBytes(c);if(!n.isValid(t))throw new Error("bad point: is not on curve, wrong x");const e=h(t);let r;try{r=n.sqrt(e)}catch(a){const t=a instanceof Error?": "+a.message:"";throw new Error("bad point: is not on curve, sqrt error"+t)}f();const o=n.isOdd(r);return 1===(1&s)!==o&&(r=n.neg(r)),{x:t,y:r}}}const u=e.toBytes||c,l=e.fromBytes||a,h=ys(n,t.a,t.b);function d(t,e){const r=n.sqr(e),o=h(t);return n.eql(r,o)}if(!d(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,gs),ws),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function w(t,e,r=!1){if(!n.isValid(e)||r&&n.is0(e))throw new Error(`bad point coordinate ${t}`);return e}function y(t){if(!(t instanceof E))throw new Error("ProjectivePoint expected")}const b=si((t,e)=>{const{px:r,py:o,pz:i}=t;if(n.eql(i,n.ONE))return{x:r,y:o};const s=t.is0();null==e&&(e=s?n.ONE:n.inv(i));const f=n.mul(r,e),c=n.mul(o,e),a=n.mul(i,e);if(s)return{x:n.ZERO,y:n.ZERO};if(!n.eql(a,n.ONE))throw new Error("invZ was invalid");return{x:f,y:c}}),m=si(t=>{if(t.is0()){if(e.allowInfinityPoint&&!n.is0(t.py))return;throw new Error("bad point: ZERO")}const{x:r,y:o}=t.toAffine();if(!n.isValid(r)||!n.isValid(o))throw new Error("bad point: x or y not field elements");if(!d(r,o))throw new Error("bad point: equation left != right");if(!t.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function v(t,e,r,o,i){return r=new E(n.mul(r.px,t),r.py,r.pz),e=$i(o,e),r=$i(i,r),e.add(r)}class E{constructor(t,e,n){this.px=w("x",t),this.py=w("y",e,!0),this.pz=w("z",n),Object.freeze(this)}static fromAffine(t){const{x:e,y:r}=t||{};if(!t||!n.isValid(e)||!n.isValid(r))throw new Error("invalid affine point");if(t instanceof E)throw new Error("projective point not allowed");return n.is0(e)&&n.is0(r)?E.ZERO:new E(e,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){return Li(E,"pz",t)}static fromBytes(t){return Re(t),E.fromHex(t)}static fromHex(t){const e=E.fromAffine(l(Jo("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){const n=bs(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return E.BASE.multiply(n(t))}static msm(t,e){return Ki(E,r,t,e)}precompute(t=8,e=!0){return B.setWindowSize(this,t),e||this.multiply(gs),this}_setWindowSize(t){this.precompute(t)}assertValidity(){m(this)}hasEvenY(){const{y:t}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(t)}equals(t){y(t);const{px:e,py:r,pz:o}=this,{px:i,py:s,pz:f}=t,c=n.eql(n.mul(e,f),n.mul(i,o)),a=n.eql(n.mul(r,f),n.mul(s,o));return c&&a}negate(){return new E(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,o=n.mul(r,gs),{px:i,py:s,pz:f}=this;let c=n.ZERO,a=n.ZERO,u=n.ZERO,l=n.mul(i,i),h=n.mul(s,s),d=n.mul(f,f),p=n.mul(i,s);return p=n.add(p,p),u=n.mul(i,f),u=n.add(u,u),c=n.mul(e,u),a=n.mul(o,d),a=n.add(c,a),c=n.sub(h,a),a=n.add(h,a),a=n.mul(c,a),c=n.mul(p,c),u=n.mul(o,u),d=n.mul(e,d),p=n.sub(l,d),p=n.mul(e,p),p=n.add(p,u),u=n.add(l,l),l=n.add(u,l),l=n.add(l,d),l=n.mul(l,p),a=n.add(a,l),d=n.mul(s,f),d=n.add(d,d),l=n.mul(d,p),c=n.sub(c,l),u=n.mul(d,h),u=n.add(u,u),u=n.add(u,u),new E(c,a,u)}add(e){y(e);const{px:r,py:o,pz:i}=this,{px:s,py:f,pz:c}=e;let a=n.ZERO,u=n.ZERO,l=n.ZERO;const h=t.a,d=n.mul(t.b,gs);let p=n.mul(r,s),g=n.mul(o,f),w=n.mul(i,c),b=n.add(r,o),m=n.add(s,f);b=n.mul(b,m),m=n.add(p,g),b=n.sub(b,m),m=n.add(r,i);let v=n.add(s,c);return m=n.mul(m,v),v=n.add(p,w),m=n.sub(m,v),v=n.add(o,i),a=n.add(f,c),v=n.mul(v,a),a=n.add(g,w),v=n.sub(v,a),l=n.mul(h,m),a=n.mul(d,w),l=n.add(a,l),a=n.sub(g,l),l=n.add(g,l),u=n.mul(a,l),g=n.add(p,p),g=n.add(g,p),w=n.mul(h,w),m=n.mul(d,m),g=n.add(g,w),w=n.sub(p,w),w=n.mul(h,w),m=n.add(m,w),p=n.mul(g,m),u=n.add(u,p),p=n.mul(v,m),a=n.mul(b,a),a=n.sub(a,p),p=n.mul(b,g),l=n.mul(v,l),l=n.add(l,p),new E(a,u,l)}subtract(t){return this.add(t.negate())}is0(){return this.equals(E.ZERO)}multiply(t){const{endo:n}=e;if(!r.isValidNot0(t))throw new Error("invalid scalar: out of range");let o,i;const s=t=>B.wNAFCached(this,t,E.normalizeZ);if(n){const{k1neg:e,k1:r,k2neg:f,k2:c}=n.splitScalar(t),{p:a,f:u}=s(r),{p:l,f:h}=s(c);i=u.add(h),o=v(n.beta,a,l,e,f)}else{const{p:e,f:n}=s(t);o=e,i=n}return E.normalizeZ([o,i])[0]}multiplyUnsafe(t){const{endo:n}=e,o=this;if(!r.isValid(t))throw new Error("invalid scalar: out of range");if(t===hs||o.is0())return E.ZERO;if(t===ds)return o;if(B.hasPrecomputes(this))return this.multiply(t);if(n){const{k1neg:e,k1:r,k2neg:i,k2:s}=n.splitScalar(t),{p1:f,p2:c}=Mi(E,o,r,s);return v(n.beta,f,c,e,i)}return B.wNAFCachedUnsafe(o,t)}multiplyAndAddUnsafe(t,e,n){const r=this.multiplyUnsafe(e).add(t.multiplyUnsafe(n));return r.is0()?void 0:r}toAffine(t){return b(this,t)}isTorsionFree(){const{isTorsionFree:t}=e;return o===ds||(t?t(E,this):B.wNAFCachedUnsafe(this,i).is0())}clearCofactor(){const{clearCofactor:t}=e;return o===ds?this:t?t(E,this):this.multiplyUnsafe(o)}toBytes(t=!0){return Mo("isCompressed",t),this.assertValidity(),u(E,this,t)}toRawBytes(t=!0){return this.toBytes(t)}toHex(t=!0){return Me(this.toBytes(t))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}E.BASE=new E(t.Gx,t.Gy,n.ONE),E.ZERO=new E(n.ZERO,n.ONE,n.ZERO),E.Fp=n,E.Fn=r;const x=r.BITS,B=Vi(E,e.endo?Math.ceil(x/2):x);return E}function vs(t){return Uint8Array.of(t?2:3)}function Es(t,e,n={}){ii(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||en,o=e.hmac||((t,...n)=>Co(e.hash,t,Xe(...n))),{Fp:i,Fn:s}=t,{ORDER:f,BITS:c}=s;function a(t){const e=f>>ds;return t>e}function u(t){return a(t)?s.neg(t):t}function l(t,e){if(!s.isValidNot0(e))throw new Error(`invalid signature ${t}: out of range 1..CURVE.n`)}class h{constructor(t,e,n){l("r",t),l("s",e),this.r=t,this.s=e,null!=n&&(this.recovery=n),Object.freeze(this)}static fromCompact(t){const e=s.BYTES,n=Jo("compactSignature",t,2*e);return new h(s.fromBytes(n.subarray(0,e)),s.fromBytes(n.subarray(e,2*e)))}static fromDER(t){const{r:e,s:n}=ls.toSig(Jo("DER",t));return new h(e,n)}assertValidity(){}addRecoveryBit(t){return new h(this.r,this.s,t)}recoverPublicKey(e){const n=i.ORDER,{r,s:o,recovery:c}=this;if(null==c||![0,1,2,3].includes(c))throw new Error("recovery id invalid");if(f*ps<n&&c>1)throw new Error("recovery id is ambiguous for h>1 curve");const a=2===c||3===c?r+f:r;if(!i.isValid(a))throw new Error("recovery id 2 or 3 invalid");const u=i.toBytes(a),l=t.fromHex(Xe(vs(0===(1&c)),u)),h=s.inv(a),d=m(Jo("msgHash",e)),p=s.create(-d*h),g=s.create(o*h),w=t.BASE.multiplyUnsafe(p).add(l.multiplyUnsafe(g));if(w.is0())throw new Error("point at infinify");return w.assertValidity(),w}hasHighS(){return a(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,s.neg(this.s),this.recovery):this}toBytes(t){if("compact"===t)return Xe(s.toBytes(this.r),s.toBytes(this.s));if("der"===t)return Ge(ls.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Me(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Me(this.toBytes("compact"))}}const d=bs(s,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(t){try{return d(t),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const t=f;return Ri(r(Ui(t)),t)},precompute(e=8,n=t.BASE){return n.precompute(e,!1)}};function g(e,n=!0){return t.fromPrivateKey(e).toBytes(n)}function w(e){if("bigint"==typeof e)return!1;if(e instanceof t)return!0;const r=Jo("key",e).length,o=i.BYTES,f=o+1,c=2*o+1;return n.allowedPrivateKeyLengths||s.BYTES===f?void 0:r===f||r===c}function y(e,n,r=!0){if(!0===w(e))throw new Error("first arg must be private key");if(!1===w(n))throw new Error("second arg must be public key");return t.fromHex(n).multiply(d(e)).toBytes(r)}const b=e.bits2int||function(t){if(t.length>8192)throw new Error("input is too large");const e=Go(t),n=8*t.length-c;return n>0?e>>BigInt(n):e},m=e.bits2int_modN||function(t){return s.create(b(t))},v=ri(c);function E(t){return ei("num < 2^"+c,t,hs,v),s.toBytes(t)}function x(n,o,f=B){if(["recovered","canonical"].some(t=>t in f))throw new Error("sign() legacy options not supported");const{hash:c}=e;let{lowS:l,prehash:p,extraEntropy:g}=f;null==l&&(l=!0),n=Jo("msgHash",n),as(f),p&&(n=Jo("prehashed msgHash",c(n)));const w=m(n),y=d(o),v=[E(y),E(w)];if(null!=g&&!1!==g){const t=!0===g?r(i.BYTES):g;v.push(Jo("extraEntropy",t))}const x=Xe(...v),I=w;function O(e){const n=b(e);if(!s.isValidNot0(n))return;const r=s.inv(n),o=t.BASE.multiply(n).toAffine(),i=s.create(o.x);if(i===hs)return;const f=s.create(r*s.create(I+i*y));if(f===hs)return;let c=(o.x===i?0:2)|Number(o.y&ds),d=f;return l&&a(f)&&(d=u(f),c^=1),new h(i,d,c)}return{seed:x,k2sig:O}}const B={lowS:e.lowS,prehash:!1},I={lowS:e.lowS,prehash:!1};function O(t,n,r=B){const{seed:i,k2sig:f}=x(t,n,r);return oi(e.hash.outputLen,s.BYTES,o)(i,f)}function A(n,r,o,i=I){const f=n;r=Jo("msgHash",r),o=Jo("publicKey",o),as(i);const{lowS:c,prehash:a,format:u}=i;if("strict"in i)throw new Error("options.strict was renamed to lowS");if(void 0!==u&&!["compact","der","js"].includes(u))throw new Error('format must be "compact", "der" or "js"');const l="string"==typeof f||Ne(f),d=!l&&!u&&"object"==typeof f&&null!==f&&"bigint"==typeof f.r&&"bigint"==typeof f.s;if(!l&&!d)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let p,g;try{if(d){if(void 0!==u&&"js"!==u)throw new Error("invalid format");p=new h(f.r,f.s)}if(l){try{"compact"!==u&&(p=h.fromDER(f))}catch(O){if(!(O instanceof ls.Err))throw O}!p&&"der"!==u&&(p=h.fromCompact(f))}g=t.fromHex(o)}catch{return!1}if(!p||c&&p.hasHighS())return!1;a&&(r=e.hash(r));const{r:w,s:y}=p,b=m(r),v=s.inv(y),E=s.create(b*v),x=s.create(w*v),B=t.BASE.multiplyUnsafe(E).add(g.multiplyUnsafe(x));return!B.is0()&&s.create(B.x)===w}return t.BASE.precompute(8),Object.freeze({getPublicKey:g,getSharedSecret:y,sign:O,verify:A,utils:p,Point:t,Signature:h})}function xs(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=Si(e.n,t.nBitLength),o={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:o}}function Bs(t){const{CURVE:e,curveOpts:n}=xs(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function Is(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function Os(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=Bs(t),o=ms(e,n),i=Es(o,r,n);return Is(t,i)}function As(t,e){const n=e=>Os({...t,hash:e});return{...n(e),create:n}}const Ss={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},Ns={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},Us={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Rs=Si(Ss.p),Ps=Si(Ns.p),ks=Si(Us.p),$s=As({...Ss,Fp:Rs,lowS:!1},zn);As({...Ns,Fp:Ps,lowS:!1},Hn),As({...Us,Fp:ks,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Fn);const Ls=$s,js="base10",Cs="base16",Ts="base64pad",_s="base64url",Ds="utf8",zs=0,Fs=1,Hs=2,qs=0,Vs=1,Ms=12,Ks=32;function Zs(){const t=cs.utils.randomPrivateKey(),e=cs.getPublicKey(t);return{privateKey:(0,X.dI)(t,Cs),publicKey:(0,X.dI)(e,Cs)}}function Gs(){const t=en(Ks);return(0,X.dI)(t,Cs)}function Ws(t,e){const n=cs.getSharedSecret((0,X.sH)(t,Cs),(0,X.sH)(e,Cs)),r=Fo(Ho,n,void 0,void 0,Ks);return(0,X.dI)(r,Cs)}function Ys(t){const e=Ho((0,X.sH)(t,Cs));return(0,X.dI)(e,Cs)}function Xs(t){const e=Ho((0,X.sH)(t,Ds));return(0,X.dI)(e,Cs)}function Js(t){return(0,X.sH)(`${t}`,js)}function Qs(t){return Number((0,X.dI)(t,js))}function tf(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function ef(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function nf(t){const e=Js(typeof t.type<"u"?t.type:zs);if(Qs(e)===Fs&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?(0,X.sH)(t.senderPublicKey,Cs):void 0,r=typeof t.iv<"u"?(0,X.sH)(t.iv,Cs):en(Ms),o=(0,X.sH)(t.symKey,Cs),i=Lo(o,r).encrypt((0,X.sH)(t.message,Ds)),s=ff({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===_s?tf(s):s}function rf(t){const e=(0,X.sH)(t.symKey,Cs),{sealed:n,iv:r}=cf({encoded:t.encoded,encoding:t.encoding}),o=Lo(e,r).decrypt(n);if(null===o)throw new Error("Failed to decrypt");return(0,X.dI)(o,Ds)}function of(t,e){const n=Js(Hs),r=en(Ms),o=(0,X.sH)(t,Ds),i=ff({type:n,sealed:o,iv:r});return e===_s?tf(i):i}function sf(t,e){const{sealed:n}=cf({encoded:t,encoding:e});return(0,X.dI)(n,Ds)}function ff(t){if(Qs(t.type)===Hs)return(0,X.dI)((0,X.xW)([t.type,t.sealed]),Ts);if(Qs(t.type)===Fs){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return(0,X.dI)((0,X.xW)([t.type,t.senderPublicKey,t.iv,t.sealed]),Ts)}return(0,X.dI)((0,X.xW)([t.type,t.iv,t.sealed]),Ts)}function cf(t){const e=(t.encoding||Ts)===_s?ef(t.encoded):t.encoded,n=(0,X.sH)(e,Ts),r=n.slice(qs,Vs),o=Vs;if(Qs(r)===Fs){const t=o+Ks,e=t+Ms,i=n.slice(o,t),s=n.slice(t,e),f=n.slice(e);return{type:r,sealed:f,iv:s,senderPublicKey:i}}if(Qs(r)===Hs){const t=n.slice(o),e=en(Ms);return{type:r,sealed:t,iv:e}}const i=o+Ms,s=n.slice(o,i),f=n.slice(i);return{type:r,sealed:f,iv:s}}function af(t,e){const n=cf({encoded:t,encoding:e?.encoding});return uf({type:Qs(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?(0,X.dI)(n.senderPublicKey,Cs):void 0,receiverPublicKey:e?.receiverPublicKey})}function uf(t){const e=t?.type||zs;if(e===Fs){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function lf(t){return t.type===Fs&&"string"==typeof t.senderPublicKey&&"string"==typeof t.receiverPublicKey}function hf(t){return t.type===Hs}function df(t){const e=et.from(t.x,"base64"),n=et.from(t.y,"base64");return(0,X.xW)([new Uint8Array([4]),e,n])}function pf(t,e){const[n,r,o]=t.split("."),i=et.from(ef(o),"base64");if(64!==i.length)throw new Error("Invalid signature length");const s=i.slice(0,32),f=i.slice(32,64),c=`${n}.${r}`,a=Ho(c),u=df(e);if(!Ls.verify((0,X.xW)([s,f]),a,u))throw new Error("Invalid signature");return(0,Y.Cq)(t).payload}const gf="irn";function wf(t){return t?.relay||{protocol:gf}}function yf(t){const e=J.CG[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function bf(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(e=>{if(e.startsWith(r)){const o=e.replace(r,""),i=t[e];n[o]=i}}),n}function mf(t){if(!t.includes("wc:")){const e=ee(t);null!=e&&e.includes("wc:")&&(t=e)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=-1!==t.indexOf("?")?t.indexOf("?"):void 0,r=t.substring(0,e),o=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",s=new URLSearchParams(i),f={};s.forEach((t,e)=>{f[e]=t});const c="string"==typeof f.methods?f.methods.split(","):void 0;return{protocol:r,topic:vf(o[0]),version:parseInt(o[1],10),symKey:f.symKey,relay:bf(f),methods:c,expiryTimestamp:f.expiryTimestamp?parseInt(f.expiryTimestamp,10):void 0}}function vf(t){return t.startsWith("//")?t.substring(2):t}function Ef(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(o=>{const i=o,s=n+e+i;t[i]&&(r[s]=t[i])}),r}function xf(t){const e=new URLSearchParams,n=Ef(t.relay);Object.keys(n).sort().forEach(t=>{e.set(t,n[t])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function Bf(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var If=Object.defineProperty,Of=Object.defineProperties,Af=Object.getOwnPropertyDescriptors,Sf=Object.getOwnPropertySymbols,Nf=Object.prototype.hasOwnProperty,Uf=Object.prototype.propertyIsEnumerable,Rf=(t,e,n)=>e in t?If(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pf=(t,e)=>{for(var n in e||(e={}))Nf.call(e,n)&&Rf(t,n,e[n]);if(Sf)for(var n of Sf(e))Uf.call(e,n)&&Rf(t,n,e[n]);return t},kf=(t,e)=>Of(t,Af(e));function $f(t){const e=[];return t.forEach(t=>{const[n,r]=t.split(":");e.push(`${n}:${r}`)}),e}function Lf(t){const e=[];return Object.values(t).forEach(t=>{e.push(...$f(t.accounts))}),e}function jf(t,e){const n=[];return Object.values(t).forEach(t=>{$f(t.accounts).includes(e)&&n.push(...t.methods)}),n}function Cf(t,e){const n=[];return Object.values(t).forEach(t=>{$f(t.accounts).includes(e)&&n.push(...t.events)}),n}function Tf(t){var e;const{proposal:{requiredNamespaces:n,optionalNamespaces:r={}},supportedNamespaces:o}=t,i=zf(n),s=zf(r),f={};Object.keys(o).forEach(t=>{const e=o[t].chains,n=o[t].methods,r=o[t].events,i=o[t].accounts;e.forEach(e=>{if(!i.some(t=>t.includes(e)))throw new Error(`No accounts provided for chain ${e} in namespace ${t}`)}),f[t]={chains:e,methods:n,events:r,accounts:i}});const c=Ac(n,f,"approve()");if(c)throw new Error(c.message);const a={};if(!Object.keys(n).length&&!Object.keys(r).length)return f;Object.keys(i).forEach(t=>{const e=o[t].chains.filter(e=>{var n,r;return null==(r=null==(n=i[t])?void 0:n.chains)?void 0:r.includes(e)}),n=o[t].methods.filter(e=>{var n,r;return null==(r=null==(n=i[t])?void 0:n.methods)?void 0:r.includes(e)}),r=o[t].events.filter(e=>{var n,r;return null==(r=null==(n=i[t])?void 0:n.events)?void 0:r.includes(e)}),s=e.map(e=>o[t].accounts.filter(t=>t.includes(`${e}:`))).flat();a[t]={chains:e,methods:n,events:r,accounts:s}}),Object.keys(s).forEach(t=>{var e,n,r,i,f,c;if(!o[t])return;const u=null==(n=null==(e=s[t])?void 0:e.chains)?void 0:n.filter(e=>o[t].chains.includes(e)),l=o[t].methods.filter(e=>{var n,r;return null==(r=null==(n=s[t])?void 0:n.methods)?void 0:r.includes(e)}),h=o[t].events.filter(e=>{var n,r;return null==(r=null==(n=s[t])?void 0:n.events)?void 0:r.includes(e)}),d=u?.map(e=>o[t].accounts.filter(t=>t.includes(`${e}:`))).flat();a[t]={chains:Vt(null==(r=a[t])?void 0:r.chains,u),methods:Vt(null==(i=a[t])?void 0:i.methods,l),events:Vt(null==(f=a[t])?void 0:f.events,h),accounts:Vt(null==(c=a[t])?void 0:c.accounts,d)}});for(const[u,l]of Object.entries(a))(0===l.accounts.length||0===(null==(e=l?.chains)?void 0:e.length))&&delete a[u];return a}function _f(t){return t.includes(":")}function Df(t){return _f(t)?t.split(":")[0]:t}function zf(t){var e,n,r;const o={};if(!Wf(t))return o;for(const[i,s]of Object.entries(t)){const t=_f(i)?[i]:s.chains,f=s.methods||[],c=s.events||[],a=Df(i);o[a]=kf(Pf({},o[a]),{chains:Vt(t,null==(e=o[a])?void 0:e.chains),methods:Vt(f,null==(n=o[a])?void 0:n.methods),events:Vt(c,null==(r=o[a])?void 0:r.events)})}return o}function Ff(t){const e={};return t?.forEach(t=>{var n;const[r,o]=t.split(":");e[r]||(e[r]={accounts:[],chains:[],events:[],methods:[]}),e[r].accounts.push(t),null==(n=e[r].chains)||n.push(`${r}:${o}`)}),e}function Hf(t,e){e=e.map(t=>t.replace("did:pkh:",""));const n=Ff(e);for(const[r,o]of Object.entries(n))o.methods?o.methods=Vt(o.methods,t):o.methods=t,o.events=["chainChanged","accountsChanged"];return n}function qf(t,e){var n,r,o,i,s,f;const c=zf(t),a=zf(e),u={},l=Object.keys(c).concat(Object.keys(a));for(const h of l)u[h]={chains:Vt(null==(n=c[h])?void 0:n.chains,null==(r=a[h])?void 0:r.chains),methods:Vt(null==(o=c[h])?void 0:o.methods,null==(i=a[h])?void 0:i.methods),events:Vt(null==(s=c[h])?void 0:s.events,null==(f=a[h])?void 0:f.events)};return u}const Vf={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Mf={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Kf(t,e){const{message:n,code:r}=Mf[t];return{message:e?`${n} ${e}`:n,code:r}}function Zf(t,e){const{message:n,code:r}=Vf[t];return{message:e?`${n} ${e}`:n,code:r}}function Gf(t,e){return!!Array.isArray(t)&&(!(typeof e<"u"&&t.length)||t.every(e))}function Wf(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Yf(t){return typeof t>"u"}function Xf(t,e){return!(!e||!Yf(t))||"string"==typeof t&&!!t.trim().length}function Jf(t,e){return!(!e||!Yf(t))||"number"==typeof t&&!isNaN(t)}function Qf(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),o=Object.keys(n);let i=!0;return!!kt(o,r)&&(r.forEach(e=>{const{accounts:r,methods:o,events:s}=t.namespaces[e],f=$f(r),c=n[e];(!kt(ot(e,c),f)||!kt(c.methods,o)||!kt(c.events,s))&&(i=!1)}),i)}function tc(t){return!(!Xf(t,!1)||!t.includes(":"))&&2===t.split(":").length}function ec(t){if(Xf(t,!1)&&t.includes(":")){const e=t.split(":");if(3===e.length){const t=e[0]+":"+e[1];return!!e[2]&&tc(t)}}return!1}function nc(t){function e(t){try{return typeof new URL(t)<"u"}catch{return!1}}try{if(Xf(t,!1)){if(e(t))return!0;const n=ee(t);return e(n)}}catch{}return!1}function rc(t){var e;return null==(e=t?.proposer)?void 0:e.publicKey}function oc(t){return t?.topic}function ic(t,e){let n=null;return Xf(t?.publicKey,!1)||(n=Kf("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function sc(t){let e=!0;return Gf(t)?t.length&&(e=t.every(t=>Xf(t,!1))):e=!1,e}function fc(t,e,n){let r=null;return Gf(e)&&e.length?e.forEach(t=>{r||tc(t)||(r=Zf("UNSUPPORTED_CHAINS",`${n}, chain ${t} should be a string and conform to "namespace:chainId" format`))}):tc(t)||(r=Zf("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function cc(t,e,n){let r=null;return Object.entries(t).forEach(([t,o])=>{if(r)return;const i=fc(t,ot(t,o),`${e} ${n}`);i&&(r=i)}),r}function ac(t,e){let n=null;return Gf(t)?t.forEach(t=>{n||ec(t)||(n=Zf("UNSUPPORTED_ACCOUNTS",`${e}, account ${t} should be a string and conform to "namespace:chainId:address" format`))}):n=Zf("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function uc(t,e){let n=null;return Object.values(t).forEach(t=>{if(n)return;const r=ac(t?.accounts,`${e} namespace`);r&&(n=r)}),n}function lc(t,e){let n=null;return sc(t?.methods)?sc(t?.events)||(n=Zf("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Zf("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function hc(t,e){let n=null;return Object.values(t).forEach(t=>{if(n)return;const r=lc(t,`${e}, namespace`);r&&(n=r)}),n}function dc(t,e,n){let r=null;if(t&&Wf(t)){const o=hc(t,e);o&&(r=o);const i=cc(t,e,n);i&&(r=i)}else r=Kf("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function pc(t,e){let n=null;if(t&&Wf(t)){const r=hc(t,e);r&&(n=r);const o=uc(t,e);o&&(n=o)}else n=Kf("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function gc(t){return Xf(t.protocol,!0)}function wc(t,e){let n=!1;return e&&!t?n=!0:t&&Gf(t)&&t.length&&t.forEach(t=>{n=gc(t)}),n}function yc(t){return"number"==typeof t}function bc(t){return typeof t<"u"&&null!==typeof t}function mc(t){return!(!t||"object"!=typeof t||!t.code||!Jf(t.code,!1)||!t.message||!Xf(t.message,!1))}function vc(t){return!(Yf(t)||!Xf(t.method,!1))}function Ec(t){return!(Yf(t)||Yf(t.result)&&Yf(t.error)||!Jf(t.id,!1)||!Xf(t.jsonrpc,!1))}function xc(t){return!(Yf(t)||!Xf(t.name,!1))}function Bc(t,e){return!(!tc(e)||!Lf(t).includes(e))}function Ic(t,e,n){return!!Xf(n,!1)&&jf(t,e).includes(n)}function Oc(t,e,n){return!!Xf(n,!1)&&Cf(t,e).includes(n)}function Ac(t,e,n){let r=null;const o=Sc(t),i=Uc(e),s=Object.keys(o),f=Object.keys(i),c=Nc(Object.keys(t)),a=Nc(Object.keys(e)),u=c.filter(t=>!a.includes(t));return u.length&&(r=Kf("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${u.toString()}\n      Received: ${Object.keys(e).toString()}`)),kt(s,f)||(r=Kf("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.\n      Required: ${s.toString()}\n      Approved: ${f.toString()}`)),Object.keys(e).forEach(t=>{if(!t.includes(":")||r)return;const o=$f(e[t].accounts);o.includes(t)||(r=Kf("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${t}\n        Required: ${t}\n        Approved: ${o.toString()}`))}),s.forEach(t=>{r||(kt(o[t].methods,i[t].methods)?kt(o[t].events,i[t].events)||(r=Kf("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${t}`)):r=Kf("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${t}`))}),r}function Sc(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:null==(r=t[n].chains)||r.forEach(r=>{e[r]={methods:t[n].methods,events:t[n].events}})}),e}function Nc(t){return[...new Set(t.map(t=>t.includes(":")?t.split(":")[0]:t))]}function Uc(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=$f(t[n].accounts);r?.forEach(r=>{e[r]={accounts:t[n].accounts.filter(t=>t.includes(`${r}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function Rc(t,e){return Jf(t,!1)&&t<=e.max&&t>=e.min}function Pc(){const t=Bt();return new Promise(e=>{switch(t){case wt.browser:e(kc());break;case wt.reactNative:e($c());break;case wt.node:e(Lc());break;default:e(!0)}})}function kc(){return xt()&&navigator?.onLine}async function $c(){if(mt()&&typeof n.g<"u"&&null!=n.g&&n.g.NetInfo){const t=await(null==n.g?void 0:n.g.NetInfo.fetch());return t?.isConnected}return!0}function Lc(){return!0}function jc(t){switch(Bt()){case wt.browser:Cc(t);break;case wt.reactNative:Tc(t);break;case wt.node:break}}function Cc(t){!mt()&&xt()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function Tc(t){mt()&&typeof n.g<"u"&&null!=n.g&&n.g.NetInfo&&n.g?.NetInfo.addEventListener(e=>t(e?.isConnected))}function _c(){var t;return!xt()||!(0,i.getDocument)()||"visible"===(null==(t=(0,i.getDocument)())?void 0:t.visibilityState)}const Dc={};class zc{static get(t){return Dc[t]}static set(t,e){Dc[t]=e}static delete(t){delete Dc[t]}}function Fc(t){const e=K.A.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function Hc({publicKey:t,signature:e,payload:n}){var r;const o=Vc(n.method),i=128|parseInt((null==(r=n.version)?void 0:r.toString())||"4"),s=Kc(n.address),f="00"===n.era?new Uint8Array([0]):Vc(n.era);if(1!==f.length&&2!==f.length)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),a=new Uint8Array([255&c,c>>8&255]),u=BigInt(`0x${Mc(n.tip)}`),l=Gc(u),h=new Uint8Array([0,...t,s,...e,...f,...a,...l,...o]),d=Zc(h.length+1);return new Uint8Array([...d,i,...h])}function qc(t){const e=Vc(t),n=(0,Q.blake2b)(e,void 0,32);return"0x"+et.from(n).toString("hex")}function Vc(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(t=>parseInt(t,16)))}function Mc(t){return t.startsWith("0x")?t.slice(2):t}function Kc(t){const e=K.A.decode(t)[0];return 42===e?0:60===e?2:1}function Zc(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([255&e,e>>8&255])}if(t<1<<30){const e=t<<2|2;return new Uint8Array([255&e,e>>8&255,e>>16&255,e>>24&255])}throw new Error("Compact encoding > 2^30 not supported")}function Gc(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}throw new Error("BigInt compact encoding not supported > 2^30")}function Wc(t){const e=Uint8Array.from(et.from(t.signature,"hex")),n=Fc(t.transaction.address),r=Hc({publicKey:n,signature:e,payload:t.transaction}),o=et.from(r).toString("hex");return qc(o)}},52661:(t,e,n)=>{n.d(e,{secp256k1:()=>Ht});var r=n(2265),o=n(21454),i=n(68279);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const s=BigInt(0),f=BigInt(1);function c(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function a(t){if(!c(t))throw new Error("Uint8Array expected")}function u(t,e){if("boolean"!==typeof e)throw new Error(t+" boolean expected, got "+e)}function l(t){const e=t.toString(16);return 1&e.length?"0"+e:e}function h(t){if("string"!==typeof t)throw new Error("hex string expected, got "+typeof t);return""===t?s:BigInt("0x"+t)}const d="function"===typeof Uint8Array.from([]).toHex&&"function"===typeof Uint8Array.fromHex,p=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function g(t){if(a(t),d)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=p[t[n]];return e}const w={_0:48,_9:57,A:65,F:70,a:97,f:102};function y(t){return t>=w._0&&t<=w._9?t-w._0:t>=w.A&&t<=w.F?t-(w.A-10):t>=w.a&&t<=w.f?t-(w.a-10):void 0}function b(t){if("string"!==typeof t)throw new Error("hex string expected, got "+typeof t);if(d)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let o=0,i=0;o<n;o++,i+=2){const e=y(t.charCodeAt(i)),n=y(t.charCodeAt(i+1));if(void 0===e||void 0===n){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}r[o]=16*e+n}return r}function m(t){return h(g(t))}function v(t){return a(t),h(g(Uint8Array.from(t).reverse()))}function E(t,e){return b(t.toString(16).padStart(2*e,"0"))}function x(t,e){return E(t,e).reverse()}function B(t,e,n){let r;if("string"===typeof e)try{r=b(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else{if(!c(e))throw new Error(t+" must be hex string or Uint8Array");r=Uint8Array.from(e)}const o=r.length;if("number"===typeof n&&o!==n)throw new Error(t+" of length "+n+" expected, got "+o);return r}function I(...t){let e=0;for(let r=0;r<t.length;r++){const n=t[r];a(n),e+=n.length}const n=new Uint8Array(e);for(let r=0,o=0;r<t.length;r++){const e=t[r];n.set(e,o),o+=e.length}return n}const O=t=>"bigint"===typeof t&&s<=t;function A(t,e,n){return O(t)&&O(e)&&O(n)&&e<=t&&t<n}function S(t,e,n,r){if(!A(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function N(t){let e;for(e=0;t>s;t>>=f,e+=1);return e}const U=t=>(f<<BigInt(t))-f,R=t=>new Uint8Array(t),P=t=>Uint8Array.from(t);function k(t,e,n){if("number"!==typeof t||t<2)throw new Error("hashLen must be a number");if("number"!==typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!==typeof n)throw new Error("hmacFn must be a function");let r=R(t),o=R(t),i=0;const s=()=>{r.fill(1),o.fill(0),i=0},f=(...t)=>n(o,r,...t),c=(t=R(0))=>{o=f(P([0]),t),r=f(),0!==t.length&&(o=f(P([1]),t),r=f())},a=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const n=[];while(t<e){r=f();const e=r.slice();n.push(e),t+=r.length}return I(...n)},u=(t,e)=>{let n;s(),c(t);while(!(n=e(a())))c();return s(),n};return u}const $={bigint:t=>"bigint"===typeof t,function:t=>"function"===typeof t,boolean:t=>"boolean"===typeof t,string:t=>"string"===typeof t,stringOrUint8Array:t=>"string"===typeof t||c(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"===typeof t&&Number.isSafeInteger(t.outputLen)};function L(t,e,n={}){const r=(e,n,r)=>{const o=$[n];if("function"!==typeof o)throw new Error("invalid validator function");const i=t[e];if((!r||void 0!==i)&&!o(i,t))throw new Error("param "+String(e)+" is invalid. Expected "+n+", got "+i)};for(const[o,i]of Object.entries(e))r(o,i,!1);for(const[o,i]of Object.entries(n))r(o,i,!0);return t}function j(t){const e=new WeakMap;return(n,...r)=>{const o=e.get(n);if(void 0!==o)return o;const i=t(n,...r);return e.set(n,i),i}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const C=BigInt(0),T=BigInt(1),_=BigInt(2),D=BigInt(3),z=BigInt(4),F=BigInt(5),H=BigInt(8);function q(t,e){const n=t%e;return n>=C?n:e+n}function V(t,e,n){let r=t;while(e-- >C)r*=r,r%=n;return r}function M(t,e){if(t===C)throw new Error("invert: expected non-zero number");if(e<=C)throw new Error("invert: expected positive modulus, got "+e);let n=q(t,e),r=e,o=C,i=T,s=T,f=C;while(n!==C){const t=r/n,e=r%n,c=o-s*t,a=i-f*t;r=n,n=e,o=s,i=f,s=c,f=a}const c=r;if(c!==T)throw new Error("invert: does not exist");return q(o,e)}function K(t,e){const n=(t.ORDER+T)/z,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function Z(t,e){const n=(t.ORDER-F)/H,r=t.mul(e,_),o=t.pow(r,n),i=t.mul(e,o),s=t.mul(t.mul(i,_),o),f=t.mul(i,t.sub(s,t.ONE));if(!t.eql(t.sqr(f),e))throw new Error("Cannot find square root");return f}function G(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-T,n=0;while(e%_===C)e/=_,n++;let r=_;const o=nt(t);while(1===tt(o,r))if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(1===n)return K;let i=o.pow(r,e);const s=(e+T)/_;return function(t,r){if(t.is0(r))return r;if(1!==tt(t,r))throw new Error("Cannot find square root");let o=n,f=t.mul(t.ONE,i),c=t.pow(r,e),a=t.pow(r,s);while(!t.eql(c,t.ONE)){if(t.is0(c))return t.ZERO;let e=1,n=t.sqr(c);while(!t.eql(n,t.ONE))if(e++,n=t.sqr(n),e===o)throw new Error("Cannot find square root");const r=T<<BigInt(o-e-1),i=t.pow(f,r);o=e,f=t.sqr(i),c=t.mul(c,f),a=t.mul(a,i)}return a}}function W(t){return t%z===D?K:t%H===F?Z:G(t)}const Y=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function X(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Y.reduce((t,e)=>(t[e]="function",t),e);return L(t,n)}function J(t,e,n){if(n<C)throw new Error("invalid exponent, negatives unsupported");if(n===C)return t.ONE;if(n===T)return e;let r=t.ONE,o=e;while(n>C)n&T&&(r=t.mul(r,o)),o=t.sqr(o),n>>=T;return r}function Q(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),o=e.reduce((e,n,o)=>t.is0(n)?e:(r[o]=e,t.mul(e,n)),t.ONE),i=t.inv(o);return e.reduceRight((e,n,o)=>t.is0(n)?e:(r[o]=t.mul(e,r[o]),t.mul(e,n)),i),r}function tt(t,e){const n=(t.ORDER-T)/_,r=t.pow(e,n),o=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),s=t.eql(r,t.neg(t.ONE));if(!o&&!i&&!s)throw new Error("invalid Legendre symbol result");return o?1:i?0:-1}function et(t,e){void 0!==e&&(0,i.Fe)(e);const n=void 0!==e?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function nt(t,e,n=!1,r={}){if(t<=C)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:o,nByteLength:i}=et(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let s;const f=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:i,MASK:U(o),ZERO:C,ONE:T,create:e=>q(e,t),isValid:e=>{if("bigint"!==typeof e)throw new Error("invalid field element: expected bigint, got "+typeof e);return C<=e&&e<t},is0:t=>t===C,isOdd:t=>(t&T)===T,neg:e=>q(-e,t),eql:(t,e)=>t===e,sqr:e=>q(e*e,t),add:(e,n)=>q(e+n,t),sub:(e,n)=>q(e-n,t),mul:(e,n)=>q(e*n,t),pow:(t,e)=>J(f,t,e),div:(e,n)=>q(e*M(n,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>M(e,t),sqrt:r.sqrt||(e=>(s||(s=W(t)),s(f,e))),toBytes:t=>n?x(t,i):E(t,i),fromBytes:t=>{if(t.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+t.length);return n?v(t):m(t)},invertBatch:t=>Q(f,t),cmov:(t,e,n)=>n?e:t});return Object.freeze(f)}function rt(t){if("bigint"!==typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function ot(t){const e=rt(t);return e+Math.ceil(e/2)}function it(t,e,n=!1){const r=t.length,o=rt(e),i=ot(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const s=n?v(t):m(t),f=q(s,e-T)+T;return n?x(f,o):E(f,o)}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const st=BigInt(0),ft=BigInt(1);function ct(t,e){const n=e.negate();return t?n:e}function at(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function ut(t,e){at(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),o=2**t,i=U(t),s=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:o,shiftBy:s}}function lt(t,e,n){const{windowSize:r,mask:o,maxNumber:i,shiftBy:s}=n;let f=Number(t&o),c=t>>s;f>r&&(f-=i,c+=ft);const a=e*r,u=a+Math.abs(f)-1,l=0===f,h=f<0,d=e%2!==0,p=a;return{nextN:c,offset:u,isZero:l,isNeg:h,isNegF:d,offsetF:p}}function ht(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function dt(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const pt=new WeakMap,gt=new WeakMap;function wt(t){return gt.get(t)||1}function yt(t,e){return{constTimeNegate:ct,hasPrecomputes(t){return 1!==wt(t)},unsafeLadder(e,n,r=t.ZERO){let o=e;while(n>st)n&ft&&(r=r.add(o)),o=o.double(),n>>=ft;return r},precomputeWindow(t,n){const{windows:r,windowSize:o}=ut(n,e),i=[];let s=t,f=s;for(let e=0;e<r;e++){f=s,i.push(f);for(let t=1;t<o;t++)f=f.add(s),i.push(f);s=f.double()}return i},wNAF(n,r,o){let i=t.ZERO,s=t.BASE;const f=ut(n,e);for(let t=0;t<f.windows;t++){const{nextN:e,offset:n,isZero:c,isNeg:a,isNegF:u,offsetF:l}=lt(o,t,f);o=e,c?s=s.add(ct(u,r[l])):i=i.add(ct(a,r[n]))}return{p:i,f:s}},wNAFUnsafe(n,r,o,i=t.ZERO){const s=ut(n,e);for(let t=0;t<s.windows;t++){if(o===st)break;const{nextN:e,offset:n,isZero:f,isNeg:c}=lt(o,t,s);if(o=e,!f){const t=r[n];i=i.add(c?t.negate():t)}}return i},getPrecomputes(t,e,n){let r=pt.get(e);return r||(r=this.precomputeWindow(e,t),1!==t&&pt.set(e,n(r))),r},wNAFCached(t,e,n){const r=wt(t);return this.wNAF(r,this.getPrecomputes(r,t,n),e)},wNAFCachedUnsafe(t,e,n,r){const o=wt(t);return 1===o?this.unsafeLadder(t,e,r):this.wNAFUnsafe(o,this.getPrecomputes(o,t,n),e,r)},setWindowSize(t,n){at(n,e),gt.set(t,n),pt.delete(t)}}}function bt(t,e,n,r){ht(n,t),dt(r,e);const o=n.length,i=r.length;if(o!==i)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,f=N(BigInt(o));let c=1;f>12?c=f-3:f>4?c=f-2:f>0&&(c=2);const a=U(c),u=new Array(Number(a)+1).fill(s),l=Math.floor((e.BITS-1)/c)*c;let h=s;for(let d=l;d>=0;d-=c){u.fill(s);for(let e=0;e<i;e++){const t=r[e],o=Number(t>>BigInt(d)&a);u[o]=u[o].add(n[e])}let t=s;for(let e=u.length-1,n=s;e>0;e--)n=n.add(u[e]),t=t.add(n);if(h=h.add(t),0!==d)for(let e=0;e<c;e++)h=h.double()}return h}function mt(t){return X(t.Fp),L(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...et(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function vt(t){void 0!==t.lowS&&u("lowS",t.lowS),void 0!==t.prehash&&u("prehash",t.prehash)}function Et(t){const e=mt(t);L(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:o}=e;if(n){if(!r.eql(o,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if("object"!==typeof n||"bigint"!==typeof n.beta||"function"!==typeof n.splitScalar)throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}class xt extends Error{constructor(t=""){super(t)}}const Bt={Err:xt,_tlv:{encode:(t,e)=>{const{Err:n}=Bt;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(1&e.length)throw new n("tlv.encode: unpadded data");const r=e.length/2,o=l(r);if(o.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?l(o.length/2|128):"",s=l(t);return s+i+o+e},decode(t,e){const{Err:n}=Bt;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const o=e[r++],i=!!(128&o);let s=0;if(i){const t=127&o;if(!t)throw new n("tlv.decode(long): indefinite length not supported");if(t>4)throw new n("tlv.decode(long): byte length is too big");const i=e.subarray(r,r+t);if(i.length!==t)throw new n("tlv.decode: length bytes not complete");if(0===i[0])throw new n("tlv.decode(long): zero leftmost byte");for(const e of i)s=s<<8|e;if(r+=t,s<128)throw new n("tlv.decode(long): not minimal encoding")}else s=o;const f=e.subarray(r,r+s);if(f.length!==s)throw new n("tlv.decode: wrong value length");return{v:f,l:e.subarray(r+s)}}},_int:{encode(t){const{Err:e}=Bt;if(t<Ot)throw new e("integer: negative integers are not allowed");let n=l(t);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Bt;if(128&t[0])throw new e("invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new e("invalid signature integer: unnecessary leading zero");return m(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Bt,o=B("signature",t),{v:i,l:s}=r.decode(48,o);if(s.length)throw new e("invalid signature: left bytes after parsing");const{v:f,l:c}=r.decode(2,i),{v:a,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(f),s:n.decode(a)}},hexFromSig(t){const{_tlv:e,_int:n}=Bt,r=e.encode(2,n.encode(t.r)),o=e.encode(2,n.encode(t.s)),i=r+o;return e.encode(48,i)}};function It(t,e){return g(E(t,e))}const Ot=BigInt(0),At=BigInt(1),St=(BigInt(2),BigInt(3)),Nt=BigInt(4);function Ut(t){const e=Et(t),{Fp:n}=e,r=nt(e.n,e.nBitLength),o=e.toBytes||((t,e,r)=>{const o=e.toAffine();return I(Uint8Array.from([4]),n.toBytes(o.x),n.toBytes(o.y))}),i=e.fromBytes||(t=>{const e=t.subarray(1),r=n.fromBytes(e.subarray(0,n.BYTES)),o=n.fromBytes(e.subarray(n.BYTES,2*n.BYTES));return{x:r,y:o}});function s(t){const{a:r,b:o}=e,i=n.sqr(t),s=n.mul(i,t);return n.add(n.add(s,n.mul(t,r)),o)}function f(t,e){const r=n.sqr(e),o=s(t);return n.eql(r,o)}if(!f(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const a=n.mul(n.pow(e.a,St),Nt),l=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(a,l)))throw new Error("bad curve params: a or b");function h(t){return A(t,At,e.n)}function d(t){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:o,n:i}=e;if(n&&"bigint"!==typeof t){if(c(t)&&(t=g(t)),"string"!==typeof t||!n.includes(t.length))throw new Error("invalid private key");t=t.padStart(2*r,"0")}let s;try{s="bigint"===typeof t?t:m(B("private key",t,r))}catch(f){throw new Error("invalid private key, expected hex or "+r+" bytes, got "+typeof t)}return o&&(s=q(s,i)),S("private key",s,At,i),s}function p(t){if(!(t instanceof b))throw new Error("ProjectivePoint expected")}const w=j((t,e)=>{const{px:r,py:o,pz:i}=t;if(n.eql(i,n.ONE))return{x:r,y:o};const s=t.is0();null==e&&(e=s?n.ONE:n.inv(i));const f=n.mul(r,e),c=n.mul(o,e),a=n.mul(i,e);if(s)return{x:n.ZERO,y:n.ZERO};if(!n.eql(a,n.ONE))throw new Error("invZ was invalid");return{x:f,y:c}}),y=j(t=>{if(t.is0()){if(e.allowInfinityPoint&&!n.is0(t.py))return;throw new Error("bad point: ZERO")}const{x:r,y:o}=t.toAffine();if(!n.isValid(r)||!n.isValid(o))throw new Error("bad point: x or y not FE");if(!f(r,o))throw new Error("bad point: equation left != right");if(!t.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class b{constructor(t,e,r){if(null==t||!n.isValid(t))throw new Error("x required");if(null==e||!n.isValid(e)||n.is0(e))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required");this.px=t,this.py=e,this.pz=r,Object.freeze(this)}static fromAffine(t){const{x:e,y:r}=t||{};if(!t||!n.isValid(e)||!n.isValid(r))throw new Error("invalid affine point");if(t instanceof b)throw new Error("projective point not allowed");const o=t=>n.eql(t,n.ZERO);return o(e)&&o(r)?b.ZERO:new b(e,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=Q(n,t.map(t=>t.pz));return t.map((t,n)=>t.toAffine(e[n])).map(b.fromAffine)}static fromHex(t){const e=b.fromAffine(i(B("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return b.BASE.multiply(d(t))}static msm(t,e){return bt(b,r,t,e)}_setWindowSize(t){x.setWindowSize(this,t)}assertValidity(){y(this)}hasEvenY(){const{y:t}=this.toAffine();if(n.isOdd)return!n.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){p(t);const{px:e,py:r,pz:o}=this,{px:i,py:s,pz:f}=t,c=n.eql(n.mul(e,f),n.mul(i,o)),a=n.eql(n.mul(r,f),n.mul(s,o));return c&&a}negate(){return new b(this.px,n.neg(this.py),this.pz)}double(){const{a:t,b:r}=e,o=n.mul(r,St),{px:i,py:s,pz:f}=this;let c=n.ZERO,a=n.ZERO,u=n.ZERO,l=n.mul(i,i),h=n.mul(s,s),d=n.mul(f,f),p=n.mul(i,s);return p=n.add(p,p),u=n.mul(i,f),u=n.add(u,u),c=n.mul(t,u),a=n.mul(o,d),a=n.add(c,a),c=n.sub(h,a),a=n.add(h,a),a=n.mul(c,a),c=n.mul(p,c),u=n.mul(o,u),d=n.mul(t,d),p=n.sub(l,d),p=n.mul(t,p),p=n.add(p,u),u=n.add(l,l),l=n.add(u,l),l=n.add(l,d),l=n.mul(l,p),a=n.add(a,l),d=n.mul(s,f),d=n.add(d,d),l=n.mul(d,p),c=n.sub(c,l),u=n.mul(d,h),u=n.add(u,u),u=n.add(u,u),new b(c,a,u)}add(t){p(t);const{px:r,py:o,pz:i}=this,{px:s,py:f,pz:c}=t;let a=n.ZERO,u=n.ZERO,l=n.ZERO;const h=e.a,d=n.mul(e.b,St);let g=n.mul(r,s),w=n.mul(o,f),y=n.mul(i,c),m=n.add(r,o),v=n.add(s,f);m=n.mul(m,v),v=n.add(g,w),m=n.sub(m,v),v=n.add(r,i);let E=n.add(s,c);return v=n.mul(v,E),E=n.add(g,y),v=n.sub(v,E),E=n.add(o,i),a=n.add(f,c),E=n.mul(E,a),a=n.add(w,y),E=n.sub(E,a),l=n.mul(h,v),a=n.mul(d,y),l=n.add(a,l),a=n.sub(w,l),l=n.add(w,l),u=n.mul(a,l),w=n.add(g,g),w=n.add(w,g),y=n.mul(h,y),v=n.mul(d,v),w=n.add(w,y),y=n.sub(g,y),y=n.mul(h,y),v=n.add(v,y),g=n.mul(w,v),u=n.add(u,g),g=n.mul(E,v),a=n.mul(m,a),a=n.sub(a,g),g=n.mul(m,w),l=n.mul(E,l),l=n.add(l,g),new b(a,u,l)}subtract(t){return this.add(t.negate())}is0(){return this.equals(b.ZERO)}wNAF(t){return x.wNAFCached(this,t,b.normalizeZ)}multiplyUnsafe(t){const{endo:r,n:o}=e;S("scalar",t,Ot,o);const i=b.ZERO;if(t===Ot)return i;if(this.is0()||t===At)return this;if(!r||x.hasPrecomputes(this))return x.wNAFCachedUnsafe(this,t,b.normalizeZ);let{k1neg:s,k1:f,k2neg:c,k2:a}=r.splitScalar(t),u=i,l=i,h=this;while(f>Ot||a>Ot)f&At&&(u=u.add(h)),a&At&&(l=l.add(h)),h=h.double(),f>>=At,a>>=At;return s&&(u=u.negate()),c&&(l=l.negate()),l=new b(n.mul(l.px,r.beta),l.py,l.pz),u.add(l)}multiply(t){const{endo:r,n:o}=e;let i,s;if(S("scalar",t,At,o),r){const{k1neg:e,k1:o,k2neg:f,k2:c}=r.splitScalar(t);let{p:a,f:u}=this.wNAF(o),{p:l,f:h}=this.wNAF(c);a=x.constTimeNegate(e,a),l=x.constTimeNegate(f,l),l=new b(n.mul(l.px,r.beta),l.py,l.pz),i=a.add(l),s=u.add(h)}else{const{p:e,f:n}=this.wNAF(t);i=e,s=n}return b.normalizeZ([i,s])[0]}multiplyAndAddUnsafe(t,e,n){const r=b.BASE,o=(t,e)=>e!==Ot&&e!==At&&t.equals(r)?t.multiply(e):t.multiplyUnsafe(e),i=o(this,e).add(o(t,n));return i.is0()?void 0:i}toAffine(t){return w(this,t)}isTorsionFree(){const{h:t,isTorsionFree:n}=e;if(t===At)return!0;if(n)return n(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:n}=e;return t===At?this:n?n(b,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return u("isCompressed",t),this.assertValidity(),o(b,this,t)}toHex(t=!0){return u("isCompressed",t),g(this.toRawBytes(t))}}b.BASE=new b(e.Gx,e.Gy,n.ONE),b.ZERO=new b(n.ZERO,n.ONE,n.ZERO);const{endo:v,nBitLength:E}=e,x=yt(b,v?Math.ceil(E/2):E);return{CURVE:e,ProjectivePoint:b,normPrivateKeyToScalar:d,weierstrassEquation:s,isWithinCurveOrder:h}}function Rt(t){const e=mt(t);return L(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Pt(t){const e=Rt(t),{Fp:n,n:r,nByteLength:o,nBitLength:i}=e,s=n.BYTES+1,f=2*n.BYTES+1;function a(t){return q(t,r)}function l(t){return M(t,r)}const{ProjectivePoint:h,normPrivateKeyToScalar:d,weierstrassEquation:p,isWithinCurveOrder:g}=Ut({...e,toBytes(t,e,r){const o=e.toAffine(),i=n.toBytes(o.x),s=I;return u("isCompressed",r),r?s(Uint8Array.from([e.hasEvenY()?2:3]),i):s(Uint8Array.from([4]),i,n.toBytes(o.y))},fromBytes(t){const e=t.length,r=t[0],o=t.subarray(1);if(e!==s||2!==r&&3!==r){if(e===f&&4===r){const t=n.fromBytes(o.subarray(0,n.BYTES)),e=n.fromBytes(o.subarray(n.BYTES,2*n.BYTES));return{x:t,y:e}}{const t=s,n=f;throw new Error("invalid Point, expected length of "+t+", or uncompressed "+n+", got "+e)}}{const t=m(o);if(!A(t,At,n.ORDER))throw new Error("Point is not on curve");const e=p(t);let s;try{s=n.sqrt(e)}catch(i){const t=i instanceof Error?": "+i.message:"";throw new Error("Point is not on curve"+t)}const f=(s&At)===At,c=1===(1&r);return c!==f&&(s=n.neg(s)),{x:t,y:s}}}});function w(t){const e=r>>At;return t>e}function y(t){return w(t)?a(-t):t}const v=(t,e,n)=>m(t.slice(e,n));class x{constructor(t,e,n){S("r",t,At,r),S("s",e,At,r),this.r=t,this.s=e,null!=n&&(this.recovery=n),Object.freeze(this)}static fromCompact(t){const e=o;return t=B("compactSignature",t,2*e),new x(v(t,0,e),v(t,e,2*e))}static fromDER(t){const{r:e,s:n}=Bt.toSig(B("DER",t));return new x(e,n)}assertValidity(){}addRecoveryBit(t){return new x(this.r,this.s,t)}recoverPublicKey(t){const{r,s:o,recovery:i}=this,s=L(B("msgHash",t));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const f=2===i||3===i?r+e.n:r;if(f>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const c=0===(1&i)?"02":"03",u=h.fromHex(c+It(f,n.BYTES)),d=l(f),p=a(-s*d),g=a(o*d),w=h.BASE.multiplyAndAddUnsafe(u,p,g);if(!w)throw new Error("point at infinify");return w.assertValidity(),w}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return b(this.toDERHex())}toDERHex(){return Bt.hexFromSig(this)}toCompactRawBytes(){return b(this.toCompactHex())}toCompactHex(){const t=o;return It(this.r,t)+It(this.s,t)}}const O={isValidPrivateKey(t){try{return d(t),!0}catch(e){return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const t=ot(e.n);return it(e.randomBytes(t),e.n)},precompute(t=8,e=h.BASE){return e._setWindowSize(t),e.multiply(BigInt(3)),e}};function N(t,e=!0){return h.fromPrivateKey(t).toRawBytes(e)}function R(t){if("bigint"===typeof t)return!1;if(t instanceof h)return!0;const r=B("key",t),i=r.length,s=n.BYTES,f=s+1,c=2*s+1;return e.allowedPrivateKeyLengths||o===f?void 0:i===f||i===c}function P(t,e,n=!0){if(!0===R(t))throw new Error("first arg must be private key");if(!1===R(e))throw new Error("second arg must be public key");const r=h.fromHex(e);return r.multiply(d(t)).toRawBytes(n)}const $=e.bits2int||function(t){if(t.length>8192)throw new Error("input is too large");const e=m(t),n=8*t.length-i;return n>0?e>>BigInt(n):e},L=e.bits2int_modN||function(t){return a($(t))},j=U(i);function C(t){return S("num < 2^"+i,t,Ot,j),E(t,o)}function T(t,r,o=_){if(["recovered","canonical"].some(t=>t in o))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:s}=e;let{lowS:f,prehash:c,extraEntropy:u}=o;null==f&&(f=!0),t=B("msgHash",t),vt(o),c&&(t=B("prehashed msgHash",i(t)));const p=L(t),b=d(r),m=[C(b),C(p)];if(null!=u&&!1!==u){const t=!0===u?s(n.BYTES):u;m.push(B("extraEntropy",t))}const v=I(...m),E=p;function O(t){const e=$(t);if(!g(e))return;const n=l(e),r=h.BASE.multiply(e).toAffine(),o=a(r.x);if(o===Ot)return;const i=a(n*a(E+o*b));if(i===Ot)return;let s=(r.x===o?0:2)|Number(r.y&At),c=i;return f&&w(i)&&(c=y(i),s^=1),new x(o,c,s)}return{seed:v,k2sig:O}}const _={lowS:e.lowS,prehash:!1},D={lowS:e.lowS,prehash:!1};function z(t,n,r=_){const{seed:o,k2sig:i}=T(t,n,r),s=e,f=k(s.hash.outputLen,s.nByteLength,s.hmac);return f(o,i)}function F(t,n,r,o=D){const i=t;n=B("msgHash",n),r=B("publicKey",r);const{lowS:s,prehash:f,format:u}=o;if(vt(o),"strict"in o)throw new Error("options.strict was renamed to lowS");if(void 0!==u&&"compact"!==u&&"der"!==u)throw new Error("format must be compact or der");const d="string"===typeof i||c(i),p=!d&&!u&&"object"===typeof i&&null!==i&&"bigint"===typeof i.r&&"bigint"===typeof i.s;if(!d&&!p)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let g,w;try{if(p&&(g=new x(i.r,i.s)),d){try{"compact"!==u&&(g=x.fromDER(i))}catch(S){if(!(S instanceof Bt.Err))throw S}g||"der"===u||(g=x.fromCompact(i))}w=h.fromHex(r)}catch(N){return!1}if(!g)return!1;if(s&&g.hasHighS())return!1;f&&(n=e.hash(n));const{r:y,s:b}=g,m=L(n),v=l(b),E=a(m*v),I=a(y*v),O=h.BASE.multiplyAndAddUnsafe(w,E,I)?.toAffine();if(!O)return!1;const A=a(O.x);return A===y}return h.BASE._setWindowSize(8),{CURVE:e,getPublicKey:N,getSharedSecret:P,sign:z,verify:F,ProjectivePoint:h,Signature:x,utils:O}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function kt(t){return{hash:t,hmac:(e,...n)=>(0,o.w)(t,e,(0,i.Id)(...n)),randomBytes:i.po}}function $t(t,e){const n=e=>Pt({...t,...kt(e)});return{...n(e),create:n}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const Lt=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),jt=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ct=BigInt(0),Tt=BigInt(1),_t=BigInt(2),Dt=(t,e)=>(t+e/_t)/e;function zt(t){const e=Lt,n=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),f=BigInt(44),c=BigInt(88),a=t*t*t%e,u=a*a*t%e,l=V(u,n,e)*u%e,h=V(l,n,e)*u%e,d=V(h,_t,e)*a%e,p=V(d,o,e)*d%e,g=V(p,i,e)*p%e,w=V(g,f,e)*g%e,y=V(w,c,e)*w%e,b=V(y,f,e)*g%e,m=V(b,n,e)*u%e,v=V(m,s,e)*p%e,E=V(v,r,e)*a%e,x=V(E,_t,e);if(!Ft.eql(Ft.sqr(x),t))throw new Error("Cannot find square root");return x}const Ft=nt(Lt,void 0,void 0,{sqrt:zt}),Ht=$t({a:Ct,b:BigInt(7),Fp:Ft,n:jt,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=jt,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Tt*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,s=BigInt("0x100000000000000000000000000000000"),f=Dt(i*t,e),c=Dt(-r*t,e);let a=q(t-f*n-c*o,e),u=q(-f*r-c*i,e);const l=a>s,h=u>s;if(l&&(a=e-a),h&&(u=e-u),a>s||u>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:l,k1:a,k2neg:h,k2:u}}}},r.sc)},72225:(t,e,n)=>{n.d(e,{$Q:()=>x,GF:()=>E,S9:()=>A,Vx:()=>m,ZP:()=>a,dQ:()=>p,lZ:()=>d,m5:()=>w,mF:()=>b,pi:()=>y,qE:()=>g,yJ:()=>S,zl:()=>v});var r=n(4556),o=n(37007),i=n.n(o),s=Object.defineProperty,f=(t,e,n)=>e in t?s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,c=(t,e,n)=>f(t,"symbol"!=typeof e?e+"":e,n);class a extends r.H{constructor(t){super(),this.opts=t,c(this,"protocol","wc"),c(this,"version",2)}}var u=Object.defineProperty,l=(t,e,n)=>e in t?u(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,h=(t,e,n)=>l(t,"symbol"!=typeof e?e+"":e,n);class d extends r.H{constructor(t,e){super(),this.core=t,this.logger=e,h(this,"records",new Map)}}class p{constructor(t,e){this.logger=t,this.core=e}}class g extends r.H{constructor(t,e){super(),this.relayer=t,this.logger=e}}class w extends r.H{constructor(t){super()}}class y{constructor(t,e,n,r){this.core=t,this.logger=e,this.name=n}}Object.defineProperty;class b extends r.H{constructor(t,e){super(),this.relayer=t,this.logger=e}}class m extends r.H{constructor(t,e){super(),this.core=t,this.logger=e}}class v{constructor(t,e,n){this.core=t,this.logger=e,this.store=n}}class E{constructor(t,e){this.projectId=t,this.logger=e}}class x{constructor(t,e,n){this.core=t,this.logger=e,this.telemetryEnabled=n}}var B=Object.defineProperty,I=(t,e,n)=>e in t?B(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,O=(t,e,n)=>I(t,"symbol"!=typeof e?e+"":e,n);i();class A{constructor(t){this.opts=t,O(this,"protocol","wc"),O(this,"version",2)}}o.EventEmitter;class S{constructor(t){this.client=t}}}}]);