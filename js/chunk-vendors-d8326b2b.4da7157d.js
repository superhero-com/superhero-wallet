(self["webpackChunksuperhero_wallet"]=self["webpackChunksuperhero_wallet"]||[]).push([[9830],{29094:(t,e,n)=>{var r="undefined"!==typeof globalThis&&globalThis||"undefined"!==typeof self&&self||"undefined"!==typeof n.g&&n.g,i=function(){function t(){this.fetch=!1,this.DOMException=r.DOMException}return t.prototype=r,new t}();(function(t){(function(e){var n="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||"undefined"!==typeof n&&n,r={searchParams:"URLSearchParams"in n,iterable:"Symbol"in n&&"iterator"in Symbol,blob:"FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in n,arrayBuffer:"ArrayBuffer"in n};function i(t){return t&&DataView.prototype.isPrototypeOf(t)}if(r.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(t){return t&&o.indexOf(Object.prototype.toString.call(t))>-1};function a(t){if("string"!==typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function u(t){return"string"!==typeof t&&(t=String(t)),t}function c(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r.iterable&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function l(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function f(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function h(t){var e=new FileReader,n=f(e);return e.readAsArrayBuffer(t),n}function m(t){var e=new FileReader,n=f(e);return e.readAsText(t),n}function v(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function p(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(t){this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"===typeof t?this._bodyText=t:r.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:r.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():r.arrayBuffer&&r.blob&&i(t)?(this._bodyArrayBuffer=p(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||s(t))?this._bodyArrayBuffer=p(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=l(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(h)}),this.text=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return m(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(v(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(t,e){t=a(t),e=u(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},d.prototype["delete"]=function(t){delete this.map[a(t)]},d.prototype.get=function(t){return t=a(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},d.prototype.set=function(t,e){this.map[a(t)]=u(e)},d.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},d.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),c(t)},d.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),c(t)},d.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),c(t)},r.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);var g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(t){var e=t.toUpperCase();return g.indexOf(e)>-1?e:t}function w(t,e){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e=e||{};var n=e.body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=b(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),("GET"===this.method||"HEAD"===this.method)&&("no-store"===e.cache||"no-cache"===e.cache)){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+(new Date).getTime());else{var i=/\?/;this.url+=(i.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function _(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}})),e}function P(t){var e=new d,n=t.replace(/\r?\n[\t ]+/g," ");return n.split("\r").map((function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t})).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}})),e}function B(t,e){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===e.statusText?"":""+e.statusText,this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},y.call(w.prototype),y.call(B.prototype),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},B.error=function(){var t=new B(null,{status:0,statusText:""});return t.type="error",t};var x=[301,302,303,307,308];B.redirect=function(t,e){if(-1===x.indexOf(e))throw new RangeError("Invalid status code");return new B(null,{status:e,headers:{location:t}})},e.DOMException=n.DOMException;try{new e.DOMException}catch(k){e.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function R(t,i){return new Promise((function(o,s){var a=new w(t,i);if(a.signal&&a.signal.aborted)return s(new e.DOMException("Aborted","AbortError"));var c=new XMLHttpRequest;function l(){c.abort()}function f(t){try{return""===t&&n.location.href?n.location.href:t}catch(e){return t}}c.onload=function(){var t={status:c.status,statusText:c.statusText,headers:P(c.getAllResponseHeaders()||"")};t.url="responseURL"in c?c.responseURL:t.headers.get("X-Request-URL");var e="response"in c?c.response:c.responseText;setTimeout((function(){o(new B(e,t))}),0)},c.onerror=function(){setTimeout((function(){s(new TypeError("Network request failed"))}),0)},c.ontimeout=function(){setTimeout((function(){s(new TypeError("Network request failed"))}),0)},c.onabort=function(){setTimeout((function(){s(new e.DOMException("Aborted","AbortError"))}),0)},c.open(a.method,f(a.url),!0),"include"===a.credentials?c.withCredentials=!0:"omit"===a.credentials&&(c.withCredentials=!1),"responseType"in c&&(r.blob?c.responseType="blob":r.arrayBuffer&&a.headers.get("Content-Type")&&-1!==a.headers.get("Content-Type").indexOf("application/octet-stream")&&(c.responseType="arraybuffer")),!i||"object"!==typeof i.headers||i.headers instanceof d?a.headers.forEach((function(t,e){c.setRequestHeader(e,t)})):Object.getOwnPropertyNames(i.headers).forEach((function(t){c.setRequestHeader(t,u(i.headers[t]))})),a.signal&&(a.signal.addEventListener("abort",l),c.onreadystatechange=function(){4===c.readyState&&a.signal.removeEventListener("abort",l)}),c.send("undefined"===typeof a._bodyInit?null:a._bodyInit)}))}R.polyfill=!0,n.fetch||(n.fetch=R,n.Headers=d,n.Request=w,n.Response=B),e.Headers=d,e.Request=w,e.Response=B,e.fetch=R})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var o=r.fetch?r:i;e=o.fetch,e["default"]=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,t.exports=e},19669:(t,e,n)=>{"use strict";var r=n(14387),i=n(69825),o=n(39788);class s{constructor(t){if(this.toAddress=()=>{if(this.isDirect()){const t=this._iban.slice(4),e=s._parseInt(t,36),n=(0,r.PX)(e,40);return(0,r.BA)(n)}throw new Error("Iban is indirect and cannot be converted. Must be length of 34 or 35")},!s.isIndirect(t)&&!s.isDirect(t))throw new Error("Invalid IBAN was provided");this._iban=t}static isDirect(t){return 34===t.length||35===t.length}isDirect(){return s.isDirect(this._iban)}static isIndirect(t){return 20===t.length}isIndirect(){return s.isIndirect(this._iban)}static isValid(t){return/^XE[0-9]{2}(ETH[0-9A-Z]{13}|[0-9A-Z]{30,31})$/.test(t)&&1===s._mod9710(s._iso13616Prepare(t))}isValid(){return s.isValid(this._iban)}static fromBban(t){const e="XE",n=this._mod9710(this._iso13616Prepare(`${e}00${t}`)),r=`0${(98-n).toString()}`.slice(-2);return new s(`${e}${r}${t}`)}static createIndirect(t){return s.fromBban(`ETH${t.institution}${t.identifier}`)}static fromAddress(t){if(!(0,i.PW)(t))throw new o.MsQ(t);const e=BigInt((0,r.ME)(t)),n=e.toString(36),a=(0,r.PX)(n,15);return s.fromBban(a.toUpperCase())}static toIban(t){return s.fromAddress(t).toString()}client(){return this.isIndirect()?this._iban.slice(11):""}checksum(){return this._iban.slice(2,4)}institution(){return this.isIndirect()?this._iban.slice(7,11):""}toString(){return this._iban}}s._iso13616Prepare=t=>{const e="A".charCodeAt(0),n="Z".charCodeAt(0),r=t.toUpperCase(),i=`${r.slice(4)}${r.slice(0,4)}`;return i.split("").map((t=>{const r=t.charCodeAt(0);return r>=e&&r<=n?r-e+10:t})).join("")},s._parseInt=(t,e)=>[...t].reduce(((t,n)=>BigInt(parseInt(n,e))+BigInt(e)*t),BigInt(0)),s._mod9710=t=>{let e,n=t;while(n.length>2)e=n.slice(0,9),n=`${(parseInt(e,10)%97).toString()}${n.slice(e.length)}`;return parseInt(n,10)%97},s.toAddress=t=>{const e=new s(t);return e.toAddress()}},37061:(t,e,n)=>{"use strict";n.d(e,{CQ:()=>Rt,bV:()=>kt,XD:()=>Et,fJ:()=>Oe,PT:()=>Ne,jn:()=>mt,T1:()=>Be,Xy:()=>Ie,Nk:()=>Yt,Ay:()=>Me,Qr:()=>xe,r1:()=>ae,gd:()=>de,ao:()=>Re,xw:()=>me,ym:()=>ge,h9:()=>ye,f7:()=>we,vD:()=>be});n(42791);var r=n(20345),i=n(72243),o=n(39788),s=n(14387),a=n(69825),u=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))};function c(t){return u(this,void 0,void 0,(function*(){return t.send({method:"eth_protocolVersion",params:[]})}))}function d(t){return u(this,void 0,void 0,(function*(){return t.send({method:"eth_syncing",params:[]})}))}function l(t){return u(this,void 0,void 0,(function*(){return t.send({method:"eth_coinbase",params:[]})}))}function f(t){return u(this,void 0,void 0,(function*(){return t.send({method:"eth_mining",params:[]})}))}function h(t){return u(this,void 0,void 0,(function*(){return t.send({method:"eth_hashrate",params:[]})}))}function m(t){return u(this,void 0,void 0,(function*(){return t.send({method:"eth_gasPrice",params:[]})}))}function v(t){return u(this,void 0,void 0,(function*(){return t.send({method:"eth_maxPriorityFeePerGas",params:[]})}))}function p(t){return u(this,void 0,void 0,(function*(){return t.send({method:"eth_accounts",params:[]})}))}function y(t){return u(this,void 0,void 0,(function*(){return t.send({method:"eth_blockNumber",params:[]})}))}function g(t,e,n){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["address","blockNumberOrTag"],[e,n]),t.send({method:"eth_getBalance",params:[e,n]})}))}function b(t,e,n,r){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["address","hex","blockNumberOrTag"],[e,n,r]),t.send({method:"eth_getStorageAt",params:[e,n,r]})}))}function w(t,e,n){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["address","blockNumberOrTag"],[e,n]),t.send({method:"eth_getTransactionCount",params:[e,n]})}))}function _(t,e){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["bytes32"],[e]),t.send({method:"eth_getBlockTransactionCountByHash",params:[e]})}))}function P(t,e){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["blockNumberOrTag"],[e]),t.send({method:"eth_getBlockTransactionCountByNumber",params:[e]})}))}function B(t,e){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["bytes32"],[e]),t.send({method:"eth_getUncleCountByBlockHash",params:[e]})}))}function x(t,e){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["blockNumberOrTag"],[e]),t.send({method:"eth_getUncleCountByBlockNumber",params:[e]})}))}function R(t,e,n){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["address","blockNumberOrTag"],[e,n]),t.send({method:"eth_getCode",params:[e,n]})}))}function k(t,e,n){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["address","hex"],[e,n]),t.send({method:"eth_sign",params:[e,n]})}))}function E(t,e){return u(this,void 0,void 0,(function*(){return t.send({method:"eth_signTransaction",params:[e]})}))}function A(t,e){return u(this,void 0,void 0,(function*(){return t.send({method:"eth_sendTransaction",params:[e]})}))}function I(t,e){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["hex"],[e]),t.send({method:"eth_sendRawTransaction",params:[e]})}))}function F(t,e,n){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["blockNumberOrTag"],[n]),t.send({method:"eth_call",params:[e,n]})}))}function T(t,e,n){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["blockNumberOrTag"],[n]),t.send({method:"eth_estimateGas",params:[e,n]})}))}function S(t,e,n){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["bytes32","bool"],[e,n]),t.send({method:"eth_getBlockByHash",params:[e,n]})}))}function O(t,e,n){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["blockNumberOrTag","bool"],[e,n]),t.send({method:"eth_getBlockByNumber",params:[e,n]})}))}function G(t,e){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["bytes32"],[e]),t.send({method:"eth_getTransactionByHash",params:[e]})}))}function j(t,e,n){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["bytes32","hex"],[e,n]),t.send({method:"eth_getTransactionByBlockHashAndIndex",params:[e,n]})}))}function C(t,e,n){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["blockNumberOrTag","hex"],[e,n]),t.send({method:"eth_getTransactionByBlockNumberAndIndex",params:[e,n]})}))}function N(t,e){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["bytes32"],[e]),t.send({method:"eth_getTransactionReceipt",params:[e]})}))}function M(t,e,n){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["bytes32","hex"],[e,n]),t.send({method:"eth_getUncleByBlockHashAndIndex",params:[e,n]})}))}function q(t,e,n){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["blockNumberOrTag","hex"],[e,n]),t.send({method:"eth_getUncleByBlockNumberAndIndex",params:[e,n]})}))}function H(t,e){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["filter"],[e]),t.send({method:"eth_getLogs",params:[e]})}))}function D(t){return u(this,void 0,void 0,(function*(){return t.send({method:"eth_getWork",params:[]})}))}function L(t,e,n,r){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["bytes8","bytes32","bytes32"],[e,n,r]),t.send({method:"eth_submitWork",params:[e,n,r]})}))}function U(t,e,n,r){return u(this,void 0,void 0,(function*(){a.Nc.validate(["hex","blockNumberOrTag"],[e,n]);for(const t of r)a.Nc.validate(["number"],[t]);return t.send({method:"eth_feeHistory",params:[e,n,r]})}))}function Q(t){return u(this,void 0,void 0,(function*(){return t.send({method:"eth_pendingTransactions",params:[]})}))}function W(t){return u(this,void 0,void 0,(function*(){return t.send({method:"eth_requestAccounts",params:[]})}))}function X(t){return u(this,void 0,void 0,(function*(){return t.send({method:"eth_chainId",params:[]})}))}function $(t,e,n,r){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["address","bytes32[]","blockNumberOrTag"],[e,n,r]),t.send({method:"eth_getProof",params:[e,n,r]})}))}function z(t){return u(this,void 0,void 0,(function*(){return t.send({method:"web3_clientVersion",params:[]})}))}function V(t,e,n){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["blockNumberOrTag"],[n]),t.send({method:"eth_createAccessList",params:[e,n]})}))}function J(t,e,n,r=!1){return u(this,void 0,void 0,(function*(){return a.Nc.validate(["address"],[e]),t.send({method:"eth_signTypedData"+(r?"":"_v4"),params:[e,n]})}))}var K=n(85834);const Y={type:"object",properties:{accessList:{type:"null"},maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},Z={type:"object",properties:{maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},tt={type:"object",properties:{gasPrice:{type:"null"}}},et=(t,e,n)=>{try{a.Nc.validateJSONSchema(t,e)}catch(r){if(r instanceof a.qT)throw new o.Q8z(r.errors,n);throw r}},nt=t=>{var e,n;const i=t;if(!(0,a.uy)(i.type)){let t;switch(i.type){case"0x0":t=Y;break;case"0x1":t=Z;break;case"0x2":t=tt;break;default:return(0,s.GP)({format:"uint"},i.type,r.F2)}return et(t,i,i.type),(0,s.GP)({format:"uint"},i.type,r.F2)}if(!(0,a.uy)(i.maxFeePerGas)||!(0,a.uy)(i.maxPriorityFeePerGas))return et(tt,i,"0x2"),"0x2";if(!(0,a.uy)(i.accessList))return et(Z,i,"0x1"),"0x1";const o=null!==(e=i.hardfork)&&void 0!==e?e:null===(n=i.common)||void 0===n?void 0:n.hardfork;if(!(0,a.uy)(o)){const t=Object.keys(r.EC).indexOf(o);if(t>=Object.keys(r.EC).indexOf("london"))return(0,a.uy)(i.gasPrice)?"0x2":"0x0";if(t===Object.keys(r.EC).indexOf("berlin"))return"0x0"}return(0,a.uy)(i.gasPrice)?void 0:(et(Y,i,"0x0"),"0x0")},rt=(t,e)=>{var n;return(null!==(n=null===e||void 0===e?void 0:e.transactionTypeParser)&&void 0!==n?n:nt)(t)},it=t=>t[0]>127?"0x0":(0,s.nj)(t[0]),ot={type:"object",properties:{address:{format:"address"},storageKeys:{type:"array",items:{format:"bytes32"}}}},st={type:"array",items:Object.assign({},ot)},at={type:"object",properties:{accessList:Object.assign({},st),gasUsed:{type:"string"}}},ut={type:"string",enum:["goerli","kovan","mainnet","rinkeby","ropsten","sepolia"]},ct={type:"string",enum:["arrowGlacier","berlin","byzantium","chainstart","constantinople","dao","homestead","istanbul","london","merge","muirGlacier","petersburg","shanghai","spuriousDragon","tangerineWhistle"]},dt={type:"object",properties:{name:{format:"string"},networkId:{format:"uint"},chainId:{format:"uint"}}},lt={type:"object",properties:{from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},st),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},chain:Object.assign({},ut),hardfork:Object.assign({},ct),chainId:{format:"uint"},networkId:{format:"uint"},common:{type:"object",properties:{customChain:Object.assign({},dt),baseChain:Object.assign({},ut),hardfork:Object.assign({},ct)}},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}}},ft={type:"object",properties:Object.assign(Object.assign({},lt.properties),{blockHash:{format:"bytes32"},blockNumber:{format:"uint"},hash:{format:"bytes32"},transactionIndex:{format:"uint"},from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},st),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}})},ht={type:"object",properties:{index:{format:"uint"},validatorIndex:{format:"uint"},address:{format:"address"},amount:{format:"uint"}}},mt={type:"object",properties:{baseFeePerGas:{format:"uint"},blobGasUsed:{format:"uint"},difficulty:{format:"uint"},excessBlobGas:{format:"uint"},extraData:{format:"bytes"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},hash:{format:"bytes32"},logsBloom:{format:"bytes256"},miner:{format:"bytes"},mixHash:{format:"bytes32"},nonce:{format:"uint"},number:{format:"uint"},parentBeaconBlockRoot:{format:"bytes32"},parentHash:{format:"bytes32"},receiptsRoot:{format:"bytes32"},sha3Uncles:{format:"bytes32"},size:{format:"uint"},stateRoot:{format:"bytes32"},timestamp:{format:"uint"},totalDifficulty:{format:"uint"},transactions:{oneOf:[{type:"array",items:Object.assign({},ft)},{type:"array",items:{format:"bytes32"}}]},transactionsRoot:{format:"bytes32"},uncles:{type:"array",items:{format:"bytes32"}},withdrawals:{type:"array",items:Object.assign({},ht)},withdrawalsRoot:{format:"bytes32"}}},vt={type:"object",properties:{author:{format:"bytes32"},excessDataGas:{format:"uint"},baseFeePerGas:{format:"uint"},blobGasUsed:{format:"uint"},difficulty:{format:"uint"},excessBlobGas:{format:"uint"},extraData:{format:"bytes"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},hash:{format:"bytes32"},logsBloom:{format:"bytes256"},miner:{format:"bytes"},mixHash:{format:"bytes32"},nonce:{format:"uint"},number:{format:"uint"},parentBeaconBlockRoot:{format:"bytes32"},parentHash:{format:"bytes32"},receiptsRoot:{format:"bytes32"},sha3Uncles:{format:"bytes32"},size:{format:"uint"},stateRoot:{format:"bytes32"},timestamp:{format:"uint"},totalDifficulty:{format:"uint"},transactions:{type:"array",items:{format:"bytes32"}},transactionsRoot:{format:"bytes32"},uncles:{type:"array",items:{format:"bytes32"}},withdrawals:{type:"array",items:Object.assign({},ht)},withdrawalsRoot:{format:"bytes32"}}},pt={type:"object",properties:{removed:{format:"bool"},logIndex:{format:"uint"},transactionIndex:{format:"uint"},transactionHash:{format:"bytes32"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},address:{format:"address"},data:{format:"bytes"},topics:{type:"array",items:{format:"bytes32"}}}},yt={type:"object",properties:{startingBlock:{format:"string"},currentBlock:{format:"string"},highestBlock:{format:"string"},knownStates:{format:"string"},pulledStates:{format:"string"}}},gt={type:"object",properties:{transactionHash:{format:"bytes32"},transactionIndex:{format:"uint"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},from:{format:"address"},to:{format:"address"},cumulativeGasUsed:{format:"uint"},gasUsed:{format:"uint"},effectiveGasPrice:{format:"uint"},contractAddress:{format:"address"},logs:{type:"array",items:Object.assign({},pt)},logsBloom:{format:"bytes"},root:{format:"bytes"},status:{format:"uint"},type:{format:"uint"}}},bt={type:"object",properties:{messageHash:{format:"bytes"},r:{format:"bytes32"},s:{format:"bytes32"},v:{format:"bytes"},message:{format:"bytes"},signature:{format:"bytes"}}},wt={type:"object",properties:{oldestBlock:{format:"uint"},baseFeePerGas:{type:"array",items:{format:"uint"}},reward:{type:"array",items:{type:"array",items:{format:"uint"}}},gasUsedRatio:{type:"array",items:{type:"number"}}}},_t={type:"object",properties:{key:{format:"bytes32"},value:{format:"uint"},proof:{type:"array",items:{format:"bytes32"}}}},Pt={type:"object",properties:{balance:{format:"uint"},codeHash:{format:"bytes32"},nonce:{format:"uint"},storageHash:{format:"bytes32"},accountProof:{type:"array",items:{format:"bytes32"}},storageProof:{type:"array",items:Object.assign({},_t)}}};function Bt(t,e=r.Hh,n={transactionSchema:ft,fillInputAndData:!1}){var i,u;let c=(0,s.D9)({},t);if((0,a.uy)(null===t||void 0===t?void 0:t.common)||(c.common=Object.assign({},t.common),(0,a.uy)(null===(i=t.common)||void 0===i?void 0:i.customChain)||(c.common.customChain=Object.assign({},t.common.customChain))),c=(0,s.GP)(null!==(u=n.transactionSchema)&&void 0!==u?u:ft,c,e),!(0,a.uy)(c.data)&&!(0,a.uy)(c.input)&&(0,s.nj)(c.data)!==(0,s.nj)(c.input))throw new o.mPB({data:(0,s.My)(c.data),input:(0,s.My)(c.input)});return n.fillInputAndData&&((0,a.uy)(c.data)?(0,a.uy)(c.input)||(c.data=c.input):c.input=c.data),(0,a.uy)(c.gasLimit)||(c.gas=c.gasLimit,delete c.gasLimit),c}function xt(t,e,n={fillInputAndData:!1}){return{raw:(0,s.GP)({format:"bytes"},t,e),tx:Bt(Object.assign(Object.assign({},K.dF.fromSerializedData((0,s.aT)(t)).toJSON()),{hash:(0,s.My)((0,s.So)((0,s.aT)(t))),type:it((0,s.aT)(t))}),e,{fillInputAndData:n.fillInputAndData})}}const Rt="ALLEVENTS",kt={name:Rt,signature:"",type:"event",inputs:[]},Et={bytes:r.QR.HEX,number:r.M$.NUMBER};var At=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))};function It(t,e,n){var i,u,c,d;return At(this,void 0,void 0,(function*(){const l=yield de(e,e.defaultBlock,!1,r.F2);if((0,a.uy)(l.baseFeePerGas))throw new o.oo5;let f;if((0,a.uy)(t.gasPrice)&&BigInt(l.baseFeePerGas)===BigInt(0)&&(f=yield ie(e,n)),!(0,a.uy)(t.gasPrice)||!(0,a.uy)(f)){const e=(0,s.GP)({format:"uint"},null!==(i=t.gasPrice)&&void 0!==i?i:f,n);return{maxPriorityFeePerGas:e,maxFeePerGas:e}}return{maxPriorityFeePerGas:(0,s.GP)({format:"uint"},null!==(u=t.maxPriorityFeePerGas)&&void 0!==u?u:e.defaultMaxPriorityFeePerGas,n),maxFeePerGas:(0,s.GP)({format:"uint"},null!==(c=t.maxFeePerGas)&&void 0!==c?c:BigInt(l.baseFeePerGas)*BigInt(2)+BigInt(null!==(d=t.maxPriorityFeePerGas)&&void 0!==d?d:e.defaultMaxPriorityFeePerGas),n)}}))}function Ft(t,e,n){return At(this,void 0,void 0,(function*(){const r=St(t,e);if(!(0,a.uy)(r)){if(r.startsWith("-"))throw new o.KTA(r);if(Number(r)<0||Number(r)>127)throw new o.KTA(r);if((0,a.uy)(t.gasPrice)&&("0x0"===r||"0x1"===r))return{gasPrice:yield ie(e,n),maxPriorityFeePerGas:void 0,maxFeePerGas:void 0};if("0x2"===r)return Object.assign({gasPrice:void 0},yield It(t,e,n))}}))}const Tt=(t,e,n,r)=>{if(void 0!==n&&t in n&&void 0!==n[t]){if("string"===typeof n[t]&&(0,a.PW)(n[t]))return n[t];if(!(0,a.lX)(n[t])&&(0,a.Et)(n[t])){if(e.wallet){const r=e.wallet.get((0,s.GP)({format:"uint"},n[t],Et));if(!(0,a.uy)(r))return r.address;throw new o.fVU}throw new o.fVU}throw"from"===t?new o.NgH(n.from):new o.jfZ(n.to)}if("from"===t){if(!(0,a.uy)(r))return(0,K.uX)(r);if(!(0,a.uy)(e.defaultAccount))return e.defaultAccount}},St=(t,e)=>{const n=rt(t,e);return(0,a.uy)(n)?(0,a.uy)(e.defaultTransactionType)?void 0:(0,s.GP)({format:"uint"},e.defaultTransactionType,r.F2):n};var Ot=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))};function Gt(t,e,n){const r=t.transactionPollingInterval,[i,a]=(0,s.k8)((()=>Ot(this,void 0,void 0,(function*(){let r;try{r=yield se(t,Et)}catch(s){return void console.warn("An error happen while trying to get the block number",s)}const i=r-e;if(i>=t.transactionBlockTimeout)return new o.tty({starterBlockNumber:e,numberOfBlocks:i,transactionHash:n})}))),r),u=()=>{clearInterval(i)};return[a,{clean:u}]}function jt(t,e,n){var r;return Ot(this,void 0,void 0,(function*(){let i,s,a=!0;function u(r,i){i&&console.warn("error happened at subscription. So revert to polling...",i),s.clean(),a=!1;const[o,u]=Gt(t,e,n);s.clean=u.clean,o.catch((t=>r(t)))}try{i=yield null===(r=t.subscriptionManager)||void 0===r?void 0:r.subscribe("newHeads"),s={clean:()=>{var e;i.id&&(null===(e=t.subscriptionManager)||void 0===e||e.removeSubscription(i).then((()=>{})).catch((()=>{})))}}}catch(d){return Gt(t,e,n)}const c=new Promise(((r,s)=>{try{i.on("data",(r=>{if(a=!1,!(null===r||void 0===r?void 0:r.number))return;const i=Number(BigInt(r.number)-BigInt(e));i>=t.transactionBlockTimeout&&s(new o.tty({starterBlockNumber:e,numberOfBlocks:i,transactionHash:n}))})),i.on("error",(t=>{u(s,t)}))}catch(d){u(s,d)}setTimeout((()=>{a&&u(s)}),1e3*t.blockHeaderTimeout)}));return[c,s]}))}function Ct(t,e){var n,r;return Ot(this,void 0,void 0,(function*(){const{provider:i}=t.requestManager;let o;const s=yield se(t,Et);return o=(null===(r=(n=i).supportsSubscriptions)||void 0===r?void 0:r.call(n))&&t.enableExperimentalFeatures.useSubscriptionWhenCheckingBlockTimeout?yield jt(t,s,e):Gt(t,s,e),o}))}var Nt=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))};function Mt(t,e,n){return Nt(this,void 0,void 0,(function*(){const[r,i]=(0,s.Q3)(t.transactionSendTimeout,new o.C18({numberOfSeconds:t.transactionSendTimeout/1e3,transactionHash:n})),[a,u]=yield Ct(t,n);try{return yield Promise.race([e(),i,a])}finally{clearTimeout(r),u.clean()}}))}var qt=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))};function Ht(t,e,n,r){var i;return qt(this,void 0,void 0,(function*(){const a=null!==(i=t.transactionReceiptPollingInterval)&&void 0!==i?i:t.transactionPollingInterval,[u,c]=(0,s.Rp)((()=>qt(this,void 0,void 0,(function*(){try{return(null!==r&&void 0!==r?r:ye)(t,e,n)}catch(i){return void console.warn("An error happen while trying to get the transaction receipt",i)}}))),a),[d,l]=(0,s.Q3)(t.transactionPollingTimeout,new o.xyB({numberOfSeconds:t.transactionPollingTimeout/1e3,transactionHash:e})),[f,h]=yield Ct(t,e);try{return yield Promise.race([u,l,f])}finally{d&&clearTimeout(d),c&&clearInterval(c),h.clean()}}))}var Dt=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))};const Lt=({web3Context:t,transactionReceipt:e,transactionPromiEvent:n,customTransactionReceiptSchema:r,returnFormat:i})=>{var o;let a=1;const u=setInterval((()=>{(()=>{Dt(void 0,void 0,void 0,(function*(){if(a>=t.transactionConfirmationBlocks)return void clearInterval(u);const o=yield O(t.requestManager,(0,s.cK)(BigInt(e.blockNumber)+BigInt(a)),!1);(null===o||void 0===o?void 0:o.hash)&&(a+=1,n.emit("confirmation",{confirmations:(0,s.GP)({format:"uint"},a,i),receipt:(0,s.GP)(null!==r&&void 0!==r?r:gt,e,i),latestBlockHash:(0,s.GP)({format:"bytes32"},o.hash,i)}))}))})()}),null!==(o=t.transactionReceiptPollingInterval)&&void 0!==o?o:t.transactionPollingInterval)};var Ut=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))};const Qt=({web3Context:t,transactionReceipt:e,transactionPromiEvent:n,customTransactionReceiptSchema:r,returnFormat:i})=>{let o,a=!0;setImmediate((()=>{var u;null===(u=t.subscriptionManager)||void 0===u||u.subscribe("newHeads").then((u=>{u.on("data",(c=>Ut(void 0,void 0,void 0,(function*(){var d;if(a=!1,!(null===c||void 0===c?void 0:c.number)||o===(null===c||void 0===c?void 0:c.parentHash))return;o=null===c||void 0===c?void 0:c.parentHash;const l=BigInt(c.number)-BigInt(e.blockNumber)+BigInt(1);n.emit("confirmation",{confirmations:(0,s.GP)({format:"uint"},l,i),receipt:(0,s.GP)(null!==r&&void 0!==r?r:gt,e,i),latestBlockHash:(0,s.GP)({format:"bytes32"},c.parentHash,i)}),l>=t.transactionConfirmationBlocks&&(yield null===(d=t.subscriptionManager)||void 0===d?void 0:d.removeSubscription(u))})))),u.on("error",(()=>Ut(void 0,void 0,void 0,(function*(){var o;yield null===(o=t.subscriptionManager)||void 0===o?void 0:o.removeSubscription(u),a=!1,Lt({web3Context:t,transactionReceipt:e,transactionPromiEvent:n,customTransactionReceiptSchema:r,returnFormat:i})}))))})).catch((()=>{a=!1,Lt({web3Context:t,transactionReceipt:e,customTransactionReceiptSchema:r,transactionPromiEvent:n,returnFormat:i})}))})),setTimeout((()=>{a&&Lt({web3Context:t,transactionReceipt:e,transactionPromiEvent:n,returnFormat:i})}),1e3*t.blockHeaderTimeout)};function Wt(t,e,n,r,i,u){if((0,a.uy)(n)||(0,a.uy)(n.blockHash))throw new o.byU({receipt:n,blockHash:(0,s.GP)({format:"bytes32"},null===n||void 0===n?void 0:n.blockHash,i),transactionHash:(0,s.GP)({format:"bytes32"},r,i)});if(!n.blockNumber)throw new o.Joe({receipt:n});e.emit("confirmation",{confirmations:(0,s.GP)({format:"uint"},1,i),receipt:(0,s.GP)(null!==u&&void 0!==u?u:gt,n,i),latestBlockHash:(0,s.GP)({format:"bytes32"},n.blockHash,i)});const c=t.requestManager.provider;c&&"supportsSubscriptions"in c&&c.supportsSubscriptions()?Qt({web3Context:t,transactionReceipt:n,transactionPromiEvent:e,customTransactionReceiptSchema:u,returnFormat:i}):Lt({web3Context:t,transactionReceipt:n,transactionPromiEvent:e,customTransactionReceiptSchema:u,returnFormat:i})}var Xt=n(92426),$t=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))};const zt=(t,e)=>{var n,r,i,s,a;if(t instanceof o.fQB&&t.cause instanceof o.Ut4){if(void 0!==e){const i=e.filter((t=>(0,Xt.VW)(t)));return(0,Xt.Zo)(i,t.cause),{reason:t.cause.message,signature:null===(n=t.cause.data)||void 0===n?void 0:n.slice(0,10),data:null===(r=t.cause.data)||void 0===r?void 0:r.substring(10),customErrorName:t.cause.errorName,customErrorDecodedSignature:t.cause.errorSignature,customErrorArguments:t.cause.errorArgs}}return{reason:t.cause.message,signature:null===(i=t.cause.data)||void 0===i?void 0:i.slice(0,10),data:null===(s=t.cause.data)||void 0===s?void 0:s.substring(10)}}if(t instanceof o.tFo&&!Array.isArray(null===(a=t.cause)||void 0===a?void 0:a.errors)&&void 0!==t.cause)return t.cause.message;throw t};function Vt(t,e,n,r=t.defaultReturnFormat){return $t(this,void 0,void 0,(function*(){try{return void(yield Be(t,e,t.defaultBlock,r))}catch(i){return zt(i,n)}}))}var Jt=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))};function Kt(t,e,n,r,i,s){return Jt(this,void 0,void 0,(function*(){let a,u=s;if(void 0===u&&(void 0!==r?u=zt(r):t.handleRevert&&void 0!==e&&(u=yield Vt(t,e,i))),void 0===u)a=new o.eFl(n);else if("string"===typeof u)a=new o.nSB(u,void 0,n);else if(void 0!==u.customErrorName&&void 0!==u.customErrorDecodedSignature&&void 0!==u.customErrorArguments){const t=u;a=new o.ct4(t.reason,t.customErrorName,t.customErrorDecodedSignature,t.customErrorArguments,t.signature,n,t.data)}else a=new o.nSB(u.reason,u.signature,n,u.data);return a}))}const Yt=(t,e,n,i=r.Hh)=>{var o,a,u,c,d;let l=Object.assign({},t);const f=(0,s.GP)(pt,e,i);if([Rt,"allEvents"].includes(l.name)){const t=n.find((t=>t.signature===e.topics[0]));l=t||{anonymous:!0}}if(l.inputs=null!==(a=null!==(o=l.inputs)&&void 0!==o?o:t.inputs)&&void 0!==a?a:[],!l.anonymous){let t=0;(null!==(u=l.inputs)&&void 0!==u?u:[]).forEach((e=>{e.indexed&&(t+=1)})),t>0&&(null===e||void 0===e?void 0:e.topics)&&(null===e||void 0===e?void 0:e.topics.length)!==t+1&&(l=Object.assign(Object.assign({},l),{anonymous:!0,inputs:[]}))}const h=l.anonymous?e.topics:(null!==(c=e.topics)&&void 0!==c?c:[]).slice(1);return Object.assign(Object.assign({},f),{returnValues:(0,Xt.Nr)([...null!==(d=l.inputs)&&void 0!==d?d:[]],e.data,h),event:l.name,signature:!l.anonymous&&e.topics&&0!==e.topics.length&&e.topics[0]?e.topics[0]:void 0,raw:{data:e.data,topics:e.topics}})};var Zt=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))};class te{constructor({options:t,web3Context:e,promiEvent:n,returnFormat:r}){this.options={checkRevertBeforeSending:!0},this.options=t,this.web3Context=e,this.promiEvent=n,this.returnFormat=r}getReceiptWithEvents(t){var e,n;const r=Object.assign({},null!==t&&void 0!==t?t:{});if((null===(e=this.options)||void 0===e?void 0:e.contractAbi)&&r.logs&&r.logs.length>0){r.events={};for(const t of r.logs){const e=Yt(kt,t,null===(n=this.options)||void 0===n?void 0:n.contractAbi,this.returnFormat);e.event&&(r.events[e.event]=e)}}return r}checkRevertBeforeSending(t){return Zt(this,void 0,void 0,(function*(){if(!1!==this.options.checkRevertBeforeSending){let e=t;(0,a.uy)(t.data)&&(0,a.uy)(t.input)&&(0,a.uy)(t.gas)&&(e=Object.assign(Object.assign({},t),{gas:21e3}));const n=yield Vt(this.web3Context,e,this.options.contractAbi);if(void 0!==n)throw yield Kt(this.web3Context,t,void 0,void 0,this.options.contractAbi,n)}}))}emitSending(t){this.promiEvent.listenerCount("sending")>0&&this.promiEvent.emit("sending",t)}populateGasPrice({transactionFormatted:t,transaction:e}){var n;return Zt(this,void 0,void 0,(function*(){let i=t;return!(null===(n=this.options)||void 0===n?void 0:n.ignoreGasPricing)&&(0,a.uy)(t.gasPrice)&&((0,a.uy)(e.maxPriorityFeePerGas)||(0,a.uy)(e.maxFeePerGas))&&(i=Object.assign(Object.assign({},t),yield Ft(t,this.web3Context,r.F2))),i}))}signAndSend({wallet:t,tx:e}){return Zt(this,void 0,void 0,(function*(){if(t){const n=yield t.signTransaction(e);return Mt(this.web3Context,(()=>Zt(this,void 0,void 0,(function*(){return I(this.web3Context.requestManager,n.rawTransaction)}))),n.transactionHash)}return Mt(this.web3Context,(()=>Zt(this,void 0,void 0,(function*(){return A(this.web3Context.requestManager,e)}))))}))}emitSent(t){this.promiEvent.listenerCount("sent")>0&&this.promiEvent.emit("sent",t)}emitTransactionHash(t){this.promiEvent.listenerCount("transactionHash")>0&&this.promiEvent.emit("transactionHash",t)}emitReceipt(t){this.promiEvent.listenerCount("receipt")>0&&this.promiEvent.emit("receipt",t)}handleError({error:t,tx:e}){var n;return Zt(this,void 0,void 0,(function*(){let r=t;return r instanceof o.fQB&&this.web3Context.handleRevert&&(r=yield Kt(this.web3Context,e,void 0,void 0,null===(n=this.options)||void 0===n?void 0:n.contractAbi)),(r instanceof o.tFo||r instanceof o.fQB||r instanceof o.ct4||r instanceof o.eFl||r instanceof o.nSB||r instanceof o.xyB)&&this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",r),r}))}emitConfirmation({receipt:t,transactionHash:e,customTransactionReceiptSchema:n}){this.promiEvent.listenerCount("confirmation")>0&&Wt(this.web3Context,this.promiEvent,t,e,this.returnFormat,n)}handleResolve({receipt:t,tx:e}){var n,r,i;return Zt(this,void 0,void 0,(function*(){if(null===(n=this.options)||void 0===n?void 0:n.transactionResolver)return null===(r=this.options)||void 0===r?void 0:r.transactionResolver(t);if(t.status===BigInt(0)){const n=yield Kt(this.web3Context,e,t,void 0,null===(i=this.options)||void 0===i?void 0:i.contractAbi);throw this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",n),n}return t}))}}var ee=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))},ne=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function re(t,e){return ee(this,void 0,void 0,(function*(){const n=yield h(t.requestManager);return(0,s.GP)({format:"uint"},n,null!==e&&void 0!==e?e:t.defaultReturnFormat)}))}function ie(t,e){return ee(this,void 0,void 0,(function*(){const n=yield m(t.requestManager);return(0,s.GP)({format:"uint"},n,null!==e&&void 0!==e?e:t.defaultReturnFormat)}))}function oe(t,e){return ee(this,void 0,void 0,(function*(){const n=yield v(t.requestManager);return(0,s.GP)({format:"uint"},n,null!==e&&void 0!==e?e:t.defaultReturnFormat)}))}function se(t,e){return ee(this,void 0,void 0,(function*(){const n=yield y(t.requestManager);return(0,s.GP)({format:"uint"},n,null!==e&&void 0!==e?e:t.defaultReturnFormat)}))}function ae(t,e,n=t.defaultBlock,i){return ee(this,void 0,void 0,(function*(){const o=(0,a._N)(n)?n:(0,s.GP)({format:"uint"},n,r.F2),u=yield g(t.requestManager,e,o);return(0,s.GP)({format:"uint"},u,null!==i&&void 0!==i?i:t.defaultReturnFormat)}))}function ue(t,e,n,i=t.defaultBlock,o){return ee(this,void 0,void 0,(function*(){const u=(0,s.GP)({format:"uint"},n,r.F2),c=(0,a._N)(i)?i:(0,s.GP)({format:"uint"},i,r.F2),d=yield b(t.requestManager,e,u,c);return(0,s.GP)({format:"bytes"},d,null!==o&&void 0!==o?o:t.defaultReturnFormat)}))}function ce(t,e,n=t.defaultBlock,i){return ee(this,void 0,void 0,(function*(){const o=(0,a._N)(n)?n:(0,s.GP)({format:"uint"},n,r.F2),u=yield R(t.requestManager,e,o);return(0,s.GP)({format:"bytes"},u,null!==i&&void 0!==i?i:t.defaultReturnFormat)}))}function de(t,e=t.defaultBlock,n=!1,i){var o;return ee(this,void 0,void 0,(function*(){let u;if((0,a.aY)(e)){const i=(0,s.GP)({format:"bytes32"},e,r.F2);u=yield S(t.requestManager,i,n)}else{const i=(0,a._N)(e)?e:(0,s.GP)({format:"uint"},e,r.F2);u=yield O(t.requestManager,i,n)}const c=(0,s.GP)(mt,u,null!==i&&void 0!==i?i:t.defaultReturnFormat);if(!(0,a.uy)(c)){const t=Object.assign(Object.assign({},c),{transactions:null!==(o=c.transactions)&&void 0!==o?o:[]});return t}return c}))}function le(t,e=t.defaultBlock,n){return ee(this,void 0,void 0,(function*(){let i;if((0,a.aY)(e)){const n=(0,s.GP)({format:"bytes32"},e,r.F2);i=yield _(t.requestManager,n)}else{const n=(0,a._N)(e)?e:(0,s.GP)({format:"uint"},e,r.F2);i=yield P(t.requestManager,n)}return(0,s.GP)({format:"uint"},i,null!==n&&void 0!==n?n:t.defaultReturnFormat)}))}function fe(t,e=t.defaultBlock,n){return ee(this,void 0,void 0,(function*(){let i;if((0,a.aY)(e)){const n=(0,s.GP)({format:"bytes32"},e,r.F2);i=yield B(t.requestManager,n)}else{const n=(0,a._N)(e)?e:(0,s.GP)({format:"uint"},e,r.F2);i=yield x(t.requestManager,n)}return(0,s.GP)({format:"uint"},i,null!==n&&void 0!==n?n:t.defaultReturnFormat)}))}function he(t,e=t.defaultBlock,n,i){return ee(this,void 0,void 0,(function*(){const o=(0,s.GP)({format:"uint"},n,r.F2);let u;if((0,a.aY)(e)){const n=(0,s.GP)({format:"bytes32"},e,r.F2);u=yield M(t.requestManager,n,o)}else{const n=(0,a._N)(e)?e:(0,s.GP)({format:"uint"},e,r.F2);u=yield q(t.requestManager,n,o)}return(0,s.GP)(mt,u,null!==i&&void 0!==i?i:t.defaultReturnFormat)}))}function me(t,e,n=t.defaultReturnFormat){return ee(this,void 0,void 0,(function*(){const i=(0,s.GP)({format:"bytes32"},e,r.Hh),o=yield G(t.requestManager,i);return(0,a.uy)(o)?o:Bt(o,n,{fillInputAndData:!0})}))}function ve(t,e){return ee(this,void 0,void 0,(function*(){const n=yield Q(t.requestManager);return n.map((n=>Bt(n,null!==e&&void 0!==e?e:t.defaultReturnFormat,{fillInputAndData:!0})))}))}function pe(t,e=t.defaultBlock,n,i){return ee(this,void 0,void 0,(function*(){const o=(0,s.GP)({format:"uint"},n,r.F2);let u;if((0,a.aY)(e)){const n=(0,s.GP)({format:"bytes32"},e,r.F2);u=yield j(t.requestManager,n,o)}else{const n=(0,a._N)(e)?e:(0,s.GP)({format:"uint"},e,r.F2);u=yield C(t.requestManager,n,o)}return(0,a.uy)(u)?u:Bt(u,null!==i&&void 0!==i?i:t.defaultReturnFormat,{fillInputAndData:!0})}))}function ye(t,e,n){return ee(this,void 0,void 0,(function*(){const i=(0,s.GP)({format:"bytes32"},e,r.Hh);let o;try{o=yield N(t.requestManager,i)}catch(u){if("object"!==typeof u||(0,a.uy)(u)||!("message"in u)||"transaction indexing is in progress"!==u.message)throw u;console.warn("Transaction indexing is in progress.")}return(0,a.uy)(o)?o:(0,s.GP)(gt,o,null!==n&&void 0!==n?n:t.defaultReturnFormat)}))}function ge(t,e,n=t.defaultBlock,i){return ee(this,void 0,void 0,(function*(){const o=(0,a._N)(n)?n:(0,s.GP)({format:"uint"},n,r.F2),u=yield w(t.requestManager,e,o);return(0,s.GP)({format:"uint"},u,null!==i&&void 0!==i?i:t.defaultReturnFormat)}))}function be(t,e,n,o={checkRevertBeforeSending:!0},u){const c=new i.p6(((i,d)=>{setImmediate((()=>{(()=>{ee(this,void 0,void 0,(function*(){const l=new te({web3Context:t,promiEvent:c,options:o,returnFormat:n});let f=Object.assign({},e);(0,a.uy)(u)||(f=yield u.processTransaction(f));let h=Bt(Object.assign(Object.assign({},f),{from:Tt("from",t,f),to:Tt("to",t,f)}),r.F2);try{let e;h=yield l.populateGasPrice({transaction:f,transactionFormatted:h}),yield l.checkRevertBeforeSending(h),l.emitSending(h),t.wallet&&!(0,a.uy)(h.from)&&(e=t.wallet.get(h.from));const r=yield l.signAndSend({wallet:e,tx:h}),o=(0,s.GP)({format:"bytes32"},r,null!==n&&void 0!==n?n:t.defaultReturnFormat);l.emitSent(h),l.emitTransactionHash(o);const u=yield Ht(t,r,null!==n&&void 0!==n?n:t.defaultReturnFormat),c=l.getReceiptWithEvents((0,s.GP)(gt,u,null!==n&&void 0!==n?n:t.defaultReturnFormat));l.emitReceipt(c),i(yield l.handleResolve({receipt:c,tx:h})),l.emitConfirmation({receipt:c,transactionHash:r})}catch(m){d(yield l.handleError({error:m,tx:h}))}}))})()}))}));return c}function we(t,e,n,o={checkRevertBeforeSending:!0}){const a=new i.p6(((i,u)=>{setImmediate((()=>{(()=>{ee(this,void 0,void 0,(function*(){const c=new te({web3Context:t,promiEvent:a,options:o,returnFormat:n}),d=(0,s.GP)({format:"bytes"},e,r.F2),l=K.dF.fromSerializedData((0,s.E3)((0,s.aT)(d))),f=Object.assign(Object.assign({},l.toJSON()),{from:l.getSenderAddress().toString()});try{const{v:e,r,s:o}=f,a=ne(f,["v","r","s"]);yield c.checkRevertBeforeSending(a),c.emitSending(d);const u=yield Mt(t,(()=>ee(this,void 0,void 0,(function*(){return I(t.requestManager,d)}))));c.emitSent(d);const l=(0,s.GP)({format:"bytes32"},u,null!==n&&void 0!==n?n:t.defaultReturnFormat);c.emitTransactionHash(l);const h=yield Ht(t,u,null!==n&&void 0!==n?n:t.defaultReturnFormat),m=c.getReceiptWithEvents((0,s.GP)(gt,h,null!==n&&void 0!==n?n:t.defaultReturnFormat));c.emitReceipt(m),i(yield c.handleResolve({receipt:m,tx:f})),c.emitConfirmation({receipt:m,transactionHash:u})}catch(h){u(yield c.handleError({error:h,tx:f}))}}))})()}))}));return a}function _e(t,e,n,i=t.defaultReturnFormat){var a;return ee(this,void 0,void 0,(function*(){const u=(0,s.GP)({format:"bytes"},e,r.Hh);if(null===(a=t.wallet)||void 0===a?void 0:a.get(n)){const e=t.wallet.get(n),r=e.sign(u);return(0,s.GP)(bt,r,i)}if("number"===typeof n)throw new o.VAK(e,'RPC method "eth_sign" does not support index signatures');const c=yield k(t.requestManager,n,u);return(0,s.GP)({format:"bytes"},c,i)}))}function Pe(t,e,n=t.defaultReturnFormat){return ee(this,void 0,void 0,(function*(){const i=yield E(t.requestManager,Bt(e,r.F2));return(0,a.Kg)(i)?xt(i,n,{fillInputAndData:!0}):{raw:(0,s.GP)({format:"bytes"},i.raw,n),tx:Bt(i.tx,n,{fillInputAndData:!0})}}))}function Be(t,e,n=t.defaultBlock,i=t.defaultReturnFormat){return ee(this,void 0,void 0,(function*(){const o=(0,a._N)(n)?n:(0,s.GP)({format:"uint"},n,r.F2),u=yield F(t.requestManager,Bt(e,r.F2),o);return(0,s.GP)({format:"bytes"},u,i)}))}function xe(t,e,n=t.defaultBlock,i){return ee(this,void 0,void 0,(function*(){const o=Bt(e,r.F2),u=(0,a._N)(n)?n:(0,s.GP)({format:"uint"},n,r.F2),c=yield T(t.requestManager,o,u);return(0,s.GP)({format:"uint"},c,null!==i&&void 0!==i?i:t.defaultReturnFormat)}))}function Re(t,e,n){return ee(this,void 0,void 0,(function*(){let{toBlock:r,fromBlock:i}=e;(0,a.uy)(r)||"number"!==typeof r&&"bigint"!==typeof r||(r=(0,s.cK)(r)),(0,a.uy)(i)||"number"!==typeof i&&"bigint"!==typeof i||(i=(0,s.cK)(i));const o=Object.assign(Object.assign({},e),{fromBlock:i,toBlock:r}),u=yield H(t.requestManager,o),c=u.map((e=>"string"===typeof e?e:(0,s.GP)(pt,e,null!==n&&void 0!==n?n:t.defaultReturnFormat)));return c}))}function ke(t,e){return ee(this,void 0,void 0,(function*(){const n=yield X(t.requestManager);return(0,s.GP)({format:"uint"},n,null!==e&&void 0!==e?e:t.defaultReturnFormat)}))}function Ee(t,e,n,i=t.defaultBlock,o){return ee(this,void 0,void 0,(function*(){const u=n.map((t=>(0,s.GP)({format:"bytes"},t,r.F2))),c=(0,a._N)(i)?i:(0,s.GP)({format:"uint"},i,r.F2),d=yield $(t.requestManager,e,u,c);return(0,s.GP)(Pt,d,null!==o&&void 0!==o?o:t.defaultReturnFormat)}))}function Ae(t,e,n=t.defaultBlock,i,o){return ee(this,void 0,void 0,(function*(){const u=(0,s.GP)({format:"uint"},e,r.F2),c=(0,a._N)(n)?n:(0,s.GP)({format:"uint"},n,r.F2),d=(0,s.GP)({type:"array",items:{format:"uint"}},i,Et),l=yield U(t.requestManager,u,c,d);return(0,s.GP)(wt,l,null!==o&&void 0!==o?o:t.defaultReturnFormat)}))}function Ie(t,e,n=t.defaultBlock,i){return ee(this,void 0,void 0,(function*(){const o=(0,a._N)(n)?n:(0,s.GP)({format:"uint"},n,r.F2),u=yield V(t.requestManager,Bt(e,r.F2),o);return(0,s.GP)(at,u,null!==i&&void 0!==i?i:t.defaultReturnFormat)}))}function Fe(t,e,n,r,i){return ee(this,void 0,void 0,(function*(){const o=yield J(t.requestManager,e,n,r);return(0,s.GP)({format:"bytes"},o,null!==i&&void 0!==i?i:t.defaultReturnFormat)}))}class Te extends i.tn{_buildSubscriptionParams(){return["logs",this.args]}formatSubscriptionResult(t){return(0,s.GP)(pt,t,super.returnFormat)}}class Se extends i.tn{_buildSubscriptionParams(){return["newPendingTransactions"]}formatSubscriptionResult(t){return(0,s.GP)({format:"string"},t,super.returnFormat)}}class Oe extends i.tn{_buildSubscriptionParams(){return["newHeads"]}formatSubscriptionResult(t){return(0,s.GP)(vt,t,super.returnFormat)}}class Ge extends i.tn{_buildSubscriptionParams(){return["syncing"]}_processSubscriptionResult(t){if("boolean"===typeof t)this.emit("changed",t);else{const e=Object.fromEntries(Object.entries(t.status).map((([t,e])=>[t.charAt(0).toLowerCase()+t.substring(1),e])));this.emit("changed",t.syncing),this.emit("data",(0,s.GP)(yt,e,super.returnFormat))}}}var je=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))};const Ce={logs:Te,newPendingTransactions:Se,newHeads:Oe,syncing:Ge,pendingTransactions:Se,newBlockHeaders:Oe};class Ne extends i.bl{constructor(t){"string"===typeof t||(0,i.w3)(t)?super({provider:t,registeredSubscriptions:Ce}):t.registeredSubscriptions?super(t):(super(Object.assign(Object.assign({},t),{registeredSubscriptions:Ce})),this.getFeeData=this.calculateFeeData)}setTransactionMiddleware(t){this.transactionMiddleware=t}getTransactionMiddleware(){return this.transactionMiddleware}getProtocolVersion(){return je(this,void 0,void 0,(function*(){return c(this.requestManager)}))}isSyncing(){return je(this,void 0,void 0,(function*(){return d(this.requestManager)}))}getCoinbase(){return je(this,void 0,void 0,(function*(){return l(this.requestManager)}))}isMining(){return je(this,void 0,void 0,(function*(){return f(this.requestManager)}))}getHashrate(t){var e;return void 0===t&&(t=null!==(e=this.defaultReturnFormat)&&void 0!==e?e:r.Hh),je(this,void 0,void 0,(function*(){return this.getHashRate(t)}))}getHashRate(t=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){return re(this,t)}))}getGasPrice(t=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){return ie(this,t)}))}getMaxPriorityFeePerGas(t=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){return oe(this,t)}))}calculateFeeData(t=BigInt(2),e=s._W.Gwei){var n;return je(this,void 0,void 0,(function*(){const r=yield this.getBlock(void 0,!1),i=null!==(n=null===r||void 0===r?void 0:r.baseFeePerGas)&&void 0!==n?n:void 0;let o,s,a;try{o=yield this.getGasPrice()}catch(u){}try{s=yield this.getMaxPriorityFeePerGas()}catch(u){}return i&&(s=null!==s&&void 0!==s?s:e,a=i*t+s),{gasPrice:o,maxFeePerGas:a,maxPriorityFeePerGas:s,baseFeePerGas:i}}))}getAccounts(){var t;return je(this,void 0,void 0,(function*(){const e=null!==(t=yield p(this.requestManager))&&void 0!==t?t:[];return e.map((t=>(0,s.BA)(t)))}))}getBlockNumber(t=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){return se(this,t)}))}getBalance(t,e=this.defaultBlock,n=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){return ae(this,t,e,n)}))}getStorageAt(t,e,n=this.defaultBlock,r=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){return ue(this,t,e,n,r)}))}getCode(t,e=this.defaultBlock,n=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){return ce(this,t,e,n)}))}getBlock(t=this.defaultBlock,e=!1,n=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){return de(this,t,e,n)}))}getBlockTransactionCount(t=this.defaultBlock,e=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){return le(this,t,e)}))}getBlockUncleCount(t=this.defaultBlock,e=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){return fe(this,t,e)}))}getUncle(t=this.defaultBlock,e,n=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){return he(this,t,e,n)}))}getTransaction(t,e=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){const n=yield me(this,t,e);if(!n)throw new o.WCt;return n}))}getPendingTransactions(t=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){return ve(this,t)}))}getTransactionFromBlock(t=this.defaultBlock,e,n=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){return pe(this,t,e,n)}))}getTransactionReceipt(t,e=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){const n=yield ye(this,t,e);if(!n)throw new o.WCt;return n}))}getTransactionCount(t,e=this.defaultBlock,n=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){return ge(this,t,e,n)}))}sendTransaction(t,e=this.defaultReturnFormat,n){return be(this,t,e,n,this.transactionMiddleware)}sendSignedTransaction(t,e=this.defaultReturnFormat,n){return we(this,t,e,n)}sign(t,e,n=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){return _e(this,t,e,n)}))}signTransaction(t,e=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){return Pe(this,t,e)}))}call(t,e=this.defaultBlock,n=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){return Be(this,t,e,n)}))}estimateGas(t,e=this.defaultBlock,n=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){return xe(this,t,e,n)}))}getPastLogs(t,e=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){return Re(this,t,e)}))}getWork(){return je(this,void 0,void 0,(function*(){return D(this.requestManager)}))}submitWork(t,e,n){return je(this,void 0,void 0,(function*(){return L(this.requestManager,t,e,n)}))}requestAccounts(){return je(this,void 0,void 0,(function*(){return W(this.requestManager)}))}getChainId(t=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){return ke(this,t)}))}getNodeInfo(){return je(this,void 0,void 0,(function*(){return z(this.requestManager)}))}getProof(t,e,n=this.defaultBlock,r=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){return Ee(this,t,e,n,r)}))}getFeeHistory(t,e=this.defaultBlock,n,r=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){return Ae(this,t,e,n,r)}))}createAccessList(t,e=this.defaultBlock,n=this.defaultReturnFormat){return je(this,void 0,void 0,(function*(){return Ie(this,t,e,n)}))}signTypedData(t,e,n,i){var o;return void 0===n&&(n=!1),void 0===i&&(i=null!==(o=this.defaultReturnFormat)&&void 0!==o?o:r.Hh),je(this,void 0,void 0,(function*(){return Fe(this,t,e,n,i)}))}subscribe(t,e,n){var i,o;return void 0===n&&(n=null!==(i=this.defaultReturnFormat)&&void 0!==i?i:r.Hh),je(this,void 0,void 0,(function*(){const r=yield null===(o=this.subscriptionManager)||void 0===o?void 0:o.subscribe(t,e,n);return r instanceof Te&&"logs"===t&&"object"===typeof e&&!(0,s.uy)(e.fromBlock)&&Number.isFinite(Number(e.fromBlock))&&setImmediate((()=>{this.getPastLogs(e).then((t=>{for(const e of t)r._processSubscriptionResult(e)})).catch((t=>{r._processSubscriptionError(t)}))})),r}))}static shouldClearSubscription({sub:t}){return!(t instanceof Ge)}clearSubscriptions(t=!1){var e;return null===(e=this.subscriptionManager)||void 0===e?void 0:e.unsubscribe(t?Ne.shouldClearSubscription:void 0)}}const Me=Ne},57751:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var r=n(29094),i=n(20345),o=n(39788),s=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))};class a extends i.SB{constructor(t,e){if(super(),!a.validateClientUrl(t))throw new o.Pgv(t);this.clientUrl=t,this.httpProviderOptions=e}static validateClientUrl(t){return"string"===typeof t&&/^http(s)?:\/\//i.test(t)}getStatus(){throw new o.juf}supportsSubscriptions(){return!1}request(t,e){var n;return s(this,void 0,void 0,(function*(){const i=Object.assign(Object.assign({},null===(n=this.httpProviderOptions)||void 0===n?void 0:n.providerOptions),e),s=yield r(this.clientUrl,Object.assign(Object.assign({},i),{method:"POST",headers:Object.assign(Object.assign({},i.headers),{"Content-Type":"application/json"}),body:JSON.stringify(t)}));if(!s.ok)throw new o.o3e(yield s.json());return yield s.json()}))}on(){throw new o.juf}removeListener(){throw new o.juf}once(){throw new o.juf}removeAllListeners(){throw new o.juf}connect(){throw new o.juf}disconnect(){throw new o.juf}reset(){throw new o.juf}reconnect(){throw new o.juf}}},74901:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(30169),i=n(14387),o=n(39788);class s extends i.FI{constructor(t,e,n){super(t,e,n)}_validateProviderPath(t){return"string"===typeof t&&/^ws(s)?:\/\//i.test(t)}getStatus(){if(this._socketConnection&&!(0,i.uy)(this._socketConnection))switch(this._socketConnection.readyState){case this._socketConnection.CONNECTING:return"connecting";case this._socketConnection.OPEN:return"connected";default:return"disconnected"}return"disconnected"}_openSocketConnection(){this._socketConnection=new r.A(this._socketPath,void 0,this._socketOptions&&0===Object.keys(this._socketOptions).length?void 0:this._socketOptions)}_closeSocketConnection(t,e){var n;null===(n=this._socketConnection)||void 0===n||n.close(t,e)}_sendToSocket(t){var e;if("disconnected"===this.getStatus())throw new o.W8o;null===(e=this._socketConnection)||void 0===e||e.send(JSON.stringify(t))}_parseResponses(t){return this.chunkResponseParser.parseResponse(t.data)}_addSocketListeners(){var t,e,n,r;null===(t=this._socketConnection)||void 0===t||t.addEventListener("open",this._onOpenHandler),null===(e=this._socketConnection)||void 0===e||e.addEventListener("message",this._onMessageHandler),null===(n=this._socketConnection)||void 0===n||n.addEventListener("close",(t=>this._onCloseHandler(t))),null===(r=this._socketConnection)||void 0===r||r.addEventListener("error",this._onErrorHandler)}_removeSocketListeners(){var t,e,n;null===(t=this._socketConnection)||void 0===t||t.removeEventListener("message",this._onMessageHandler),null===(e=this._socketConnection)||void 0===e||e.removeEventListener("open",this._onOpenHandler),null===(n=this._socketConnection)||void 0===n||n.removeEventListener("close",this._onCloseHandler)}_onCloseEvent(t){var e;!this._reconnectOptions.autoReconnect||[1e3,1001].includes(t.code)&&t.wasClean?(this._clearQueues(t),this._removeSocketListeners(),this._onDisconnect(t.code,t.reason),null===(e=this._socketConnection)||void 0===e||e.removeEventListener("error",this._onErrorHandler)):this._reconnect()}}},20345:(t,e,n)=>{"use strict";var r,i;n.d(e,{zC:()=>a,Hh:()=>o,F2:()=>s,QR:()=>i,M$:()=>r,EC:()=>u,wx:()=>c,SB:()=>f,K5:()=>h}),function(t){t["NUMBER"]="NUMBER_NUMBER",t["HEX"]="NUMBER_HEX",t["STR"]="NUMBER_STR",t["BIGINT"]="NUMBER_BIGINT"}(r||(r={})),function(t){t["HEX"]="BYTES_HEX",t["UINT8ARRAY"]="BYTES_UINT8ARRAY"}(i||(i={}));const o={number:r.BIGINT,bytes:i.HEX},s={number:r.HEX,bytes:i.HEX};var a,u;(function(t){t["EARLIEST"]="earliest",t["LATEST"]="latest",t["PENDING"]="pending",t["SAFE"]="safe",t["FINALIZED"]="finalized"})(a||(a={})),function(t){t["chainstart"]="chainstart",t["frontier"]="frontier",t["homestead"]="homestead",t["dao"]="dao",t["tangerineWhistle"]="tangerineWhistle",t["spuriousDragon"]="spuriousDragon",t["byzantium"]="byzantium",t["constantinople"]="constantinople",t["petersburg"]="petersburg",t["istanbul"]="istanbul",t["muirGlacier"]="muirGlacier",t["berlin"]="berlin",t["london"]="london",t["altair"]="altair",t["arrowGlacier"]="arrowGlacier",t["grayGlacier"]="grayGlacier",t["bellatrix"]="bellatrix",t["merge"]="merge",t["capella"]="capella",t["shanghai"]="shanghai"}(u||(u={}));const c=Object.getPrototypeOf(Uint8Array);var d=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))};const l=Symbol.for("web3/base-provider");class f{static isWeb3Provider(t){return t instanceof f||Boolean(t&&t[l])}get[l](){return!0}send(t,e){this.request(t).then((t=>{e(null,t)})).catch((t=>{e(t)}))}sendAsync(t){return d(this,void 0,void 0,(function*(){return this.request(t)}))}asEIP1193Provider(){const t=Object.create(this),e=t.request;return t.request=function(t){return d(this,void 0,void 0,(function*(){const n=yield e(t);return n.result}))},t.asEIP1193Provider=void 0,t}}class h extends Array{constructor(t){super(),this._accountProvider=t}}},14387:(t,e,n)=>{"use strict";n.d(e,{bk:()=>F,FI:()=>kt,AI:()=>bt,My:()=>v,E3:()=>h,_W:()=>l,GP:()=>Q,kX:()=>R,aT:()=>p,ME:()=>y,m2:()=>w,nF:()=>S,kY:()=>q,uy:()=>O,yL:()=>Y,jB:()=>it,mg:()=>u,wE:()=>r,So:()=>X,PX:()=>N,D9:()=>j,cK:()=>g,Ho:()=>C,Rp:()=>tt,k8:()=>nt,Q3:()=>et,aQ:()=>z,Dg:()=>x,AF:()=>A,BA:()=>E,nj:()=>P,fq:()=>k,cX:()=>c,X7:()=>d,hl:()=>_});var r={};n.r(r),n.d(r,{isBatchRequest:()=>pt,isBatchResponse:()=>lt,isResponseRpcError:()=>it,isResponseWithError:()=>st,isResponseWithNotification:()=>at,isResponseWithResult:()=>ot,isSubscriptionResult:()=>ut,isValidResponse:()=>dt,setRequestIdStart:()=>ht,toBatchPayload:()=>vt,toPayload:()=>mt,validateResponse:()=>ct});var i=n(91534),o=n(40651),s=n(69825),a=n(39788);function u(t){var e,n;return t instanceof Uint8Array||"Uint8Array"===(null===(e=null===t||void 0===t?void 0:t.constructor)||void 0===e?void 0:e.name)||"Buffer"===(null===(n=null===t||void 0===t?void 0:t.constructor)||void 0===n?void 0:n.name)}function c(...t){const e=t.reduce(((t,e)=>{const n=t+e.length;return n}),0),n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}function d(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n+=1)if(t[n]!==e[n])return!1;return!0}const l={noether:BigInt(0),wei:BigInt(1),kwei:BigInt(1e3),Kwei:BigInt(1e3),babbage:BigInt(1e3),femtoether:BigInt(1e3),mwei:BigInt(1e6),Mwei:BigInt(1e6),lovelace:BigInt(1e6),picoether:BigInt(1e6),gwei:BigInt(1e9),Gwei:BigInt(1e9),shannon:BigInt(1e9),nanoether:BigInt(1e9),nano:BigInt(1e9),szabo:BigInt(1e12),microether:BigInt(1e12),micro:BigInt(1e12),finney:BigInt(1e15),milliether:BigInt(1e15),milli:BigInt(1e15),ether:BigInt("1000000000000000000"),kether:BigInt("1000000000000000000000"),grand:BigInt("1000000000000000000000"),mether:BigInt("1000000000000000000000000"),gether:BigInt("1000000000000000000000000000"),tether:BigInt("1000000000000000000000000000000")},f="Warning: Using type `number` with values that are large or contain many decimals may cause loss of precision, it is recommended to use type `string` or `BigInt` when using conversion methods",h=t=>{if(s.Nc.validate(["bytes"],[t]),u(t))return t;if(Array.isArray(t))return new Uint8Array(t);if("string"===typeof t)return s.Wp.hexToUint8Array(t);throw new a.xRF(t)},{uint8ArrayToHexString:m}=s.Wp,v=t=>m(h(t)),p=t=>"string"===typeof t&&"0x"!==t.slice(0,2).toLowerCase()?h(`0x${t}`):h(t),y=t=>(s.Nc.validate(["hex"],[t]),s.Wp.hexToNumber(t)),g=(t,e)=>{"bigint"!==typeof t&&s.Nc.validate(["int"],[t]);let n=s.Wp.numberToHex(t);return e&&(n.startsWith("-")||n.length%2!==1?n.length%2===0&&n.startsWith("-")&&(n="-0x0".concat(n.slice(3))):n="0x0".concat(n.slice(2))),n},b=t=>{s.Nc.validate(["string"],[t]);let e=t.replace(/^(?:\u0000)/,"");return e=e.replace(/(?:\u0000)$/,""),v((new TextEncoder).encode(e))},w=t=>(0,o.AE)(p(t)),_=o.AI,P=(t,e)=>{if("string"===typeof t&&(0,s.PW)(t))return e?"address":`0x${t.toLowerCase().replace(/^0x/i,"")}`;if("boolean"===typeof t)return e?"bool":t?"0x01":"0x00";if("number"===typeof t)return e?t<0?"int256":"uint256":g(t);if("bigint"===typeof t)return e?"bigint":g(t);if(u(t))return e?"bytes":v(t);if("object"===typeof t&&t)return e?"string":b(JSON.stringify(t));if("string"===typeof t){if(t.startsWith("-0x")||t.startsWith("-0X"))return e?"int256":g(t);if((0,s.lX)(t))return e?"bytes":t;if((0,s.qv)(t)&&!(0,s.E6)(t)&&!(0,s.Db)(t))return e?"bytes":`0x${t}`;if((0,s.qv)(t)&&!(0,s.E6)(t)&&(0,s.Db)(t))return e?"uint":g(t);if(!Number.isFinite(t))return e?"string":b(t)}throw new a.zH8(t)},B=t=>{if("number"===typeof t)return t>1e20?(console.warn(f),BigInt(t)):t;if("bigint"===typeof t)return t>=Number.MIN_SAFE_INTEGER&&t<=Number.MAX_SAFE_INTEGER?Number(t):t;if("string"===typeof t&&(0,s.lX)(t))return y(t);try{return B(BigInt(t))}catch(yt){throw new a.lw5(t)}},x=t=>{if("number"===typeof t)return BigInt(t);if("bigint"===typeof t)return t;if("string"===typeof t&&(0,s.qv)(t))return t.startsWith("-")?-BigInt(t.substring(1)):BigInt(t);throw new a.lw5(t)},R=(t,e)=>{let n;if("string"===typeof e){if(n=l[e],!n)throw new a.iqJ(e)}else{if(e<0||!Number.isInteger(e))throw new a.EbX(e);n=(0,s.nw)(BigInt(10),BigInt(e))}const r=String(B(t)),i=n.toString().length-1;if(i<=0)return r.toString();const o=r.padStart(i,"0"),u=o.slice(0,-i),c=o.slice(-i).replace(/\.?0+$/,"");if(""===u)return`0.${c}`;if(""===c)return u;const d=`${u}.${c}`;return d.slice(0,u.length+i+1)},k=(t,e)=>{let n;if(s.Nc.validate(["number"],[t]),"string"===typeof e){if(n=l[e],!n)throw new a.iqJ(e)}else{if(e<0||!Number.isInteger(e))throw new a.EbX(e);n=(0,s.nw)(BigInt(10),BigInt(e))}let r=t;"number"===typeof r&&(r<1e-15&&console.warn(f),r>1e20?(console.warn(f),r=BigInt(r)):r=r.toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}));const[i,o]=String("string"!==typeof r||(0,s.lX)(r)?B(r):r).split(".").concat(""),u=BigInt(`${i}${o}`),c=u*n,d=o.length;return 0===d?c.toString():c.toString().slice(0,-d)},E=t=>{if(!(0,s.PW)(t,!1))throw new a.MsQ(t);const e=t.toLowerCase().replace(/^0x/i,""),n=s.Wp.uint8ArrayToHexString((0,i.So)(s.Wp.ensureIfUint8Array(_(e))));if((0,s.uy)(n)||"0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470"===n)return"";let r="0x";const o=n.replace(/^0x/i,"");for(let i=0;i<e.length;i+=1)parseInt(o[i],16)>7?r+=e[i].toUpperCase():r+=e[i];return r},A=t=>{if("boolean"===typeof t)return t;if("number"===typeof t&&(0===t||1===t))return Boolean(t);if("bigint"===typeof t&&(t===BigInt(0)||t===BigInt(1)))return Boolean(t);if("string"===typeof t&&!(0,s.lX)(t)&&("1"===t||"0"===t||"false"===t||"true"===t))return"true"===t||"false"!==t&&Boolean(Number(t));if("string"===typeof t&&(0,s.lX)(t)&&("0x1"===t||"0x0"===t))return Boolean(B(t));throw new a.oiV(t)};var I=n(74486);class F extends I.A{constructor(){super(...arguments),this.maxListeners=Number.MAX_SAFE_INTEGER}setMaxListeners(t){return this.maxListeners=t,this}getMaxListeners(){return this.maxListeners}}var T=n(20345);const S=t=>"object"===typeof t&&!(0,s.uy)(t)&&0!==Object.keys(t).length&&["input","data","from","gas","gasPrice","gasLimit","address","jsonInterface","syncWithContext","dataInputFill"].some((e=>e in t)),O=s.uy,G=t=>"object"===typeof t&&!(0,s.uy)(t)&&!Array.isArray(t)&&!(t instanceof T.wx),j=(t,...e)=>{if(!G(t))return t;const n=Object.assign({},t);for(const r of e)for(const t in r)G(r[t])?(n[t]||(n[t]={}),n[t]=j(n[t],r[t])):!(0,s.uy)(r[t])&&Object.hasOwnProperty.call(r,t)&&(Array.isArray(r[t])||r[t]instanceof T.wx?n[t]=r[t].slice(0):n[t]=r[t]);return n},C=(t,e,n="0")=>"string"===typeof t?(0,s.lX)(t)?s.Wp.padLeft(t,e,n):t.padStart(e,n):(s.Nc.validate(["int"],[t]),s.Wp.padLeft(t,e,n)),N=C,{parseBaseType:M}=s.Wp,q=t=>"object"===typeof t&&!(0,s.uy)(t)&&"number"in t&&"bytes"in t,H=(t,e,n=[])=>{let r,i=Object.assign({},t);for(const o of e){if(i.oneOf&&r){const t=r,e=n.find((([e])=>e===t));e&&e[0]===r&&(i=i.oneOf[e[1]])}if(!i.properties&&!i.items)return;if(i.properties)i=i.properties[o];else if(i.items&&i.items.properties){const t=i.items.properties;i=t[o]}else i.items&&(0,s.Gv)(i.items)?i=i.items:i.items&&Array.isArray(i.items)&&(i=i.items[parseInt(o,10)]);i&&o&&(r=o)}return i},D=(t,e,n)=>{try{const{baseType:r,baseTypeSize:i}=M(e);if("int"===r||"uint"===r)switch(n.number){case T.M$.NUMBER:return Number(x(t));case T.M$.HEX:return g(x(t));case T.M$.STR:return x(t).toString();case T.M$.BIGINT:return x(t);default:throw new a.Buf(`Invalid format: ${String(n.number)}`)}if("bytes"===r){let e;switch(i?"string"===typeof t?e=C(t,2*i):u(t)&&(e=c(new Uint8Array(i-t.length),t)):e=t,n.bytes){case T.QR.HEX:return v(h(e));case T.QR.UINT8ARRAY:return h(e);default:throw new a.Buf(`Invalid format: ${String(n.bytes)}`)}}}catch(r){return t}return t},L=({value:t,schemaProp:e,schema:n,object:r,key:i,dataPath:o,format:a,oneOfPath:u=[]})=>{var c,d;if(Array.isArray(t)){let l=e;if(void 0!==(null===e||void 0===e?void 0:e.oneOf)&&e.oneOf.forEach(((n,r)=>{var o,s;!Array.isArray(null===e||void 0===e?void 0:e.items)&&("object"===typeof t[0]&&"object"===(null===(o=null===n||void 0===n?void 0:n.items)||void 0===o?void 0:o.type)||"string"===typeof t[0]&&"object"!==(null===(s=null===n||void 0===n?void 0:n.items)||void 0===s?void 0:s.type))&&(l=n,u.push([i,r]))})),(0,s.uy)(null===l||void 0===l?void 0:l.items))return delete r[i],o.pop(),!0;if((0,s.Gv)(l.items)&&!(0,s.uy)(l.items.format)){for(let e=0;e<t.length;e+=1)r[i][e]=D(t[e],null===(c=null===l||void 0===l?void 0:l.items)||void 0===c?void 0:c.format,a);return o.pop(),!0}if(!Array.isArray(null===l||void 0===l?void 0:l.items)&&"object"===(null===(d=null===l||void 0===l?void 0:l.items)||void 0===d?void 0:d.type)){for(const e of t)U(e,n,o,a,u);return o.pop(),!0}if(Array.isArray(null===l||void 0===l?void 0:l.items)){for(let e=0;e<t.length;e+=1)r[i][e]=D(t[e],l.items[e].format,a);return o.pop(),!0}}return!1},U=(t,e,n,r,i=[])=>{var o;if(!(0,s.Gv)(t)&&!Array.isArray(t))return D(t,null===e||void 0===e?void 0:e.format,r);const a=t;if(Array.isArray(a)&&"array"===(null===e||void 0===e?void 0:e.type)&&"object"===(null===(o=null===e||void 0===e?void 0:e.items)||void 0===o?void 0:o.type))L({value:a,schemaProp:e,schema:e,object:a,key:"",dataPath:n,format:r,oneOfPath:i});else for(const[u,c]of Object.entries(a)){n.push(u);const t=H(e,n,i);(0,s.uy)(t)?(delete a[u],n.pop()):(0,s.Gv)(c)?(U(c,e,n,r,i),n.pop()):L({value:c,schemaProp:t,schema:e,object:a,key:u,dataPath:n,format:r,oneOfPath:i})||(a[u]=D(c,t.format,r),n.pop())}return a},Q=(t,e,n=T.Hh)=>{let r;r=(0,s.Gv)(e)?j({},e):Array.isArray(e)?[...e]:e;const i=(0,s.Gv)(t)?t:s.Wp.ethAbiToJsonSchema(t);if(!i.properties&&!i.items&&!i.format)throw new a.Buf("Invalid json schema for formatting");return U(r,i,[],n)},W="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",X=t=>{let e;return e="bigint"===typeof t||"number"===typeof t?(0,o.AI)(t.toString()):Array.isArray(t)?new Uint8Array(t):"string"!==typeof t||(0,s.lX)(t)?h(t):(0,o.AI)(t),v((0,i.So)(s.Wp.ensureIfUint8Array(e)))},$=t=>{let e;e="string"===typeof t?t.startsWith("0x")&&(0,s.lX)(t)?p(t):(0,o.AI)(t):t;const n=X(e);return n===W?void 0:n},z=t=>{const e=$(t);return(0,s.uy)(e)?W:e};var V=n(9699);const J=t=>(0,V.m)(t);var K=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))};function Y(t){return("object"===typeof t||"function"===typeof t)&&"function"===typeof t.then}function Z(t,e,n){return K(this,void 0,void 0,(function*(){let r;const i=yield Promise.race([t instanceof Promise?t:t(),new Promise(((t,i)=>{r=setTimeout((()=>n?i(n):t(void 0)),e)}))]);if(r&&clearTimeout(r),i instanceof Error)throw i;return i}))}function tt(t,e){let n;const r=new Promise(((r,i)=>{n=setInterval(function o(){return(()=>{K(this,void 0,void 0,(function*(){try{const i=yield Z(t,e);(0,s.uy)(i)||(clearInterval(n),r(i))}catch(o){clearInterval(n),i(o)}}))})(),o}(),e)}));return[r,n]}function et(t,e){let n;const r=new Promise(((r,i)=>{n=setTimeout((()=>{i(e)}),t)}));return[n,r]}function nt(t,e){let n;const r=new Promise(((r,i)=>{n=setInterval((()=>{(()=>{K(this,void 0,void 0,(function*(){const e=yield t();e&&(clearInterval(n),i(e))}))})()}),e)}));return[n,r]}const rt=()=>{const t=J(16);t[6]=15&t[6]|64,t[8]=63&t[8]|128;const e=v(t);return[e.substring(2,10),e.substring(10,14),e.substring(14,18),e.substring(18,22),e.substring(22,34)].join("-")},it=t=>{const e=t.error.code;return a.lv4.has(e)||e>=-32099&&e<=-32e3},ot=t=>!Array.isArray(t)&&!!t&&"2.0"===t.jsonrpc&&"result"in t&&(0,s.uy)(t.error)&&("number"===typeof t.id||"string"===typeof t.id),st=t=>!Array.isArray(t)&&"2.0"===t.jsonrpc&&!!t&&(0,s.uy)(t.result)&&"error"in t&&("number"===typeof t.id||"string"===typeof t.id),at=t=>!Array.isArray(t)&&!!t&&"2.0"===t.jsonrpc&&!(0,s.uy)(t.params)&&!(0,s.uy)(t.method),ut=t=>!Array.isArray(t)&&!!t&&"2.0"===t.jsonrpc&&"id"in t&&"result"in t,ct=t=>ot(t)||st(t),dt=t=>Array.isArray(t)?t.every(ct):ct(t),lt=t=>Array.isArray(t)&&t.length>0&&dt(t);let ft;const ht=t=>{ft=t},mt=t=>{var e,n,r,i;return"undefined"!==typeof ft&&(ft+=1),{jsonrpc:null!==(e=t.jsonrpc)&&void 0!==e?e:"2.0",id:null!==(r=null!==(n=t.id)&&void 0!==n?n:ft)&&void 0!==r?r:rt(),method:t.method,params:null!==(i=t.params)&&void 0!==i?i:void 0}},vt=t=>t.map((t=>mt(t))),pt=t=>Array.isArray(t)&&t.length>0;var yt,gt=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))};class bt{constructor({timeout:t,eagerStart:e,timeoutMessage:n}={timeout:0,eagerStart:!1,timeoutMessage:"DeferredPromise timed out"}){this[yt]="Promise",this._state="pending",this._promise=new Promise(((t,e)=>{this._resolve=t,this._reject=e})),this._timeoutMessage=n,this._timeoutInterval=t,e&&this.startTimer()}get state(){return this._state}then(t,e){return gt(this,void 0,void 0,(function*(){return this._promise.then(t,e)}))}catch(t){return gt(this,void 0,void 0,(function*(){return this._promise.catch(t)}))}finally(t){return gt(this,void 0,void 0,(function*(){return this._promise.finally(t)}))}resolve(t){this._resolve(t),this._state="fulfilled",this._clearTimeout()}reject(t){this._reject(t),this._state="rejected",this._clearTimeout()}startTimer(){this._timeoutInterval&&this._timeoutInterval>0&&(this._timeoutId=setTimeout(this._checkTimeout.bind(this),this._timeoutInterval))}_checkTimeout(){"pending"===this._state&&this._timeoutId&&this.reject(new a.FqJ(this._timeoutMessage))}_clearTimeout(){this._timeoutId&&clearTimeout(this._timeoutId)}}yt=Symbol.toStringTag;class wt{constructor(t,e){this.eventEmitter=t,this.autoReconnect=e,this.chunkTimeout=15e3}clearQueues(){"function"===typeof this._clearQueues&&this._clearQueues()}onError(t){this._clearQueues=t}parseResponse(t){const e=[],n=t.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|");return n.forEach((t=>{let n,r=t;this.lastChunk&&(r=this.lastChunk+r);try{n=JSON.parse(r)}catch(i){return this.lastChunk=r,this.lastChunkTimeout&&clearTimeout(this.lastChunkTimeout),void(this.lastChunkTimeout=setTimeout((()=>{this.autoReconnect||(this.clearQueues(),this.eventEmitter.emit("error",new a.tFo({id:1,jsonrpc:"2.0",error:{code:2,message:"Chunk timeout"}})))}),this.chunkTimeout))}clearTimeout(this.lastChunkTimeout),this.lastChunk=void 0,n&&e.push(n)})),e}}var _t=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))};class Pt extends T.SB{constructor(){super(...arguments),this._eventEmitter=new I.b,this._chainId="",this._accounts=[]}_getChainId(){var t;return _t(this,void 0,void 0,(function*(){const e=yield this.request(mt({method:"eth_chainId",params:[]}));return null!==(t=null===e||void 0===e?void 0:e.result)&&void 0!==t?t:""}))}_getAccounts(){var t;return _t(this,void 0,void 0,(function*(){const e=yield this.request(mt({method:"eth_accounts",params:[]}));return null!==(t=null===e||void 0===e?void 0:e.result)&&void 0!==t?t:[]}))}_onConnect(){Promise.all([this._getChainId().then((t=>{t!==this._chainId&&(this._chainId=t,this._eventEmitter.emit("chainChanged",this._chainId))})).catch((t=>{console.error(t)})),this._getAccounts().then((t=>{this._accounts.length===t.length&&t.every((e=>t.includes(e)))||(this._accounts=t,this._onAccountsChanged())})).catch((t=>{console.error(t)}))]).then((()=>this._eventEmitter.emit("connect",{chainId:this._chainId}))).catch((t=>{console.error(t)}))}_onDisconnect(t,e){this._eventEmitter.emit("disconnect",new a.B0b(t,e))}_onAccountsChanged(){this._eventEmitter.emit("accountsChanged",this._accounts)}}var Bt=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))};const xt={autoReconnect:!0,delay:5e3,maxAttempts:5},Rt=1e3;class kt extends Pt{constructor(t,e,n){if(super(),this._connectionStatus="connecting",this._onMessageHandler=this._onMessage.bind(this),this._onOpenHandler=this._onConnect.bind(this),this._onCloseHandler=this._onCloseEvent.bind(this),this._onErrorHandler=this._onError.bind(this),!this._validateProviderPath(t))throw new a.Pgv(t);this._socketPath=t,this._socketOptions=e,this._reconnectOptions=Object.assign(Object.assign({},xt),null!==n&&void 0!==n?n:{}),this._pendingRequestsQueue=new Map,this._sentRequestsQueue=new Map,this._init(),this.connect(),this.chunkResponseParser=new wt(this._eventEmitter,this._reconnectOptions.autoReconnect),this.chunkResponseParser.onError((()=>{this._clearQueues()})),this.isReconnecting=!1}get SocketConnection(){return this._socketConnection}_init(){this._reconnectAttempts=0}connect(){try{this._openSocketConnection(),this._connectionStatus="connecting",this._addSocketListeners()}catch(t){if(!this.isReconnecting)throw this._connectionStatus="disconnected",t&&t.message?new a.Rcq(`Error while connecting to ${this._socketPath}. Reason: ${t.message}`):new a.Pgv(this._socketPath);setImmediate((()=>{this._reconnect()}))}}_validateProviderPath(t){return!!t}getPendingRequestQueueSize(){return this._pendingRequestsQueue.size}getSentRequestsQueueSize(){return this._sentRequestsQueue.size}supportsSubscriptions(){return!0}on(t,e){this._eventEmitter.on(t,e)}once(t,e){this._eventEmitter.once(t,e)}removeListener(t,e){this._eventEmitter.removeListener(t,e)}_onDisconnect(t,e){this._connectionStatus="disconnected",super._onDisconnect(t,e)}disconnect(t,e){const n=null!==t&&void 0!==t?t:Rt;this._removeSocketListeners(),"disconnected"!==this.getStatus()&&this._closeSocketConnection(n,e),this._onDisconnect(n,e)}safeDisconnect(t,e,n=!1,r=1e3){return Bt(this,void 0,void 0,(function*(){let i=0;const o=()=>Bt(this,void 0,void 0,(function*(){return new Promise((t=>{const e=setInterval((()=>{n&&i>=5&&this.clearQueues(),0===this.getPendingRequestQueueSize()&&0===this.getSentRequestsQueueSize()&&(clearInterval(e),t(!0)),i+=1}),r)}))}));yield o(),this.disconnect(t,e)}))}removeAllListeners(t){this._eventEmitter.removeAllListeners(t)}_onError(t){this.isReconnecting?this._reconnect():this._eventEmitter.emit("error",t)}reset(){this._sentRequestsQueue.clear(),this._pendingRequestsQueue.clear(),this._init(),this._removeSocketListeners(),this._addSocketListeners()}_reconnect(){this.isReconnecting||(this.isReconnecting=!0,this._sentRequestsQueue.size>0&&this._sentRequestsQueue.forEach(((t,e)=>{t.deferredPromise.reject(new a.aJ3),this._sentRequestsQueue.delete(e)})),this._reconnectAttempts<this._reconnectOptions.maxAttempts?(this._reconnectAttempts+=1,setTimeout((()=>{this._removeSocketListeners(),this.connect(),this.isReconnecting=!1}),this._reconnectOptions.delay)):(this.isReconnecting=!1,this._clearQueues(),this._removeSocketListeners(),this._eventEmitter.emit("error",new a.H9x(this._reconnectOptions.maxAttempts))))}request(t){return Bt(this,void 0,void 0,(function*(){if(O(this._socketConnection))throw new Error("Connection is undefined");"disconnected"===this.getStatus()&&this.connect();const e=pt(t)?t[0].id:t.id;if(!e)throw new a.DL5("Request Id not defined");if(this._sentRequestsQueue.has(e))throw new a.kk9(e);const n=new bt;n.catch((t=>{this._eventEmitter.emit("error",t)}));const r={payload:t,deferredPromise:n};if("connecting"===this.getStatus())return this._pendingRequestsQueue.set(e,r),r.deferredPromise;this._sentRequestsQueue.set(e,r);try{this._sendToSocket(r.payload)}catch(i){this._sentRequestsQueue.delete(e),this._eventEmitter.emit("error",i)}return n}))}_onConnect(){this._connectionStatus="connected",this._reconnectAttempts=0,super._onConnect(),this._sendPendingRequests()}_sendPendingRequests(){for(const[e,n]of this._pendingRequestsQueue.entries())try{this._sendToSocket(n.payload),this._pendingRequestsQueue.delete(e),this._sentRequestsQueue.set(e,n)}catch(t){this._pendingRequestsQueue.delete(e),this._eventEmitter.emit("error",t)}}_onMessage(t){const e=this._parseResponses(t);if(!O(e)&&0!==e.length)for(const n of e){if(at(n)&&n.method.endsWith("_subscription"))return void this._eventEmitter.emit("message",n);const t=lt(n)?n[0].id:n.id,e=this._sentRequestsQueue.get(t);if(!e)return;(lt(n)||ot(n)||st(n))&&(this._eventEmitter.emit("message",n),e.deferredPromise.resolve(n)),this._sentRequestsQueue.delete(t)}}clearQueues(t){this._clearQueues(t)}_clearQueues(t){this._pendingRequestsQueue.size>0&&this._pendingRequestsQueue.forEach(((e,n)=>{e.deferredPromise.reject(new a.W8o(t)),this._pendingRequestsQueue.delete(n)})),this._sentRequestsQueue.size>0&&this._sentRequestsQueue.forEach(((e,n)=>{e.deferredPromise.reject(new a.W8o(t)),this._sentRequestsQueue.delete(n)})),this._removeSocketListeners()}}}}]);